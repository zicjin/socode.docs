<div class="innertube"> <h1 id="Upcoming Potential Incompatibilities">4 Upcoming Potential Incompatibilities</h1> <h2 id="introduction" class="title-link" onmouseover="document.getElementById('ghlink-introduction-idm649').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-introduction-idm649').style.visibility = 'hidden';"> <div class="title-name">4.1 Introduction</div>  </h2> <p>This document lists planned upcoming potential incompatibilities in Erlang/OTP.</p> <h2 id="otp-25" class="title-link" onmouseover="document.getElementById('ghlink-otp-25-idm652').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-otp-25-idm652').style.visibility = 'hidden';"> 4.2 otp 25  </h2> <h4 id="distribution-flags-will-become-mandatory" class="title-link" onmouseover="document.getElementById('ghlink-distribution-flags-will-become-mandatory-idm654').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-distribution-flags-will-become-mandatory-idm654').style.visibility = 'hidden';"> <div class="title-name">Distribution flags will become mandatory</div>  </h4> <p>In OTP 25, more <code>distribution flags</code> will become mandatory. That is, Erlang nodes will refuse to connect to nodes not implementing all of the mandatory distribution flags. If you implement the Erlang distribution protocol yourself, you will need to implement support for all mandatory distribution flags in order to communicate with Erlang nodes running OTP 25.</p> <p>The following distribution flags will become mandatory in OTP 25:</p> <dl> <dt><strong><code class="code">DFLAG_BIT_BINARIES</code></strong></dt> <dd>Support for bitstrings.</dd> <dt><strong><code class="code">DFLAG_EXPORT_PTR_TAG</code></strong></dt> <dd>Support for external funs (<code class="code">fun Module:Name/Arity</code>).</dd> <dt><strong><code class="code">DFLAG_MAP_TAGS</code></strong></dt> <dd>Support for maps.</dd> <dt><strong><code class="code">DFLAG_NEW_FLOATS</code></strong></dt> <dd>Support for the new encoding of floats.</dd> <dt><strong><code class="code">DFLAG_FUN_TAGS</code></strong></dt> <dd>Support for funs, but only in the new format (<code class="code">NEW_FUN_EXT</code>) because <code class="code">DFLAG_NEW_FUN_TAGS</code> is also mandatory.</dd> </dl> <h2 id="otp-26" class="title-link" onmouseover="document.getElementById('ghlink-otp-26-idm678').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-otp-26-idm678').style.visibility = 'hidden';"> 4.3 otp 26  </h2> <h4 id="the-distribution-flag-dflag_v4_nc-will-become-mandatory" class="title-link" onmouseover="document.getElementById('ghlink-the-distribution-flag-dflag_v4_nc-will-become-mandatory-idm680').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-the-distribution-flag-dflag_v4_nc-will-become-mandatory-idm680').style.visibility = 'hidden';"> <div class="title-name">The distribution flag DFLAG_V4_NC will become mandatory</div>  </h4> <p>As of OTP 26, the distribution flag <code>DFLAG_V4_NC</code> will become mandatory. If you implement the Erlang distribution protocol yourself, you will need to implement support for <code class="code">DFLAG_V4_NC</code> in order to communicate with Erlang nodes running OTP 26.</p> <h4 id="the-new-link-protocol-will-become-mandatory" class="title-link" onmouseover="document.getElementById('ghlink-the-new-link-protocol-will-become-mandatory-idm685').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-the-new-link-protocol-will-become-mandatory-idm685').style.visibility = 'hidden';"> <div class="title-name">The new link protocol will become mandatory</div>  </h4> <p> As of OTP 26, the <code>new link protocol</code> will become mandatory. That is, Erlang nodes will then refuse to connect to nodes not implementing the new link protocol. If you implement the Erlang distribution yourself, you are, however, encouraged to implement the new link protocol as soon as possible since the old protocol can cause links to enter an inconsistent state. </p> <h4 id="atoms-will-be-encoded-as-utf-8-by-default" class="title-link" onmouseover="document.getElementById('ghlink-atoms-will-be-encoded-as-utf-8-by-default-idm689').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-atoms-will-be-encoded-as-utf-8-by-default-idm689').style.visibility = 'hidden';"> <div class="title-name">Atoms will be encoded as UTF-8 by default</div>  </h4> <p> As of OTP 26, the functions <code> <span class="code">erlang:term_to_binary/1,2</span></code> and <code> <span class="code">erlang:term_to_iovec/1,2</span></code> will encode all atoms as UTF-8 by default. The current default behavior is to encode atoms as Latin-1 if possible. </p> <p> If you implement your own decoding of the Erlang external format you must either: </p> <ul> <li> <p> Make sure your implementation supports the UTF-8 encodings <code> <span class="code">ATOM_UTF8_EXT</span></code> and <code> <span class="code">SMALL_ATOM_UTF8_EXT</span></code>. </p> </li> <li> <p> Call <code> <span class="code">erlang:term_to_binary/2</span></code> or <code> <span class="code">erlang:term_to_iovec/2</span></code> with option <code class="code">{minor_version,1}</code> to force Latin-1 encoding. This is a more short-term solution as Latin-1 encoding may be phased out and removed in later OTP releases. </p> </li> </ul> <h4 id="the-default-timewarp-mode-will-change-to-multi-time-warp-mode" class="title-link" onmouseover="document.getElementById('ghlink-the-default-timewarp-mode-will-change-to-multi-time-warp-mode-idm712').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-the-default-timewarp-mode-will-change-to-multi-time-warp-mode-idm712').style.visibility = 'hidden';"> <div class="title-name">The default timewarp mode will change to multi-time warp mode</div>  </h4> <p> The default <code> Time Warp Mode</code> will be changed from <code> no time warp mode</code> to <code> multi-time warp mode</code>. See <code> Time and Time Correction in Erlang</code> for details on how this will effect your system. </p> </div> <div class="footer"> <hr> <p>Copyright Â© 2019-2022 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2022 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
