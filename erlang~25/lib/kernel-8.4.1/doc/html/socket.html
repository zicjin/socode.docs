  <div class="innertube"> <h2 id="module" class="title-link" onmouseover="document.getElementById('ghlink-module-idm18724').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm18724').style.visibility = 'hidden';"> <div class="title-name">Module</div>  </h2> <p class="REFBODY module-body">socket</p> </div> <div class="innertube"> <h2 id="module-summary" class="title-link" onmouseover="document.getElementById('ghlink-module-summary-idm18725').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm18725').style.visibility = 'hidden';"> <div class="title-name">Module Summary</div>  </h2> <p class="REFBODY module-summary-body">Socket interface.</p> <h2 id="since" class="title-link" onmouseover="document.getElementById('ghlink-since-idm18725').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-since-idm18725').style.visibility = 'hidden';"> <div class="title-name">Since</div>  </h2> <p class="REFBODY module-since"> Module socket was introduced in OTP 22.0. </p> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link" onmouseover="document.getElementById('ghlink-description-idm18726').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm18726').style.visibility = 'hidden';"> <div class="title-name">Description</div>  </h2> 
<p>This module provides an API for network socket. Functions are provided to create, delete and manipulate the sockets as well as sending and receiving data on them. </p> <p>The intent is that it shall be as "close as possible" to the OS level socket interface. The only significant addition is that some of the functions, e.g. <code><a href="#recv-3"><span class="code">recv/3</span></a></code>, have a time-out argument. </p>  <div class="note" id="asynchronous-call"> <div class="label">Note</div> <div class="content">

<p> Some functions allow for an <i>asynchronous</i> call. This is achieved by setting the <code class="code">Timeout</code> argument to <code class="code">nowait</code>. For instance, if calling the <code><a href="#recv-nowait"><span class="code">recv/3</span></a></code> function with Timeout set to <code class="code">nowait</code> (<code class="code">recv(Sock, 0, nowait)</code>) when there is actually nothing to read, it will return with <code class="code">{select,</code> <code><a href="#type-select_info"><span class="code">SelectInfo</span></a></code><code class="code">}</code> (<code class="code">SelectInfo</code> contains the <code><a href="socket#type-select_handle">SelectHandle</a></code>). When data eventually arrives a 'select' message will be sent to the caller: </p> <dl>  <dd><code class="code">{'$socket', socket(), select, SelectHandle}</code></dd> </dl> <p> The caller can now call the <code class="code">recv</code> function again and probably expect data (it is really up to the OS network protocol implementation). </p> <p> Note that all other users are <strong>locked out</strong> until the 'current user' has called the function (<code class="code">recv</code> in this case) and its return value shows that the operation has completed. An operation can also be cancelled with <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code>. </p> <p> Instead of <code class="code">Timeout = nowait</code> it is equivalent to create a <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code>) with <code><span class="code">make_ref()</span></code> and give as <code class="code">Timeout</code>. This will then be the <code class="code">SelectHandle</code> in the 'select' message, which enables a compiler optimization for receiving a message containing a newly created <code class="code">reference()</code> (ignore the part of the message queue that had arrived before the the <code class="code">reference()</code> was created). </p> <p>Another message the user must be prepared for (when making asynchronous calls) is the <code class="code">abort</code> message:</p> <dl>  <dd><code class="code">{'$socket', socket(), abort, Info}</code></dd> </dl> <p>This message indicates that the (asynchronous) operation has been aborted. If, for instance, the socket has been closed (by another process), <code class="code">Info</code> will be <code class="code">{SelectHandle, closed}</code>. </p> </div> </div> <div class="note"> <div class="label">Note</div> <div class="content">

<p>There is currently <strong>no</strong> support for Windows. </p> <p>Support for IPv6 has been implemented but <strong>not</strong> tested. </p> <p>SCTP has only been partly implemented (and not tested). </p> </div> </div>  </div></section> <div class="innertube"> <h2 id="data-types" class="title-link" onmouseover="document.getElementById('ghlink-data-types-idm18783').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-data-types-idm18783').style.visibility = 'hidden';"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h4 id="type-invalid" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-invalid').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-invalid').style.visibility = 'hidden';">  <div class="title-name"> <code>invalid() = {invalid, What :: <span id="type-invalid">term()</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-domain" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-domain').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-domain').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-domain">domain() = inet | inet6 | local | unspec</code><br> </div> </h4> <div class="data-type-desc"> <p> A lowercase <code class="code">atom()</code> representing a protocol <strong>domain</strong> on the platform named <code class="code">AF_*</code> (or <code class="code">PF_*</code>). </p> <p> The calls <code><a href="#supports-0"><span class="code">supports()</span></a></code>, <code><a href="#is_supported-1"> <span class="code">is_supported(ipv6)</span> </a></code> and <code><a href="#is_supported-1"> <span class="code">is_supported(local)</span> </a></code> tells if the IPv6 protocol for the <code class="code">inet6</code> protocol domain / address family, and if the <code class="code">local</code> protocol domain / address family is supported by the platform's header files. </p> </div></article> <article class="data-types-body"><h4 id="type-type" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-type').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-type').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-type">type() = stream | dgram | raw | rdm | seqpacket</code><br> </div> </h4> <div class="data-type-desc"> <p> A lowercase <code class="code">atom()</code> representing a protocol <strong>type</strong> on the platform named <code class="code">SOCK_*</code>. </p> </div></article> <article class="data-types-body"><h4 id="type-protocol" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-protocol').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-protocol').style.visibility = 'hidden';">  <div class="title-name"> <code>protocol() = <span id="type-protocol">atom()</span></code><br> </div> </h4> <div class="data-type-desc"> <p> An <code class="code">atom()</code> means any <strong>protocol</strong> as enumerated by the <code class="code">C</code> library call <code class="code">getprotoent()</code> on the platform, or at least the supported ones of <code class="code">ip | ipv6 | tcp | udp | sctp</code>. </p> <p>See <code><a href="#open-3"><span class="code">open/2,3,4</span></a></code></p> <p> The call <code><a href="#supports-1"><span class="code">supports(protocols)</span></a></code> returns which protocols are supported, and <code><a href="#is_supported-2"> <span class="code">is_supported(protocols, Protocol)</span> </a></code> tells if <code class="code">Protocol</code> is among the enumerated. </p> </div></article> <article class="data-types-body"><h4 id="type-socket" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-socket').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-socket').style.visibility = 'hidden';">  <div class="title-name"> <code>socket() = {'$socket', <span id="type-socket"><a href="#type-socket_handle">socket_handle()</a></span>}</code><br> </div> </h4> <div class="data-type-desc"> <p>As returned by <code><a href="#open-1"><span class="code">open/1,2,3,4</span></a></code> and <code><a href="#accept-1"><span class="code">accept/1,2</span></a></code>.</p> </div></article> <article class="data-types-body"><h4 id="type-socket_handle" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-socket_handle').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-socket_handle').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-socket_handle">socket_handle()</code><br> </div> </h4> <div class="data-type-desc"><p>An opaque socket handle unique for the socket.</p></div></article> <article class="data-types-body"><h4 id="type-select_tag" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-select_tag').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-select_tag').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-select_tag">select_tag()</code><br> </div> </h4> <div class="data-type-desc"> <p> A tag that describes the (select) operation, contained in the returned <code><a href="#type-select_info"><span class="code">select_info()</span></a></code>. </p> </div></article> <article class="data-types-body"><h4 id="type-select_handle" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-select_handle').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-select_handle').style.visibility = 'hidden';">  <div class="title-name"> <code>select_handle() = <span id="type-select_handle">reference()</span></code><br> </div> </h4> <div class="data-type-desc"> <p> A <code class="code">reference()</code> that uniquely identifies the (select) operation, contained in the returned <code><a href="#type-select_info"><span class="code">select_info()</span></a></code>. </p> </div></article> <article class="data-types-body"><h4 id="type-select_info" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-select_info').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-select_info').style.visibility = 'hidden';">  <div class="title-name"> <code>select_info() = <br id="type-select_info">    {select_info,<br>     SelectTag :: <span><a href="#type-select_tag">select_tag()</a></span>,<br>     SelectHandle :: <span><a href="#type-select_handle">select_handle()</a></span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Returned by an operation that requires the caller to wait for a <code><a href="#asynchronous-call">select message</a></code> containing the <code><a href="#type-select_handle"><span class="code">SelectHandle</span></a></code>. </p> </div></article> <article class="data-types-body"><h4 id="type-info" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-info').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-info').style.visibility = 'hidden';">  <div class="title-name"> <code>info() = <br id="type-info">    #{counters := #{<span>atom()</span> := <span>integer() &gt;= 0</span>},<br>      iov_max := <span>integer() &gt;= 0</span>,<br>      use_registry := <span>boolean()</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> The smallest allowed <code class="code">iov_max</code> value according to POSIX is <code class="code">16</code>, but check your platform documentation to be sure. </p> </div></article> <article class="data-types-body"><h4 id="type-socket_counters" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-socket_counters').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-socket_counters').style.visibility = 'hidden';">  <div class="title-name"> <code>socket_counters() = <br id="type-socket_counters">    #{read_byte := <span>integer() &gt;= 0</span>,<br>      read_fails := <span>integer() &gt;= 0</span>,<br>      read_pkg := <span>integer() &gt;= 0</span>,<br>      read_pkg_max := <span>integer() &gt;= 0</span>,<br>      read_tries := <span>integer() &gt;= 0</span>,<br>      read_waits := <span>integer() &gt;= 0</span>,<br>      write_byte := <span>integer() &gt;= 0</span>,<br>      write_fails := <span>integer() &gt;= 0</span>,<br>      write_pkg := <span>integer() &gt;= 0</span>,<br>      write_pkg_max := <span>integer() &gt;= 0</span>,<br>      write_tries := <span>integer() &gt;= 0</span>,<br>      write_waits := <span>integer() &gt;= 0</span>,<br>      sendfile =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_byte =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_fails =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_max =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_pkg =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_pkg_max =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_tries =&gt; <span>integer() &gt;= 0</span>,<br>      sendfile_waits =&gt; <span>integer() &gt;= 0</span>,<br>      acc_success := <span>integer() &gt;= 0</span>,<br>      acc_fails := <span>integer() &gt;= 0</span>,<br>      acc_tries := <span>integer() &gt;= 0</span>,<br>      acc_waits := <span>integer() &gt;= 0</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-info_keys" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-info_keys').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-info_keys').style.visibility = 'hidden';">  <div class="title-name"> <code>info_keys() = <br id="type-info_keys">    [domain | type | protocol | fd | owner | local_address |<br>     remote_address | recv | sent | state]</code><br> </div> </h4> <div class="data-type-desc"> <p> Defines the information elements of the table(s) printed by the <code><a href="#i-0">i/0</a></code>, <code><a href="#i-1">i/1</a></code> and <code><a href="#i-2">i/2</a></code> functions. </p> </div></article> <article class="data-types-body"><h4 id="type-socket_info" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-socket_info').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-socket_info').style.visibility = 'hidden';">  <div class="title-name"> <code>socket_info() = <br id="type-socket_info">    #{domain := <span><a href="#type-domain">domain()</a></span> | <span>integer()</span>,<br>      type := <span><a href="#type-type">type()</a></span> | <span>integer()</span>,<br>      protocol := <span><a href="#type-protocol">protocol()</a></span> | <span>integer()</span>,<br>      owner := <span>pid()</span>,<br>      ctype := normal | fromfd | {fromfd, <span>integer()</span>},<br>      counters := <span><a href="#type-socket_counters">socket_counters()</a></span>,<br>      num_readers := <span>integer() &gt;= 0</span>,<br>      num_writers := <span>integer() &gt;= 0</span>,<br>      num_acceptors := <span>integer() &gt;= 0</span>,<br>      writable := <span>boolean()</span>,<br>      readable := <span>boolean()</span>,<br>      rstates := [<span>atom()</span>],<br>      wstates := [<span>atom()</span>]}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-in_addr" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-in_addr').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-in_addr').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-in_addr">in_addr() = {0..255, 0..255, 0..255, 0..255}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-in6_addr" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-in6_addr').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-in6_addr').style.visibility = 'hidden';">  <div class="title-name"> <code>in6_addr() = <br id="type-in6_addr">    {0..65535,<br>     0..65535,<br>     0..65535,<br>     0..65535,<br>     0..65535,<br>     0..65535,<br>     0..65535,<br>     0..65535}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr() = <br id="type-sockaddr">    <span><a href="#type-sockaddr_in">sockaddr_in()</a></span> |<br>    <span><a href="#type-sockaddr_in6">sockaddr_in6()</a></span> |<br>    <span><a href="#type-sockaddr_un">sockaddr_un()</a></span> |<br>    <span><a href="#type-sockaddr_ll">sockaddr_ll()</a></span> |<br>    <span><a href="#type-sockaddr_dl">sockaddr_dl()</a></span> |<br>    <span><a href="#type-sockaddr_unspec">sockaddr_unspec()</a></span> |<br>    <span><a href="#type-sockaddr_native">sockaddr_native()</a></span></code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_recv" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_recv').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_recv').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_recv() = <span id="type-sockaddr_recv"><a href="#type-sockaddr">sockaddr()</a></span> | <span>binary()</span></code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_in" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_in').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_in').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_in() = <br id="type-sockaddr_in">    #{family := inet,<br>      port := <span><a href="#type-port_number">port_number()</a></span>,<br>      addr := any | broadcast | loopback | <span><a href="#type-in_addr">in_addr()</a></span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_in6" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_in6').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_in6').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_in6() = <br id="type-sockaddr_in6">    #{family := inet6,<br>      port := <span><a href="#type-port_number">port_number()</a></span>,<br>      addr := any | loopback | <span><a href="#type-in6_addr">in6_addr()</a></span>,<br>      flowinfo := <span><a href="#type-in6_flow_info">in6_flow_info()</a></span>,<br>      scope_id := <span><a href="#type-in6_scope_id">in6_scope_id()</a></span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_un" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_un').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_un').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_un() = #{family := local, path := <span id="type-sockaddr_un">binary()</span> | <span>string()</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> The <code class="code">path</code> element will always be a <code class="code">binary</code> when returned from this module. When supplied to an API function in this module it may be a <code class="code">string()</code>, which will be encoded into a binary according to the <code><a href="file#native_name_encoding-0"> native file name encoding </a></code> on the platform. </p> <p> A terminating zero character will be appended before the address path is given to the OS, and the terminating zero will be stripped before giving the address path to the caller. </p> <p> Linux's non-portable abstract socket address extension is handled by not doing any terminating zero processing in either direction, if the first byte of the address is zero. </p> </div></article> <article class="data-types-body"><h4 id="type-sockaddr_ll" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_ll').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_ll').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_ll() = <br id="type-sockaddr_ll">    #{family := packet,<br>      protocol := <span>integer() &gt;= 0</span>,<br>      ifindex := <span>integer()</span>,<br>      pkttype := <span><a href="#type-packet_type">packet_type()</a></span>,<br>      hatype := <span><a href="#type-hatype">hatype()</a></span>,<br>      addr := <span>binary()</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_dl" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_dl').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_dl').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_dl() = <br id="type-sockaddr_dl">    #{family := link,<br>      index := <span>integer() &gt;= 0</span>,<br>      type := <span>integer() &gt;= 0</span>,<br>      nlen := <span>integer() &gt;= 0</span>,<br>      alen := <span>integer() &gt;= 0</span>,<br>      slen := <span>integer() &gt;= 0</span>,<br>      data := <span>binary()</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_unspec" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_unspec').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_unspec').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_unspec() = #{family := unspec, addr := <span id="type-sockaddr_unspec">binary()</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sockaddr_native" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sockaddr_native').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sockaddr_native').style.visibility = 'hidden';">  <div class="title-name"> <code>sockaddr_native() = #{family := <span id="type-sockaddr_native">integer()</span>, addr := <span>binary()</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-packet_type" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-packet_type').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-packet_type').style.visibility = 'hidden';">  <div class="title-name"> <code>packet_type() = <br id="type-packet_type">    host | broadcast | multicast | otherhost | outgoing |<br>    loopback | user | kernel | fastroute |<br>    <span>integer() &gt;= 0</span></code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-hatype" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-hatype').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-hatype').style.visibility = 'hidden';">  <div class="title-name"> <code>hatype() = <br id="type-hatype">    netrom | eether | ether | ax25 | pronet | chaos | ieee802 |<br>    arcnet | appletlk | dlci | atm | metricom | ieee1394 | eui64 |<br>    infiniband | tunnel | tunnel6 | loopback | localtlk | none |<br>    void |<br>    <span>integer() &gt;= 0</span></code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-port_number" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-port_number').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-port_number').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-port_number">port_number() = 0..65535</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-in6_flow_info" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-in6_flow_info').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-in6_flow_info').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-in6_flow_info">in6_flow_info() = 0..1048575</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-in6_scope_id" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-in6_scope_id').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-in6_scope_id').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-in6_scope_id">in6_scope_id() = 0..4294967295</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-msg_flag" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-msg_flag').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-msg_flag').style.visibility = 'hidden';">  <div class="title-name"> <code>msg_flag() = <br id="type-msg_flag">    cmsg_cloexec | confirm | ctrunc | dontroute | eor | errqueue |<br>    more | oob | peek | trunc</code><br> </div> </h4> <div class="data-type-desc"> <p> Flags corresponding to the message flag constants on the platform. The flags are lowercase and the constants are uppercase with the prefix <code class="code">MSG_</code>. </p> <p> Some flags are only used for sending, some only for receiving, some in received control messages, and some for several of these. Not all flags are supported on all platforms. See the platform's documentation, <code><a href="#supports-1"><span class="code">supports(msg_flags)</span></a></code>, and <code><a href="#is_supported-2"><span class="code">is_supported(msg_flags, MsgFlag)</span></a></code>. </p> </div></article> <article class="data-types-body"><h4 id="type-level" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-level').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-level').style.visibility = 'hidden';">  <div class="title-name"> <code>level() = socket | <span id="type-level"><a href="#type-protocol">protocol()</a></span></code><br> </div> </h4> <div class="data-type-desc"> <p> The OS protocol levels for, for example, socket options and control messages, with the following names in the OS header files: </p> <dl> <dt><strong><code class="code">socket</code></strong></dt> <dd> <code class="code">SOL_SOCKET</code> with options named <code class="code">SO_</code>*. </dd> <dt><strong><code class="code">ip</code></strong></dt> <dd> <code class="code">IPPROTO_IP</code> a.k.a <code class="code">SOL_IP</code> with options named <code class="code">IP_</code>*. </dd> <dt><strong><code class="code">ipv6</code></strong></dt> <dd> <code class="code">IPPROTO_IPV6</code> a.k.a <code class="code">SOL_IPV6</code> with options named <code class="code">IPV6_</code>*. </dd> <dt><strong><code class="code">tcp</code></strong></dt> <dd> <code class="code">IPPROTO_TCP</code> with options named <code class="code">TCP_</code>*. </dd> <dt><strong><code class="code">udp</code></strong></dt> <dd> <code class="code">IPPROTO_UDP</code> with options named <code class="code">UDP_</code>*. </dd> <dt><strong><code class="code">sctp</code></strong></dt> <dd> <code class="code">IPPROTO_SCTP</code> with options named <code class="code">SCTP_</code>*. </dd> </dl> <p> There are many other possible protocols, but the ones above are those for which this socket library implements socket options and/or control messages. </p> <p> All protocols known to the OS are enumerated when the Erlang VM is started. See the OS man page for protocols(5). The protocol level 'socket' is always implemented as <code class="code">SOL_SOCKET</code> and all the others mentioned in the list above are valid, if supported by the platform, enumerated or not. </p> <p> The calls <code><a href="#supports-0"><span class="code">supports()</span></a></code> and <code><a href="#is_supported-2"> <span class="code">is_supported(protocols, Protocol)</span> </a></code> can be used to find out if protocols <code class="code">ipv6</code> and/or <code class="code">sctp</code> are supported according to the platform's header files. </p> </div></article> <article class="data-types-body"><h4 id="type-otp_socket_option" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-otp_socket_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-otp_socket_option').style.visibility = 'hidden';">  <div class="title-name"> <code>otp_socket_option() = <br id="type-otp_socket_option">    debug | iow | controlling_process | rcvbuf | rcvctrlbuf |<br>    sndctrlbuf | meta | use_registry | fd | domain</code><br> </div> </h4> <div class="data-type-desc"> <p> These are socket options for the <code class="code">otp</code> protocol level, that is <code class="code">{otp, Name}</code> options, above all OS protocol levels. They affect Erlang/OTP's socket implementation. </p> <dl> <dt><strong><code class="code">debug</code></strong></dt> <dd> <code class="code">boolean()</code> - Activate debug printout.</dd> <dt><strong><code class="code">iow</code></strong></dt> <dd> <code class="code">boolean()</code> - Inform On Wrap of statistics counters. </dd> <dt><strong><code class="code">controlling_process</code></strong></dt> <dd> <code class="code">pid()</code> - The socket "owner". Only the current controlling process can set this option. </dd> <dt><strong><code class="code">rcvbuf</code></strong></dt> <dd> <code class="code">BufSize :: (default | integer()&gt;0) | {N :: integer()&gt;0, BufSize :: (default | integer()&gt;0)}</code> - Receive buffer size. The value <code class="code">default</code> is only valid to <strong>set</strong>. <code class="code">N</code> specifies the number of read attempts to do in a tight loop before assuming no more data is pending. </dd> <dt><strong><code class="code">rcvctrlbuf</code></strong></dt> <dd> <code class="code">BufSize :: (default | integer()&gt;0)</code> - Buffer size for received ancillary messages. The value <code class="code">default</code> is only valid to <strong>set</strong>. </dd> <dt><strong><code class="code">sndctrlbuf</code></strong></dt> <dd> <code class="code">BufSize :: (default | integer()&gt;0)</code> - Buffer size for sent ancillary messages. The value <code class="code">default</code> is only valid to <strong>set</strong>. </dd> <dt><strong><code class="code">fd</code></strong></dt> <dd> <code class="code">integer()</code> - Only valid to <strong>get</strong>. The OS protocol levels' socket descriptor. Functions <code><a href="#open-1"><span class="code">open/1,2</span></a></code> can be used to create a socket according to this module from an existing OS socket descriptor. </dd> <dt><strong><code class="code">use_registry</code></strong></dt> <dd> <code class="code">boolean()</code> - Only valid to <strong>get</strong>. The value is set when the socket is created with <code><a href="#open-2"><span class="code">open/2</span></a></code> or <code><a href="#open-4"><span class="code">open/4</span></a></code>. </dd> </dl> <p> Options not described here are intentionally undocumented and for Erlang/OTP internal use only. </p> </div></article> <article class="data-types-body"><h4 id="type-socket_option" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-socket_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-socket_option').style.visibility = 'hidden';">  <div class="title-name"> <code>socket_option() = <br id="type-socket_option">    {Level :: socket,<br>     Opt ::<br>         acceptconn | acceptfilter | bindtodevice | broadcast |<br>         busy_poll | debug | domain | dontroute | error |<br>         keepalive | linger | mark | oobinline | passcred |<br>         peek_off | peercred | priority | protocol | rcvbuf |<br>         rcvbufforce | rcvlowat | rcvtimeo | reuseaddr |<br>         reuseport | rxq_ovfl | setfib | sndbuf | sndbufforce |<br>         sndlowat | sndtimeo | timestamp | type} |<br>    {Level :: ip,<br>     Opt ::<br>         add_membership | add_source_membership | block_source |<br>         dontfrag | drop_membership | drop_source_membership |<br>         freebind | hdrincl | minttl | msfilter | mtu |<br>         mtu_discover | multicast_all | multicast_if |<br>         multicast_loop | multicast_ttl | nodefrag | options |<br>         pktinfo | recvdstaddr | recverr | recvif | recvopts |<br>         recvorigdstaddr | recvtos | recvttl | retopts |<br>         router_alert | sndsrcaddr | tos | transparent | ttl |<br>         unblock_source} |<br>    {Level :: ipv6,<br>     Opt ::<br>         addrform | add_membership | authhdr | auth_level |<br>         checksum | drop_membership | dstopts | esp_trans_level |<br>         esp_network_level | faith | flowinfo | hopopts |<br>         ipcomp_level | join_group | leave_group | mtu |<br>         mtu_discover | multicast_hops | multicast_if |<br>         multicast_loop | portrange | pktoptions | recverr |<br>         recvhoplimit | hoplimit | recvpktinfo | pktinfo |<br>         recvtclass | router_alert | rthdr | tclass |<br>         unicast_hops | use_min_mtu | v6only} |<br>    {Level :: tcp,<br>     Opt ::<br>         congestion | cork | info | keepcnt | keepidle |<br>         keepintvl | maxseg | md5sig | nodelay | noopt | nopush |<br>         syncnt | user_timeout} |<br>    {Level :: udp, Opt :: cork} |<br>    {Level :: sctp,<br>     Opt ::<br>         adaption_layer | associnfo | auth_active_key |<br>         auth_asconf | auth_chunk | auth_key | auth_delete_key |<br>         autoclose | context | default_send_params |<br>         delayed_ack_time | disable_fragments | hmac_ident |<br>         events | explicit_eor | fragment_interleave |<br>         get_peer_addr_info | initmsg | i_want_mapped_v4_addr |<br>         local_auth_chunks | maxseg | maxburst | nodelay |<br>         partial_delivery_point | peer_addr_params |<br>         peer_auth_chunks | primary_addr | reset_streams |<br>         rtoinfo | set_peer_primary_addr | status |<br>         use_ext_recvinfo}</code><br> </div> </h4> <div class="data-type-desc"> <p> Socket option on the form <code class="code">{Level, Opt}</code> where the OS protocol <code class="code">Level</code> = <code><a href="#type-level"><span class="code">level()</span></a></code> and <code class="code">Opt</code> is a socket option on that protocol level. </p> <p> The OS name for an options is, except where otherwise noted, the <code class="code">Opt</code> atom, in capitals, with prefix according to <code><a href="#type-level"><span class="code">level()</span></a></code>. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The <code class="code">IPv6</code> option <code class="code">pktoptions</code> is a special (barf) case. It is intended for backward compatibility usage only. </p> <p>Do <strong>not</strong> use this option.</p> </div> </div> <div class="note"> <div class="label">Note</div> <div class="content">

<p>See the OS documentation for every socket option.</p> </div> </div> <p> An option below that has the value type <code class="code">boolean()</code> will translate the value <code class="code">false</code> to a C <code class="code">int</code> with value <code class="code">0</code>, and the value <code class="code">true</code> to <code class="code">!!0</code> (not (not false)). </p> <p> An option with value type <code class="code">integer()</code> will be translated to a C <code class="code">int</code> that may have a restricted range, for example byte: <code class="code">0..255</code>. See the OS documentation. </p> <p> The calls <code><a href="#supports-1"><span class="code">supports(options)</span></a></code>, <code><a href="#supports-1"><span class="code">supports(options, Level)</span></a></code> and <code><a href="#is_supported-2"> <span class="code">is_supported(options, {Level, Opt})</span> </a></code> can be used to find out which socket options that are supported by the platform. </p> <p> <strong>Options for protocol level</strong> <code><a href="#type-level"><strong><span class="code">socket</span></strong>:</a></code> </p> <dl> <dt><strong><code class="code">{socket, acceptconn}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, bindtodevice}</code></strong></dt> <dd><p><code class="code">Value = string()</code></p></dd> <dt><strong><code class="code">{socket, broadcast}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, debug}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{socket, domain}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-domain"><span class="code">domain()</span></a></code> </p> <p>Only valid to <strong>get</strong>.</p> <p> The socket's protocol domain. Does <strong>not</strong> work on for instance FreeBSD. </p> </dd> <dt><strong><code class="code">{socket, dontroute}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, keepalive}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, linger}</code></strong></dt> <dd> <p> <code class="code">Value = abort |</code> <code><a href="#type-linger"><span class="code">linger()</span></a></code> </p> <p> The value <code class="code">abort</code> is shorthand for <code class="code">#{onoff =&gt; true, linger =&gt; 0}</code>, and only valid to <strong>set</strong>. </p> </dd> <dt><strong><code class="code">{socket, oobinline}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, passcred}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, peek_off}</code></strong></dt> <dd> <p><code class="code">Value = integer()</code></p> <p> Currently disabled due to a possible infinite loop when calling <code><a href="#recv-1"><span class="code">recv/1-4</span></a></code> with <code><a href="#type-msg_flag"><span class="code">peek</span></a></code> in <code class="code">Flags</code>. </p> </dd> <dt><strong><code class="code">{socket, priority}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{socket, protocol}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-protocol"><span class="code">protocol()</span></a></code> </p> <p>Only valid to <strong>get</strong>.</p> <p> The socket's protocol. Does <strong>not</strong> work on for instance Darwin. </p> </dd> <dt><strong><code class="code">{socket, rcvbuf}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{socket, rcvlowat}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{socket, rcvtimeo}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-timeval"><span class="code">timeval()</span></a></code> </p> <p> This option is unsupported per default; OTP has to be explicitly built with the <code class="code">--enable-esock-rcvsndtimeo</code> configure option for this to be available. </p> <p> Since our implementation uses nonblocking sockets, it is unknown if and how this option works, or even if it may cause malfunction. Therefore, we do not recommend setting this option. </p> <p> Instead, use the <code class="code">Timeout</code> argument to, for instance, the <code><a href="#recv-3"><span class="code">recv/3</span></a></code> function. </p> </dd> <dt><strong><code class="code">{socket, reuseaddr}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, reuseport}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, sndbuf}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{socket, sndlowat}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{socket, sndtimeo}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-timeval"><span class="code">timeval()</span></a></code> </p> <p> This option is unsupported per default; OTP has to be explicitly built with the <code class="code">--enable-esock-rcvsndtimeo</code> configure option for this to be available. </p> <p> Since our implementation uses nonblocking sockets, it is unknown if and how this option works, or even if it may cause malfunction. Therefore, we do not recommend setting this option. </p> <p> Instead, use the <code class="code">Timeout</code> argument to, for instance, the <code><a href="#send-3"><span class="code">send/3</span></a></code> function. </p> </dd> <dt><strong><code class="code">{socket, timestamp}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{socket, type}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-type"><span class="code">type()</span></a></code> </p> <p>Only valid to <strong>get</strong>.</p> <p>The socket's type.</p> </dd> </dl>  <p> <strong>Options for protocol level</strong> <code><a href="#type-level"><strong><span class="code">ip</span></strong>:</a></code> </p> <dl> <dt><strong><code class="code">{ip, add_membership}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_mreq"><span class="code">ip_mreq()</span></a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ip, add_source_membership}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_mreq_source"> <span class="code">ip_mreq_source()</span> </a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ip, block_source}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_mreq_source"> <span class="code">ip_mreq_source()</span> </a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ip, drop_membership}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_mreq"><span class="code">ip_mreq()</span></a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ip, drop_source_membership}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_mreq_source"> <span class="code">ip_mreq_source()</span> </a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ip, freebind}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, hdrincl}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, minttl}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ip, msfilter}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code class="code">null |</code> <code><a href="#type-ip_msfilter"> <span class="code">ip_msfilter()</span> </a></code> </p> <p>Only valid to <strong>set</strong>.</p> <p> The value <code class="code">null</code> passes a <code class="code">NULL</code> pointer and size <code class="code">0</code> to the C library call. </p> </dd> <dt><strong><code class="code">{ip, mtu}</code></strong></dt> <dd> <p><code class="code">Value = integer()</code></p> <p>Only valid to <strong>get</strong>.</p> </dd> <dt><strong><code class="code">{ip, mtu_discover}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_pmtudisc"> <span class="code">ip_pmtudisc()</span> </a></code> <code class="code">| integer()</code> </p> <p> An <code class="code">integer()</code> value is according to the platform's header files. </p> </dd> <dt><strong><code class="code">{ip, multicast_all}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, multicast_if}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code class="code">any |</code> <code><a href="#type-in_addr"> <span class="code">in_addr()</span> </a></code> </p> </dd> <dt><strong><code class="code">{ip, multicast_loop}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, multicast_ttl}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ip, nodefrag}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, pktinfo}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, recvdstaddr}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, recverr}</code></strong></dt> <dd> <p><code class="code">Value = boolean()</code></p> <p> <strong>Warning!</strong> When this option is enabled, error messages may arrive on the socket's error queue, which should be read using the message flag <code><a href="#type-msg_flag"><span class="code">errqueue</span></a></code>, and using <code><a href="#recvmsg-1"><span class="code">recvmsg/1,2,3,4,5</span></a></code> to get all error information in the <code><a href="#type-msg_recv">message's</a></code> <code class="code">ctrl</code> field as a <code><a href="#type-cmsg_recv">control message</a></code> <code class="code">#{level := ip, type := recverr}</code>. </p> <p> A working strategy should be to first poll the error queue using <code><a href="#recvmsg-timeout"> <span class="code">recvmsg/2,3,4</span> </a></code> with <code class="code">Timeout =:= 0</code> and <code class="code">Flags</code> containing <code class="code">errqueue</code> (ignore the return value <code class="code">{error, timeout}</code>) before reading the actual data to ensure that the error queue gets cleared. And read the data using one of the <code class="code">nowait |</code> <code><a href="#type-select_handle"> <span class="code">select_handle()</span> </a></code> recv functions: <code><a href="#recv-nowait"><span class="code">recv/3,4</span></a></code>, <code><a href="#recvfrom-nowait"><span class="code">recvfrom/3,4</span></a></code> or <code><a href="#recvmsg-nowait"><span class="code">recvmsg/3,4,5</span></a></code>. Otherwise you might accidentally cause a busy loop in and out of 'select' for the socket. </p> </dd> <dt><strong><code class="code">{ip, recvif}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, recvopts}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, recvorigdstaddr}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, recvtos}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, recvttl}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, retopts}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, router_alert}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ip, sendsrcaddr}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, tos}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_tos"> <span class="code">ip_tos()</span> </a></code> <code class="code">| integer()</code> </p> <p> An <code class="code">integer()</code> value is according to the platform's header files. </p> </dd> <dt><strong><code class="code">{ip, transparent}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ip, ttl}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ip, unblock_source}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ip_mreq_source"> <span class="code">ip_mreq_source()</span> </a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> </dl>  <p> <strong>Options for protocol level</strong> <code><a href="#type-level"><strong><span class="code">ipv6</span></strong>:</a></code> </p> <dl> <dt><strong><code class="code">{ipv6, addrform}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-domain"> <span class="code">domain()</span> </a></code> </p> <p> As far as we know the only valid value is <code class="code">inet</code> and it is only allowed for an IPv6 socket that is connected and bound to an IPv4-mapped IPv6 address. </p> </dd> <dt><strong><code class="code">{ipv6, add_membership}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ipv6_mreq"><span class="code">ipv6_mreq()</span></a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ipv6, authhdr}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, drop_membership}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ipv6_mreq"><span class="code">ipv6_mreq()</span></a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{ipv6, dstopts}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, flowinfo}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, hoplimit}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, hopopts}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, mtu}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ipv6, mtu_discover}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ipv6_pmtudisc"> <span class="code">ipv6_pmtudisc()</span> </a></code> <code class="code">| integer()</code> </p> <p> An <code class="code">integer()</code> value is according to the platform's header files. </p> </dd> <dt><strong><code class="code">{ipv6, multicast_hops}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ipv6_hops"><span class="code">ipv6_hops()</span></a></code> </p> </dd> <dt><strong><code class="code">{ipv6, multicast_if}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ipv6, multicast_loop}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, recverr}</code></strong></dt> <dd> <p><code class="code">Value = boolean()</code></p> <p> <strong>Warning!</strong> See the socket option <code class="code">{ip, recverr}</code> regarding the socket's error queue. The same warning applies for this option. </p> </dd> <dt><strong><code class="code">{ipv6, recvhoplimit}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, recvpktinfo}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, recvtclass}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, router_alert}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{ipv6, rthdr}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, tclass}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{ipv6, unicast_hops}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-ipv6_hops"><span class="code">ipv6_hops()</span></a></code> </p> </dd> <dt><strong><code class="code">{ipv6, v6only}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> </dl>  <p> <strong>Options for protocol level</strong> <code><a href="#type-level"><strong><span class="code">sctp</span></strong></a></code>. See also RFC 6458. </p> <dl> <dt><strong><code class="code">{sctp, associnfo}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-sctp_assocparams"> <span class="code">sctp_assocparams()</span> </a></code> </p> </dd> <dt><strong><code class="code">{sctp, autoclose}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{sctp, disable_fragments}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{sctp, events}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-sctp_event_subscribe"> <span class="code">sctp_event_subscribe()</span> </a></code> </p> <p>Only valid to <strong>set</strong>.</p> </dd> <dt><strong><code class="code">{sctp, initmsg}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-sctp_initmsg"> <span class="code">sctp_initmsg()</span> </a></code> </p> </dd> <dt><strong><code class="code">{sctp, maxseg}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{sctp, nodelay}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{sctp, rtoinfo}</code></strong></dt> <dd> <p> <code class="code">Value =</code> <code><a href="#type-sctp_rtoinfo"> <span class="code">sctp_rtoinfo()</span> </a></code> </p> </dd> </dl>  <p> <strong>Options for protocol level</strong> <code><a href="#type-level"><strong><span class="code">tcp</span>:</strong></a></code> </p> <dl> <dt><strong><code class="code">{tcp, congestion}</code></strong></dt> <dd><p><code class="code">Value = string()</code></p></dd> <dt><strong><code class="code">{tcp, cork}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> <dt><strong><code class="code">{tcp, maxseg}</code></strong></dt> <dd><p><code class="code">Value = integer()</code></p></dd> <dt><strong><code class="code">{tcp, nodelay}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> </dl>  <p> <strong>Options for protocol level</strong> <code><a href="#type-level"><strong><span class="code">udp</span>:</strong></a></code> </p> <dl> <dt><strong><code class="code">{udp, cork}</code></strong></dt> <dd><p><code class="code">Value = boolean()</code></p></dd> </dl> </div></article> <article class="data-types-body"><h4 id="type-linger" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-linger').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-linger').style.visibility = 'hidden';">  <div class="title-name"> <code>linger() = #{onoff := <span id="type-linger">boolean()</span>, linger := <span>integer() &gt;= 0</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct linger</code> for managing the <code><a href="#type-socket_option">socket option</a></code> <code class="code">{socket, linger}</code>. </p> </div></article> <article class="data-types-body"><h4 id="type-timeval" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-timeval').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-timeval').style.visibility = 'hidden';">  <div class="title-name"> <code>timeval() = #{sec := <span id="type-timeval">integer()</span>, usec := <span>integer()</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct timeval</code>. The field <code class="code">sec</code> holds seconds, and <code class="code">usec</code> microseconds. </p> </div></article> <article class="data-types-body"><h4 id="type-ip_mreq" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ip_mreq').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_mreq').style.visibility = 'hidden';">  <div class="title-name"> <code>ip_mreq() = #{multiaddr := <span id="type-ip_mreq"><a href="#type-in_addr">in_addr()</a></span>, interface := <span><a href="#type-in_addr">in_addr()</a></span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct ip_mreq</code> for managing multicast groups. </p> </div></article> <article class="data-types-body"><h4 id="type-ip_mreq_source" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ip_mreq_source').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_mreq_source').style.visibility = 'hidden';">  <div class="title-name"> <code>ip_mreq_source() = <br id="type-ip_mreq_source">    #{multiaddr := <span><a href="#type-in_addr">in_addr()</a></span>,<br>      interface := <span><a href="#type-in_addr">in_addr()</a></span>,<br>      sourceaddr := <span><a href="#type-in_addr">in_addr()</a></span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct ip_mreq_source</code> for managing multicast groups. </p> </div></article> <article class="data-types-body"><h4 id="type-ip_msfilter" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ip_msfilter').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_msfilter').style.visibility = 'hidden';">  <div class="title-name"> <code>ip_msfilter() = <br id="type-ip_msfilter">    #{multiaddr := <span><a href="#type-in_addr">in_addr()</a></span>,<br>      interface := <span><a href="#type-in_addr">in_addr()</a></span>,<br>      mode := include | exclude,<br>      slist := [<span><a href="#type-in_addr">in_addr()</a></span>]}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct ip_msfilter</code> for managing multicast source filtering (RFC 3376). </p> </div></article> <article class="data-types-body"><h4 id="type-ip_pmtudisc" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ip_pmtudisc').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_pmtudisc').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-ip_pmtudisc">ip_pmtudisc() = want | dont | do | probe</code><br> </div> </h4> <div class="data-type-desc"> <p> Lowercase <code class="code">atom()</code> values corresponding to the C library constants <code class="code">IP_PMTUDISC_*</code>. Some constant(s) may be unsupported by the platform. </p> </div></article> <article class="data-types-body"><h4 id="type-ip_tos" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ip_tos').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_tos').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-ip_tos">ip_tos() = lowdelay | throughput | reliability | mincost</code><br> </div> </h4> <div class="data-type-desc"> <p> Lowercase <code class="code">atom()</code> values corresponding to the C library constants <code class="code">IPTOS_*</code>. Some constant(s) may be unsupported by the platform. </p> </div></article> <article class="data-types-body"><h4 id="type-ip_pktinfo" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ip_pktinfo').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_pktinfo').style.visibility = 'hidden';">  <div class="title-name"> <code>ip_pktinfo() = <br id="type-ip_pktinfo">    #{ifindex := <span>integer() &gt;= 0</span>,<br>      spec_dst := <span><a href="#type-in_addr">in_addr()</a></span>,<br>      addr := <span><a href="#type-in_addr">in_addr()</a></span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-ipv6_mreq" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ipv6_mreq').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ipv6_mreq').style.visibility = 'hidden';">  <div class="title-name"> <code>ipv6_mreq() = <br id="type-ipv6_mreq">    #{multiaddr := <span><a href="#type-in6_addr">in6_addr()</a></span>, interface := <span>integer() &gt;= 0</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct ipv6_mreq</code> for managing multicast groups. See also RFC 2553. </p> </div></article> <article class="data-types-body"><h4 id="type-ipv6_hops" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ipv6_hops').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ipv6_hops').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-ipv6_hops">ipv6_hops() = default | 0..255</code><br> </div> </h4> <div class="data-type-desc"> <p> The value <code class="code">default</code> is only valid to <strong>set</strong> and is translated to the C value <code class="code">-1</code>, meaning the route default. </p> </div></article> <article class="data-types-body"><h4 id="type-ipv6_pmtudisc" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ipv6_pmtudisc').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ipv6_pmtudisc').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-ipv6_pmtudisc">ipv6_pmtudisc() = want | dont | do | probe</code><br> </div> </h4> <div class="data-type-desc"> <p> Lowercase <code class="code">atom()</code> values corresponding to the C library constants <code class="code">IPV6_PMTUDISC_*</code>. Some constant(s) may be unsupported by the platform. </p> </div></article> <article class="data-types-body"><h4 id="type-ipv6_pktinfo" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ipv6_pktinfo').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ipv6_pktinfo').style.visibility = 'hidden';">  <div class="title-name"> <code>ipv6_pktinfo() = #{addr := <span id="type-ipv6_pktinfo"><a href="#type-in6_addr">in6_addr()</a></span>, ifindex := <span>integer()</span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-sctp_assocparams" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sctp_assocparams').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sctp_assocparams').style.visibility = 'hidden';">  <div class="title-name"> <code>sctp_assocparams() = <br id="type-sctp_assocparams">    #{assoc_id := <span>integer()</span>,<br>      asocmaxrxt := 0..65535,<br>      numbe_peer_destinations := 0..65535,<br>      peer_rwnd := 0..4294967295,<br>      local_rwnd := 0..4294967295,<br>      cookie_life := 0..4294967295}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct sctp_assocparams</code>. </p> </div></article> <article class="data-types-body"><h4 id="type-sctp_event_subscribe" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sctp_event_subscribe').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sctp_event_subscribe').style.visibility = 'hidden';">  <div class="title-name"> <code>sctp_event_subscribe() = <br id="type-sctp_event_subscribe">    #{data_io := <span>boolean()</span>,<br>      association := <span>boolean()</span>,<br>      address := <span>boolean()</span>,<br>      send_failure := <span>boolean()</span>,<br>      peer_error := <span>boolean()</span>,<br>      shutdown := <span>boolean()</span>,<br>      partial_delivery := <span>boolean()</span>,<br>      adaptation_layer =&gt; <span>boolean()</span>,<br>      sender_dry =&gt; <span>boolean()</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct sctp_event_subscribe</code>. </p> <p> Not all fields are implemented on all platforms; unimplemented fields are ignored, but implemented fields are mandatory. Note that the '_event' suffixes have been stripped from the C struct field names, for convenience. </p> </div></article> <article class="data-types-body"><h4 id="type-sctp_initmsg" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sctp_initmsg').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sctp_initmsg').style.visibility = 'hidden';">  <div class="title-name"> <code>sctp_initmsg() = <br id="type-sctp_initmsg">    #{num_ostreams := 0..65535,<br>      max_instreams := 0..65535,<br>      max_attempts := 0..65535,<br>      max_init_timeo := 0..65535}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct sctp_initmsg</code>. </p> </div></article> <article class="data-types-body"><h4 id="type-sctp_rtoinfo" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-sctp_rtoinfo').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-sctp_rtoinfo').style.visibility = 'hidden';">  <div class="title-name"> <code>sctp_rtoinfo() = <br id="type-sctp_rtoinfo">    #{assoc_id := <span>integer()</span>,<br>      initial := 0..4294967295,<br>      max := 0..4294967295,<br>      min := 0..4294967295}</code><br> </div> </h4> <div class="data-type-desc"> <p> Corresponds to the C <code class="code">struct sctp_rtoinfo</code>. </p> </div></article> <article class="data-types-body"><h4 id="type-msg" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-msg').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-msg').style.visibility = 'hidden';">  <div class="title-name"> <code>msg() = <span id="type-msg"><a href="#type-msg_send">msg_send()</a></span> | <span><a href="#type-msg_recv">msg_recv()</a></span></code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-msg_send" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-msg_send').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-msg_send').style.visibility = 'hidden';">  <div class="title-name"> <code>msg_send() = <br id="type-msg_send">    #{addr =&gt; <span><a href="#type-sockaddr">sockaddr()</a></span>,<br>      iov := <span>erlang:iovec()</span>,<br>      ctrl =&gt;<br>          [<span><a href="#type-cmsg_send">cmsg_send()</a></span> |<br>           #{level := <span><a href="#type-level">level()</a></span> | <span>integer()</span>,<br>             type := <span>integer()</span>,<br>             data := <span>binary()</span>}]}</code><br> </div> </h4> <div class="data-type-desc"> <p> Message sent by <code><a href="#sendmsg-2"><span class="code">sendmsg/2,3,4</span></a></code>. </p> <p> Corresponds to a C <code class="code">struct msghdr</code>, see your platform documentation for <code class="code">sendmsg(2)</code>. </p> <dl> <dt><strong><code class="code">addr</code></strong></dt> <dd> Optional peer address, used on unconnected sockets. Corresponds to <code class="code">msg_name</code> and <code class="code">msg_namelen</code> fields of a <code class="code">struct msghdr</code>. If not used they are set to <code class="code">NULL</code>, <code class="code">0</code>. </dd> <dt><strong><code class="code">iov</code></strong></dt> <dd> Mandatory data as a list of binaries. The <code class="code">msg_iov</code> and <code class="code">msg_iovlen</code> fields of a <code class="code">struct msghdr</code>. </dd> <dt><strong><code class="code">ctrl</code></strong></dt> <dd> Optional list of control messages (CMSG). Corresponds to the <code class="code">msg_control</code> and <code class="code">msg_controllen</code> fields of a <code class="code">struct msghdr</code>. If not used they are set to <code class="code">NULL</code>, <code class="code">0</code>. </dd> </dl> <p> The <code class="code">msg_flags</code> field of the <code class="code">struct msghdr</code> is set to <code class="code">0</code>. </p> </div></article> <article class="data-types-body"><h4 id="type-msg_recv" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-msg_recv').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-msg_recv').style.visibility = 'hidden';">  <div class="title-name"> <code>msg_recv() = <br id="type-msg_recv">    #{addr =&gt; <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>,<br>      iov := <span>erlang:iovec()</span>,<br>      ctrl :=<br>          [<span><a href="#type-cmsg_recv">cmsg_recv()</a></span> |<br>           #{level := <span><a href="#type-level">level()</a></span> | <span>integer()</span>,<br>             type := <span>integer()</span>,<br>             data := <span>binary()</span>}],<br>      flags := [<span><a href="#type-msg_flag">msg_flag()</a></span> | <span>integer()</span>]}</code><br> </div> </h4> <div class="data-type-desc"> <p> Message returned by <code><a href="#recvmsg-1"><span class="code">recvmsg/1,2,3,5</span></a></code>. </p> <p> Corresponds to a C <code class="code">struct msghdr</code>, see your platform documentation for <code class="code">recvmsg(2)</code>. </p> <dl> <dt><strong><code class="code">addr</code></strong></dt> <dd> Optional peer address, used on unconnected sockets. Corresponds to <code class="code">msg_name</code> and <code class="code">msg_namelen</code> fields of a <code class="code">struct msghdr</code>. If <code class="code">NULL</code> the map key is not present. </dd> <dt><strong><code class="code">iov</code></strong></dt> <dd> Data as a list of binaries. The <code class="code">msg_iov</code> and <code class="code">msg_iovlen</code> fields of a <code class="code">struct msghdr</code>. </dd> <dt><strong><code class="code">ctrl</code></strong></dt> <dd> A possibly empty list of control messages (CMSG). Corresponds to the <code class="code">msg_control</code> and <code class="code">msg_controllen</code> fields of a <code class="code">struct msghdr</code>. </dd> <dt><strong><code class="code">flags</code></strong></dt> <dd> Message flags. Corresponds to the <code class="code">msg_flags</code> field of a <code class="code">struct msghdr</code>. Unknown flags, if any, are returned in one <code class="code">integer()</code>, last in the containing list. </dd> </dl> </div></article> <article class="data-types-body"><h4 id="type-native_value" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-native_value').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-native_value').style.visibility = 'hidden';">  <div class="title-name"> <code>native_value() = <span id="type-native_value">integer()</span> | <span>boolean()</span> | <span>binary()</span></code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-cmsg_send" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-cmsg_send').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-cmsg_send').style.visibility = 'hidden';">  <div class="title-name"> <code>cmsg_send() = <br id="type-cmsg_send">    #{level := socket,<br>      type := timestamp,<br>      data =&gt; <span><a href="#type-native_value">native_value()</a></span>,<br>      value =&gt; <span><a href="#type-timeval">timeval()</a></span>} |<br>    #{level := socket, type := rights, data := <span><a href="#type-native_value">native_value()</a></span>} |<br>    #{level := socket,<br>      type := credentials,<br>      data := <span><a href="#type-native_value">native_value()</a></span>} |<br>    #{level := ip,<br>      type := tos,<br>      data =&gt; <span><a href="#type-native_value">native_value()</a></span>,<br>      value =&gt; <span><a href="#type-ip_tos">ip_tos()</a></span> | <span>integer()</span>} |<br>    #{level := ip,<br>      type := ttl,<br>      data =&gt; <span><a href="#type-native_value">native_value()</a></span>,<br>      value =&gt; <span>integer()</span>} |<br>    #{level := ip,<br>      type := hoplimit,<br>      data =&gt; <span><a href="#type-native_value">native_value()</a></span>,<br>      value =&gt; <span>integer()</span>} |<br>    #{level := ipv6,<br>      type := tclass,<br>      data =&gt; <span><a href="#type-native_value">native_value()</a></span>,<br>      value =&gt; <span>integer()</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Control messages (ancillary messages) accepted by <code><a href="#sendmsg-2"><span class="code">sendmsg/2,3,4</span></a></code>. </p> <p> A control message may for some message types have a <code class="code">value</code> field with a symbolic value, or a <code class="code">data</code> field with a native value, that has to be binary compatible what is defined in the platform's header files. </p> </div></article> <article class="data-types-body"><h4 id="type-cmsg_recv" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-cmsg_recv').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-cmsg_recv').style.visibility = 'hidden';">  <div class="title-name"> <code>cmsg_recv() = <br id="type-cmsg_recv">    #{level := socket,<br>      type := timestamp,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-timeval">timeval()</a></span>} |<br>    #{level := socket, type := rights, data := <span>binary()</span>} |<br>    #{level := socket, type := credentials, data := <span>binary()</span>} |<br>    #{level := ip,<br>      type := tos,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-ip_tos">ip_tos()</a></span> | <span>integer()</span>} |<br>    #{level := ip,<br>      type := recvtos,<br>      data := <span>binary()</span>,<br>      value := <span><a href="#type-ip_tos">ip_tos()</a></span> | <span>integer()</span>} |<br>    #{level := ip,<br>      type := ttl,<br>      data := <span>binary()</span>,<br>      value =&gt; <span>integer()</span>} |<br>    #{level := ip,<br>      type := recvttl,<br>      data := <span>binary()</span>,<br>      value := <span>integer()</span>} |<br>    #{level := ip,<br>      type := pktinfo,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-ip_pktinfo">ip_pktinfo()</a></span>} |<br>    #{level := ip,<br>      type := origdstaddr,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>} |<br>    #{level := ip,<br>      type := recverr,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-extended_err">extended_err()</a></span>} |<br>    #{level := ipv6,<br>      type := hoplimit,<br>      data := <span>binary()</span>,<br>      value =&gt; <span>integer()</span>} |<br>    #{level := ipv6,<br>      type := pktinfo,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-ipv6_pktinfo">ipv6_pktinfo()</a></span>} |<br>    #{level := ipv6,<br>      type := recverr,<br>      data := <span>binary()</span>,<br>      value =&gt; <span><a href="#type-extended_err">extended_err()</a></span>} |<br>    #{level := ipv6,<br>      type := tclass,<br>      data := <span>binary()</span>,<br>      value =&gt; <span>integer()</span>}</code><br> </div> </h4> <div class="data-type-desc"> <p> Control messages (ancillary messages) returned by <code><a href="#recvmsg-1"><span class="code">recvmsg/1,2,3,5</span></a></code>. </p> <p> A control message has got a <code class="code">data</code> field with a native (<code class="code">binary</code>) value for the message data, and may also have a decoded <code class="code">value</code> field if this socket library successfully decoded the data. </p> </div></article> <article class="data-types-body"><h4 id="type-icmp_dest_unreach" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-icmp_dest_unreach').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-icmp_dest_unreach').style.visibility = 'hidden';">  <div class="title-name"> <code>icmp_dest_unreach() = <br id="type-icmp_dest_unreach">    net_unreach | host_unreach | port_unreach | frag_needed |<br>    net_unknown | host_unknown</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-icmpv6_dest_unreach" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-icmpv6_dest_unreach').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-icmpv6_dest_unreach').style.visibility = 'hidden';">  <div class="title-name"> <code>icmpv6_dest_unreach() = <br id="type-icmpv6_dest_unreach">    noroute | adm_prohibited | not_neighbour | addr_unreach |<br>    port_unreach | policy_fail | reject_route</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-ee_origin" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-ee_origin').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ee_origin').style.visibility = 'hidden';">  <div class="title-name"> <code id="type-ee_origin">ee_origin() = none | local | icmp | icmp6</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-extended_err" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-extended_err').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-extended_err').style.visibility = 'hidden';">  <div class="title-name"> <code>extended_err() = <br id="type-extended_err">    #{error := <span><a href="#type-posix">posix()</a></span>,<br>      origin := icmp,<br>      type := dest_unreach,<br>      code := <span><a href="#type-icmp_dest_unreach">icmp_dest_unreach()</a></span> | 0..255,<br>      info := 0..4294967295,<br>      data := 0..4294967295,<br>      offender := <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>} |<br>    #{error := <span><a href="#type-posix">posix()</a></span>,<br>      origin := icmp,<br>      type := time_exceeded | 0..255,<br>      code := 0..255,<br>      info := 0..4294967295,<br>      data := 0..4294967295,<br>      offender := <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>} |<br>    #{error := <span><a href="#type-posix">posix()</a></span>,<br>      origin := icmp6,<br>      type := dest_unreach,<br>      code := <span><a href="#type-icmpv6_dest_unreach">icmpv6_dest_unreach()</a></span> | 0..255,<br>      info := 0..4294967295,<br>      data := 0..4294967295,<br>      offender := <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>} |<br>    #{error := <span><a href="#type-posix">posix()</a></span>,<br>      origin := icmp6,<br>      type := pkt_toobig | time_exceeded | 0..255,<br>      code := 0..255,<br>      info := 0..4294967295,<br>      data := 0..4294967295,<br>      offender := <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>} |<br>    #{error := <span><a href="#type-posix">posix()</a></span>,<br>      origin := <span><a href="#type-ee_origin">ee_origin()</a></span> | 0..255,<br>      type := 0..255,<br>      code := 0..255,<br>      info := 0..4294967295,<br>      data := 0..4294967295,<br>      offender := <span><a href="#type-sockaddr_recv">sockaddr_recv()</a></span>}</code><br> </div> </h4> </article> <article class="data-types-body"><h4 id="type-posix" class="title-link data-type-name" onmouseover="document.getElementById('ghlink-type-posix').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-posix').style.visibility = 'hidden';">  <div class="title-name"> <code>posix() = <span id="type-posix"><a href="inet#type-posix">inet:posix()</a></span></code><br> </div> </h4> <div class="data-type-desc"> <p> The POSIX error codes originates from the OS level socket interface. </p> </div></article> </div> <div class="innertube"><h2 id="export" class="title-link" onmouseover="document.getElementById('ghlink-export-idm19921').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-export-idm19921').style.visibility = 'hidden';"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h4 id="accept-1" onmouseover="document.getElementById('ghlink-accept-1-idp582').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-accept-1-idp582').style.visibility = 'hidden';">  <span class="title-name">accept(ListenSocket) -&gt; {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="accept-2" onmouseover="document.getElementById('ghlink-accept-2-idp583').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-accept-2-idp583').style.visibility = 'hidden';">  <span class="title-name">accept(ListenSocket, Timeout :: infinity) -&gt;<br> {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Accept a connection on a socket.</p> <p> This call is used with connection oriented socket types (<code class="code">stream</code> or <code class="code">seqpacket</code>). It returns the first pending incoming connection for a listen socket, or waits for one to arrive, and returns the (newly) connected socket. </p> </div></article><article class="func"><h4 id="accept-2" onmouseover="document.getElementById('ghlink-accept-2-idp584').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-accept-2-idp584').style.visibility = 'hidden';">  <span class="title-name">accept(ListenSocket, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p> The same as <code><a href="#accept-1">accept/1</a></code> but returns <code class="code">{error, timeout}</code> if no connection has been accepted after <code class="code">Timeout</code> milliseconds. </p> </div></article><article class="func"><h4 id="accept-2" onmouseover="document.getElementById('ghlink-accept-2-idp585').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-accept-2-idp585').style.visibility = 'hidden';">  <span class="title-name">accept(ListenSocket, Timeout :: nowait) -&gt;<br> {ok, Socket} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="accept-2" onmouseover="document.getElementById('ghlink-accept-2-idp586').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-accept-2-idp586').style.visibility = 'hidden';">  <span class="title-name">accept(ListenSocket, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Socket} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>      <div class="exports-tube"> <p> The same as <code><a href="#accept-1">accept/1</a></code> but returns promptly. </p> <p> When there is no pending connection to return, the function will return <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will later receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when a client connects. A subsequent call to <code class="code">accept/1,2</code> will then return the socket. </p> <p> If the time-out argument is <code class="code">SelectHandle</code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If the time-out argument is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If the caller doesn't want to wait for a connection, it must immediately call <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code> to cancel the operation. </p> </div></article><article class="func"><h4 id="bind-2" onmouseover="document.getElementById('ghlink-bind-2-idp587').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-bind-2-idp587').style.visibility = 'hidden';">  <span class="title-name">bind(Socket, Addr) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Bind a name to a socket.</p> <p> When a socket is created (with <code><a href="#open-2"><span class="code">open</span></a></code>), it has no address assigned to it. <code class="code">bind</code> assigns the address specified by the <code class="code">Addr</code> argument. </p> <p> The rules used for name binding vary between domains. </p> <p> If you bind a socket to an address in for example the 'inet' or 'inet6' address families, with an ephemeral port number (0), and want to know which port that was chosen, you can find out using something like: <code class="code">{ok, #{port := Port}} =</code> <code><a href="#sockname-1"> <span class="code">socket:sockname(Socket)</span> </a></code> </p> </div></article><article class="func"><h4 id="cancel-2" onmouseover="document.getElementById('ghlink-cancel-2-idp588').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-cancel-2-idp588').style.visibility = 'hidden';">  <span class="title-name">cancel(Socket, SelectInfo) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Cancel an asynchronous request.</p> <p> Call this function in order to cancel a previous asynchronous call to, e.g. <code><a href="#recv-3"><span class="code">recv/3</span></a></code>. </p> <p> An ongoing asynchronous operation blocks the socket until the operation has been finished in good order, or until it has been cancelled by this function. </p> <p> Any other process that tries an operation of the same basic type (accept / send / recv) will be enqueued and notified with the regular <code class="code">select</code> mechanism for asynchronous operations when the current operation and all enqueued before it has been completed. </p> <p> If <code class="code">SelectInfo</code> does not match an operation in progress for the calling process, this function returns <code class="code">{error, {invalid, SelectInfo}}</code>. </p> </div></article><article class="func"><h4 id="close-1" onmouseover="document.getElementById('ghlink-close-1-idp589').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-close-1-idp589').style.visibility = 'hidden';">  <span class="title-name">close(Socket) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>    <div class="exports-tube"> <p>Closes the socket.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Note that for e.g. <code class="code">protocol</code> = <code class="code">tcp</code>, most implementations doing a close does not guarantee that any data sent is delivered to the recipient before the close is detected at the remote side. </p> <p>One way to handle this is to use the <code><a href="#shutdown-2"><span class="code">shutdown</span></a></code> function (<code class="code">socket:shutdown(Socket, write)</code>) to signal that no more data is to be sent and then wait for the read side of the socket to be closed.</p> </div> </div> </div></article><article class="func"><h4 id="connect-2" onmouseover="document.getElementById('ghlink-connect-2-idp590').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-2-idp590').style.visibility = 'hidden';">  <span class="title-name">connect(Socket, SockAddr) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="connect-3" onmouseover="document.getElementById('ghlink-connect-3-idp591').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-3-idp591').style.visibility = 'hidden';">  <span class="title-name">connect(Socket, SockAddr, Timeout :: infinity) -&gt;<br> ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p> This function connects the socket to the address specified by the <code class="code">SockAddr</code> argument, and returns when the connection has been established or failed. </p> <p> If a connection attempt is already in progress (by another process), <code class="code">{error, already}</code> is returned. </p> </div></article><article class="func"><h4 id="connect-3" onmouseover="document.getElementById('ghlink-connect-3-idp592').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-3-idp592').style.visibility = 'hidden';">  <span class="title-name">connect(Socket, SockAddr, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p> The same as <code><a href="#connect-2">connect/2</a></code> but returns <code class="code">{error, timeout}</code> if no connection has been established after <code class="code">Timeout</code> milliseconds. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p> Note that when this call has returned <code class="code">{error, timeout}</code> the connection state of the socket is uncertain since the platform's network stack may complete the connection at any time, up to some platform specific time-out. </p> <p> Repeating a connection attempt towards the same address would be ok, but towards a different address could end up with a connection to either address. </p> <p> The safe play would be to close the socket and start over. </p> <p> Also note that all this applies to cancelling a connect call with a no-wait time-out described below. </p> </div> </div> </div></article><article class="func"><h4 id="connect-3" onmouseover="document.getElementById('ghlink-connect-3-idp593').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-3-idp593').style.visibility = 'hidden';">  <span class="title-name">connect(Socket, SockAddr, Timeout :: nowait) -&gt;<br> ok | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="connect-3" onmouseover="document.getElementById('ghlink-connect-3-idp594').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-3-idp594').style.visibility = 'hidden';">  <span class="title-name">connect(Socket, SockAddr, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>      <div class="exports-tube"> <p> The same as <code><a href="#connect-2">connect/2</a></code> but returns promptly. </p> <p> If it is not possible to immediately establish a connection, the function will return <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will later receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> contained in the <code><a href="#type-select_info"><span class="code">SelectInfo</span></a></code> ) when the connection has been completed or failed. A subsequent call to <code><a href="#connect-1"><span class="code">connect/1</span></a></code> will then finalize the connection and return the result. </p> <p> If the time-out argument is <code class="code">SelectHandle</code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If the time-out argument is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If the caller doesn't want to wait for the connection to complete, it must immediately call <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code> to cancel the operation. </p> </div></article><article class="func"><h4 id="connect-1" onmouseover="document.getElementById('ghlink-connect-1-idp595').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-1-idp595').style.visibility = 'hidden';">  <span class="title-name">connect(Socket) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>    <div class="exports-tube"> <p> This function finalizes a connection setup on a socket, after calling <code><a href="#connect-3"> <span class="code">connect(_, _, nowait | select_handle())</span> </a></code> that returned <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and receiving the select message <code class="code">{'$socket', Socket, select, SelectHandle}</code>, and returns whether the connection setup was successful or not. </p> <p> Instead of calling this function, for backwards compatibility, it is allowed to call <code><a href="#connect-2"><span class="code">connect/2,3</span></a></code>, but that incurs more overhead since the connect address and time-out are processed in vain. </p> </div></article><article class="func"><h4 id="cancel_monitor-1" onmouseover="document.getElementById('ghlink-cancel_monitor-1-idp596').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-cancel_monitor-1-idp596').style.visibility = 'hidden';">  <span class="title-name">cancel_monitor(MRef) -&gt; <code>boolean()</code></span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p>If <code class="code">MRef</code> is a reference that the calling process obtained by calling <code><a href="#monitor-1"><span class="code">monitor/1</span></a></code>, this monitor is turned off. If the monitoring is already turned off, nothing happens.</p> <p>The returned value is one of the following:</p> <dl> <dt><strong><code class="code">true</code></strong></dt> <dd> <p>The monitor was found and removed. In this case, no <code class="code">'DOWN'</code> message corresponding to this monitor has been delivered and will not be delivered. </p> </dd> <dt><strong><code class="code">false</code></strong></dt> <dd> <p>The monitor was not found and could not be removed. This probably because a <code class="code">'DOWN'</code> message corresponding to this monitor has already been placed in the caller message queue.</p> </dd> </dl> <p>Failure: It is an error if <code class="code">MRef</code> refers to a monitor started by another process. </p> </div></article><article class="func"><h4 id="getopt-2" onmouseover="document.getElementById('ghlink-getopt-2-idp597').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt-2-idp597').style.visibility = 'hidden';">  <span class="title-name">getopt(X1 :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption :: {Level :: otp, Opt :: <code><a href="#type-otp_socket_option">otp_socket_option()</a></code>}) -&gt;<br> {ok, Value :: <code>term()</code>} | {error, <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p> Gets a socket option from the protocol level <code class="code">otp</code>, which is this implementation's level above the OS protocol layers. </p> <p> See the type <code><a href="#type-otp_socket_option"> otp_socket_option() </a></code> for a description of the options on this level. </p> </div></article><article class="func"><h4 id="getopt-2" onmouseover="document.getElementById('ghlink-getopt-2-idp598').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt-2-idp598').style.visibility = 'hidden';">  <span class="title-name">getopt(X1 :: <code><a href="#type-socket">socket()</a></code>, SocketOption :: <code><a href="#type-socket_option">socket_option()</a></code>) -&gt;<br> {ok, Value :: <code>term()</code>} |<br> {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p> Gets a socket option from one of the OS's protocol levels. See the type <code><a href="#type-socket_option">socket_option()</a></code> for which options that this implementation knows about, how they are related to option names in the OS, and if there are known peculiarities with any of them. </p> <p> What options are valid depends on what kind of socket it is (<code><a href="#type-domain"><span class="code">domain()</span></a></code>, <code><a href="#type-type"><span class="code">type()</span></a></code> and <code><a href="#type-protocol"><span class="code">protocol()</span></a></code>). </p> <p> See the <code><a href="socket_usage#socket_options"> socket options </a></code> chapter of the users guide for more info. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p> Not all options are valid, nor possible to get, on all platforms. That is, even if "we" support an option; it does not mean that the underlying OS does. </p> </div> </div> </div></article><article class="func"><div><h4 id="getopt-3" class="title-link" onmouseover="document.getElementById('ghlink-getopt-3-idm20135').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt-3-idm20135').style.visibility = 'hidden';">  <div class="title-name">getopt(Socket, Level, Opt) -&gt; ok | {error, Reason}</div> <div class="title-since"><span class="since">OTP 22.0</span></div> </h4></div> <div class="exports-tube">  <h2 id="types" class="func-types-title">Types</h2>     <p>Backwards compatibility function.</p> <p> The same as <code><a href="#getopt-2"> <span class="code">getopt(Socket, {Level, Opt})</span> </a></code> </p>  </div></article><article class="func"><h4 id="getopt_native-3" onmouseover="document.getElementById('ghlink-getopt_native-3-idp599').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt_native-3-idp599').style.visibility = 'hidden';">  <span class="title-name">getopt_native(X1 :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption ::<br> <code><a href="#type-socket_option">socket_option()</a></code> |<br> {Level :: <code><a href="#type-level">level()</a></code> | (NativeLevel :: <code>integer()</code>),<br> NativeOpt :: <code>integer()</code>},<br> ValueType :: integer) -&gt;<br> {ok, Value :: <code>integer()</code>} |<br> {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="getopt_native-3" onmouseover="document.getElementById('ghlink-getopt_native-3-idp600').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt_native-3-idp600').style.visibility = 'hidden';">  <span class="title-name">getopt_native(X1 :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption ::<br> <code><a href="#type-socket_option">socket_option()</a></code> |<br> {Level :: <code><a href="#type-level">level()</a></code> | (NativeLevel :: <code>integer()</code>),<br> NativeOpt :: <code>integer()</code>},<br> ValueType :: boolean) -&gt;<br> {ok, Value :: <code>boolean()</code>} |<br> {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="getopt_native-3" onmouseover="document.getElementById('ghlink-getopt_native-3-idp601').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt_native-3-idp601').style.visibility = 'hidden';">  <span class="title-name">getopt_native(X1 :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption ::<br> <code><a href="#type-socket_option">socket_option()</a></code> |<br> {Level :: <code><a href="#type-level">level()</a></code> | (NativeLevel :: <code>integer()</code>),<br> NativeOpt :: <code>integer()</code>},<br> ValueSize :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Value :: <code>binary()</code>} |<br> {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="getopt_native-3" onmouseover="document.getElementById('ghlink-getopt_native-3-idp602').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-getopt_native-3-idp602').style.visibility = 'hidden';">  <span class="title-name">getopt_native(X1 :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption ::<br> <code><a href="#type-socket_option">socket_option()</a></code> |<br> {Level :: <code><a href="#type-level">level()</a></code> | (NativeLevel :: <code>integer()</code>),<br> NativeOpt :: <code>integer()</code>},<br> ValueSpec :: <code>binary()</code>) -&gt;<br> {ok, Value :: <code>binary()</code>} |<br> {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p> Gets a socket option that may be unknown to our implementation, or that has a type not compatible with our implementation, that is; in "native mode". </p> <p> The socket option may be specified with an ordinary <code><a href="#type-socket_option"> <span class="code">socket_option()</span> </a></code> tuple, with a known <code><a href="#type-level"> <span class="code">Level = level()</span> </a></code> and an integer <code class="code">NativeOpt</code>, or with both an integer <code class="code">NativeLevel</code> and <code class="code">NativeOpt</code>. </p> <p> How to decode the option value has to be specified either with <code class="code">ValueType</code>, by specifying the <code class="code">ValueSize</code> for a <code class="code">binary()</code> that will contain the fetched option value, or by specifying a <code class="code">binary()</code> <code class="code">ValueSpec</code> that will be copied to a buffer for the <code class="code">getsockopt()</code> call to write the value in which will be returned as a new <code class="code">binary()</code>. </p> <p> If <code class="code">ValueType</code> is <code class="code">integer</code> a <code class="code">C</code> type <code class="code">(int)</code> will be fetched, if it is <code class="code">boolean</code> a <code class="code">C</code> type <code class="code">(int)</code> will be fetched and converted into a <code class="code">boolean()</code> according to the <code class="code">C</code> implementation. </p> <p> What options are valid depends on what kind of socket it is (<code><a href="#type-domain"><span class="code">domain()</span></a></code>, <code><a href="#type-type"><span class="code">type()</span></a></code> and <code><a href="#type-protocol"><span class="code">protocol()</span></a></code>). </p> <p> The integer values for <code class="code">NativeLevel</code> and <code class="code">NativeOpt</code> as well as the <code class="code">Value</code> encoding has to be deduced from the header files for the running system. </p> </div></article><article class="func"><h4 id="i-0" onmouseover="document.getElementById('ghlink-i-0-idp603').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-0-idp603').style.visibility = 'hidden';">  <span class="title-name">i() -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4> <div class="exports-tube"> <p> Print all sockets in table format in the erlang shell. </p> </div></article><article class="func"><h4 id="i-1" onmouseover="document.getElementById('ghlink-i-1-idp604').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-1-idp604').style.visibility = 'hidden';">  <span class="title-name">i(InfoKeys) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p> Print all sockets in table format in the erlang shell. What information is included is defined by <code class="code">InfoKeys</code>. </p> </div></article><article class="func"><h4 id="i-1" onmouseover="document.getElementById('ghlink-i-1-idp605').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-1-idp605').style.visibility = 'hidden';">  <span class="title-name">i(Domain) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p> Print a selection, based on domain, of the sockets in table format in the erlang shell. </p> </div></article><article class="func"><h4 id="i-1" onmouseover="document.getElementById('ghlink-i-1-idp606').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-1-idp606').style.visibility = 'hidden';">  <span class="title-name">i(Proto) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p> Print a selection, based on protocol, of the sockets in table format in the erlang shell. </p> </div></article><article class="func"><h4 id="i-1" onmouseover="document.getElementById('ghlink-i-1-idp607').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-1-idp607').style.visibility = 'hidden';">  <span class="title-name">i(Type) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p> Print a selection, based on type, of the sockets in table format in the erlang shell. </p> </div></article><article class="func"><h4 id="i-2" onmouseover="document.getElementById('ghlink-i-2-idp608').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-2-idp608').style.visibility = 'hidden';">  <span class="title-name">i(Domain, InfoKeys) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>    <div class="exports-tube"> <p> Print a selection, based on domain, of the sockets in table format in the erlang shell. What information is included is defined by <code class="code">InfoKeys</code>. </p> </div></article><article class="func"><h4 id="i-2" onmouseover="document.getElementById('ghlink-i-2-idp609').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-2-idp609').style.visibility = 'hidden';">  <span class="title-name">i(Proto, InfoKeys) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>    <div class="exports-tube"> <p> Print a selection, based on domain, of the sockets in table format in the erlang shell. What information is included is defined by <code class="code">InfoKeys</code>. </p> </div></article><article class="func"><h4 id="i-2" onmouseover="document.getElementById('ghlink-i-2-idp610').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-2-idp610').style.visibility = 'hidden';">  <span class="title-name">i(Type, InfoKeys) -&gt; ok</span><div class="title-since"><span class="since">OTP 24.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>    <div class="exports-tube"> <p> Print a selection, based on type, of the sockets in table format in the erlang shell. What information is included is defined by <code class="code">InfoKeys</code>. </p> </div></article><article class="func"><h4 id="info-0" onmouseover="document.getElementById('ghlink-info-0-idp611').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-info-0-idp611').style.visibility = 'hidden';">  <span class="title-name">info() -&gt; <code><a href="#type-info">info()</a></code></span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p>Get miscellaneous info about the socket library.</p> <p> The function returns a map with each info item as a key-value binding. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p> In order to ensure data integrity, mutex'es are taken when needed. So, do not call this function often. </p> </div> </div> </div></article><article class="func"><h4 id="info-1" onmouseover="document.getElementById('ghlink-info-1-idp612').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-info-1-idp612').style.visibility = 'hidden';">  <span class="title-name">info(Socket) -&gt; <code><a href="#type-socket_info">socket_info()</a></code></span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p>Get miscellaneous info about the socket.</p> <p>The function returns a map with each info item as a key-value binding. It reflects the "current" state of the socket. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>In order to ensure data integrity, mutex'es are taken when needed. So, do not call this function often. </p> </div> </div> </div></article><article class="func"><h4 id="ioctl-2" onmouseover="document.getElementById('ghlink-ioctl-2-idp613').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-ioctl-2-idp613').style.visibility = 'hidden';">  <span class="title-name">ioctl(Socket, GetRequest) -&gt; {ok, IFConf} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.2</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>      <div class="exports-tube"> <p>Retrieve socket (device) parameters.</p> </div></article><article class="func"><h4 id="ioctl-3" onmouseover="document.getElementById('ghlink-ioctl-3-idp614').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-ioctl-3-idp614').style.visibility = 'hidden';">  <span class="title-name">ioctl(Socket, GetRequest, NameOrIndex) -&gt;<br> {ok, Result} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.2</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p>Retrieve socket (device) parameters. This function retrieves a specific parameter, according to <code class="code">GetRequest</code> argument. The third argument is the (lookup) "key", identifying the interface (usually the name of the interface).</p> <dl> <dt><strong><code class="code">gifname</code></strong></dt> <dd> <p>Get the name of the interface with the specified index (integer()). </p> <p>Result, name of the interface, is a <code class="code">string()</code>. </p> </dd> <dt><strong><code class="code">gifindex</code></strong></dt> <dd> <p>Get the index of the interface with the specified name. </p> <p>Result, interface index, is a <code class="code">integer()</code>. </p> </dd> <dt><strong><code class="code">gifaddr</code></strong></dt> <dd> <p>Get the address of the interface with the specified name. Result, address of the interface, is a <code class="code">socket:sockaddr()</code>. </p> </dd> <dt><strong><code class="code">gifdstaddr</code></strong></dt> <dd> <p>Get the destination address of the point-to-point interface with the specified name. </p> <p>Result, destination address of the interface, is a <code class="code">socket:sockaddr()</code>. </p> </dd> <dt><strong><code class="code">gifbrdaddr</code></strong></dt> <dd> <p>Get the droadcast address for the interface with the specified name. </p> <p>Result, broadcast address of the interface, is a <code class="code">socket:sockaddr()</code>. </p> </dd> <dt><strong><code class="code">gifnetmask</code></strong></dt> <dd> <p>Get the network mask for the interface with the specified name. </p> <p>Result, network mask of the interface, is a <code class="code">socket:sockaddr()</code>. </p> </dd> <dt><strong><code class="code">gifhwaddr</code></strong></dt> <dd> <p>Get the hardware address for the interface with the specified name. </p> <p>Result, hardware address of the interface, is a <code class="code">socket:sockaddr()</code>. The family field contains the 'ARPHRD' device type (or an integer). </p> </dd> <dt><strong><code class="code">gifmtu</code></strong></dt> <dd> <p>Get the MTU (Maximum Transfer Unit) for the interface with the specified name. </p> <p>Result, MTU of the interface, is an <code class="code">integer()</code>. </p> </dd> <dt><strong><code class="code">giftxqlen</code></strong></dt> <dd> <p>Get the transmit queue length of the interface with the specified name. </p> <p>Result, transmit queue length of the interface, is an <code class="code">integer()</code>. </p> </dd> <dt><strong><code class="code">gifflags</code></strong></dt> <dd> <p>Get the active flag word of the interface with the specified name. </p> <p>Result, the active flag word of the interface, is an list of <code class="code">socket:ioctl_device_flag() | integer()</code>. </p> </dd> </dl> </div></article><article class="func"><h4 id="ioctl-4" onmouseover="document.getElementById('ghlink-ioctl-4-idp615').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-ioctl-4-idp615').style.visibility = 'hidden';">  <span class="title-name">ioctl(Socket, SetRequest, Name, Value) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.2</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p>Set socket (device) parameters. This function sets a specific parameter, according to <code class="code">SetRequest</code> argument. The third argument is the "key", identifying the interface (usually the name of the interface), and the fourth is the "new" value.</p> <p>These are privileged operation's. </p> <dl> <dt><strong><code class="code">sifflags</code></strong></dt> <dd> <p>Set the the active flag word, <code class="code">#{Flag =&gt; boolean()}</code>, of the interface with the specified name. </p> <p>Each flag to be changed, should be added to the value map, with the value <code class="code">'true'</code> if the flag (<code class="code">Flag</code>) should be set and <code class="code">'false'</code> if the flag should be reset. </p> </dd> <dt><strong><code class="code">sifaddr</code></strong></dt> <dd> <p>Set the address, <code class="code">sockaddr()</code>, of the interface with the specified name. </p> </dd> <dt><strong><code class="code">sifdstaddr</code></strong></dt> <dd> <p>Set the destination address, <code class="code">sockaddr()</code>, of a point-to-point interface with the specified name. </p> </dd> <dt><strong><code class="code">sifbrdaddr</code></strong></dt> <dd> <p>Set the broadcast address, <code class="code">sockaddr()</code>, of the interface with the specified name. </p> </dd> <dt><strong><code class="code">sifnetmask</code></strong></dt> <dd> <p>Set the network mask, <code class="code">sockaddr()</code>, of the interface with the specified name. </p> </dd> <dt><strong><code class="code">sifmtu</code></strong></dt> <dd> <p>Set the MTU (Maximum Transfer Unit), <code class="code">integer()</code>, for the interface with the specified name. </p> </dd> <dt><strong><code class="code">siftxqlen</code></strong></dt> <dd> <p>Set the transmit queue length, <code class="code">integer()</code>, of the interface with the specified name. </p> </dd> </dl> </div></article><article class="func"><h4 id="is_supported-1" onmouseover="document.getElementById('ghlink-is_supported-1-idp616').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-is_supported-1-idp616').style.visibility = 'hidden';">  <span class="title-name">is_supported(Key1 :: <code>term()</code>) -&gt; <code>boolean()</code></span><div class="title-since"><span class="since">OTP 23.0</span></div> </h4> <h4 id="is_supported-2" onmouseover="document.getElementById('ghlink-is_supported-2-idp617').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-is_supported-2-idp617').style.visibility = 'hidden';">  <span class="title-name">is_supported(Key1 :: <code>term()</code>, Key2 :: <code>term()</code>) -&gt; <code>boolean()</code></span><div class="title-since"><span class="since">OTP 23.0</span></div> </h4> <div class="exports-tube"> <p> This function retrieves information about what the platform supports, such as if SCTP is supported, or if a socket options are supported. </p> <p> For keys other than the known <code class="code">false</code> is returned. Note that in a future version or on a different platform there might be more supported items. </p> <p> This functions returns a <code class="code">boolean</code> corresponding to what <code><a href="#supports-0"><span class="code">supports/0-2</span></a></code> reports for the same <code class="code">Key1</code> (and <code class="code">Key2</code>). </p> </div></article><article class="func"><h4 id="listen-1" onmouseover="document.getElementById('ghlink-listen-1-idp618').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-listen-1-idp618').style.visibility = 'hidden';">  <span class="title-name">listen(Socket) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="listen-2" onmouseover="document.getElementById('ghlink-listen-2-idp619').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-listen-2-idp619').style.visibility = 'hidden';">  <span class="title-name">listen(Socket, Backlog) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Listen for connections on a socket.</p> </div></article><article class="func"><h4 id="monitor-1" onmouseover="document.getElementById('ghlink-monitor-1-idp620').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-monitor-1-idp620').style.visibility = 'hidden';">  <span class="title-name">monitor(Socket) -&gt; <code>reference()</code></span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p>Start monitor the socket <code class="code">Socket</code>. </p> <p>If the monitored socket does not exist or when the monitor is triggered, a <code class="code">'DOWN'</code> message is sent that has the following pattern:</p> <pre data-language="erlang">{'DOWN', MonitorRef, socket, Object, Info}</pre> <p>In the monitor message <code class="code">MonitorRef</code> and <code class="code">Type</code> are the same as described earlier, and:</p> <dl> <dt><strong><code class="code">Object</code></strong></dt> <dd> <p>The monitored entity, socket, which triggered the event. </p> </dd> <dt><strong><code class="code">Info</code></strong></dt> <dd> <p>Either the termination reason of the socket or <code class="code">nosock</code> (socket <code class="code">Socket</code> did not exist at the time of monitor creation). </p> </dd> </dl> <p>Making several calls to <code class="code">socket:monitor/1</code> for the same <code class="code">Socket</code> is not an error; it results in as many independent monitoring instances. </p> </div></article><article class="func"><h4 id="number_of-0" onmouseover="document.getElementById('ghlink-number_of-0-idp621').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-number_of-0-idp621').style.visibility = 'hidden';">  <span class="title-name">number_of() -&gt; <code>integer() &gt;= 0</code></span><div class="title-since"><span class="since">OTP 22.3</span></div> </h4> <div class="exports-tube"> <p>Returns the number of active sockets.</p> </div></article><article class="func"><h4 id="open-1" onmouseover="document.getElementById('ghlink-open-1-idp622').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-open-1-idp622').style.visibility = 'hidden';">  <span class="title-name">open(FD) -&gt; {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 23.0</span></div> </h4> <h4 id="open-2" onmouseover="document.getElementById('ghlink-open-2-idp623').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-open-2-idp623').style.visibility = 'hidden';">  <span class="title-name">open(FD, Opts) -&gt; {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 23.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>      <div class="exports-tube"> <p> Creates an endpoint (socket) for communication based on an already existing file descriptor. The function attempts to retrieve <code class="code">domain</code>, <code class="code">type</code> and <code class="code">protocol</code> from the system. This is however not possible on all platforms, and they should then be specified in <code class="code">Opts</code>. </p> <p>The <code class="code">Opts</code> argument is intended for providing extra information for the open call:</p> <dl> <dt><strong> <code class="code">domain</code> </strong></dt> <dd> <p> Which protocol domain is the descriptor of. See also <code><a href="#open-3"><span class="code">open/2,3,4</span></a></code>. </p> </dd> <dt><strong> <code class="code">type</code> </strong></dt> <dd> <p>Which protocol type type is the descriptor of.</p> <p> See also <code><a href="#open-3"><span class="code">open/2,3,4</span></a></code>. </p> </dd> <dt><strong> <code class="code">protocol</code> </strong></dt> <dd> <p> Which protocol is the descriptor of. The atom <code class="code">default</code> is equivalent to the integer protocol number <code class="code">0</code> which means the default protocol for a given domain and type. </p> <p> If the protocol can not be retrieved from the platform for the socket, and <code class="code">protocol</code> is not specified, the default protocol is used, which may or may not be correct. </p> <p> See also <code><a href="#open-3"><span class="code">open/2,3,4</span></a></code>. </p> </dd> <dt><strong><code class="code">dup</code></strong></dt> <dd> <p>Shall the provided descriptor be duplicated (dup) or not. <br>Defaults to <code class="code">true</code>. </p> </dd> <dt><strong><code class="code">debug</code></strong></dt> <dd> <p>Enable or disable debug during the open call. <br>Defaults to <code class="code">false</code>. </p> </dd> <dt><strong><code class="code">use_registry&gt;</code></strong></dt> <dd> <p>Enable or disable use of the socket registry for this socket. This overrides the global value. <br>Defaults to the global value, see <code><a href="#use_registry-1"><span class="code">use_registry/1</span></a></code>. </p> </dd> </dl> <div class="note"> <div class="label">Note</div> <div class="content">

<p>This function should be used with care! </p> <p> On some platforms it is <strong>necessary</strong> to provide <code class="code">domain</code>, <code class="code">type</code> and <code class="code">protocol</code> since they cannot be retrieved from the platform. </p> </div> </div> </div></article><article class="func"><h4 id="open-2" onmouseover="document.getElementById('ghlink-open-2-idp624').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-open-2-idp624').style.visibility = 'hidden';">  <span class="title-name">open(Domain, Type) -&gt; {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="open-3" onmouseover="document.getElementById('ghlink-open-3-idp625').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-open-3-idp625').style.visibility = 'hidden';">  <span class="title-name">open(Domain, Type, Opts) -&gt; {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p>Creates an endpoint (socket) for communication.</p> <p> The same as <code class="code">open(Domain, Type, default)</code> and <code class="code">open(Domain, Type, default, Opts)</code> respectively. </p> </div></article><article class="func"><h4 id="open-3" onmouseover="document.getElementById('ghlink-open-3-idp626').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-open-3-idp626').style.visibility = 'hidden';">  <span class="title-name">open(Domain, Type, Protocol) -&gt; {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="open-4" onmouseover="document.getElementById('ghlink-open-4-idp627').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-open-4-idp627').style.visibility = 'hidden';">  <span class="title-name">open(Domain, Type, Protocol, Opts) -&gt;<br> {ok, Socket} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p>Creates an endpoint (socket) for communication.</p> <p> <code class="code">Domain</code> and <code class="code">Type</code> may be <code class="code">integer()</code>s, as defined in the platform's header files. The same goes for <code class="code">Protocol</code> as defined in the platform's <code class="code">services(5)</code> database. See also the OS man page for the library call <code class="code">socket(2)</code>. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p> For some combinations of <code class="code">Domain</code> and <code class="code">Type</code> the platform has got a default protocol that can be selected with <code class="code">Protocol = default</code>, and the platform may allow or require selecting the default protocol, a specific protocol, or either. </p> <p>Examples:</p> <dl> <dt><strong><code class="code">socket:open(inet, stream, tcp)</code></strong></dt> <dd> <p> It is common that for protocol domain and type <code class="code">inet,stream</code> it is allowed to select the <code class="code">tcp</code> protocol although that mostly is the default. </p> </dd> <dt><strong><code class="code">socket:open(local, dgram)</code></strong></dt> <dd> <p> It is common that for the protocol domain <code class="code">local</code> it is mandatory to not select a protocol, that is; to select the default protocol. </p> </dd> </dl> </div> </div> <p>The <code class="code">Opts</code> argument is intended for "other" options. The supported option(s) are described below:</p> <dl> <dt><strong><code class="code">netns: string()</code></strong></dt> <dd> <p>Used to set the network namespace during the open call. Only supported on the Linux platform. </p> </dd> <dt><strong><code class="code">debug: boolean()</code></strong></dt> <dd> <p>Enable or disable debug during the open call. <br>Defaults to <code class="code">false</code>. </p> </dd> <dt><strong><code class="code">use_registry: boolean()</code></strong></dt> <dd> <p>Enable or disable use of the socket registry for this socket. This overrides the global value. <br>Defaults to the global value, see <code><a href="#use_registry-1"><span class="code">use_registry/1</span></a></code>. </p> </dd> </dl> </div></article><article class="func"><h4 id="peername-1" onmouseover="document.getElementById('ghlink-peername-1-idp628').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-peername-1-idp628').style.visibility = 'hidden';">  <span class="title-name">peername(Socket) -&gt; {ok, SockAddr} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Returns the address of the peer connected to the socket.</p> </div></article><article class="func"><h4 id="recv-1" onmouseover="document.getElementById('ghlink-recv-1-idp629').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-1-idp629').style.visibility = 'hidden';">  <span class="title-name">recv(Socket) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recv-2" onmouseover="document.getElementById('ghlink-recv-2-idp630').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-2-idp630').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Flags) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recv-2" onmouseover="document.getElementById('ghlink-recv-2-idp631').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-2-idp631').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp632').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp632').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Flags, Timeout :: infinity) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp633').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp633').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Flags) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp634').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp634').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Timeout :: infinity) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recv-4" onmouseover="document.getElementById('ghlink-recv-4-idp635').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-4-idp635').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Flags, Timeout :: infinity) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p> Receives data from a socket, waiting for it to arrive. </p> <p> The argument <code class="code">Length</code> specifies how many bytes to receive, with the special case <code class="code">0</code> meaning "all available". </p> <p> For a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code> this call will not return until all requested data can be delivered, or if "all available" data was requested when the first data chunk arrives. </p> <p> The message <code class="code">Flags</code> may be symbolic <code><a href="#type-msg_flag"><span class="code">msg_flag()</span></a></code>s and/or <code class="code">integer()</code>s, as in the platform's appropriate header files. The values of all symbolic flags and integers are or:ed together. </p> <p> When there is a socket error this function returns <code class="code">{error, Reason}</code>, or if some data arrived before the error; <code class="code">{error, {Reason, Data}}</code>. </p> </div></article><article class="func"><h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp636').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp636').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp637').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp637').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recv-4" onmouseover="document.getElementById('ghlink-recv-4-idp638').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-4-idp638').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Data} | {error, Reason} | {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p> Receives data from a socket, waiting at most <code class="code">Timeout</code> milliseconds for it to arrive. </p> <p> The same as <code><a href="#recv-infinity"> infinite time-out <span class="code">recv/1,2,3,4</span> </a></code> but returns <code class="code">{error, timeout}</code> or <code class="code">{error, {timeout, Data}}</code> after <code class="code">Timeout</code> milliseconds, if the requested data has not been delivered. </p> </div></article><article class="func"><h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp639').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp639').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Flags, SelectHandle :: nowait) -&gt;<br> {ok, Data} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, Data}} |<br> {error, Reason} |<br> {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp640').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp640').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Data} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, Data}} |<br> {error, Reason} |<br> {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp641').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp641').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, SelectHandle :: nowait) -&gt;<br> {ok, Data} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, Data}} |<br> {error, Reason} |<br> {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recv-3" onmouseover="document.getElementById('ghlink-recv-3-idp642').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-3-idp642').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Data} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, Data}} |<br> {error, Reason} |<br> {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recv-4" onmouseover="document.getElementById('ghlink-recv-4-idp643').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-4-idp643').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Flags, SelectHandle :: nowait) -&gt;<br> {ok, Data} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, Data}} |<br> {error, Reason} |<br> {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recv-4" onmouseover="document.getElementById('ghlink-recv-4-idp644').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recv-4-idp644').style.visibility = 'hidden';">  <span class="title-name">recv(Socket, Length, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Data} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, Data}} |<br> {error, Reason} |<br> {error, {Reason, Data}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Receives data from a socket, but returns a select continuation if the data could not be returned immediately. </p> <p> The same as <code><a href="#recv-infinity"> infinite time-out <span class="code">recv/1,2,3,4</span> </a></code> but if the data cannot be delivered immediately, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when data has arrived. A subsequent call to <code class="code">recv/1,2,3,4</code> will then return the data. </p> <p> If the time-out argument is <code class="code">SelectHandle</code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If the time-out argument is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> Note that for a socket of type <code class="code">stream</code>, if <code class="code">Length &gt; 0</code> and only part of that amount of data is available, the function will return <code><a href="#type-select_info"> <span class="code">{ok, {Data, SelectInfo</span> </a></code> with partial data. If the caller doesn't want to wait for more data, it must immediately call <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code> to cancel the operation. </p> </div></article><article class="func"><h4 id="recvfrom-1" onmouseover="document.getElementById('ghlink-recvfrom-1-idp645').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-1-idp645').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket) -&gt; {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-2" onmouseover="document.getElementById('ghlink-recvfrom-2-idp646').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-2-idp646').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, Flags) -&gt; {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvfrom-2" onmouseover="document.getElementById('ghlink-recvfrom-2-idp647').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-2-idp647').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz) -&gt; {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp648').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp648').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, Flags, Timeout :: infinity) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp649').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp649').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Flags) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp650').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp650').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Timeout :: infinity) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-4" onmouseover="document.getElementById('ghlink-recvfrom-4-idp651').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-4-idp651').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Flags, Timeout :: infinity) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Receive a message from a socket, waiting for it to arrive. </p> <p> The function returns when a message is received, or when there is a socket error. Argument <code class="code">BufSz</code> specifies the number of bytes for the receive buffer. If the buffer size is too small, the message will be truncated. </p> <p> If <code class="code">BufSz</code> is not specified or <code class="code">0</code>, a default buffer size is used, which can be set by <code><a href="#setopt-3"> <span class="code">socket:setopt(Socket, {otp,recvbuf}, BufSz)</span>. </a></code> </p> <p> If it is impossible to know the appropriate buffer size, it may be possible to use the receive <code><a href="#type-msg_flag">message flag</a></code> <code class="code">peek</code>. When this flag is used, the message is <strong>not</strong> "consumed" from the underlying buffers, so another <code class="code">recvfrom/1,2,3,4</code> call is needed, possibly with an adjusted buffer size. </p> <p> The message <code class="code">Flags</code> may be symbolic <code><a href="#type-msg_flag"><span class="code">msg_flag()</span></a></code>s and/or <code class="code">integer()</code>s, as in the platform's appropriate header files. The values of all symbolic flags and integers are or:ed together. </p> </div></article><article class="func"><h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp652').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp652').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp653').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp653').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvfrom-4" onmouseover="document.getElementById('ghlink-recvfrom-4-idp654').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-4-idp654').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, {Source, Data}} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Receives a message from a socket, waiting at most <code class="code">Timeout</code> milliseconds for it to arrive. </p> <p> The same as <code><a href="#recvfrom-infinity"> infinite time-out <span class="code">recvfrom/1,2,3,4</span> </a></code> but returns <code class="code">{error, timeout}</code> after <code class="code">Timeout</code> milliseconds, if no message has been delivered. </p> </div></article><article class="func"><h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp655').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp655').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, Flags, SelectHandle :: nowait) -&gt;<br> {ok, {Source, Data}} |<br> {select, SelectInfo} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp656').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp656').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, {Source, Data}} |<br> {select, SelectInfo} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp657').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp657').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, SelectHandle :: nowait) -&gt;<br> {ok, {Source, Data}} |<br> {select, SelectInfo} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recvfrom-3" onmouseover="document.getElementById('ghlink-recvfrom-3-idp658').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-3-idp658').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, {Source, Data}} |<br> {select, SelectInfo} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvfrom-4" onmouseover="document.getElementById('ghlink-recvfrom-4-idp659').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-4-idp659').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Flags, SelectHandle :: nowait) -&gt;<br> {ok, {Source, Data}} |<br> {select, SelectInfo} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recvfrom-4" onmouseover="document.getElementById('ghlink-recvfrom-4-idp660').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvfrom-4-idp660').style.visibility = 'hidden';">  <span class="title-name">recvfrom(Socket, BufSz, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, {Source, Data}} |<br> {select, SelectInfo} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>         <div class="exports-tube"> <p> Receives a message from a socket, but returns a select continuation if no message could be returned immediately. </p> <p> The same as <code><a href="#recvfrom-infinity"> infinite time-out <span class="code">recvfrom/1,2,3,4</span> </a></code> but if no message cannot delivered immediately, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when data has arrived. A subsequent call to <code class="code">recvfrom/1,2,3,4</code> will then return the message. </p> <p> If the time-out argument is <code class="code">SelectHandle</code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If the time-out argument is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If the caller doesn't want to wait for the data, it must immediately call <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code> to cancel the operation. </p> </div></article><article class="func"><h4 id="recvmsg-1" onmouseover="document.getElementById('ghlink-recvmsg-1-idp661').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-1-idp661').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket) -&gt; {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-2" onmouseover="document.getElementById('ghlink-recvmsg-2-idp662').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-2-idp662').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Flags) -&gt; {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-2" onmouseover="document.getElementById('ghlink-recvmsg-2-idp663').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-2-idp663').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Timeout :: infinity) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-3" onmouseover="document.getElementById('ghlink-recvmsg-3-idp664').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-3-idp664').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Flags, Timeout :: infinity) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-3" onmouseover="document.getElementById('ghlink-recvmsg-3-idp665').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-3-idp665').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz) -&gt; {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-4" onmouseover="document.getElementById('ghlink-recvmsg-4-idp666').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-4-idp666').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, Timeout :: infinity) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvmsg-5" onmouseover="document.getElementById('ghlink-recvmsg-5-idp667').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-5-idp667').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, Flags, Timeout :: infinity) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Receive a message from a socket, waiting for it to arrive. </p> <p> The function returns when a message is received, or when there is a socket error. Arguments <code class="code">BufSz</code> and <code class="code">CtrlSz</code> specifies the number of bytes for the receive buffer and the control message buffer. If the buffer size(s) is(are) too small, the message and/or control message list will be truncated. </p> <p> If <code class="code">BufSz</code> is not specified or <code class="code">0</code>, a default buffer size is used, which can be set by <code><a href="#setopt-3"> <span class="code">socket:setopt(Socket, {otp,recvbuf}, BufSz)</span>. </a></code> The same applies to <code class="code">CtrlSz</code> and <code><a href="#setopt-3"> <span class="code">socket:setopt(Socket, {otp,recvctrlbuf}, CtrlSz)</span>. </a></code> </p> <p> If it is impossible to know the appropriate buffer size, it may be possible to use the receive <code><a href="#type-msg_flag">message flag</a></code> <code class="code">peek</code>. When this flag is used, the message is <strong>not</strong> "consumed" from the underlying buffers, so another <code class="code">recvfrom/1,2,3,4,5</code> call is needed, possibly with an adjusted buffer size. </p> <p> The message <code class="code">Flags</code> may be symbolic <code><a href="#type-msg_flag"><span class="code">msg_flag()</span></a></code>s and/or <code class="code">integer()</code>s, as in the platform's appropriate header files. The values of all symbolic flags and integers are or:ed together. </p> </div></article><article class="func"><h4 id="recvmsg-2" onmouseover="document.getElementById('ghlink-recvmsg-2-idp668').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-2-idp668').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-3" onmouseover="document.getElementById('ghlink-recvmsg-3-idp669').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-3-idp669').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="recvmsg-4" onmouseover="document.getElementById('ghlink-recvmsg-4-idp670').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-4-idp670').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvmsg-5" onmouseover="document.getElementById('ghlink-recvmsg-5-idp671').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-5-idp671').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, Flags,<br> Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, Msg} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Receives a message from a socket, waiting at most <code class="code">Timeout</code> milliseconds for it to arrive. </p> <p> The same as <code><a href="#recvmsg-infinity">recvmsg/1,2,3,4,5</a></code> but returns <code class="code">{error, timeout}</code> after <code class="code">Timeout</code> milliseconds, if no message has been delivered. </p> </div></article><article class="func"><h4 id="recvmsg-2" onmouseover="document.getElementById('ghlink-recvmsg-2-idp672').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-2-idp672').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Timeout :: nowait) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recvmsg-2" onmouseover="document.getElementById('ghlink-recvmsg-2-idp673').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-2-idp673').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvmsg-3" onmouseover="document.getElementById('ghlink-recvmsg-3-idp674').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-3-idp674').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Flags, Timeout :: nowait) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recvmsg-3" onmouseover="document.getElementById('ghlink-recvmsg-3-idp675').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-3-idp675').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvmsg-4" onmouseover="document.getElementById('ghlink-recvmsg-4-idp676').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-4-idp676').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, SelectHandle :: nowait) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvmsg-4" onmouseover="document.getElementById('ghlink-recvmsg-4-idp677').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-4-idp677').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="recvmsg-5" onmouseover="document.getElementById('ghlink-recvmsg-5-idp678').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-5-idp678').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, Flags, SelectHandle :: nowait) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="recvmsg-5" onmouseover="document.getElementById('ghlink-recvmsg-5-idp679').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-recvmsg-5-idp679').style.visibility = 'hidden';">  <span class="title-name">recvmsg(Socket, BufSz, CtrlSz, Flags,<br> SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, Msg} | {select, SelectInfo} | {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>         <div class="exports-tube"> <p> Receives a message from a socket, but returns a select continuation if no message could be returned immediately. </p> <p> The same as <code><a href="#recvfrom-infinity"> infinite time-out <span class="code">recvfrom/1,2,3,4</span> </a></code> but if no message cannot delivered immediately, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when data has arrived. A subsequent call to <code class="code">recvmsg/1,2,3,4,5</code> will then return the data. </p> <p> If the time-out argument is <code class="code">SelectHandle</code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If the time-out argument is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If the caller doesn't want to wait for the data, it must immediately call <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code> to cancel the operation. </p> </div></article><article class="func"><h4 id="send-2" onmouseover="document.getElementById('ghlink-send-2-idp680').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-2-idp680').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="send-3" onmouseover="document.getElementById('ghlink-send-3-idp681').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-3-idp681').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Flags) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="send-3" onmouseover="document.getElementById('ghlink-send-3-idp682').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-3-idp682').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp683').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp683').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Flags, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p> Sends data on a connected socket, waiting for it to be sent. </p> <p> This call will not return until the <code class="code">Data</code> has been accepted by the platform's network layer, or it reports an error. </p> <p> The message <code class="code">Flags</code> may be symbolic <code><a href="#type-msg_flag"><span class="code">msg_flag()</span></a></code>s and/or <code class="code">integer()</code>s, matching the platform's appropriate header files. The values of all symbolic flags and integers are or:ed together. </p> <p> The <code class="code">Data</code>, if it is not a <code class="code">binary()</code>, is copied into one before calling the platform network API, because a single buffer is required. A returned <code class="code">RestData</code> is a sub binary of this data binary. </p> <p> The return value indicates the result from the platform's network layer: </p> <dl> <dt><strong><code class="code">ok</code></strong></dt> <dd> <p> All data has been accepted. </p> </dd> <dt><strong><code class="code">{ok, RestData}</code></strong></dt> <dd> <p> Not all data has been accepted, but no error has been reported. <code class="code">RestData</code> is the tail of <code class="code">Data</code> that has not been accepted. </p> <p> This cannot happen for a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code> where a partially successful send is retried until the data is either accepted or there is an error. </p> <p> For a socket of <code><a href="#type-type">type <span class="code">dgram</span></a></code> this should probably also not happen since a message that cannot be passed atomically should render an error. </p> <p> It is nevertheless possible for the platform's network layer to return this. </p> </dd> <dt><strong><code class="code">{error, Reason}</code></strong></dt> <dd> <p> An error has been reported and no data has been accepted. The <code><a href="#type-posix"><span class="code">posix()</span></a></code> <code class="code">Reasons</code> are from the platform's network layer. <code class="code">closed</code> means that this socket library knows that the socket is closed, and <code><a href="#type-invalid"><span class="code">invalid()</span></a></code> means that something about an argument is invalid. </p> </dd> <dt><strong> <code class="code">{error, {Reason, RestData}}</code> </strong></dt> <dd> <p> An error has been reported but before that some data was accepted. <code class="code">RestData</code> is the tail of <code class="code">Data</code> that has not been accepted. See <code class="code">{error, Reason}</code> above. </p> <p> This can only happen for a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code> when a partially successful send is retried until there is an error. </p> </dd> </dl> </div></article><article class="func"><h4 id="send-3" onmouseover="document.getElementById('ghlink-send-3-idp684').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-3-idp684').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp685').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp685').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p> Sends data on a connected socket, waiting at most <code class="code">Timeout</code> milliseconds for it to be sent. </p> <p> The same as <code><a href="#send-infinity"> infinite time-out <span class="code">send/2,3,4</span> </a></code> but returns <code class="code">{error, timeout}</code> or <code class="code">{error, {timeout, RestData}}</code> after <code class="code">Timeout</code> milliseconds, if no <code class="code">Data</code> or only some of it was accepted by the platform's network layer. </p> </div></article><article class="func"><h4 id="send-3" onmouseover="document.getElementById('ghlink-send-3-idp686').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-3-idp686').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="send-3" onmouseover="document.getElementById('ghlink-send-3-idp687').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-3-idp687').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp688').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp688').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Flags, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp689').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp689').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Sends data on a connected socket, but returns a select continuation if the data could not be sent immediately. </p> <p> The same as <code><a href="#send-infinity"> infinite time-out <span class="code">send/2,3</span> </a></code> but if the data is not immediately accepted by the platform network layer, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> that was contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when there is room for more data. A subsequent call to <code class="code">send/2-4</code> will then send the data. </p> <p> If <code class="code">SelectHandle</code> is a <code><a href="#type-select_handle"><span class="code">select_handle()</span></a></code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If <code class="code">SelectHandle</code> is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If some of the data was sent, the function will return <code><a href="#type-select_info"> <span class="code"> {ok, {RestData, SelectInfo}, </span> </a></code> which can only happen for a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code>. If the caller does not want to wait to send the rest of the data, it should immediately cancel the operation with <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code>. </p> </div></article><article class="func"><h4 id="send-3" onmouseover="document.getElementById('ghlink-send-3-idp690').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-3-idp690').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Cont) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp691').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp691').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Cont, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp692').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp692').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Cont, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp693').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp693').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Cont, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="send-4" onmouseover="document.getElementById('ghlink-send-4-idp694').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-send-4-idp694').style.visibility = 'hidden';">  <span class="title-name">send(Socket, Data, Cont, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Continues sending data on a connected socket, where the send operation was initiated by <code><a href="#send-nowait"><span class="code">send/3,4</span></a></code> that returned a <code class="code">SelectInfo</code> continuation. Otherwise like <code><a href="#send-infinity"> infinite time-out <span class="code">send/2,3,4</span> </a></code> , <code><a href="#send-timeout"> limited time-out <span class="code">send/3,4</span> </a></code> or <code><a href="#send-nowait"> nowait <span class="code">send/3,4</span> </a></code> respectively. </p> <p> <code class="code">Cont</code> is the <code class="code">SelectInfo</code> that was returned from the previous <code class="code">send()</code> call. </p> <p> If <code class="code">Data</code> is not a <code class="code">binary()</code>, it will be copied into one, again. </p> <p> The return value indicates the result from the platform's network layer. See <code><a href="#send-infinity"><span class="code">send/2,3,4</span></a></code> and <code><a href="#send-nowait">nowait <span class="code">send/3,4</span></a></code>. </p> </div></article><article class="func"><h4 id="sendmsg-2" onmouseover="document.getElementById('ghlink-sendmsg-2-idp695').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-2-idp695').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendmsg-3" onmouseover="document.getElementById('ghlink-sendmsg-3-idp696').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-3-idp696').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Flags) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendmsg-3" onmouseover="document.getElementById('ghlink-sendmsg-3-idp697').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-3-idp697').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp698').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp698').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Flags, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p> Sends a message on a socket, waiting for it to be sent. </p> <p> The destination, if needed, that is: if the socket is <strong>not</strong> connected, is provided in <code class="code">Msg</code>, which also contains the data to send as a <code>list of binaries</code>. <code class="code">Msg</code> may also contain an list of optional <code><a href="#type-cmsg_send">control messages</a></code> (depending on what the protocol and platform supports). </p> <p> For a connected socket no address field should be present in <code class="code">Msg</code>, the platform may return an error or ignore one. </p> <p> The message data is given to to the platform's network layer in the form of an I/O vector without copying the content. If the number of elements in the I/O vector is larger than allowed on the platform (reported in the <code><a href="#type-info"><span class="code">iov_max</span></a></code> field from <code><a href="#info-0">info/0</a></code>), on a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code> the send is iterated over all elements, but for other socket types the call fails. </p> <p> This call will not return until the data has been handed over to the platform's network layer, or when it reports an error. </p> <p> The message <code class="code">Flags</code> may be symbolic <code><a href="#type-msg_flag"><span class="code">msg_flag()</span></a></code>s and/or <code class="code">integer()</code>s, matching the platform's appropriate header files. The values of all symbolic flags and integers are or:ed together. </p> <p> The return value indicates the result from the platform's network layer. See <code><a href="#send-infinity"><span class="code">send/2,3,4</span></a></code>. </p> </div></article><article class="func"><h4 id="sendmsg-3" onmouseover="document.getElementById('ghlink-sendmsg-3-idp699').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-3-idp699').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp700').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp700').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>       <div class="exports-tube"> <p> Sends a message on a socket, waiting at most <code class="code">Timeout</code> milliseconds for it to be sent. </p> <p> The same as <code><a href="#sendmsg-infinity"> infinite time-out <span class="code">sendmsg/2,3,4</span> </a></code> but returns <code class="code">{error, timeout}</code> or <code class="code">{error, {timeout, RestData}}</code> after <code class="code">Timeout</code> milliseconds, if no data or only some of it was accepted by the platform's network layer. </p> </div></article><article class="func"><h4 id="sendmsg-3" onmouseover="document.getElementById('ghlink-sendmsg-3-idp701').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-3-idp701').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Timeout :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="sendmsg-3" onmouseover="document.getElementById('ghlink-sendmsg-3-idp702').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-3-idp702').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp703').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp703').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Flags, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp704').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp704').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Msg, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Sends a message on a socket, but returns a select continuation if the data could not be sent immediately. </p> <p> The same as <code><a href="#sendmsg-infinity"> infinity time-out <span class="code">sendmsg/2,3</span> </a></code> but if the data is not immediately accepted by the platform network layer, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> that was contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when there is room for more data. A subsequent call to <code class="code">sendmsg/2-4</code> will then send the data. </p> <p> If <code class="code">SelectHandle</code>, is a <code><a href="#type-select_handle"><span class="code">select_handle()</span></a></code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If <code class="code">SelectHandle</code> is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If some of the data was sent, the function will return <code><a href="#type-select_info"> <span class="code"> {ok, {RestData, SelectInfo}, </span> </a></code> which can only happen for a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code>. If the caller does not want to wait to send the rest of the data, it should immediately cancel the operation with <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code>. </p> </div></article><article class="func"><h4 id="sendmsg-3" onmouseover="document.getElementById('ghlink-sendmsg-3-idp705').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-3-idp705').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Data, Cont) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp706').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp706').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Data, Cont, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp707').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp707').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Data, Cont, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp708').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp708').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Data, Cont, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendmsg-4" onmouseover="document.getElementById('ghlink-sendmsg-4-idp709').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendmsg-4-idp709').style.visibility = 'hidden';">  <span class="title-name">sendmsg(Socket, Data, Cont, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Continues sending a message data on a socket, where the send operation was initiated by <code><a href="#sendmsg-nowait"><span class="code">sendmsg/3,4</span></a></code> that returned a <code class="code">SelectInfo</code> continuation. Otherwise like <code><a href="#sendmsg-infinity"> infinite time-out <span class="code">sendmsg/2,3,4</span> </a></code> , <code><a href="#sendmsg-timeout"> limited time-out <span class="code">sendmsg/3,4</span> </a></code> or <code><a href="#sendmsg-nowait"> nowait <span class="code">sendmsg/3,4</span> </a></code> respectively. </p> <p> <code class="code">Cont</code> is the <code class="code">SelectInfo</code> that was returned from the previous <code class="code">sendmsg()</code> call. </p> <p> The return value indicates the result from the platform's network layer. See <code><a href="#send-infinity"><span class="code">send/2,3,4</span></a></code> and <code><a href="#sendmsg-nowait">nowait <span class="code">sendmsg/3,4</span></a></code>. </p> </div></article><article class="func"><h4 id="sendto-3" onmouseover="document.getElementById('ghlink-sendto-3-idp710').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-3-idp710').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp711').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp711').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Flags) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp712').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp712').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendto-5" onmouseover="document.getElementById('ghlink-sendto-5-idp713').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-5-idp713').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Flags, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Sends data on a socket, to the specified destination, waiting for it to be sent. </p> <p> This call will not return until the data has been accepted by the platform's network layer, or it reports an error. </p> <p> If this call is used on a connection mode socket or on a connected socket, the platforms's network layer may return an error or ignore the destination address. </p> <p> The message <code class="code">Flags</code> may be symbolic <code><a href="#type-msg_flag"><span class="code">msg_flag()</span></a></code>s and/or <code class="code">integer()</code>s, matching the platform's appropriate header files. The values of all symbolic flags and integers are or:ed together. </p> <p> The return value indicates the result from the platform's network layer. See <code><a href="#send-infinity"><span class="code">send/2,3,4</span></a></code>. </p> </div></article><article class="func"><h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp714').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp714').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="sendto-5" onmouseover="document.getElementById('ghlink-sendto-5-idp715').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-5-idp715').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Flags, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Sends data on a socket, waiting at most <code class="code">Timeout</code> milliseconds for it to be sent. </p> <p> The same as <code><a href="#sendto-infinity"> infinite time-out <span class="code">sendto/3,4,5</span> </a></code> but returns <code class="code">{error, timeout}</code> or <code class="code">{error, {timeout, RestData}}</code> after <code class="code">Timeout</code> milliseconds, if no <code class="code">Data</code> or only some of it was accepted by the platform's network layer. </p> </div></article><article class="func"><h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp716').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp716').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp717').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp717').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendto-5" onmouseover="document.getElementById('ghlink-sendto-5-idp718').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-5-idp718').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Flags, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 22.1</span></div> </h4> <h4 id="sendto-5" onmouseover="document.getElementById('ghlink-sendto-5-idp719').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-5-idp719').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Dest, Flags, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>         <div class="exports-tube"> <p> Sends data on a socket, but returns a select continuation if the data could not be sent immediately. </p> <p> The same as <code><a href="#sendto-infinity"> infinity time-out <span class="code">sendto/3,4</span> </a></code> but if the data is not immediately accepted by the platform network layer, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> that was contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when there is room for more data. A subsequent call to <code class="code">sendto/3-5</code> will then send the data. </p> <p> If <code class="code">SelectHandle</code> is a <code><a href="#type-select_handle"><span class="code">select_handle()</span></a></code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If <code class="code">SelectHandle</code> is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If some of the data was sent, the function will return <code><a href="#type-select_info"> <span class="code"> {ok, {RestData, SelectInfo}, </span> </a></code> which can only happen for a socket of <code><a href="#type-type">type <span class="code">stream</span></a></code>. If the caller does not want to wait to send the rest of the data, it should immediately cancel the operation with <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code>. </p> </div></article><article class="func"><h4 id="sendto-3" onmouseover="document.getElementById('ghlink-sendto-3-idp720').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-3-idp720').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Cont) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp721').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp721').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Cont, Timeout :: infinity) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason} |<br> {error, {Reason, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp722').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp722').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Cont, Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, RestData}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp723').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp723').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Cont, SelectHandle :: nowait) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendto-4" onmouseover="document.getElementById('ghlink-sendto-4-idp724').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendto-4-idp724').style.visibility = 'hidden';">  <span class="title-name">sendto(Socket, Data, Cont, SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> ok |<br> {ok, RestData} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, RestData}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Continues sending data on a socket, where the send operation was initiated by <code><a href="#sendto-nowait"><span class="code">sendto/4,5</span></a></code> that returned a <code class="code">SelectInfo</code> continuation. Otherwise like <code><a href="#sendto-infinity"> infinite time-out <span class="code">sendto/3,4,5</span> </a></code> , <code><a href="#sendto-timeout"> limited time-out <span class="code">sendto/4,5</span> </a></code> or <code><a href="#sendto-nowait"> nowait <span class="code">sendto/4,5</span> </a></code> respectively. </p> <p> <code class="code">Cont</code> is the <code class="code">SelectInfo</code> that was returned from the previous <code class="code">sendto()</code> call. </p> <p> If <code class="code">Data</code> is not a <code class="code">binary()</code>, it will be copied into one, again. </p> <p> The return value indicates the result from the platform's network layer. See <code><a href="#send-infinity"><span class="code">send/2,3,4</span></a></code> and <code><a href="#sendto-nowait">nowait <span class="code">sendto/4,5</span></a></code>. </p> </div></article><article class="func"><h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp725').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp725').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, FileHandle, Offset, Count, Timeout :: infinity) -&gt;<br> {ok, BytesSent} |<br> {error, Reason} |<br> {error, {Reason, BytesSent}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Sends file data on a socket, to the specified destination, waiting for it to be sent (<strong>"infinite" time-out</strong>). </p> <p> The <code class="code">FileHandle</code> must refer to an open raw file as described in <code><a href="file#open-2"><span class="code">file:open/2</span></a></code>. </p> <p> This call will not return until the data has been accepted by the platform's network layer, or it reports an error. </p> <p> The <code class="code">Offset</code> argument is the file offset to start reading from. The default value is <code class="code">0</code>. </p> <p> The <code class="code">Count</code> argument is the number of bytes to transfer from <code class="code">FileHandle</code> to <code class="code">Socket</code>. If <code class="code">Count =:= 0</code> (the default) the transfer stops at the end of file. </p> <p> The return value indicates the result from the platform's network layer: </p> <dl> <dt><strong><code class="code">{ok, BytesSent}</code></strong></dt> <dd> <p> The transfer completed successfully after <code class="code">BytesSent</code> bytes of data. </p> </dd> <dt><strong><code class="code">{error, Reason}</code></strong></dt> <dd> <p> An error has been reported and no data has been transferred. The <code><a href="#type-posix"><span class="code">posix()</span></a></code> <code class="code">Reasons</code> are from the platform's network layer. <code class="code">closed</code> means that this socket library knows that the socket is closed, and <code><a href="#type-invalid"><span class="code">invalid()</span></a></code> means that something about an argument is invalid. </p> </dd> <dt><strong> <code class="code">{error, {Reason, BytesSent}}</code> </strong></dt> <dd> <p> An error has been reported but before that some data was transferred. See <code class="code">{error, Reason}</code> and <code class="code">{ok, BytesSent}</code> above. </p> </dd> </dl> </div></article><article class="func"><h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp726').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp726').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, FileHandle, Offset, Count,<br> Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, BytesSent} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, BytesSent}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>        <div class="exports-tube"> <p> Sends file data on a socket, waiting at most <code class="code">Timeout</code> milliseconds for it to be sent (<strong>limited time-out</strong>). </p> <p> The same as <code><a href="#sendfile-infinity"> "infinite" time-out <span class="code">sendfile/5</span> </a></code> but returns <code class="code">{error, timeout}</code> or <code class="code">{error, {timeout, BytesSent}}</code> after <code class="code">Timeout</code> milliseconds, if not all file data was transferred by the platform's network layer. </p> </div></article><article class="func"><h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp727').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp727').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, FileHandle, Offset, Count,<br> SelectHandle :: nowait) -&gt;<br> {ok, BytesSent} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, BytesSent}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp728').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp728').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, FileHandle, Offset, Count,<br> SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, BytesSent} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, BytesSent}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>         <div class="exports-tube"> <p> Sends file data on a socket, but returns a select continuation if the data could not be sent immediately (<strong>nowait</strong>). </p> <p> The same as <code><a href="#sendfile-infinity"> "infinite" time-out <span class="code">sendfile/5</span> </a></code> but if the data is not immediately accepted by the platform network layer, the function returns <code><a href="#type-select_info"><span class="code">{select, SelectInfo}</span></a></code>, and the caller will then receive a select message, <code class="code">{'$socket', Socket, select, SelectHandle}</code> ( with the <code><a href="socket#type-select_handle"><span class="code">SelectHandle</span></a></code> that was contained in the <code><a href="#type-select_info"> <span class="code">SelectInfo</span> </a></code> ) when there is room for more data. Then a call to <code><a href="#sendfile-cont"><span class="code">sendfile/3</span></a></code> with <code class="code">SelectInfo</code> as the second argument will continue the data transfer. </p> <p> If <code class="code">SelectHandle</code> is a <code><a href="#type-select_handle"><span class="code">select_handle()</span></a></code>, that term will be contained in a returned <code class="code">SelectInfo</code> and the corresponding select message. The <code class="code">SelectHandle</code> is presumed to be unique to this call. </p> <p> If <code class="code">SelectHandle</code> is <code class="code">nowait</code>, and a <code class="code">SelectInfo</code> is returned, it will contain a <code><a href="socket#type-select_handle"> <span class="code">select_handle()</span> </a></code> generated by the call. </p> <p> If some file data was sent, the function will return <code><a href="#type-select_info"> <span class="code"> {ok, {BytesSent, SelectInfo}. </span> </a></code> If the caller does not want to wait to send the rest of the data, it should immediately cancel the operation with <code><a href="#cancel-2"><span class="code">cancel/2</span></a></code>. </p> </div></article><article class="func"><h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp729').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp729').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, Cont, Offset, Count, Timeout :: infinity) -&gt;<br> {ok, BytesSent} |<br> {error, Reason} |<br> {error, {Reason, BytesSent}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp730').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp730').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, Cont, Offset, Count,<br> Timeout :: <code>integer() &gt;= 0</code>) -&gt;<br> {ok, BytesSent} |<br> {error, Reason | timeout} |<br> {error, {Reason | timeout, BytesSent}}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp731').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp731').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, Cont, Offset, Count, SelectHandle :: nowait) -&gt;<br> {ok, BytesSent} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, BytesSent}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <h4 id="sendfile-5" onmouseover="document.getElementById('ghlink-sendfile-5-idp732').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-5-idp732').style.visibility = 'hidden';">  <span class="title-name">sendfile(Socket, Cont, Offset, Count,<br> SelectHandle :: <code><a href="#type-select_handle">select_handle()</a></code>) -&gt;<br> {ok, BytesSent} |<br> {select, SelectInfo} |<br> {select, {SelectInfo, BytesSent}} |<br> {error, Reason}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>         <div class="exports-tube"> <p> Continues sending file data on a socket, where the send operation was initiated by <code><a href="#sendfile-nowait"><span class="code">sendfile/3,5</span></a></code> that returned a <code class="code">SelectInfo</code> continuation. Otherwise like <code><a href="#sendfile-infinity"> "infinite" time-out <span class="code">sendfile/5</span> </a></code> , <code><a href="#sendfile-timeout"> limited time-out <span class="code">sendfile/5</span> </a></code> or <code><a href="#sendfile-nowait"> nowait <span class="code">sendfile/5</span> </a></code> respectively. </p> <p> <code class="code">Cont</code> is the <code class="code">SelectInfo</code> that was returned from the previous <code class="code">sendfile()</code> call. </p> <p> The return value indicates the result from the platform's network layer. See <code><a href="#sendfile-infinity"> "infinite" time-out <span class="code">sendfile/5</span>. </a></code> </p> </div></article><article class="func"><div><h4 id="sendfile-4" class="title-link" onmouseover="document.getElementById('ghlink-sendfile-4-idm21381').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-4-idm21381').style.visibility = 'hidden';">  <div class="title-name">sendfile(Socket, FileHandle, Offset, Count) -&gt; Result</div> <div class="title-since"><span class="since">OTP 24.0</span></div> </h4></div> <div class="exports-tube">  <h2 id="types" class="func-types-title">Types</h2>       <p> The same as <code><a href="#sendfile-infinity"> <span class="code"> sendfile(Socket, FileHandle, Offset, Count, infinity), </span> </a></code> that is: send the file data at <code class="code">Offset</code> and <code class="code">Count</code> to the socket, without time-out other than from the platform's network stack. </p>  </div></article><article class="func"><div><h4 id="sendfile-3" class="title-link" onmouseover="document.getElementById('ghlink-sendfile-3-idm21397').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-3-idm21397').style.visibility = 'hidden';">  <div class="title-name">sendfile(Socket, FileHandle, Timeout) -&gt; Result</div> <div class="title-since"><span class="since">OTP 24.0</span></div> </h4></div> <div class="exports-tube">  <h2 id="types" class="func-types-title">Types</h2>      <p> Depending on the <code class="code">Timeout</code> argument; the same as <code><a href="#sendfile-infinity"> <span class="code"> sendfile(Socket, FileHandle, 0, 0, infinity), </span> </a></code> <code><a href="#sendfile-timeout"> <span class="code"> sendfile(Socket, FileHandle, 0, 0, Timeout), </span> </a></code> or <code><a href="#sendfile-nowait"> <span class="code"> sendfile(Socket, FileHandle, 0, 0, SelectHandle), </span> </a></code> that is: send all data in the file to the socket, with the given <code class="code">Timeout</code>. </p>  </div></article><article class="func"><div><h4 id="sendfile-2" class="title-link" onmouseover="document.getElementById('ghlink-sendfile-2-idm21417').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sendfile-2-idm21417').style.visibility = 'hidden';">  <div class="title-name">sendfile(Socket, FileHandle) -&gt; Result</div> <div class="title-since"><span class="since">OTP 24.0</span></div> </h4></div> <div class="exports-tube">  <h2 id="types" class="func-types-title">Types</h2>     <p> The same as <code><a href="#sendfile-infinity"> <span class="code"> sendfile(Socket, FileHandle, 0, 0, infinity), </span> </a></code> that is: send all data in the file to the socket, without time-out other than from the platform's network stack. </p>  </div></article><article class="func"><h4 id="setopt-3" onmouseover="document.getElementById('ghlink-setopt-3-idp733').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-setopt-3-idp733').style.visibility = 'hidden';">  <span class="title-name">setopt(Socket :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption :: {Level :: otp, Opt :: <code><a href="#type-otp_socket_option">otp_socket_option()</a></code>},<br> Value :: <code>term()</code>) -&gt;<br> ok | {error, <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p> Sets a socket option in the protocol level <code class="code">otp</code>, which is this implementation's level above the OS protocol layers. </p> <p> See the type <code><a href="#type-otp_socket_option"> otp_socket_option() </a></code> for a description of the options on this level. </p> </div></article><article class="func"><h4 id="setopt-3" onmouseover="document.getElementById('ghlink-setopt-3-idp734').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-setopt-3-idp734').style.visibility = 'hidden';">  <span class="title-name">setopt(Socket :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption :: <code><a href="#type-socket_option">socket_option()</a></code>,<br> Value :: <code>term()</code>) -&gt;<br> ok | {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p> Set a socket option in one of the OS's protocol levels. See the type <code><a href="#type-socket_option">socket_option()</a></code> for which options that this implementation knows about, how they are related to option names in the OS, and if there are known peculiarities with any of them. </p> <p> What options are valid depends on what kind of socket it is (<code><a href="#type-domain"><span class="code">domain()</span></a></code>, <code><a href="#type-type"><span class="code">type()</span></a></code> and <code><a href="#type-protocol"><span class="code">protocol()</span></a></code>). </p> <p> See the <code><a href="socket_usage#socket_options"> socket options </a></code> chapter of the users guide for more info. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p> Not all options are valid, nor possible to set, on all platforms. That is, even if "we" support an option; it does not mean that the underlying OS does. </p> </div> </div> </div></article><article class="func"><div><h4 id="setopt-4" class="title-link" onmouseover="document.getElementById('ghlink-setopt-4-idm21455').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-setopt-4-idm21455').style.visibility = 'hidden';">  <div class="title-name">setopt(Socket, Level, Opt, Value) -&gt; ok | {error, Reason}</div> <div class="title-since"><span class="since">OTP 22.0</span></div> </h4></div> <div class="exports-tube">  <h2 id="types" class="func-types-title">Types</h2>      <p>Backwards compatibility function.</p> <p> The same as <code><a href="#setopt-3"> <span class="code">setopt(Socket, {Level, Opt}, Value)</span> </a></code> </p>  </div></article><article class="func"><h4 id="setopt_native-3" onmouseover="document.getElementById('ghlink-setopt_native-3-idp735').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-setopt_native-3-idp735').style.visibility = 'hidden';">  <span class="title-name">setopt_native(Socket :: <code><a href="#type-socket">socket()</a></code>,<br> SocketOption ::<br> <code><a href="#type-socket_option">socket_option()</a></code> |<br> {Level :: <code><a href="#type-level">level()</a></code> | (NativeLevel :: <code>integer()</code>),<br> NativeOpt :: <code>integer()</code>},<br> Value :: <code><a href="#type-native_value">native_value()</a></code>) -&gt;<br> ok | {error, <code><a href="#type-posix">posix()</a></code> | <code><a href="#type-invalid">invalid()</a></code> | closed}</span><div class="title-since"><span class="since">OTP 24.0</span></div> </h4> <div class="exports-tube"> <p> Sets a socket option that may be unknown to our implementation, or that has a type not compatible with our implementation, that is; in "native mode". </p> <p> If <code class="code">Value</code> is an <code class="code">integer()</code> it will be used as a <code class="code">C</code> type <code class="code">(int)</code>, if it is a <code class="code">boolean()</code> it will be used as a <code class="code">C</code> type <code class="code">(int)</code> with the <code class="code">C</code> implementations values for <code class="code">false</code> or <code class="code">true</code>, and if it is a <code class="code">binary()</code> its content and size will be used as the option value. </p> <p> The socket option may be specified with an ordinary <code><a href="#type-socket_option"> <span class="code">socket_option()</span> </a></code> tuple, with a known <code><a href="#type-level"> <span class="code">Level = level()</span> </a></code> and an integer <code class="code">NativeOpt</code>, or with both an integer <code class="code">NativeLevel</code> and <code class="code">NativeOpt</code>. </p> <p> What options are valid depends on what kind of socket it is (<code><a href="#type-domain"><span class="code">domain()</span></a></code>, <code><a href="#type-type"><span class="code">type()</span></a></code> and <code><a href="#type-protocol"><span class="code">protocol()</span></a></code>). </p> <p> The integer values for <code class="code">NativeLevel</code> and <code class="code">NativeOpt</code> as well as the encoding of <code class="code">Value</code> has to be deduced from the header files for the running system. </p> </div></article><article class="func"><h4 id="shutdown-2" onmouseover="document.getElementById('ghlink-shutdown-2-idp736').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-shutdown-2-idp736').style.visibility = 'hidden';">  <span class="title-name">shutdown(Socket, How) -&gt; ok | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Shut down all or part of a full-duplex connection.</p> </div></article><article class="func"><h4 id="sockname-1" onmouseover="document.getElementById('ghlink-sockname-1-idp737').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-sockname-1-idp737').style.visibility = 'hidden';">  <span class="title-name">sockname(Socket) -&gt; {ok, SockAddr} | {error, Reason}</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>     <div class="exports-tube"> <p>Returns the current address to which the socket is bound.</p> </div></article><article class="func"><h4 id="supports-0" onmouseover="document.getElementById('ghlink-supports-0-idp738').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-supports-0-idp738').style.visibility = 'hidden';">  <span class="title-name">supports() -&gt;<br> [{Key1 :: <code>term()</code>,<br> <code>boolean()</code> |<br> [{Key2 :: <code>term()</code>,<br> <code>boolean()</code> | [{Key3 :: <code>term()</code>, <code>boolean()</code>}]}]}]</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="supports-1" onmouseover="document.getElementById('ghlink-supports-1-idp739').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-supports-1-idp739').style.visibility = 'hidden';">  <span class="title-name">supports(Key1 :: <code>term()</code>) -&gt;<br> [{Key2 :: <code>term()</code>,<br> <code>boolean()</code> | [{Key3 :: <code>term()</code>, <code>boolean()</code>}]}]</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <h4 id="supports-2" onmouseover="document.getElementById('ghlink-supports-2-idp740').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-supports-2-idp740').style.visibility = 'hidden';">  <span class="title-name">supports(Key1 :: <code>term()</code>, Key2 :: <code>term()</code>) -&gt;<br> [{Key3 :: <code>term()</code>, <code>boolean()</code>}]</span><div class="title-since"><span class="since">OTP 22.0</span></div> </h4> <div class="exports-tube"> <p> These functions function retrieves information about what the platform supports, such which platform features or which socket options, are supported. </p> <p> For keys other than the known the empty list is returned, Note that in a future version or on a different platform there might be more supported items. </p> <dl> <dt><strong><code class="code">supports()</code></strong></dt> <dd> <p> Returns a list of <code class="code">{Key1, supports(Key1)}</code> tuples for every <code class="code">Key1</code> described in <code><a href="#supports-1">supports/1</a></code> and <code class="code">{Key1, boolean()}</code> tuples for each of the following keys: </p> <dl> <dt><strong><code class="code">sctp</code></strong></dt> <dd>SCTP support</dd> <dt><strong><code class="code">ipv6</code></strong></dt> <dd>IPv6 support</dd> <dt><strong><code class="code">local</code></strong></dt> <dd> Unix Domain sockets support (<code class="code">AF_UNIX | AF_LOCAL</code>) </dd> <dt><strong><code class="code">netns</code></strong></dt> <dd> Network Namespaces support (Linux, <code class="code">setns(2)</code>) </dd> <dt><strong><code class="code">sendfile</code></strong></dt> <dd> Sendfile support (<code class="code">sendfile(2)</code>) </dd> </dl>  </dd> <dt><strong><code class="code">supports(msg_flags = Key1)</code></strong></dt> <dd> <p> Returns a list of <code class="code">{Flag, boolean()}</code> tuples for every <code class="code">Flag</code> in <code><a href="#type-msg_flag"> <span class="code">msg_flag()</span> </a></code> with the <code class="code">boolean()</code> indicating if the flag is supported on this platform. </p> </dd> <dt><strong><code class="code">supports(protocols = Key1)</code></strong></dt> <dd> <p> Returns a list of <code class="code">{Name :: atom(), boolean()}</code> tuples for every <code class="code">Name</code> in <code><a href="#type-protocol"> <span class="code">protocol()</span> </a></code> with the <code class="code">boolean()</code> indicating if the protocol is supported on this platform. </p> </dd> <dt><strong><code class="code">supports(options = Key1)</code></strong></dt> <dd> <p> Returns a list of <code class="code">{SocketOption, boolean()}</code> tuples for every <code class="code">SocketOption</code> in <code><a href="#type-socket_option"> <span class="code">socket_option()</span> </a></code> with the <code class="code">boolean()</code> indicating if the socket option is supported on this platform. </p> </dd> <dt><strong> <code class="code">supports(options = Key1, Key2)</code> </strong></dt> <dd> <p> For a <code class="code">Key2</code> in <code><a href="#type-level"> <span class="code">level()</span> </a></code> returns a list of <code class="code">{Opt, boolean()}</code> tuples for all known <code><a href="#type-socket_option"> socket options <span class="code">Opt</span> on that <span class="code">Level =:= Key2</span>, </a></code> and the <code class="code">boolean()</code> indicating if the socket option is supported on this platform. See <code><a href="#setopt-3">setopt/3</a></code> and <code><a href="#getopt-2">getopt/2</a></code>. </p> </dd> </dl> </div></article><article class="func"><h4 id="use_registry-1" onmouseover="document.getElementById('ghlink-use_registry-1-idp741').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-use_registry-1-idp741').style.visibility = 'hidden';">  <span class="title-name">use_registry(D :: <code>boolean()</code>) -&gt; ok</span><div class="title-since"><span class="since">OTP 23.1</span></div> </h4> <div class="exports-tube"> <p>Globally change if the socket registry is to be used or not. Note that its still possible to override this explicitly when creating an individual sockets, see <code><a href="socket#open-2"><span class="code">open/2</span></a></code> or <code><a href="socket#open-4"><span class="code">open/4</span></a></code> for more info (use the Extra argument). </p> </div></article><article class="func"><h4 id="which_sockets-0" onmouseover="document.getElementById('ghlink-which_sockets-0-idp742').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-which_sockets-0-idp742').style.visibility = 'hidden';">  <span class="title-name">which_sockets() -&gt; [<code><a href="#type-socket">socket()</a></code>]</span><div class="title-since"><span class="since">OTP 22.3</span></div> </h4> <h4 id="which_sockets-1" onmouseover="document.getElementById('ghlink-which_sockets-1-idp743').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-which_sockets-1-idp743').style.visibility = 'hidden';">  <span class="title-name">which_sockets(FilterRule) -&gt; [<code><a href="#type-socket">socket()</a></code>]</span><div class="title-since"><span class="since">OTP 22.3</span></div> </h4>  <h2 id="types" class="func-types-title">Types</h2>   <div class="exports-tube"> <p>Returns a list of all sockets, according to the filter rule.</p> <p>There are several pre-made filter rule(s) and one general: </p> <dl> <dt><strong><code class="code">inet | inet6</code></strong></dt> <dd> <p>Selection based on the domain of the socket. <br>Only a subset is valid. </p> </dd> <dt><strong><code class="code">stream | dgram | seqpacket</code></strong></dt> <dd> <p>Selection based on the type of the socket. <br>Only a subset is valid. </p> </dd> <dt><strong><code class="code">sctp | tcp | udp</code></strong></dt> <dd> <p>Selection based on the protocol of the socket. <br>Only a subset is valid. </p> </dd> <dt><strong><code class="code">pid()</code></strong></dt> <dd> <p>Selection base on which sockets has this pid as Controlling Process. </p> </dd> <dt><strong><code class="code">fun((socket_info()) -&gt; boolean())</code></strong></dt> <dd> <p>The general filter rule. <br>A fun that takes the socket info and returns a <code class="code">boolean()</code> (<code class="code">true</code> if the socket could be included and <code class="code">false</code> if should not). </p> </dd> </dl> </div></article> </div> <section class="innertube"><h2 id="examples" class="title-link" onmouseover="document.getElementById('ghlink-examples-idm21656').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-examples-idm21656').style.visibility = 'hidden';"> <div class="title-name">Examples</div>  </h2>   <pre id="examples" data-language="erlang">client(SAddr, SPort) -&gt;
   {ok, Sock} = socket:open(inet, stream, tcp),
   ok = socket:connect(Sock, #{family =&gt; inet,
                               addr   =&gt; SAddr,
                               port   =&gt; SPort}),
   Msg = &lt;&lt;"hello"&gt;&gt;,
   ok = socket:send(Sock, Msg),
   ok = socket:shutdown(Sock, write),
   {ok, Msg} = socket:recv(Sock),
   ok = socket:close(Sock).

server(Addr, Port) -&gt;  
   {ok, LSock} = socket:open(inet, stream, tcp),
   ok = socket:bind(LSock, #{family =&gt; inet,
                             port   =&gt; Port,
                             addr   =&gt; Addr}),
   ok = socket:listen(LSock),
   {ok, Sock} = socket:accept(LSock),
   {ok, Msg} = socket:recv(Sock),
   ok = socket:send(Sock, Msg),
   ok = socket:close(Sock),
   ok = socket:close(LSock).</pre> </section> <div class="footer"> <hr> <p>Copyright © 1997-2022 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2022 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
