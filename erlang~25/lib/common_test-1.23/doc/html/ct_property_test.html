  <div class="innertube"> <h2 id="module" class="title-link" onmouseover="document.getElementById('ghlink-module-idm8985').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm8985').style.visibility = 'hidden';"> <div class="title-name">Module</div>  </h2> <p class="REFBODY module-body">ct_property_test</p> </div> <div class="innertube"> <h2 id="module-summary" class="title-link" onmouseover="document.getElementById('ghlink-module-summary-idm8986').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm8986').style.visibility = 'hidden';"> <div class="title-name">Module Summary</div>  </h2> <p class="REFBODY module-summary-body">Support in Common Test for running property-based tests.</p> <h2 id="since" class="title-link" onmouseover="document.getElementById('ghlink-since-idm8986').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-since-idm8986').style.visibility = 'hidden';"> <div class="title-name">Since</div>  </h2> <p class="REFBODY module-since"> Module ct_property_test was introduced in OTP 17.3. </p> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link" onmouseover="document.getElementById('ghlink-description-idm8987').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm8987').style.visibility = 'hidden';"> <div class="title-name">Description</div>  </h2> 
<p>This module helps running property-based tests in the <code class="code">Common Test</code> framework. One (or more) of the property testing tools </p> <ul> <li> <code><a href="http://www.quviq.com">QuickCheck</a></code>,</li> <li> <code><a href="https://proper-testing.github.io">PropEr</a></code> or</li> <li><code><a href="https://github.com/krestenkrab/triq">Triq</a></code></li> </ul> <p> is assumed to be installed. </p> <p>The idea with this module is to have a <code class="code">Common Test</code> test suite calling a property testing tool with special property test suites as defined by that tool. The tests are collected in the <code class="code">test</code> directory of the application. The <code class="code">test</code> directory has a subdirectory <code class="code">property_test</code>, where everything needed for the property tests are collected. The usual Erlang application directory structure is assumed. </p> <p>A typical <code class="code">Common Test</code> test suite using <code class="code">ct_property_test</code> is organized as follows:</p> <pre data-language="erlang">-module(my_prop_test_SUITE).
-compile(export_all).

-include_lib("common_test/include/ct.hrl").

 all() -&gt; [prop_ftp_case].

 init_per_suite(Config) -&gt;
     ct_property_test:init_per_suite(Config).

 %%%---- test case
 prop_ftp_case(Config) -&gt;
     ct_property_test:quickcheck(
       ftp_simple_client_server:prop_ftp(),
       Config
      ).</pre> <p>and the the property test module (in this example <code class="code">ftp_simple_client_server.erl</code>) as almost a usual property testing module (More examples are in <code><a href="ct_property_test_chapter">the User's Guide</a></code>):</p> <pre data-language="erlang">-module(ftp_simple_client_server).	
-export([prop_ftp/0...]).

-include_lib("common_test/include/ct_property_test.hrl").

prop_ftp() -&gt;
    ?FORALL( ....</pre>  </div></section> <div class="innertube"><h2 id="export" class="title-link" onmouseover="document.getElementById('ghlink-export-idm9011').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-export-idm9011').style.visibility = 'hidden';"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div><h4 id="init_per_suite-1" class="title-link" onmouseover="document.getElementById('ghlink-init_per_suite-1-idm9013').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-init_per_suite-1-idm9013').style.visibility = 'hidden';">  <div class="title-name">init_per_suite(Config) -&gt; Config | {skip, Reason}</div> <div class="title-since"><span class="since">OTP 17.3</span></div> </h4></div> <div class="exports-tube">  <p id="init_per_suite-1">Initializes and extends <code class="code">Config</code> for property based testing.</p> <p>This function investigates if support is available for either <code><a href="http://www.quviq.com">QuickCheck</a></code>, <code><a href="https://proper-testing.github.io">PropEr</a></code> or <code><a href="https://github.com/krestenkrab/triq">Triq</a></code> and compiles the properties with the first tool found. It is supposed to be called in the <code class="code">init_per_suite/1</code> function in a CommonTest test suite. </p> <p>Which tools to check for, and in which order could be set with the option <code class="code">{prop_tools, list(eqc|proper|triq)}</code> in the CommonTest configuration <code class="code">Config</code>. The default value is <code class="code">[eqc, proper, triq]</code> with <code class="code">eqc</code> being the first one searched for. </p> <p>If no support is found for any tool, this function returns <code class="code">{skip, Explanation}</code>. </p> <p>If support is found, the option <code class="code">{property_test_tool,ToolModule}</code> with the selected tool main module name (<code class="code">eqc</code>, <code class="code">proper</code> or <code class="code">triq</code>) is added to the list <code class="code">Config</code> which then is returned. </p> <p>The property tests are assumed to be in a subdirectory named <code class="code">property_test</code>. All found Erlang files in that directory are compiled with one of the macros <code class="code">'EQC'</code>, <code class="code">'PROPER'</code> or <code class="code">'TRIQ'</code> set, depending on which tool that is first found. This could make parts of the Erlang property tests code to be included or excluded with the macro directives <code class="code">-ifdef(Macro).</code> or <code class="code">-ifndef(Macro).</code>. </p> <p>The file(s) in the <code class="code">property_test</code> subdirectory could, or should, include the ct_property_test include file: </p> <pre data-language="erlang">-include_lib("common_test/include/ct_property_test.hrl").</pre> <p>This included file will: </p> <ul> <li>Include the correct tool's include file</li> <li>Set the macro <code class="code">'MOD_eqc'</code> to the correct module name for the selected tool. That is, the macro <code class="code">'MOD_eqc'</code> is set to either <code class="code">eqc</code>, <code class="code">proper</code> or <code class="code">triq</code>. </li> </ul> </div></article><article class="func"><div><h4 id="quickcheck-2" class="title-link" onmouseover="document.getElementById('ghlink-quickcheck-2-idm9057').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-quickcheck-2-idm9057').style.visibility = 'hidden';">  <div class="title-name">quickcheck(Property, Config) -&gt; true | {fail, Reason}</div> <div class="title-since"><span class="since">OTP 17.3</span></div> </h4></div> <div class="exports-tube"> <p>Calls the selected tool's function for running the <code class="code">Property</code>. It is usually and by historical reasons called quickcheck, and that is why that name is used in this module (<code class="code">ct_property_test</code>). </p> <p>The result is returned in a form suitable for <code class="code">Common Test</code> test suites. </p> <p>This function is intended to be called in test cases in test suites. </p> </div></article><article class="func"><div><h4 id="present_result-4" class="title-link" onmouseover="document.getElementById('ghlink-present_result-4-idm9067').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-present_result-4-idm9067').style.visibility = 'hidden';">  <div class="title-name">present_result(Module, Cmds, Triple, Config) -&gt; Result</div> <div class="title-since"><span class="since">OTP 22.3</span></div> </h4></div> <div class="exports-tube"> <p>Same as <code><a href="#present_result-5"><span class="code">present_result(Module, Cmds, Triple, Config, [])</span></a></code> </p> </div></article><article class="func"><div><h4 id="present_result-5" class="title-link" onmouseover="document.getElementById('ghlink-present_result-5-idm9074').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-present_result-5-idm9074').style.visibility = 'hidden';">  <div class="title-name">present_result(Module, Cmds, Triple, Config, Options) -&gt; Result</div> <div class="title-since"><span class="since">OTP 22.3</span></div> </h4></div> <div class="exports-tube">  <h2 id="types" class="func-types-title">Types</h2>    <p class="REFBODY rb-6">the list of commands generated by the property testing tool, for example by proper:commands/1 or by proper:parallel_commands/1 </p>  <p class="REFBODY rb-6">the output from for example proper:run_commands/2 or proper:run_parallel_commands/2</p>  the Common Test <code><a href="ct_suite#Module:Testcase-1">Config</a></code> in test cases.    The <code class="code">print_fun</code> defines which function to do the actual printout. The default is <code><a href="ct#log-2">ct:log/2</a></code>. The <code class="code">spec</code> defines what statistics are to be printed   Is <code class="code">false</code> if the test failed and is <code class="code">true</code> if the test passed   <p>Presents the result of <i>stateful (statem) property testing</i> using the aggregate function in PropEr, QuickCheck or other similar property testing tool. </p> <p>It is assumed to be called inside the property called by <code><a href="#quickcheck-2">quickcheck/2</a></code>:</p> <pre data-language="erlang">...
RunResult = run_parallel_commands(?MODULE, Cmds),
ct_property_test:present_result(?MODULE, Cmds, RunResult, Config)	
...</pre> <p>See the <code><a href="ct_property_test_chapter#stateful1">User's Guide</a></code> for an example of the usage and of the default printout. </p> <p>The <code class="code">StatisticsSpec</code> is a list of the tuples:</p> <ul> <li><code class="code">{Title::string(), CollectFun::fun/1}</code></li> <li><code class="code">{Title::string(), FrequencyFun::/0, CollectFun::fun/1}</code></li> </ul> <p>Each tuple will produce one table in the order of their places in the list.</p> <ul> <li> <code class="code">Title</code> will be the title of one result table</li> <li> <code class="code">CollectFun</code> is called with one argument: the <code class="code">Cmds</code>. It should return a list of the values to be counted. The following pre-defined functions exist: <ul> <li> <code class="code">ct_property_test:cmnd_names/1</code> returns a list of commands (function calls) generated in the <code class="code">Cmnd</code> sequence, without Module, Arguments and other details.</li> <li> <code class="code">ct_property_test:num_calls/1</code> returns a list of the length of commands lists</li> <li> <code class="code">ct_property_test:sequential_parallel/1</code> returns a list with information about sequential and parallel parts from <code class="code">Tool:parallel_commands/1,2</code> </li> </ul> </li> <li> <code class="code">FrequencyFun/0</code> returns a fun/1 which is supposed to take a list of items as input, and return an iolist which will be printed as the table. Per default, the number of each item is counted and the percentage is printed for each. The list [a,b,a,a,c] could for example return <pre data-language="erlang">
["a 60%\n","b 20%\n","c 20%\n"]</pre> which will be printed by the <code class="code">print_fun</code>. The default <code class="code">print_fun</code> will print it as: <pre data-language="erlang">
a 60%
b 20%
c 20%</pre> </li> </ul> <p>The default <code class="code">StatisticsSpec</code> is:</p> <ul> <li>For sequential commands: <pre data-language="erlang">[{"Function calls", fun cmnd_names/1},
 {"Length of command sequences", fun print_frequency_ranges/0,
                                                  fun num_calls/1}]</pre> </li> <li>For parallel commands: <pre data-language="erlang">[{"Distribution sequential/parallel", fun sequential_parallel/1},
 {"Function calls", fun cmnd_names/1},
 {"Length of command sequences", fun print_frequency_ranges/0,
                                                  fun num_calls/1}]</pre> </li> </ul>  </div></article> </div> <div class="footer"> <hr> <p>Copyright © 2003-2022 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2022 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
