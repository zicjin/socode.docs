<h1>CustomEvent</h1> <p>The <code>CustomEvent</code> interface represents events initialized by an application for any purpose.</p> 
<div class="notecard note"> <p><strong>Note:</strong> This feature is available in <a href="web_workers_api">Web Workers</a></p> </div>

<h2 id="constructor">Constructor</h2>
<dl> <dt><a href="customevent/customevent"><code>CustomEvent()</code></a></dt> <dd>Creates a <code>CustomEvent</code>.</dd> </dl>
<h2 id="properties">Properties</h2>
<p><em>This interface inherits properties from its parent, </em> <a href="event"><code>Event</code></a>.</p> <dl> <dt>
<a href="customevent/detail"><code>CustomEvent.detail</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd>Any data passed when initializing the event.</dd> </dl>
<h2 id="methods">Methods</h2>
<p><em>This interface inherits methods from its parent, </em><a href="event"><code>Event</code></a>.</p> <dl> <dt>
<a href="customevent/initcustomevent"><code>CustomEvent.initCustomEvent()</code></a> 
</dt> <dd> <p>Initializes a <code>CustomEvent</code> object. If the event has already being dispatched, this method does nothing.</p> </dd> </dl>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://dom.spec.whatwg.org/#interface-customevent">DOM Standard (DOM)<br><small># interface-customevent</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>CustomEvent</code></th>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>6</div></td>
<td class="bc-supports-yes"><div>9</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>5.1</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>6</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>6</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>CustomEvent</code></th>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>11.6</div></td>
<td class="bc-supports-yes"><div>6.1</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>6.1</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>detail</code></th>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>11.6</div></td>
<td class="bc-supports-yes"><div>6.1</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>6.1</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
</tr>
<tr>
<th><code>initCustomEvent</code></th>
<td class="bc-supports-yes">
<div>Yes</div>
<div>59</div>
<div>
<code>canBubble</code>, <code>cancelable</code>, and <code>detail</code> are optional parameters defaulting to <code>false</code>, <code>false</code>, and <code>null</code> respectively.</div>
</td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>6</div></td>
<td class="bc-supports-yes"><div>9</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>5.1</div></td>
<td class="bc-supports-yes">
<div>Yes</div>
<div>59</div>
<div>
<code>canBubble</code>, <code>cancelable</code>, and <code>detail</code> are optional parameters defaulting to <code>false</code>, <code>false</code>, and <code>null</code> respectively.</div>
</td>
<td class="bc-supports-yes">
<div>Yes</div>
<div>59</div>
<div>
<code>canBubble</code>, <code>cancelable</code>, and <code>detail</code> are optional parameters defaulting to <code>false</code>, <code>false</code>, and <code>null</code> respectively.</div>
</td>
<td class="bc-supports-yes"><div>6</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes">
<div>Yes</div>
<div>7.0</div>
<div>
<code>canBubble</code>, <code>cancelable</code>, and <code>detail</code> are optional parameters defaulting to <code>false</code>, <code>false</code>, and <code>null</code> respectively.</div>
</td>
</tr>
<tr>
<th><code>worker_support</code></th>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>48</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>48</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
</tr>
</tbody>
</table>


<h2 id="firing_from_privileged_code_to_non-privileged_code">Firing from privileged code to non-privileged code</h2>
<p>When firing a <code>CustomEvent</code> from privileged code (i.e. an extension) to non-privileged code (i.e. a webpage), security issues should be considered. Firefox and other Gecko applications restrict an object created in one context from being directly used for another, which will automatically prevent security holes, but these restrictions may also prevent your code from running as expected.</p> <p>While creating a <code>CustomEvent</code> object, you must create the object from the same <a href="https://developer.mozilla.org/en-US/docs/XUL/window" class="page-not-created">window</a>. The <code>detail</code> attribute of your <code>CustomEvent</code> will be subjected to the same restrictions. <code>String</code> and <code>Array</code> values will be readable by the content without restrictions, but custom <code>Object</code> will not. While using a custom object, you will need to define the attributes of that object that are readable from the content script using <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils.cloneInto" class="page-not-created">Components.utils.cloneInto()</a>.</p> <div class="code-example"><pre data-language="js"><span class="token comment">// doc is a reference to the content document</span>
<span class="token keyword">function</span> <span class="token function">dispatchCustomEvent</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> eventDetail <span class="token operator">=</span> Components<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">cloneInto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> doc<span class="token punctuation">.</span>defaultView<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> myEvent <span class="token operator">=</span> doc<span class="token punctuation">.</span>defaultView<span class="token punctuation">.</span><span class="token function">CustomEvent</span><span class="token punctuation">(</span><span class="token string">"mytype"</span><span class="token punctuation">,</span> eventDetail<span class="token punctuation">)</span><span class="token punctuation">;</span>
  doc<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>myEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div> <p>But one needs to keep in mind that exposing a function will allow the content script to run it with chrome privileges, which can open a security vulnerability.</p>
<h2 id="see_also">See also</h2>
<ul> <li><a href="window/postmessage"><code>Window.postMessage()</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages" class="page-not-created">Interaction between privileged and non-privileged pages</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events">Creating and triggering events</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent</a>
  </p>
</div>
