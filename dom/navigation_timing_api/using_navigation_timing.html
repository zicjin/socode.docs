<h1>Using Navigation Timing</h1>
<div class="section-content">
<p>The Navigation Timing API lets you easily obtain detailed and highly accurate timing information to help isolate performance problems with your site's code or resources.</p> <p>Unlike other tools or libraries, the <a href="../navigation_timing_api">Navigation Timing API</a> lets you gather information that only the browser can provide at a level of accuracy much improved over other techniques. It also offers the advantage of being able to provide timing information as perceived by the user rather than data that has no correlation to what the user experiences.</p>
</div>
<h2 id="collecting_timing_information">Collecting timing information</h2>
<div class="section-content">
<p>Using the API is as simple as obtaining the <a href="../performance"><code>Performance</code></a> object using <a href="../performance_property"><code>window.performance</code></a> and looking up what you need within the object returned. For example, to measure the perceived loading time for a page:</p> <div class="code-example"><pre data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> loadingTime <span class="token operator">=</span> now <span class="token operator">-</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>

  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".output"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>loadingTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ms</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>This code, executed when the <a href="../window/load_event"><code>load</code></a> event occurs, subtracts from the current time the time at which the navigation whose timing was recorded began (<a href="../performancetiming/navigationstart"><code>performance.timing.navigationStart</code></a>), and outputs that information to the screen by inserting it into an element.</p>   <p>In tandem with appropriate HTML and CSS, the result is:</p>
<iframe class="sample-code-frame" title="Collecting timing information sample" id="frame_collecting_timing_information" width="500" height="80" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing/_sample_.collecting_timing_information.html" loading="lazy"></iframe> <p>The values listed are for the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a> in which the sample is presented above.</p> <p>For a list of the available timing values you can look for in <a href="../performancetiming"><code>PerformanceTiming</code></a>, see the <a href="../performancetiming"><code>PerformanceTiming</code></a> interface's <a href="../performancetiming#properties">Properties</a> section.</p>
</div>
<h2 id="determining_navigation_type">Determining navigation type</h2>
<div class="section-content">
<p>To put the timing information obtained from <a href="../performancetiming"><code>PerformanceTiming</code></a> into the correct perspective, you need to know more about what sort of load operation occurred. In particular, you need to know:</p> <ul> <li>Was this a load or a reload?</li> <li>Was this a navigation or a move forward or backward through history?</li> <li>How many (if any) redirects were required in order to complete the navigation?</li> </ul> <p>This information is provided by the <a href="../performance/navigation"><code>Performance.navigation</code></a> property, which returns a <a href="../performancenavigation"><code>PerformanceNavigation</code></a> object that includes the needed information.</p> <p>Let's add this information to the example above. The new code looks like this:</p> <div class="code-example"><pre data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> loadingTime <span class="token operator">=</span> now <span class="token operator">-</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>

  output <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Load time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>loadingTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ms&lt;br/&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  output <span class="token operator">+=</span> <span class="token string">"Navigation type: "</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span><span class="token punctuation">(</span>performance<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> PerformanceNavigation<span class="token punctuation">.</span><span class="token constant">TYPE_NAVIGATE</span><span class="token operator">:</span>
        output <span class="token operator">+=</span> <span class="token string">"Navigation"</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> PerformanceNavigation<span class="token punctuation">.</span><span class="token constant">TYPE_RELOAD</span><span class="token operator">:</span>
        output <span class="token operator">+=</span> <span class="token string">"Reload"</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> PerformanceNavigation<span class="token punctuation">.</span><span class="token constant">TYPE_BACK_FORWARD</span><span class="token operator">:</span>
        output <span class="token operator">+=</span> <span class="token string">"History"</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        output <span class="token operator">+=</span> <span class="token string">"Unknown"</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  output <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;br/&gt;Redirects: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>performance<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span>redirectCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".output"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> output<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>This amends the previous example by looking at the contents of the <code>performance.navigation</code> object. <a href="../performancenavigation/type"><code>performance.navigation.type</code></a> indicates what kind of load operation took place: a navigation, a reload, or a shift through the browser's history. We also obtain the number of redirects that were incurred during the navigation from <a href="../performancenavigation/redirectcount"><code>performance.navigation.redirectCount</code></a>. This information is output to the screen just like the page load time was previously: by inserting it into the element with class <code>"output"</code>.</p>   <p>With this code in place, the result looks like this:</p>
<iframe class="sample-code-frame" title="Determining navigation type sample" id="frame_determining_navigation_type" width="500" height="120" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing/_sample_.determining_navigation_type.html" loading="lazy"></iframe> <p>The values listed are for the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a> in which the sample is presented.</p>
</div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../navigation_timing_api">Navigation Timing API</a></li> <li><a href="../performance_property"><code>window.performance</code></a></li> <li>
<a href="../performance"><code>Performance</code></a>, <a href="../performancetiming"><code>PerformanceTiming</code></a>, and <a href="../performancenavigation"><code>PerformanceNavigation</code></a>
</li> </ul></div>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/navigation_timing_api/using_navigation_timing/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/navigation_timing_api/using_navigation_timing/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FNavigation_timing_API%2FUsing_Navigation_Timing&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fnavigation_timing_api%2Fusing_navigation_timing%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FNavigation_timing_API%2FUsing_Navigation_Timing%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fnavigation_timing_api%2Fusing_navigation_timing%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F6f983d8b9fa0081ba57ccab31a345a41ffccbbb1%0A*+Document+last+modified%3A+2022-07-21T20%3A13%3A13.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-07-21T20:13:13.000Z">Jul 21, 2022</time>, <a href="using_navigation_timing/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing</a>
  </p>
</div>
