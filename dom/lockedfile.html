<h1>LockedFile</h1>
<div class="notecard warning"><p><strong>Non-standard:</strong> This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p></div>
<h2 id="summary">Summary</h2>
<p>The <code>LockedFile</code> interface provides tools to deal with a given file with all the necessary locks.</p>
<h2 id="properties">Properties</h2>
<dl> <dt>
<a href="lockedfile/filehandle"><code>LockedFile.fileHandle</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p>The <a href="idbmutablefile"><code>IDBMutableFile</code></a> object from which the lock was opened.</p> </dd> <dt>
<a href="lockedfile/mode"><code>LockedFile.mode</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p>The mode for accessing the file; can be <code>readonly</code> or <code>readwrite</code>.</p> </dd> <dt>
<a href="lockedfile/active"><code>LockedFile.active</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p>A flag indicating if the file can be accessed (<code>true</code>) or not (<code>false</code>).</p> </dd> <dt><a href="lockedfile/location"><code>LockedFile.location</code></a></dt> <dd> <p>The position of the reading/writing pointer within the file.</p> </dd> </dl>
<h3 id="events_handler">Events Handler</h3>
<dl> <dt><a href="lockedfile/oncomplete"><code>LockedFile.oncomplete</code></a></dt> <dd> <p>The <code><a href="offlineaudiocontext/complete_event">complete</a></code> event is triggered each time a read or write operation is successful.</p> </dd> <dt><a href="lockedfile/onabort"><code>LockedFile.onabort</code></a></dt> <dd> <p>The <code><a href="htmlmediaelement/abort_event">abort</a></code> event is triggered each time the <a href="lockedfile/abort"><code>abort()</code></a> method is called.</p> </dd> <dt><a href="lockedfile/onerror"><code>LockedFile.onerror</code></a></dt> <dd> <p>The <code><a href="element/error_event">error</a></code> event is triggered each time something goes wrong.</p> </dd> </dl>
<h2 id="methods">Methods</h2>
<dl> <dt><a href="lockedfile/getmetadata"><code>LockedFile.getMetadata()</code></a></dt> <dd> <p>Allows to retrieve the file metadata (size and date of the last modification). Returns a <a href="filerequest"><code>FileRequest</code></a>.</p> </dd> <dt><a href="lockedfile/readasarraybuffer"><code>LockedFile.readAsArrayBuffer()</code></a></dt> <dd> <p>Allows to retrieve a part of the content of the file as an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a>. Returns a <a href="filerequest"><code>FileRequest</code></a> object.</p> </dd> <dt><a href="lockedfile/readastext"><code>LockedFile.readAsText()</code></a></dt> <dd> <p>Allows to retrieve a part of the content of the file as a string. Returns a <a href="filerequest"><code>FileRequest</code></a> object.</p> </dd> <dt><a href="lockedfile/write"><code>LockedFile.write()</code></a></dt> <dd> <p>Allows to write some data in the file starting at the <a href="lockedfile/location"><code>location</code></a> offset. Returns a <a href="filerequest"><code>FileRequest</code></a> object.</p> </dd> <dt><a href="lockedfile/append"><code>LockedFile.append()</code></a></dt> <dd> <p>Allows to write some data at the end of the file. Returns a <a href="filerequest"><code>FileRequest</code></a> object.</p> </dd> <dt><a href="lockedfile/truncate"><code>LockedFile.truncate()</code></a></dt> <dd> <p>Allows to truncate the file's content. Returns a <a href="filerequest"><code>FileRequest</code></a> object.</p> </dd> <dt><a href="lockedfile/flush"><code>LockedFile.flush()</code></a></dt> <dd> <p>Allows to guarantee that any buffered data has been transferred to disk.</p> </dd> <dt><a href="lockedfile/abort"><code>LockedFile.abort()</code></a></dt> <dd> <p>Makes the <code>LockedFile</code> inactive and cancels all ongoing operations.</p> </dd> </dl>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table> <thead> <tr> <th>Specification</th> <th>Status</th> <th>Comment</th> </tr> </thead> <tbody> <tr> <td><a href="https://w3c.github.io/filesystem-api/" hreflang="en" rel=" noopener">FileSystem API</a></td> <td><span class="spec-ed">Editor's Draft</span></td> <td>Draft proposal.</td> </tr> </tbody> </table></div>
<h2 id="see_also">See also</h2>
<ul> <li><a href="idbmutablefile"><code>IDBMutableFile</code></a></li> <li><a href="filerequest"><code>FileRequest</code></a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/LockedFile" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/LockedFile</a>
  </p>
</div>
