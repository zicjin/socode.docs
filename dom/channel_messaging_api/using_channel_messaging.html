<h1>Using channel messaging</h1>

 <p>The <a href="../channel_messaging_api">Channel Messaging API</a> allows two separate scripts running in different browsing contexts attached to the same document (e.g., two IFrames, or the main document and an IFrame, or two documents via a <a href="../sharedworker"><code>SharedWorker</code></a>) to communicate directly, passing messages between one another through two-way channels (or pipes) with a port at each end.</p> <p>In this article we'll explore the basics of using this technology.</p> 
<div class="notecard note"> <p><strong>Note:</strong> This feature is available in <a href="../web_workers_api">Web Workers</a></p> </div>

<h2 id="use_cases">Use cases</h2>
<p>Channel messaging is mainly useful in cases where you've got a social site that embeds capabilities from other sites into its main interface via iframes, such as games, address book, or an audio player with personalized music choices. When these act as standalone units, things are ok, but the difficulty comes when you want interaction between the main site and the IFrames, or the different IFrames. For example, what if you wanted to add a contact to the address book from the main site, add high scores from your game into your main profile, or add new background music choices from the audio player onto the game? Such things are not so easy using conventional web technology, because of the security models the web uses. You have to think about whether the origins trust one another, and how the messages are passed.</p> <p>Message channels on the other hand can provide a secure channel that allows you to pass data between different browsing contexts.</p> <div class="note notecard"> <p><strong>Note</strong>: For more information and ideas, the <a href="https://html.spec.whatwg.org/multipage/comms.html#ports-as-the-basis-of-an-object-capability-model-on-the-web" rel=" noopener">Ports as the basis of an object-capability model on the Web</a> section of the spec is a useful read.</p> </div>
<h2 id="simple_examples">Simple examples</h2>
<p>To get your started, we have published a couple of demos on Github. First up, check out our <a href="https://github.com/mdn/dom-examples/tree/master/channel-messaging-basic" rel=" noopener">channel messaging basic demo</a> (<a href="https://mdn.github.io/dom-examples/channel-messaging-basic/" rel=" noopener">run it live too</a>), which shows a really simple single message transfer between a page and an embedded <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>.</p> <p>Secondly, have a look at our <a href="https://github.com/mdn/dom-examples/tree/master/channel-messaging-multimessage" rel=" noopener">multimessaging demo</a> (<a href="https://mdn.github.io/dom-examples/channel-messaging-multimessage/" rel=" noopener">run this live</a>), which shows a slightly more complex setup that can send multiple messages between the main page and an IFrame.</p> <p>We'll be focusing on the latter example in this article. It looks like so:</p> <p><img alt="" src="data:image/png;base64,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" width="690" height="744" loading="lazy"></p>
<h2 id="creating_the_channel">Creating the channel</h2>
<p>In the main page of the demo, we have a simple form with a text input for entering messages to be sent to an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>. We also have a paragraph which we will use later on to display confirmation messages that we will receive back from the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'message-input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> output <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'message-output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> port1 <span class="token operator">=</span> channel<span class="token punctuation">.</span>port1<span class="token punctuation">;</span>

<span class="token comment">// Wait for the iframe to load</span>
iframe<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> onLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Listen for button clicks</span>
  button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> onClick<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Listen for messages on port1</span>
  port1<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> onMessage<span class="token punctuation">;</span>

  <span class="token comment">// Transfer port2 to the iframe</span>
  iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>channel<span class="token punctuation">.</span>port2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Post a message on port1 when the button is clicked</span>
<span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  port1<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Handle messages received on port1</span>
<span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div> <p>We start off by creating a new message channel by using the <a href="../messagechannel/messagechannel"><code>MessageChannel()</code></a> constructor.</p> <p>When the IFrame has loaded, we register an <code>onclick</code> handler for our button and an <code>onmessage</code> handler for <a href="../messagechannel/port1"><code>MessageChannel.port1</code></a>. Finally we transfer <a href="../messagechannel/port2"><code>MessageChannel.port2</code></a> to the IFrame using the <a href="../window/postmessage"><code>window.postMessage</code></a> method.</p> <p>Let's explore how the <code>iframe.contentWindow.postMessage</code> line works in a bit more detail. It takes three arguments:</p> <ol> <li>The message being sent. For this initial port transfering this message could be an empty string but in this example it is set to <code>'init'</code>.</li> <li>The origin the message is to be sent to. <code>*</code> means "any origin".</li> <li>An object, the ownership of which is transferred to the receiving browsing context. In this case, we are transferring <a href="../messagechannel/port2"><code>MessageChannel.port2</code></a> to the IFrame, so it can be used to communicate with the main page.</li> </ol> <p>When our button is clicked, we prevent the form from submitting as normal and then send the value entered in our text input to the IFrame via the <a href="../messagechannel"><code>MessageChannel</code></a>.</p>
<h2 id="receiving_the_port_and_message_in_the_iframe">Receiving the port and message in the IFrame</h2>
<p>Over in the IFrame, we have the following JavaScript:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> port2<span class="token punctuation">;</span>

<span class="token comment">// Listen for the initial port transfer message</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> initPort<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Setup the transferred port</span>
<span class="token keyword">function</span> <span class="token function">initPort</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  port2 <span class="token operator">=</span> e<span class="token punctuation">.</span>ports<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  port2<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> onMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Handle messages received on port2</span>
<span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> listItem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  listItem<span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  list<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>listItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
  port2<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Message received by IFrame: "'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">'"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div> <p>When the initial message is received from the main page via the <a href="../window/postmessage"><code>window.postMessage</code></a> method, we run the <code>initPort</code> function. This saves the transferred port and register an <code>onmessage</code> handler that will be called each time a message is passed through our <a href="../messagechannel"><code>MessageChannel</code></a>.</p> <p>When a message is received from the main page we create a list item and insert it in the unordered list, setting the <a href="../node/textcontent"><code>textContent</code></a> of the list item equal to the event's <code>data</code> attribute (this contains the actual message).</p> <p>Next, we post a confirmation message back to the main page via the message channel by calling <a href="../messageport/postmessage"><code>MessagePort.postMessage</code></a> on <a href="../messagechannel/port2"><code>MessageChannel.port2</code></a> that was initially transferred to the iframe.</p>
<h2 id="receiving_the_confirmation_in_the_main_page">Receiving the confirmation in the main page</h2>
<p>Returning to the main page, let's now look at the onmessage handler function.</p> <div class="code-example"><pre data-language="js"><span class="token comment">// Handle messages received on port1</span>
<span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div> <p>When a message is received back from the IFrame confirming that the original message was received successfully, this outputs the confirmation to a paragraph and empties the text input ready for the next message to be sent.</p>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://html.spec.whatwg.org/multipage/web-messaging.html#message-channels">HTML Standard (HTML)<br><small># message-channels</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>Using_channel_messaging</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>close</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>message_event</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>11.5</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>messageerror_event</code></th>
<td class="bc-supports-yes"><div>60</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>57</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>47</div></td>
<td class="bc-supports-no">
<div>No</div>
<div>See <a href="https://webkit.org/b/171216">bug 171216</a>.</div>
</td>
<td class="bc-supports-yes"><div>60</div></td>
<td class="bc-supports-yes"><div>60</div></td>
<td class="bc-supports-yes"><div>57</div></td>
<td class="bc-supports-yes"><div>47</div></td>
<td class="bc-supports-no">
<div>No</div>
<div>See <a href="https://webkit.org/b/171216">bug 171216</a>.</div>
</td>
<td class="bc-supports-yes"><div>8.0</div></td>
</tr>
<tr>
<th><code>onmessage</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>onmessageerror</code></th>
<td class="bc-supports-yes"><div>60</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>57</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>47</div></td>
<td class="bc-supports-no">
<div>No</div>
<div>See <a href="https://webkit.org/b/171216">bug 171216</a>.</div>
</td>
<td class="bc-supports-yes"><div>60</div></td>
<td class="bc-supports-yes"><div>60</div></td>
<td class="bc-supports-yes"><div>57</div></td>
<td class="bc-supports-yes"><div>44</div></td>
<td class="bc-supports-no">
<div>No</div>
<div>See <a href="https://webkit.org/b/171216">bug 171216</a>.</div>
</td>
<td class="bc-supports-yes"><div>8.0</div></td>
</tr>
<tr>
<th><code>postMessage</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>start</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>worker_support</code></th>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>Using_channel_messaging</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>4.4</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>MessageChannel</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>4.4</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>port1</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>4.4</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
<tr>
<th><code>port2</code></th>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>10</div></td>
<td class="bc-supports-yes"><div>10.6</div></td>
<td class="bc-supports-yes"><div>5</div></td>
<td class="bc-supports-yes"><div>4.4</div></td>
<td class="bc-supports-yes"><div>18</div></td>
<td class="bc-supports-yes"><div>41</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>4.2</div></td>
<td class="bc-supports-yes"><div>1.0</div></td>
</tr>
</tbody>
</table>
<p>BCD tables only load in the browser</p>


<h3 id="messageport">MessagePort</h3>
<p>BCD tables only load in the browser</p>


<h2 id="see_also">See also</h2>
<ul> <li><a href="../channel_messaging_api">Channel Messaging API</a></li> <li><a href="../web_workers_api">Web Workers API</a></li> <li><a href="../broadcast_channel_api">Broadcast Channel API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Channel_Messaging_API/Using_channel_messaging" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/Channel_Messaging_API/Using_channel_messaging</a>
  </p>
</div>
