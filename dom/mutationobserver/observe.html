<h1>MutationObserver.observe()</h1>
<div class="section-content">
<p> The <a href="../mutationobserver"><code>MutationObserver</code></a> method <code>observe()</code> configures the <code>MutationObserver</code> callback to begin receiving notifications of changes to the DOM that match the given options. </p> <p>Depending on the configuration, the observer may watch a single <a href="../node"><code>Node</code></a> in the DOM tree, or that node and some or all of its descendant nodes.</p> <p>To stop the <code>MutationObserver</code> (so that none of its callbacks will be triggered any longer), call <a href="disconnect"><code>MutationObserver.disconnect()</code></a>.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</pre></div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="target"><code>target</code></dt> <dd> <p> A DOM <a href="../node"><code>Node</code></a> (which may be an <a href="../element"><code>Element</code></a>) within the DOM tree to watch for changes, or to be the root of a subtree of nodes to be watched. </p> </dd> <dt id="options"><code>options</code></dt> <dd> <p> An object providing options that describe which DOM mutations should be reported to <code>mutationObserver</code>'s <code>callback</code>. At a minimum, one of <code>childList</code>, <code>attributes</code>, and/or <code>characterData</code> must be <code>true</code> when you call <a href="observe" aria-current="page"><code>observe()</code></a>. Otherwise, a <code>TypeError</code> exception will be thrown. </p> <p>Options are as follows:</p> <dl> <dt id="subtree">
<code>subtree</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> Set to <code>true</code> to extend monitoring to the entire subtree of nodes rooted at <code>target</code>. All of the other properties are then extended to all of the nodes in the subtree instead of applying solely to the <code>target</code> node. The default value is <code>false</code>. </p> </dd> <dt id="childlist">
<code>childList</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> Set to <code>true</code> to monitor the target node (and, if <code>subtree</code> is <code>true</code>, its descendants) for the addition of new child nodes or removal of existing child nodes. The default value is <code>false</code>. </p> </dd> <dt id="attributes">
<code>attributes</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>Set to <code>true</code> to watch for changes to the value of attributes on the node or nodes being monitored. The default value is <code>true</code> if either of <code>attributeFilter</code> or <code>attributeOldValue</code> is specified, otherwise the default value is <code>false</code>.</p> </dd> <dt id="attributefilter">
<code>attributeFilter</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An array of specific attribute names to be monitored. If this property isn't included, changes to all attributes cause mutation notifications. </p> </dd> <dt id="attributeoldvalue">
<code>attributeOldValue</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> Set to <code>true</code> to record the previous value of any attribute that changes when monitoring the node or nodes for attribute changes; see <a href="../mutationobserver#monitoring_attribute_values">Monitoring attribute values</a> in <a href="../mutationobserver">MutationObserver</a> for details on watching for attribute changes and value recording. The default value is <code>false</code>. </p> </dd> <dt id="characterdata">
<code>characterData</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> Set to <code>true</code> to monitor the specified target node (and, if <code>subtree</code> is <code>true</code>, its descendants) for changes to the character data contained within the node or nodes. The default value is <code>true</code> if <code>characterDataOldValue</code> is specified, otherwise the default value is <code>false</code>. </p> </dd> <dt id="characterdataoldvalue">
<code>characterDataOldValue</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> Set to <code>true</code> to record the previous value of a node's text whenever the text changes on nodes being monitored. The default value is <code>false</code>. </p> </dd> </dl> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="typeerror"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a></dt> <dd> <p>Thrown in any of the following circumstances:</p> <ul> <li> The <code>options</code> are configured such that nothing will actually be monitored. (For example, if <code>childList</code>, <code>attributes</code>, and <code>characterData</code> are all <code>false</code>.) </li> <li> The value of <code>options.attributes</code> is <code>false</code> (indicating that attribute changes are not to be monitored), but <code>attributeOldValue</code> is <code>true</code> and/or <code>attributeFilter</code> is present. </li> <li>The <code>characterDataOldValue</code> option is <code>true</code> but <code>characterData</code> is <code>false</code> (indicating that character changes are not to be monitored).</li> </ul> </dd> </dl></div>
<h2 id="usage_notes">Usage notes</h2>

<h3 id="reusing_mutationobservers">Reusing MutationObservers</h3>
<div class="section-content">
<p> You can call <code>observe()</code> multiple times on the same <code>MutationObserver</code> to watch for changes to different parts of the DOM tree and/or different types of changes. There are some caveats to note: </p> <ul> <li>If you call <code>observe()</code> on a node that's already being observed by the same <code>MutationObserver</code>, all existing observers are automatically removed from all targets being observed before the new observer is activated.</li> <li>If the same <code>MutationObserver</code> is not already in use on the target, then the existing observers are left alone and the new one is added.</li> </ul>
</div>
<h3 id="observation_follows_nodes_when_disconnected">Observation follows nodes when disconnected</h3>
<div class="section-content">
<p> Mutation observers are intended to let you be able to watch the desired set of nodes over time, even if the direct connections between those nodes are severed. If you begin watching a subtree of nodes, and a portion of that subtree is detached and moved elsewhere in the DOM, you continue to watch the detached segment of nodes, receiving the same callbacks as before the nodes were detached from the original subtree. </p> <p> In other words, until you've been notified that nodes are being split off from your monitored subtree, you'll get notifications of changes to that split-off subtree and its nodes. This prevents you from missing changes that occur after the connection is severed and before you have a chance to specifically begin monitoring the moved node or subtree for changes. </p> <p> Theoretically, this means that if you keep track of the <a href="../mutationrecord"><code>MutationRecord</code></a> objects describing the changes that occur, you should be able to "undo" the changes, rewinding the DOM back to its initial state. </p>
</div>
<h2 id="examples">Examples</h2>

<h3 id="basic_usage">Basic usage</h3>
<div class="section-content">
<p> In this example, we demonstrate how to call the method <code>observe()</code> on an instance of <a href="../mutationobserver"><code>MutationObserver</code></a>, once it has been set up, passing it a target element and an <code>options</code> object. </p> <div class="code-example"><pre data-language="js"><span class="token comment">// identify an element to observe</span>
<span class="token keyword">const</span> elementToObserve <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#targetElementId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create a new instance of `MutationObserver` named `observer`,</span>
<span class="token comment">// passing it a callback function</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'callback that runs when observer is triggered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// call `observe()` on that MutationObserver instance,</span>
<span class="token comment">// passing it the element to observe, and the options object</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>elementToObserve<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h3 id="using_attributefilter">Using <code>attributeFilter</code>
</h3>
<div class="section-content">
<p> In this example, a Mutation Observer is set up to watch for changes to the <code>status</code> and <code>username</code> attributes in any elements contained within a subtree that displays the names of users in a chat room. This lets the code, for example, reflect changes to users' nicknames, or to mark them as away from keyboard (AFK) or offline. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">mutationList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mutationList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">"attributes"</span><span class="token operator">:</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>attributeName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">case</span> <span class="token string">"status"</span><span class="token operator">:</span>
            <span class="token function">userStatusChanged</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>target<span class="token punctuation">.</span>username<span class="token punctuation">,</span> mutation<span class="token punctuation">.</span>target<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">"username"</span><span class="token operator">:</span>
            <span class="token function">usernameChanged</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>oldValue<span class="token punctuation">,</span> mutation<span class="token punctuation">.</span>target<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> userListElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#userlist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>userListElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">attributeFilter</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token string">"username"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attributeOldValue</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">DOM Standard <br><small># ref-for-dom-mutationobserver-observe②</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>observe</code></th>
<td class="bc-supports-yes">
<div>18</div>
<div>Before Chrome 33, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Chrome throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>12</div>
<div>Before Edge 79, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Edge throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>14</div>
<div>Before Firefox 36, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Firefox throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>11</div>
<div>Internet Explorer requires <code>attributes: true</code> when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Internet Explorer throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>15</div>
<div>Before Opera 20, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Opera throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>6</div>
<div>Before Safari 10.1, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Safari throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>4.4</div>
<div>Before WebView 4.4.3, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then WebView throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>18</div>
<div>Before Chrome 33, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Chrome throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>14</div>
<div>Before Firefox 36, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Firefox throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>14</div>
<div>Before Opera 20, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Opera throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>6</div>
<div>Before Safari iOS 10.3, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Safari throws a syntax error.</div>
</td>
<td class="bc-supports-yes">
<div>1.0</div>
<div>Before Samsung Internet 2.0, <code>attributes: true</code> is required when using <code>attributeFilter</code> or <code>attributeOldValue</code>. If <code>attributes: true</code> is not present, then Samsung Internet throws a syntax error.</div>
</td>
</tr></tbody>
</table>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/mutationobserver/observe/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/mutationobserver/observe/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMutationObserver%2Fobserve&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fmutationobserver%2Fobserve%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMutationObserver%2Fobserve%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fmutationobserver%2Fobserve%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Ffe07c13ff9f3b99c72ddd5a36fb58d88e09989c0%0A*+Document+last+modified%3A+2022-06-24T15%3A07%3A24.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-06-24T15:07:24.000Z">Jun 24, 2022</time>, <a href="observe/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe</a>
  </p>
</div>
