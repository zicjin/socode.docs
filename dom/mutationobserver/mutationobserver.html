<h1>MutationObserver()</h1>
<div class="section-content">
<p> The DOM <code>MutationObserver()</code> constructor — part of the <a href="../mutationobserver"><code>MutationObserver</code></a> interface — creates and returns a new observer which invokes a specified callback when DOM events occur. </p> <p> DOM observation does not begin immediately; the <a href="observe"><code>observe()</code></a> method must be called first to establish which portion of the DOM to watch and what kinds of changes to watch for. </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
</pre></div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="callback"><code>callback</code></dt> <dd> <p> A function which will be called on each DOM change that qualifies given the observed node or subtree and options. </p> <p>The <code>callback</code> function takes as input two parameters:</p> <ol> <li> An array of <a href="../mutationrecord"><code>MutationRecord</code></a> objects, describing each change that occurred; and </li> <li> the <a href="../mutationobserver"><code>MutationObserver</code></a> which invoked the <code>callback</code>. </li> </ol> <p>See the <a href="#examples">examples</a> below for more details.</p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> A new <a href="../mutationobserver"><code>MutationObserver</code></a> object, configured to call the specified <code>callback</code> when DOM mutations occur. </p></div>
<h2 id="examples">Examples</h2>
<div class="section-content"><p> This example creates a new <code>MutationObserver</code> configured to watch a node and all of its children for additions and removals of elements to the tree, as well as any changes to attributes on any of the elements in the tree. </p></div>
<h3 id="the_callback_function">The callback function</h3>
<div class="section-content">
<div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">mutationList<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mutationList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'childList'</span><span class="token operator">:</span>
        <span class="token comment">/* One or more children have been added to and/or removed
           from the tree.
           (See mutation.addedNodes and mutation.removedNodes.) */</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'attributes'</span><span class="token operator">:</span>
        <span class="token comment">/* An attribute value changed on the element in
           mutation.target.
           The attribute name is in mutation.attributeName, and
           its previous value is in mutation.oldValue. */</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div> <p> The <code>callback()</code> function is invoked when the observer sees changes matching the configuration of the observation request specified when calling <a href="observe"><code>observe()</code></a> to begin watching the DOM. </p> <p> The kind of change that took place (either a change to the list of children, or a change to an attribute) is detected by looking at the <a class="page-not-created"><code>mutation.type</code></a> property. </p>
</div>
<h3 id="creating_and_starting_the_observer">Creating and starting the observer</h3>
<div class="section-content">
<p>This code actually sets up the observation process.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> targetNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#someElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> observerOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token comment">// Omit (or set to false) to observe only changes to the parent node</span>
  <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">,</span> observerOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p> The desired subtree is located by finding an element with the ID <code>someElement</code>. A set of options for the observer is also established in the <code>observerOptions</code> record. In it, we specify values of <code>true</code> for both <code>childList</code> and <code>attributes</code>, so we get the information we want. </p> <p> Then the observer is instantiated, specifying the <code>callback()</code> function. We begin observing the DOM nodes of interest by calling <code>observe()</code>, specifying the <code>target</code> node and the <code>options</code> object. </p> <p> From this point until <a href="disconnect"><code>disconnect()</code></a> is called, <code>callback()</code> will be called each time an element is added to or removed from the DOM tree rooted at <code>targetNode</code>, or any of those elements' attributes are changed. </p>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">DOM Standard <br><small># ref-for-dom-mutationobserver-mutationobserver①</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>MutationObserver</code></th>
<td class="bc-supports-yes">
<div>26</div>
<div>18</div>
</td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes"><div>11</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes">
<div>7</div>
<div>6</div>
</td>
<td class="bc-supports-yes">
<div>≤37</div>
<div>4.4</div>
</td>
<td class="bc-supports-yes">
<div>26</div>
<div>18</div>
</td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes">
<div>7</div>
<div>6</div>
</td>
<td class="bc-supports-yes">
<div>1.5</div>
<div>1.0</div>
</td>
</tr></tbody>
</table>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/mutationobserver/mutationobserver/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/mutationobserver/mutationobserver/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMutationObserver%2FMutationObserver&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fmutationobserver%2Fmutationobserver%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMutationObserver%2FMutationObserver%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fmutationobserver%2Fmutationobserver%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Fd72d468338f894b3c24a2cb1293216652a915524%0A*+Document+last+modified%3A+2022-07-24T05%3A37%3A39.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-07-24T05:37:39.000Z">Jul 24, 2022</time>, <a href="mutationobserver/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/MutationObserver" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/MutationObserver</a>
  </p>
</div>
