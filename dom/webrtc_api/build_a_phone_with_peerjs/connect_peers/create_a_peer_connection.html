<h1>Creating a peer connection</h1>
<div class="section-content">
<ul class="prev-next"> <li><a class="button secondary" href="show_hide_html"><span class="button-wrap"> Previous </span></a></li> <li><a class="button secondary" href="creating_a_call"><span class="button-wrap"> Next </span></a></li> </ul> <p>Next, you want to ensure your users have a way of connecting with their peers. In order to connect two peers, you'll need the peer ID for one of them.</p> <ol> <li>Let's create a variable to contain the ID, and a function to request that the user enters it that we'll call later. Add this to the bottom of <code>script.js</code>: <div class="code-example"><pre data-language="js"><span class="token keyword">let</span> code<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getStreamCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    code <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">'Please enter the sharing code'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div>The <a href="../../../window/prompt"><code>window.prompt()</code></a> method provides a convenient way of getting the relevant peer ID â€” you can use this when you want to collect the peerID needed to create the connection. </li> <li>Using the peerJS framework, you'll want to connect the <code>localPeer</code> to the <code>remotePeer</code>. PeerJS gives us the <code>connect()</code> function, which takes a peer ID to connect to. Add this block below your previous code: <div class="code-example"><pre data-language="js">    <span class="token keyword">let</span> conn<span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">connectPeers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        conn <span class="token operator">=</span> peer<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</pre></div> </li> <li>When a connection is created, let's use the PeerJS framework's <code>on('connection')</code> to set the remote peer's ID and open the connection. The function for this listener accepts a <code>connection</code> object which is an instance of the <code>DataConnection</code> object (which is a wrapper around WebRTC's <a href="../../../rtcdatachannel"><code>RTCDataChannel</code></a>); within this function you'll want to assign it to a variable. Again you'll want to create the variable outside of the function so that you can assign it later. Add the following below your previous code: <div class="code-example"><pre data-language="js">peer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">connection</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    conn <span class="token operator">=</span> connection<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> </li> </ol>
<ul class="prev-next"> <li><a class="button secondary" href="show_hide_html"><span class="button-wrap"> Previous </span></a></li> <li><a class="button secondary" href="creating_a_call"><span class="button-wrap"> Next </span></a></li> </ul>
</div>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/webrtc_api/build_a_phone_with_peerjs/connect_peers/create_a_peer_connection/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/webrtc_api/build_a_phone_with_peerjs/connect_peers/create_a_peer_connection/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebRTC_API%2FBuild_a_phone_with_peerjs%2FConnect_peers%2FCreate_a_peer_connection&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fwebrtc_api%2Fbuild_a_phone_with_peerjs%2Fconnect_peers%2Fcreate_a_peer_connection%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebRTC_API%2FBuild_a_phone_with_peerjs%2FConnect_peers%2FCreate_a_peer_connection%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fwebrtc_api%2Fbuild_a_phone_with_peerjs%2Fconnect_peers%2Fcreate_a_peer_connection%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F41fe03908c341ab928c4a8d5ee48e03e28e2dd6c%0A*+Document+last+modified%3A+2022-06-03T04%3A21%3A39.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-06-03T04:21:39.000Z">Jun 3, 2022</time>, <a href="create_a_peer_connection/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Build_a_phone_with_peerjs/Connect_peers/Create_a_peer_connection" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Build_a_phone_with_peerjs/Connect_peers/Create_a_peer_connection</a>
  </p>
</div>
