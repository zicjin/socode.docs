<h1>Using the Media Capabilities API</h1>
<div class="section-content">
<p>The <a href="../media_capabilities_api">Media Capabilities API</a> provides several key features to help you better decide how to handle media, but also to determine how well media is being handled, in real time.</p> <p>These features include:</p> <ul> <li>The ability to query the browser to determine its ability to encode or decode media given a specified set of encoding parameters. These parameters may include the codecs, resolutions, bit rates, frame rates, and other such details. With the Media Capabilities API, you can determine not just if the browser can support a given format, but whether or not it can do so efficiently and smoothly. In short, this API replaces—and improves upon—the <a href="../mediasource"><code>MediaSource</code></a> method <a href="../mediasource/istypesupported"><code>isTypeSupported()</code></a> or the <a href="../htmlmediaelement"><code>HTMLMediaElement</code></a> method <a href="../htmlmediaelement/canplaytype"><code>canPlayType()</code></a>.</li> <li>More and more finely-detailed information about the display's properties, so that informed decisions can be made when choosing the best format to play on the user's device. For example, you can use the API to ensure that you don't try to play High Dynamic Range (HDR) content on a Standard Dynamic Range (SDR) screen.</li> <li>Support for getting real-time feedback about the playback of media, so your code can make informed decisions about adapting the stream's quality or other settings to manage the user's perceived media performance and quality. One feature of this is the ability to detect when the device switches GPUs, so you can make appropriate adjustments based on the new GPU's capabilities.</li> </ul> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> The display capabilities functionality mentioned in the third point above have not yet appeared in any browser. They will be a useful feature of the API once available, but there is a high probability of the display capabilities functionality changing a great deal before browser implementations arrive.</p> </div>
</div>
<h2 id="the_mediacapabilities_interface">The MediaCapabilities interface</h2>
<div class="section-content">
<p>The <a href="../mediacapabilities"><code>MediaCapabilities</code></a> is available using the <a href="../navigator/mediacapabilities"><code>mediaCapabilities</code></a> property which is provided by both the <code>navigator</code> object and the <a href="../workernavigator"><code>WorkerNavigator</code></a> object; in other words, the Media Capabilities API is available both on the main thread and from workers.</p> <p>If the object exists, Media Capabilities API is available. You can, therefore, test for the presence of the API like so:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"mediaCapabilities"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// mediaCapabilities is available</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// mediaCapabilities IS NOT available</span>
<span class="token punctuation">}</span>
</pre></div> <p>Taking video as an example, to obtain information about video decoding abilities, you create a video decoding configuration which you pass as a parameter to <a href="../mediacapabilities/decodinginfo"><code>MediaCapabilities.decodingInfo()</code></a> method. This returns a promise that fulfills with information about the media capabilities as to whether the video can be decoded, and whether decoding will be smooth and power efficient. You can also test audio decoding as well as video and audio encoding.</p>
</div>
<h3 id="creating_a_video_decoding_configuration">Creating a video decoding configuration</h3>
<div class="section-content">
<p>The <a href="../mediacapabilities/decodinginfo"><code>MediaCapabilities.decodingInfo()</code></a> method takes as a parameter a media decoding configuration.</p> <p>In our example, we are testing the decoding capabilities of a video configuration. The configuration requires the type of media being tested — e.g. a plain <code>file</code> or <a href="../mediasource"><code>MediaSource</code></a> — and a video configuration object that includes values for the <code>contentType</code>, <code>width</code>, <code>height</code>, <code>bitrate</code>, and <code>framerate</code>:</p> <ul> <li>The <code>contentType</code> must be a string specifying a <a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs">valid video MIME type</a>.</li> <li>The <code>width</code> and <code>height</code> are the horizontal and vertical dimensions of the video; these are also used to determine the aspect ratio.</li> <li>The <code>bitrate</code> is the number of bits used to encode one second of video.</li> <li>The <code>framerate</code> is the number of frames which are played per second of time when playing the video.</li> </ul> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> videoConfiguration <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"video/webm;codecs=vp8"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
      <span class="token literal-property property">bitrate</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
      <span class="token literal-property property">framerate</span><span class="token operator">:</span> <span class="token number">15</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div> <p>Had we been querying the decodability of an audio file, we would create an audio configuration including the number of channels and sample rate, leaving out the properties that apply only to video—namely, the dimensions and the frame rate:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> audioConfiguration <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">audio</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"audio/ogg"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">channels</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token literal-property property">bitrate</span><span class="token operator">:</span> <span class="token number">132700</span><span class="token punctuation">,</span>
      <span class="token literal-property property">samplerate</span><span class="token operator">:</span> <span class="token number">5200</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div> <p> Had we been testing encoding capabilities, we would have created a slightly different configuration. In this case the type of media being tested is either <code>record</code> (for recording media, i.e. a <a href="../mediarecorder"><code>MediaRecorder</code></a> object) or <code>transmission</code> (for media transmitted over electronic means like <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>) — plus either an audio or video configuration as described above. </p>
</div>
<h3 id="querying_the_browser_about_decoding_abilities">Querying the browser about decoding abilities</h3>
<div class="section-content">
<p>Now that we've created a video decoding configuration we can pass it as a parameter of the <a href="../mediacapabilities/decodinginfo"><code>decodingInfo()</code></a> method to determine if a video matching this configuration would be decodable and if the playback would be smooth and power efficient.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">let</span> promise <span class="token operator">=</span> navigator<span class="token punctuation">.</span>mediaCapabilities<span class="token punctuation">.</span><span class="token function">decodingInfo</span><span class="token punctuation">(</span>videoConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>The <code>decodingInfo()</code> and <a href="../mediacapabilities/encodinginfo"><code>encodingInfo()</code></a> methods both return promises. Once the promises state is fulfilled, you can access the <code>supported</code>, <code>smooth</code>, and <code>powerEfficient</code> properties from the returned object.</p>
</div>
<h3 id="handling_the_response">Handling the response</h3>
<div class="section-content">
<p>Instead of the assigning the promise to a variable, we can output the values returned by the promise to the console:</p> <div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>mediaCapabilities<span class="token punctuation">.</span><span class="token function">decodingInfo</span><span class="token punctuation">(</span>videoConfiguration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">This configuration is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>supported <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">'not '</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">supported,</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>smooth <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">'not '</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">smooth, and</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>powerEfficient <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">'not '</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">power efficient.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="handling_errors">Handling errors</h2>
<div class="section-content">
<p>In our video decoding example, a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a> would be raised if the media configuration passed to the <a href="../mediacapabilities/decodinginfo"><code>decodingInfo()</code></a> method was invalid. There are a few reasons why an error might occur, including:</p> <ul> <li>The specified <code>type</code> isn't one of the two permitted values: <code>file</code> or <code>media-source</code>
</li> <li>The <code>contentType</code> given is</li> </ul> <p>The error can be due to the <code>type</code> not being one of the two possible values, the <code>contentType</code> not being a valid codec MIME type, or invalid or omitted definitions being omitted from the video configuration object.</p> <div class="code-example"><pre data-language="js">navigator<span class="token punctuation">.</span>mediaCapabilities<span class="token punctuation">.</span><span class="token function">decodingInfo</span><span class="token punctuation">(</span>videoConfiguration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'It worked'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">It failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="media_capabilities_live_example">Media Capabilities live example</h2>

<h3 id="css">CSS</h3>
<div class="section-content"><div class="code-example"><pre data-language="css"><span class="token selector">li</span> <span class="token punctuation">{</span> <span class="token property">margin</span> <span class="token punctuation">:</span> 1em<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</pre></div></div>
<h3 id="html">HTML</h3>
<div class="section-content"><div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Select your video configuration and find out if this browser supports the codec,
and whether decoding will be smooth and power efficient:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>codec<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Select a codec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>codec<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>video/webm; codecs=vp8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>video/webm; codecs=vp9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>video/mp4; codecs=avc1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>video/mp4; codecs=avc1.420034<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>video/ogg; codecs=theora<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>invalid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>size<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Select a size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>size<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>7680x4320<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>3840x2160<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>2560x1440<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>1920x1080<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>1280x720<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">selected</span><span class="token punctuation">&gt;</span></span>800x600<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>640x480<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>320x240<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> x <span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>none<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>framerate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Select a framerate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>framerate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>60<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">selected</span><span class="token punctuation">&gt;</span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bitrate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Select a bitrate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bitrate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>4000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>2500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>800<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Test this Video Configuration<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>try-it<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>results<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</pre></div></div>
<h3 id="javascript">JavaScript</h3>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token keyword">let</span> mc <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">videoConfiguration</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token function">tryIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   mc<span class="token punctuation">.</span><span class="token function">createConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   mc<span class="token punctuation">.</span><span class="token function">testIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">createConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> size <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'size'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mc<span class="token punctuation">.</span>videoConfiguration <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">contentType</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'codec'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">bitrate</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'bitrate'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token literal-property property">framerate</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'framerate'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">testIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    navigator<span class="token punctuation">.</span>mediaCapabilities<span class="token punctuation">.</span><span class="token function">decodingInfo</span><span class="token punctuation">(</span>mc<span class="token punctuation">.</span>videoConfiguration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        mcv <span class="token operator">=</span> mc<span class="token punctuation">.</span>videoConfiguration<span class="token punctuation">.</span>video<span class="token punctuation">;</span>
      content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">A </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mcv<span class="token punctuation">.</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mcv<span class="token punctuation">.</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mcv<span class="token punctuation">.</span>contentType<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mcv<span class="token punctuation">.</span>framerate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">fps and </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mcv<span class="token punctuation">.</span>bitrate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> bps video </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>supported <span class="token operator">?</span> <span class="token string">' IS '</span> <span class="token operator">:</span> <span class="token string">'IS NOT '</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> supported,</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      content <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>smooth <span class="token operator">?</span> <span class="token string">' IS '</span> <span class="token operator">:</span> <span class="token string">' is NOT '</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> smooth, and</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      content <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>powerEfficient <span class="token operator">?</span> <span class="token string">' IS '</span> <span class="token operator">:</span> <span class="token string">' IS NOT '</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">power efficient.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"results"</span><span class="token punctuation">)</span>
      li<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> content<span class="token punctuation">;</span>
      ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"results"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        li<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Codec </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mc<span class="token punctuation">.</span>videoConfiguration<span class="token punctuation">.</span>video<span class="token punctuation">.</span>contentType<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> threw an error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'try-it'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> mc<span class="token punctuation">.</span>tryIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></div>
<h3 id="live_result">Live Result</h3>
<div class="section-content"><iframe class="sample-code-frame" title="Media Capabilities live example sample" id="frame_media_capabilities_live_example" width="100%" height="400" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Media_Capabilities_API/Using_the_Media_Capabilities_API/_sample_.media_capabilities_live_example.html" loading="lazy"></iframe></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>Using_the_Media_Capabilities_API</code></th>
<td class="bc-supports-yes"><div>66</div></td>
<td class="bc-supports-yes"><div>79</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>53</div></td>
<td class="bc-supports-yes"><div>13</div></td>
<td class="bc-supports-yes"><div>66</div></td>
<td class="bc-supports-yes"><div>66</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-yes"><div>48</div></td>
<td class="bc-supports-yes"><div>13</div></td>
<td class="bc-supports-yes"><div>9.0</div></td>
</tr>
<tr>
<th><code>decodingInfo</code></th>
<td class="bc-supports-yes">
<div>66</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
<td class="bc-supports-yes">
<div>79</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
<td class="bc-supports-yes">
<div>63</div>
<div>Before Firefox 101, <code>decodingInfo()</code> ignored <code>codecs</code> parameter options for <code>av01</code> codecs (treating them as <code>av1</code>).</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes">
<div>53</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
<td class="bc-supports-yes"><div>13</div></td>
<td class="bc-supports-yes">
<div>66</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
<td class="bc-supports-yes">
<div>66</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
<td class="bc-supports-yes">
<div>63</div>
<div>Before Firefox 101, <code>decodingInfo()</code> ignored <code>codecs</code> parameter options for <code>av01</code> codecs (treating them as <code>av1</code>).</div>
</td>
<td class="bc-supports-yes">
<div>48</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
<td class="bc-supports-yes"><div>13</div></td>
<td class="bc-supports-yes">
<div>9.0</div>
<div>["<code>codecs</code> string can contain any subset of optional parameters (should be all or none).", "Errors if <code>codecs</code> string contains unexpected characters (should evaluate string up to character)."]</div>
</td>
</tr>
<tr>
<th><code>encodingInfo</code></th>
<td class="bc-supports-yes">
<div>101</div>
<div>67-101</div>
</td>
<td class="bc-supports-yes">
<div>101</div>
<div>79-101</div>
</td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes">
<div>87</div>
<div>54-87</div>
</td>
<td class="bc-supports-yes"><div>15.4</div></td>
<td class="bc-supports-yes"><div>101</div></td>
<td class="bc-supports-yes">
<div>101</div>
<div>67-101</div>
</td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-yes"><div>70</div></td>
<td class="bc-supports-yes"><div>15.4</div></td>
<td class="bc-supports-no"><div>No</div></td>
</tr>
</tbody>
</table>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../navigator/mediacapabilities"><code>navigator.mediaCapabilities</code></a></li> </ul></div>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/media_capabilities_api/using_the_media_capabilities_api/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/media_capabilities_api/using_the_media_capabilities_api/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMedia_Capabilities_API%2FUsing_the_Media_Capabilities_API&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Fmedia_capabilities_api%2Fusing_the_media_capabilities_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMedia_Capabilities_API%2FUsing_the_Media_Capabilities_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Fmedia_capabilities_api%2Fusing_the_media_capabilities_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F5bbd76c65594a71609ea28f6d5fe8ef7dd553c61%0A*+Document+last+modified%3A+2022-07-23T11%3A23%3A29.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-07-23T11:23:29.000Z">Jul 23, 2022</time>, <a href="using_the_media_capabilities_api/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Capabilities_API/Using_the_Media_Capabilities_API" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/Media_Capabilities_API/Using_the_Media_Capabilities_API</a>
  </p>
</div>
