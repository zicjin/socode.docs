<h1>ReadableByteStreamController</h1>
<div class="section-content">
<p> The <code>ReadableByteStreamController</code> interface of the <a href="streams_api">Streams API</a> represents a controller for a <a href="streams_api/using_readable_byte_streams">readable byte stream</a>. It allows control of the state and internal queue of a <a href="readablestream"><code>ReadableStream</code></a> with an underlying byte source, and enables efficient zero-copy transfer of data from the underlying source to a consumer when the stream's internal queue is empty. </p> <p> An instance of this controller type is created if an <code>underlyingSource</code> object with the property <code>type="bytes"</code> is passed as an argument to the <a href="readablestream/readablestream#type"><code>ReadableStream()</code> constructor</a>. The <code>underlyingSource</code> object may also define <a href="readablestream/readablestream#start"><code>start()</code></a> and <a href="readablestream/readablestream#pull"><code>pull()</code></a> callback functions. These are called with the controller as a parameter, in order to setup the underlying source, and request data when needed. </p> <p> The underlying source uses the controller to supply data to the stream via its <a href="#readablebytestreamcontroller.byobrequest"><code>byobRequest</code></a> property or <a href="#readablebytestreamcontroller.enqueue"><code>enqueue()</code></a> method. <a href="#readablebytestreamcontroller.byobrequest"><code>byobRequest</code></a> is a <a href="readablestreambyobrequest"><code>ReadableStreamBYOBRequest</code></a> object that represents a pending request from a consumer to make a zero-copy transfer of data direct to a consumer. <code>byobRequest</code> must be used to copy data if it exists (do not use <code>enqueue()</code> in this case)! If the underlying source needs to pass data to the stream and <code>byobRequest</code> is <code>null</code> then the source can call <a href="#readablebytestreamcontroller.enqueue"><code>enqueue()</code></a> to add the data to the stream's internal queues. </p> <p> Note that the <a href="#readablebytestreamcontroller.byobrequest"><code>byobRequest</code></a> is only created in "BYOB mode" when there is a request from a reader and the stream's internal queue is empty. "BYOB mode" is enabled when using a <a href="readablestreambyobreader"><code>ReadableStreamBYOBReader</code></a> (typically constructed by calling <a href="readablestream/getreader"><code>ReadableStream.getReader()</code></a> with the argument <code>{ mode: 'byob' }</code>). It is also enabled when using a default reader and <a href="readablestream/readablestream#autoallocatechunksize"><code>autoAllocateChunkSize</code></a> is specified in the <a href="readablestream/readablestream#autoallocatechunksize"><code>ReadableController()</code> constructor</a>. </p> <p> An underlying byte source can also use the controller to <a href="#readablebytestreamcontroller.close"><code>close()</code></a> the stream when all the data has been sent and report errors from the underlying source using <a href="#readablebytestreamcontroller.error"><code>error()</code></a>. The controller's <a href="#readablebytestreamcontroller.desiredsize"><code>desiredSize</code></a> property is used to apply "backpressure", informing the underlying source of the size of the internal queue (small values indicate that the queue is filling up, hinting to the underlying source that it is be desirable to pause or throttle the inflow). </p> <p>Note that even though the controller is primarily used by the underlying byte source, there is no reason it cannot be stored used by other parts of the system to signal the stream.</p>
</div>
<h2 id="constructor">Constructor</h2>
<div class="section-content"><p>None. <code>ReadableByteStreamController</code> instances are automatically created if an <code>underlyingSource</code> with the property <code>type="bytes"</code> is passed to the <a href="readablestream/readablestream#type"><code>ReadableStream()</code> constructor</a>.</p></div>
<h2 id="properties">Properties</h2>
<div class="section-content"><dl> <dt id="readablebytestreamcontroller.byobrequest">
<a href="readablebytestreamcontroller/byobrequest"><code>ReadableByteStreamController.byobRequest</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p>Returns the current BYOB pull request, or <code>null</code> if there no outstanding request.</p> </dd> <dt id="readablebytestreamcontroller.desiredsize">
<a href="readablebytestreamcontroller/desiredsize"><code>ReadableByteStreamController.desiredSize</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p>Returns the desired size required to fill the stream's internal queue.</p> </dd> </dl></div>
<h2 id="methods">Methods</h2>
<div class="section-content"><dl> <dt id="readablebytestreamcontroller.close"><a href="readablebytestreamcontroller/close"><code>ReadableByteStreamController.close()</code></a></dt> <dd> <p>Closes the associated stream.</p> </dd> <dt id="readablebytestreamcontroller.enqueue"><a href="readablebytestreamcontroller/enqueue"><code>ReadableByteStreamController.enqueue()</code></a></dt> <dd> <p>Enqueues a given chunk in the associated stream.</p> </dd> <dt id="readablebytestreamcontroller.error"><a href="readablebytestreamcontroller/error"><code>ReadableByteStreamController.error()</code></a></dt> <dd> <p>Causes any future interactions with the associated stream to error.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>The controller is used by an underlying source to transfer or enqueue data, to signal that the stream has no more data (has closed) or has errored. It is also used to signal the underlying source from "upstream" of the desired data rate, using <a href="readablebytestreamcontroller/desiredsize"><code>desiredSize</code></a>.</p> <p>The example in <a href="streams_api/using_readable_byte_streams">Using readable byte streams</a>, in particular <a href="streams_api/using_readable_byte_streams#creating_a_readable_socket_push_byte_stream">Creating a readable socket push byte stream</a>, show most of these cases.</p>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://streams.spec.whatwg.org/#rbs-controller-class">Streams Standard <br><small># rbs-controller-class</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>ReadableByteStreamController</code></th>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>99-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>75</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15.0</div></td>
</tr>
<tr>
<th><code>byobRequest</code></th>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>99-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>75</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15.0</div></td>
</tr>
<tr>
<th><code>close</code></th>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>99-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>75</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15.0</div></td>
</tr>
<tr>
<th><code>desiredSize</code></th>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>99-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>75</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15.0</div></td>
</tr>
<tr>
<th><code>enqueue</code></th>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>99-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>75</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15.0</div></td>
</tr>
<tr>
<th><code>error</code></th>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>99-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>75</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>89</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>63</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15.0</div></td>
</tr>
</tbody>
</table>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="streams_api/using_readable_byte_streams">Using readable byte streams</a></li> </ul></div>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/readablebytestreamcontroller/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/readablebytestreamcontroller/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FReadableByteStreamController&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Freadablebytestreamcontroller%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FReadableByteStreamController%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Freadablebytestreamcontroller%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F5f38ba432b8f002911fbbf3b2333fbbe73b4eeba%0A*+Document+last+modified%3A+2022-07-12T00%3A16%3A19.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-07-12T00:16:19.000Z">Jul 12, 2022</time>, <a href="readablebytestreamcontroller/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableByteStreamController" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/ReadableByteStreamController</a>
  </p>
</div>
