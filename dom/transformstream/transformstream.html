<h1>TransformStream()</h1>
<div class="section-content"><p>The <code>TransformStream()</code> constructor creates a new <a href="../transformstream"><code>TransformStream</code></a> object which represents a pair of streams: a <a href="../writablestream"><code>WritableStream</code></a> representing the writable side, and a <a href="../readablestream"><code>ReadableStream</code></a> representing the readable side.</p></div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token keyword">new</span> <span class="token class-name">TransformStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">TransformStream</span><span class="token punctuation">(</span>transformer<span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">TransformStream</span><span class="token punctuation">(</span>transformer<span class="token punctuation">,</span> writableStrategy<span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">TransformStream</span><span class="token punctuation">(</span>transformer<span class="token punctuation">,</span> writableStrategy<span class="token punctuation">,</span> readableStrategy<span class="token punctuation">)</span>
</pre></div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content">
<dl> <dt id="transformer">
<code>transformer</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An object representing the <code>transformer</code>. If not supplied the resulting stream will be an <strong>identity transform stream</strong> which forwards all chunks written to its writable side to its readable side, without any changes.</p> <p>The transformer object can contain any of the following methods. In each method <code>controller</code> is an instance of <a href="../transformstreamdefaultcontroller"><code>TransformStreamDefaultController</code></a>.</p> <dl> <dt id="startcontroller"><code>start(controller)</code></dt> <dd> <p>Called when the <code>TransformStream</code> is constructed. It is typically used to enqueue chunks using <a href="../transformstreamdefaultcontroller/enqueue"><code>TransformStreamDefaultController.enqueue()</code></a>.</p> </dd> <dt id="transformchunk_controller"><code>transform(chunk, controller)</code></dt> <dd> <p>Called when a chunk written to the writable side is ready to be transformed, and performs the work of the transformation stream. If no <code>transform()</code> method is supplied, the identity transform is used, and the chunk will be enqueued with no changes.</p> </dd> <dt id="flushcontroller"><code>flush(controller)</code></dt> <dd> <p>Called after all chunks written to the writable side have been successfully transformed, and the writable side is about to be closed.</p> </dd> </dl> </dd> <dt id="writablestrategy">
<code>writableStrategy</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An object that optionally defines a queuing strategy for the stream. This takes two parameters: </p> <dl> <dt id="highwatermark"><code>highWaterMark</code></dt> <dd> <p> A non-negative integer. This defines the total number of chunks that can be contained in the internal queue before backpressure is applied. </p> </dd> <dt id="sizechunk"><code>size(chunk)</code></dt> <dd> <p> A method containing a parameter <code>chunk</code>. This indicates the size to use for each chunk, in bytes. </p> </dd> </dl> </dd> <dt id="readablestrategy">
<code>readableStrategy</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An object that optionally defines a queuing strategy for the stream. This takes two parameters: </p> <dl> <dt id="highwatermark_2"><code>highWaterMark</code></dt> <dd> <p> A non-negative integer. This defines the total number of chunks that can be contained in the internal queue before backpressure is applied. </p> </dd> <dt id="sizechunk_2"><code>size(chunk)</code></dt> <dd> <p> A method containing a parameter <code>chunk</code>. This indicates the size to use for each chunk, in bytes. </p> </dd> </dl> </dd> </dl> <div class="notecard note" id="sect1"> <p> <strong>Note:</strong> You could define your own custom <code>readableStrategy</code> or <code>writableStrategy</code>, or use an instance of <a href="../bytelengthqueuingstrategy"><code>ByteLengthQueuingStrategy</code></a> or <a href="../countqueuingstrategy"><code>CountQueuingStrategy</code></a> for the object values. </p> </div>
</div>
<h2 id="examples">Examples</h2>

<h3 id="transforming_text_to_uppercase">Transforming text to uppercase</h3>
<div class="section-content">
<p>The following example transforms text to uppercase chunk by chunk. This example is from <a href="https://web.dev/streams/" rel=" noopener">Streams—The Definitive Guide</a>, which has a number of examples of different types of streams.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">upperCaseStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TransformStream</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> controller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">appendToDOMStream</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WritableStream</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'./lorem-ipsum.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  response<span class="token punctuation">.</span>body
    <span class="token punctuation">.</span><span class="token function">pipeThrough</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextDecoderStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipeThrough</span><span class="token punctuation">(</span><span class="token function">upperCaseStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipeTo</span><span class="token punctuation">(</span><span class="token function">appendToDOMStream</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h3 id="creating_an_identity_transform_stream">Creating an identity transform stream</h3>
<div class="section-content">
<p>If no <code>transformer</code> argument is supplied then the result will be an identity transform stream which forwards all chunks written to the writable side to the readable side with no changes. In the following example an identity transform stream is used to add buffering to a pipe.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> writableStrategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteLengthQueuingStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">highWaterMark</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
readableStream
  <span class="token punctuation">.</span><span class="token function">pipeThrough</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransformStream</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> writableStrategy<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipeTo</span><span class="token punctuation">(</span>writableStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">Streams Standard <br><small># ref-for-ts-constructor④</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>TransformStream</code></th>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>79</div></td>
<td class="bc-supports-yes">
<div>102</div>
<div>101-102</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>54</div></td>
<td class="bc-supports-yes"><div>14.1</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>102</div></td>
<td class="bc-supports-yes"><div>48</div></td>
<td class="bc-supports-yes"><div>14.5</div></td>
<td class="bc-supports-yes"><div>9.0</div></td>
</tr></tbody>
</table>
<aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/transformstream/transformstream/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/transformstream/transformstream/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FTransformStream%2FTransformStream&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Ftransformstream%2Ftransformstream%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FTransformStream%2FTransformStream%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Ftransformstream%2Ftransformstream%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Fce11e48185cbcfa321cf338fbd72387da496f05e%0A*+Document+last+modified%3A+2022-07-06T10%3A21%3A07.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-07-06T10:21:07.000Z">Jul 6, 2022</time>, <a href="transformstream/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/TransformStream/TransformStream" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/TransformStream/TransformStream</a>
  </p>
</div>
