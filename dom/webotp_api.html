<h1>WebOTP API</h1>
<div class="notecard secure">
<strong id="secure_context">Secure context</strong><p>This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p>
</div> <p class="summary">The <strong>WebOTP API</strong> provides a method for verifying that a phone number belongs to the user, by generating a one-time password on receipt of a specially formatted SMS message.</p>
<h2 id="concepts_and_usage"> Concepts and Usage</h2>
<p>Phone numbers are often used as a way to identify the user of an app, and to verify that the number belongs to the user, SMS is frequently deployed. A typical scenario would involve a message being sent to the user with a one-time password. They would then need to copy and paste that password into a form to verify that the user owns the number.</p> <p>The WebOTP API removes friction from this process by allowing the password to be received by the app and verified automatically, with no need to copy and paste any codes.</p>
<h2 id="interfaces"> Interfaces</h2>
<dl> <dt><a href="otpcredential"><code>OTPCredential</code></a></dt> <dd>Extends <a href="credential"><code>Credential</code></a> and contains the attributes that are returned when a new one-time password is created.</dd> </dl>
<h2 id="examples">Examples</h2>
<p>In this example, when an SMS message arrives, and the user grants permission, an <a href="otpcredential"><code>OTPCredential</code></a> object is returned with a one-time password. This password is then prefilled into the form field, and the form submitted.</p> <p><a href="https://glitch.com/edit/#!/web-otp?path=views%2Findex.html%3A55%3A8" rel=" noopener">Try the demo using a phone here</a>.</p> <div class="code-example"><pre data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>one-time-code<span class="token punctuation">"</span></span> <span class="token attr-name">inputmode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>numeric<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></pre></div> <div class="code-example"><pre data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'OTPCredential'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input[autocomplete="one-time-code"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>input<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> form <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ac<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    navigator<span class="token punctuation">.</span>credentials<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      otp<span class="token operator">:</span> <span class="token punctuation">{</span> transport<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'sms'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      signal<span class="token operator">:</span> ac<span class="token punctuation">.</span>signal
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">otp</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      input<span class="token punctuation">.</span>value <span class="token operator">=</span> otp<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">)</span> form<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div>
<h2 id="specifications">Specifications</h2>
<p>{{Specifications}}</p>
<h2 id="see_also">See also</h2>
<ul> <li><a href="https://web.dev/web-otp/" rel=" noopener">Verify phone numbers on the web with WebOTP</a></li> <li><a href="https://web.dev/web-otp-iframe/" rel=" noopener">Fill OTP forms within cross-origin iframes with WebOTP API</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebOTP_API" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/WebOTP_API</a>
  </p>
</div>
