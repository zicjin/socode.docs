  <h1 id="update-angular">Update Angular</h1> <p>This guide contains information to update to Angular version 14.</p> <h2 id="update-angular-cli-applications">Update Angular CLI applications</h2> <p>For step-by-step instructions on how to update to the latest Angular release and leverage the Angular automated migration tools, use the interactive update guide at <a href="https://update.angular.io">update.angular.io</a>.</p> <h2 id="changes-and-deprecations-in-version-14">Changes and deprecations in version 14</h2> <blockquote class="alert is-helpful"> <p>For information about the deprecation and removal practices of Angular, see <a href="releases#deprecation-practices">Angular Release Practices</a>.</p> </blockquote> <ul> <li> <p><strong>Strictly Typed Reactive Forms</strong></p> <p>The Reactive Forms types <code><a href="../api/forms/abstractcontrol" class="code-anchor">AbstractControl</a></code>, <code><a href="../api/forms/formcontrol" class="code-anchor">FormControl</a></code>, <code><a href="../api/forms/formgroup" class="code-anchor">FormGroup</a></code>, and <code><a href="../api/forms/formarray" class="code-anchor">FormArray</a></code> now support a generic parameter which allows for strict typing of the controls. An automatic migration will convert existing usages of these types to special <code>Untyped</code> aliases which preserve the existing behavior.</p> <p>The <code>initialValueIsDefault</code> option for <code><a href="../api/forms/formcontrol" class="code-anchor">FormControl</a></code> construction has been deprecated in favor of the <code>nonNullable</code> option (which has identical behavior). This renaming aligns the <code><a href="../api/forms/formcontrol" class="code-anchor">FormControl</a></code> constructor with other strictly typed APIs related to nullability.</p> </li> <li> <p><strong><code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code> and <code><a href="../api/core/ngmodulefactory" class="code-anchor">NgModuleFactory</a></code> cleanup</strong></p> <p>Many APIs which use either <code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code> or <code><a href="../api/core/ngmodulefactory" class="code-anchor">NgModuleFactory</a></code> have been deprecated and replaced with new APIs that use component or NgModule classes directly.</p> </li> </ul> <h3 id="breaking-changes-in-angular-version-14">Breaking changes in Angular version 14</h3>  <table> <thead> <tr> <th align="left"></th> <th align="left">Details</th> </tr> </thead> <tbody> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45729"><strong>PR #45729</strong></a></td> <td align="left">
<code>initialNavigation: 'enabled'</code> was deprecated in v11 and is replaced by <code>initialNavigation: 'enabledBlocking'.</code>.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/42803"><strong>PR #42803</strong></a></td> <td align="left">Forms <code><a href="../api/forms/emailvalidator" class="code-anchor">email</a></code> input coercion: forms <code><a href="../api/forms/emailvalidator" class="code-anchor">email</a></code> input value will be considered as true if it is defined with any value rather than false and 'false'.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/33729"><strong>PR #33729</strong></a></td> <td align="left">Objects with a length key set to zero will no longer validate as empty. This is technically a breaking change, since objects with a key <code>length</code> and value <code>0</code> will no longer validate as empty. This is a very minor change, and any reliance on this behavior is probably a bug anyway.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/44921"><strong>PR #44921</strong></a></td> <td align="left">Do not run change detection when loading Hammer. This change may cause unit tests that are implicitly asserting on the specific number or the ordering of change detections to fail.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/23020"><strong>PR #23020</strong></a></td> <td align="left">Parameter types of <code><a href="../api/platform-browser/transferstate" class="code-anchor">TransferState</a></code> usage have increased type safety, and this may reveal existing problematic calls.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/43863"><strong>PR #43863</strong></a></td> <td align="left">The type of <code><a href="../api/router/navigation" class="code-anchor">Navigation</a>#initialUrl</code> has been narrowed to <code><a href="../api/router/urltree" class="code-anchor">UrlTree</a></code> to reflect reality. Additionally, the value for <code>initialUrl</code> now matches its documentation: "The target URL passed into the Router#navigateByUrl() call before navigation". Previously, this was incorrectly set to the current internal <code><a href="../api/router/urltree" class="code-anchor">UrlTree</a></code> of the Router at the time navigation occurs.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45114"><strong>PR #45114</strong></a></td> <td align="left">The <code>AnimationDriver.getParentElement</code> method has become required, so any implementors of this interface are now required to provide an implementation for this method.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45176"><strong>PR #45176</strong></a></td> <td align="left">The type of <code><a href="../api/router/route#pathMatch" class="code-anchor">Route.pathMatch</a></code> is now more strict. Places that use <code>pathMatch</code> will likely need to be updated to have an explicit <code><a href="../api/router/route" class="code-anchor">Route</a></code>/<code><a href="../api/router/routes" class="code-anchor">Routes</a></code> type so that TypeScript does not infer the type as <code>string</code>.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/44573"><strong>PR #44573</strong></a></td> <td align="left">The router now takes only the first emitted value by the resolvers and then proceeds with navigation. This is now consistent with <code>Observables</code> returned by other guards: only the first value is used.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45394"><strong>PR #45394</strong></a></td> <td align="left">TypeScript versions older than <code>4.6.0</code> are no longer supported.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45210"><strong>PR #45210</strong></a></td> <td align="left">
<code><a href="../api/common/http/httpclient" class="code-anchor">HttpClient</a></code> will throw an error when headers are set on a JSONP request.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/43834"><strong>PR #43834</strong></a></td> <td align="left">Reactive form types such as <code><a href="../api/forms/formcontrol" class="code-anchor">FormControl</a></code> and <code><a href="../api/forms/formgroup" class="code-anchor">FormGroup</a></code> now have generic type parameters and infer stricter types. A migration will convert existing usages to new <code>Untyped</code>-prefixed aliases which preserve the existing behavior.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45487"><strong>PR #45487</strong></a></td> <td align="left">The deprecated <code>aotSummaries</code> field in the <code><a href="../api/core/testing/testbed" class="code-anchor">TestBed</a></code> configuration has been removed.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45648"><strong>PR #45648</strong></a></td> <td align="left">A new required class member <code><a href="../api/common/locationstrategy" class="code-anchor">LocationStrategy</a>#getState</code> has been added, that any implementers of this interface will need to provide.</td> </tr> <tr> <td align="left"><a href="https://github.com/angular/angular/pull/45735"><strong>PR #45735</strong></a></td> <td align="left">When a guard returns a <code><a href="../api/router/urltree" class="code-anchor">UrlTree</a></code>, the router would previously schedule the redirect navigation within a <code>setTimeout</code>. This timeout is now removed, which can result in test failures due to incorrectly written tests.</td> </tr> </tbody> </table> <h3 id="new-deprecations">New deprecations</h3>  <table> <thead> <tr> <th align="left">Removed</th> <th align="left">Replacement</th> <th align="left">Details</th> </tr> </thead> <tbody> <tr> <td align="left"><a href="../api/forms/formcontroloptions#initialValueIsDefault"><code>FormControlOptions#initialValueIsDefault</code></a></td> <td align="left"><a href="../api/forms/formcontroloptions#nonNullable"><code>FormControlOptions#nonNullable</code></a></td> <td align="left">The <code>initialValueIsDefault</code> option for <code><a href="../api/forms/formcontrol" class="code-anchor">FormControl</a></code> construction has been deprecated in favor of the <code>nonNullable</code> option (which has identical behavior). This renaming aligns the <code><a href="../api/forms/formcontrol" class="code-anchor">FormControl</a></code> constructor with other strictly typed APIs related to nullability.</td> </tr> <tr> <td align="left">
<code>ErrorEvent</code>s passed to [<code><a href="../api/common/http/testing/testrequest" class="code-anchor">TestRequest</a>#error</code>](api/common/http/testing/TestRequest#error]</td> <td align="left"><code>ProgressEvent</code></td> <td align="left">Http requests never emit an <code>ErrorEvent</code>. Use a <code>ProgressEvent</code> instead.</td> </tr> <tr> <td align="left"><a href="../api/core/getmodulefactory"><code>getModuleFactory</code></a></td> <td align="left"><code><a href="../api/core/getngmodulebyid" class="code-anchor">getNgModuleById</a></code></td> <td align="left">
<code><a href="../api/core/ngmodulefactory" class="code-anchor">NgModuleFactory</a></code> itself is deprecated.</td> </tr> <tr> <td align="left"><a href="../api/core/modulewithcomponentfactories"><code>ModuleWithComponentFactories</code></a></td> <td align="left">n/a</td> <td align="left">Ivy JIT mode doesn't require accessing this symbol. See <a href="deprecations#jit-api-changes">JIT API changes due to ViewEngine deprecation</a> for additional context.</td> </tr> <tr> <td align="left"><a href="../api/core/compiler"><code>Compiler</code></a></td> <td align="left">n/a</td> <td align="left">Ivy JIT mode doesn't require accessing this symbol. See <a href="deprecations#jit-api-changes">JIT API changes due to ViewEngine deprecation</a> for additional context.</td> </tr> <tr> <td align="left"><a href="../api/core/compilerfactory"><code>CompilerFactory</code></a></td> <td align="left">n/a</td> <td align="left">Ivy JIT mode doesn't require accessing this symbol. See <a href="deprecations#jit-api-changes">JIT API changes due to ViewEngine deprecation</a> for additional context.</td> </tr> <tr> <td align="left"><a href="../api/core/ngmodulefactory"><code>NgModuleFactory</code></a></td> <td align="left">n/a</td> <td align="left">This class was mostly used as a part of ViewEngine-based JIT API and is no longer needed in Ivy JIT mode. See <a href="deprecations#jit-api-changes">JIT API changes due to ViewEngine deprecation</a> for additional context. Angular provides APIs that accept NgModule classes directly (such as <a href="../api/core/platformref#bootstrapModule"><code>PlatformRef.bootstrapModule</code></a> and <a href="../api/core/createngmoduleref"><code>createNgModuleRef</code></a>), consider switching to those APIs instead of using factory-based ones.</td> </tr> <tr> <td align="left"><a href="../api/core/componentfactory"><code>ComponentFactory</code></a></td> <td align="left">n/a</td> <td align="left">Angular no longer requires <code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code>s. Other APIs allow Component classes to be used directly.</td> </tr> <tr> <td align="left"><a href="../api/core/componentfactoryresolver"><code>ComponentFactoryResolver</code></a></td> <td align="left">n/a</td> <td align="left">Angular no longer requires <code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code>s. Other APIs allow Component classes to be used directly.</td> </tr> <tr> <td align="left">
<code>useJit</code> and <code>missingTranslation</code> in <a href="../api/core/compileroptions"><code>CompilerOptions</code></a>
</td> <td align="left">n/a</td> <td align="left">Ivy JIT mode does not support these options. See <a href="deprecations#jit-api-changes">JIT API changes due to ViewEngine deprecation</a> for additional context.</td> </tr> <tr> <td align="left"><a href="../api/platform-browser-dynamic/jitcompilerfactory"><code>JitCompilerFactory</code></a></td> <td align="left">n/a</td> <td align="left">Ivy JIT mode doesn't require accessing this symbol. See <a href="deprecations#jit-api-changes">JIT API changes due to ViewEngine deprecation</a> for additional context.</td> </tr> <tr> <td align="left"><a href="../api/platform-browser-dynamic/resource_cache_provider"><code>RESOURCE_CACHE_PROVIDER</code></a></td> <td align="left">n/a</td> <td align="left">This was previously necessary in some cases to test AOT-compiled components with View Engine, but is no longer since Ivy.</td> </tr> <tr> <td align="left">
<code>relativeLinkResolution</code> in the Router <a href="../api/router/extraoptions"><code>ExtraOptions</code></a>
</td> <td align="left">Switch to the default of <code>'corrected'</code> link resolution</td> <td align="left">This option was introduced to fix a bug with link resolution in a backwards compatible way. Existing apps which still depend on the buggy legacy behavior should switch to the new corrected behavior and stop passing this flag.</td> </tr> <tr> <td align="left">
<code>resolver</code> argument in <a href="../api/router/routeroutletcontract#activateWith"><code>RouterOutletContract.activateWith</code></a>
</td> <td align="left">n/a</td> <td align="left">
<code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code> and <code><a href="../api/core/componentfactoryresolver" class="code-anchor">ComponentFactoryResolver</a></code> afre deprecated, and passing an argument for a resolver to retrieve a <code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code> is no longer required.</td> </tr> <tr> <td align="left"><a href="../api/router/outletcontext#resolver">`OutletContext#resolver</a></td> <td align="left">n/a</td> <td align="left">
<code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code> and <code><a href="../api/core/componentfactoryresolver" class="code-anchor">ComponentFactoryResolver</a></code> are deprecated, and using a resolver to retrieve a <code><a href="../api/core/componentfactory" class="code-anchor">ComponentFactory</a></code> is no longer required.</td> </tr> <tr> <td align="left"><a href="../api/service-worker/swupdate#activated"><code>SwUpdate#activated</code></a></td> <td align="left">Return value of <a href="../api/service-worker/swupdate#activateUpdate"><code>SwUpdate#activateUpdate</code></a>
</td> <td align="left">The <code>activated</code> property is deprecated. Existing usages can migrate to <a href="../api/service-worker/swupdate#activateUpdate"><code>SwUpdate#activateUpdate</code></a>.</td> </tr> <tr> <td align="left"><a href="../api/service-worker/swupdate#available"><code>SwUpdate#available</code></a></td> <td align="left"><a href="../api/service-worker/swupdate#versionUpdates"><code>SwUpdate#versionUpdates</code></a></td> <td align="left">The behavior of <a href="../api/service-worker/swupdate#available"><code>SwUpdate#available</code></a> can be achieved by filtering for the <a href="../api/service-worker/versionreadyevent"><code>VersionReadyEvent</code></a> from <a href="../api/service-worker/swupdate#versionUpdates"><code>SwUpdate#versionUpdates</code></a>
</td> </tr> </tbody> </table> <div class="reviewed">Last reviewed on Tue May 31 2022</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://angular.io/guide/update-to-latest-version" class="_attribution-link" target="_blank">https://angular.io/guide/update-to-latest-version</a>
  </p>
</div>
