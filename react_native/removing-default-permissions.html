<h1 class="postHeaderTitle">Removing Default Permissions</h1>
<p>By default, some permissions are added to your Android APK.</p> <p>The default permissions that get added are:</p> <ul> <li>android.permission.INTERNET - Required for debug mode.</li> <li>android.permission.SYSTEM_ALERT_WINDOW - Required for debug mode.</li> <li>android.permission.READ_PHONE_STATE - Not required for debug or production.</li> <li>android.permission.WRITE_EXTERNAL_STORAGE - Not required for debug or production.</li> <li>android.permission.READ_EXTERNAL_STORAGE - Not required for debug or production.</li> </ul> <ol> <li><p>Let's start by removing <code>READ_PHONE_STATE</code>, <code>WRITE_EXTERNAL_STORAGE</code>, and <code>READ_EXTERNAL_STORAGE</code> from both production and debug APKs, as it is not required in either. These storage permissions are still not needed if <code>AsyncStorage</code> module is in use, so it is safe to remove from both production and debug.</p></li> <li><p>Open your <code>android/app/src/main/AndroidManifest.xml</code> file.</p></li> <li>
<p>Even though these three permissions are not listed in the manifest they get added in. We add the three permissions with <code>tools:node="remove"</code> attribute, to make sure it gets removed during build. Note that the package identifier will be different, for below it is "com.myapp" because the project was created with <code>react-native init myapp</code>.</p> <pre data-language="jsx">&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myappid"
<span class="hljs-addition">+   xmlns:tools="http://schemas.android.com/tools"</span>
    &gt;

    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
    &lt;uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /&gt;
<span class="hljs-addition">+   &lt;uses-permission tools:node="remove" android:name="android.permission.READ_PHONE_STATE" /&gt;</span>
<span class="hljs-addition">+   &lt;uses-permission tools:node="remove" android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;</span>
<span class="hljs-addition">+   &lt;uses-permission tools:node="remove" android:name="android.permission.READ_EXTERNAL_STORAGE" /&gt;</span>

    &lt;application
      android:name=".MainApplication"
      android:label="@string/app_name"
      android:icon="@mipmap/ic_launcher"
      android:allowBackup="false"
      android:theme="@style/AppTheme"&gt;
      &lt;activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:configChanges="keyboard|keyboardHidden|orientation|screenSize"
        android:windowSoftInputMode="adjustResize"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN" /&gt;
            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
        &lt;/intent-filter&gt;
      &lt;/activity&gt;
      &lt;activity android:name="com.facebook.react.devsupport.DevSettingsActivity" /&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</pre>
</li> <li><p>Now let's remove <code>SYSTEM_ALERT_WINDOW</code> from the production APK only.</p></li> <li><p>Go to the <code>android/app/src/</code> directory. Create a new directory inside this directory, called <code>release</code>. (path: <code>android/app/src/release/</code>)</p></li> <li><p>Inside this <code>android/app/src/release/</code> directory create a <code>AndroidManifest.xml</code> file. (path: <code>android/app/src/release/AndroidManifest.xml</code>)</p></li> <li>
<p>Inside this file paste the following conents. Note, make sure to update your package identifier from "com.myapp" to what yours is.</p> <pre data-language="jsx">&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp"
    xmlns:tools="http://schemas.android.com/tools"&gt;

    &lt;uses-permission tools:node="remove" android:name="android.permission.SYSTEM_ALERT_WINDOW" /&gt;

&lt;/manifest&gt;
</pre>
</li> </ol> <p>That's it. We did not remove the <code>INTERNET</code> permission as pretty much all apps use it. Now whenever you create a production APK all these 4 permissions will be removed. When you create a debug APK (<code>react-native run-android</code>) it will install the APK with only the three permissions removed, and <code>SYSTEM_ALERT_WINDOW</code> will remain.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2015&ndash;2018 Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://facebook.github.io/react-native/docs/removing-default-permissions" class="_attribution-link">https://facebook.github.io/react-native/docs/removing-default-permissions</a>
  </p>
</div>
