<h1>Errors: CORSRequestNotHttp</h1>
<h1>Reason: CORS request not HTTP</h1>
<h2 id="reason">Reason</h2>
<pre class="notranslate">Reason: CORS request not HTTP
</pre>
<h2 id="what_went_wrong">What went wrong?</h2>
<p> <a href="https://developer.mozilla.org/en-US/docs/Glossary/CORS">CORS</a> requests may only use the HTTP or HTTPS URL scheme, but the URL specified by the request is of a different type. This often occurs if the URL specifies a local file, using the <code>file:///</code> scheme. </p> <p>To fix this problem, make sure you use HTTPS URLs when issuing requests involving CORS, such as <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch</a> APIs, Web Fonts (<code>@font-face</code>), and <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL">WebGL textures</a>, and XSL stylesheets.</p>
<h3 id="loading_a_local_file">Loading a local file</h3>
<p> Local files from the same directory and subdirectories were historically treated as being from the <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">same origin</a>. This meant that a file and all its resources could be loaded from a local directory or subdirectory during testing, without triggering a CORS error. </p> <p> Unfortunately this had security implications, as noted in this advisory: <a href="https://www.mozilla.org/en-US/security/advisories/mfsa2019-21/#CVE-2019-11730" rel=" noopener">CVE-2019-11730</a>. Many browsers, including Firefox and Chrome, now treat all local files as having <em>opaque origins</em> (by default). As a result, loading a local file with included local resources will now result in CORS errors. </p> <p> Developers who need to perform local testing should now <a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/set_up_a_local_testing_server">set up a local server</a>. As all files are served from the same scheme and domain (<code>localhost</code>) they all have the same origin, and do not trigger cross-origin errors. </p> <div class="notecard note"> <p><strong>Note:</strong> This change is in line with the <a href="https://url.spec.whatwg.org/#origin" rel=" noopener">URL specification</a>, which leaves the origin behavior for files to the implementation, but recommends that file origins are treated as opaque if in doubt.</p> </div>
<h2 id="see_also">See also</h2>
<ul> <li><a href="../errors">CORS errors</a></li> <li><a href="../../cors">CORS introduction</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL">What is a URL?</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors/CORSRequestNotHttp" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors/CORSRequestNotHttp</a>
  </p>
</div>
