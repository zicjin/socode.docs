<h1>WebAssembly.Exception.prototype.getArg()</h1>
<div class="section-content">
<p>The <code>getArg()</code> prototype method of the <a href="../exception"><code>Exception</code></a> object can be used to get the value of a specified item in the exception's data arguments.</p> <p> The method passes a <a href="../tag"><code>WebAssembly.Tag</code></a> and will only succeed if the thrown <code>Exception</code> was created using the same tag, otherwise it will throw a <code>TypeError</code>. This ensures that the exception can only be read if the calling code has access to the tag. Tags that are neither imported into or exported from the WebAssembly code are internal, and their associated <a href="../exception"><code>WebAssembly.Exception</code></a> cannot be queried using this method! </p> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> It is not enough that the tag has an identical sequence of data types â€” it must have the same <em>identity</em> (be the same tag) as was used to create the exception.</p> </div>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token function">getArg</span><span class="token punctuation">(</span>exceptionTag<span class="token punctuation">,</span> index<span class="token punctuation">)</span>
</pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="exceptiontag"><code>exceptionTag</code></dt> <dd> <p>A <a href="../tag"><code>WebAssembly.Tag</code></a> that must match the tag associated with this exception.</p> </dd> <dt id="index"><code>index</code></dt> <dd> <p>The index of the value in the data arguments to return, 0-indexed.</p> </dd> </dl></div></section><section aria-labelledby="return_value"><h3 id="return_value">Return value</h3>
<div class="section-content"><p>The value of the argument at <code>index</code>.</p></div></section><section aria-labelledby="exceptions"><h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="typeerror"><a href="../../typeerror"><code>TypeError</code></a></dt> <dd> <p>The tags don't match; the exception was not created with the tag passed to the method.</p> </dd> <dt id="rangeerror"><a href="../../rangeerror"><code>RangeError</code></a></dt> <dd> <p>The value of the <code>index</code> parameter is greater than or equal to the number of fields in the data.</p> </dd> </dl></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content"><p> In order to get the values of an exception, the tag must be "known" to the calling code; it may be either imported into or exported from the calling code. </p></div></section><section aria-labelledby="getting_exception_value_from_imported_tag"><h3 id="getting_exception_value_from_imported_tag">Getting exception value from imported tag</h3>
<div class="section-content">
<p> Consider the following WebAssembly code, which is assumed to be compiled to a file "example.wasm". This imports a tag, which it refers to internally as <code>$tagname</code>, and exports a method <code>run</code> that can be called by external code to throw an exception using the tag. </p> <div class="code-example"><pre data-language="wasm"><span class="token punctuation">(</span><span class="token keyword">module</span>
  <span class="token comment">;; import tag that will be referred to here as $tagname</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">"extmod"</span> <span class="token string">"exttag"</span> <span class="token punctuation">(</span>tag <span class="token variable">$tagname</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token keyword">i32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">;; $throwException function throws i32 param as a $tagname exception</span>
  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$throwException</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token keyword">i32</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span>.get <span class="token number">0</span>
    throw <span class="token variable">$tagname</span>
  <span class="token punctuation">)</span>

  <span class="token comment">;; Exported function "run" that calls $throwException</span>
  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">"run"</span><span class="token punctuation">)</span>
    <span class="token keyword">i32<span class="token punctuation">.</span>const</span> <span class="token number">1</span>
    <span class="token keyword">call</span> <span class="token variable">$throwException</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</pre></div> <p> The code below below calls <a href="../instantiatestreaming"><code>WebAssembly.instantiateStreaming</code></a> to import the "example.wasm" file, passing in an "import object" (<code>importObject</code>) that includes a new <a href="../tag"><code>WebAssembly.Tag</code></a> named <code>tagToImport</code>. The import object defines an object with properties that match the <code>import</code> statement in the WebAssembly code. </p> <p>Once the file is instantiated, the code calls the exported WebAssembly <code>run()</code> method, which will immediately throw an exception.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> tagToImport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebAssembly<span class="token punctuation">.</span>Tag</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">parameters</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"i32"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Note: the import object properties match the import statement in WebAssembly code!</span>
<span class="token keyword">const</span> importObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">"extmod"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"exttag"</span><span class="token operator">:</span> tagToImport
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

WebAssembly<span class="token punctuation">.</span><span class="token function">instantiateStreaming</span><span class="token punctuation">(</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"example.wasm"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> importObject<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">getArg 0 : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span><span class="token function">getArg</span><span class="token punctuation">(</span>tagToImport<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Log output
example.js:40 WebAssembly.Exception: wasm exception
example.js:41 getArg 0 : 1
*/</span>
</pre></div> <p> The code catches the exception and uses <code>getArg()</code> to print the value at the first index. In this case, it is just "1". </p>
</div></section><section aria-labelledby="getting_exception_value_from_an_exported_tag"><h3 id="getting_exception_value_from_an_exported_tag">Getting exception value from an exported tag</h3>
<div class="section-content">
<p> The process for using an exported tag is very similar to that shown in the previous section. Here is the same WebAssembly module, simply replacing the import with an export. </p> <div class="code-example"><pre data-language="wasm"><span class="token punctuation">(</span><span class="token keyword">module</span>
  <span class="token comment">;; Export tag giving it external name: "exptag"</span>
  <span class="token punctuation">(</span>tag <span class="token variable">$tagname</span> <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">"exptag"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token keyword">i32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$throwException</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token keyword">i32</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span>.get <span class="token number">0</span>
    throw <span class="token variable">$tagname</span>
  <span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">"run"</span><span class="token punctuation">)</span>
    <span class="token keyword">i32<span class="token punctuation">.</span>const</span> <span class="token number">1</span>
    <span class="token keyword">call</span> <span class="token variable">$throwException</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</pre></div> <p> The JavaScript is similar too. In this case, we have no imports, but instead we get the exported tag and use that to get the argument. To make it a little more "safe", here we also test that we have the right tag using the <a href="is"><code>is()</code> method</a>. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">let</span> tagExportedFromWasm<span class="token punctuation">;</span>

WebAssembly<span class="token punctuation">.</span><span class="token function">instantiateStreaming</span><span class="token punctuation">(</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"example.wasm"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Import the tag using its name from the WebAssembly module</span>
    tagExportedFromWasm <span class="token operator">=</span> obj<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>exptag<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// If the tag is correct, get the value</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>tagExportedFromWasm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">getArg 0 : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span><span class="token function">getArg</span><span class="token punctuation">(</span>tagExportedFromWasm<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div></section><h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://webassembly.github.io/exception-handling/js-api/#dom-exception-getarg">WebAssembly JavaScript Interface: Exception Handling <br><small># dom-exception-getarg</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
<th colspan="2">Server</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>Deno</th>
<th>Node.js</th>
</tr>
</thead>
<tbody><tr>
<th><code>getArg</code></th>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes">
<div>100</div>
<div>98-100</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>81</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>100</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>17.0</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>17.0.0</div></td>
</tr></tbody>
</table>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly</a> overview page</li> <li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly/Concepts">WebAssembly concepts</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly/Using_the_JavaScript_API">Using the WebAssembly JavaScript API</a></li> </ul></div></section><aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/javascript/reference/global_objects/webassembly/exception/getarg/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/javascript/reference/global_objects/webassembly/exception/getarg/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FWebAssembly%2FException%2FgetArg&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fjavascript%2Freference%2Fglobal_objects%2Fwebassembly%2Fexception%2Fgetarg%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FWebAssembly%2FException%2FgetArg%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fjavascript%2Freference%2Fglobal_objects%2Fwebassembly%2Fexception%2Fgetarg%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Fa48583d3d51d7db2c5cbe4d0a84b80e9f09d57a9%0A*+Document+last+modified%3A+2022-08-05T05%3A43%3A36.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-08-05T05:43:36.000Z">Aug 5, 2022</time>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Exception/getArg/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Exception/getArg" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Exception/getArg</a>
  </p>
</div>
