<h1>WebAssembly.Exception</h1>
<div class="section-content">
<p>The <code>WebAssembly.Exception</code> object represents a runtime exception thrown from WebAssembly to JavaScript, or thrown from JavaScript to a WebAssembly exception handler.</p> <p> The <a href="exception/exception">constructor</a> accepts a <a href="tag"><code>WebAssembly.Tag</code></a>, an array of values, and an <code>options</code> object as arguments. The tag uniquely defines the <em>type</em> of an exception, including the order of its arguments and their data types. The same tag that was used to create the <code>Exception</code> is required to access the arguments of a thrown exception. Methods are provided to test whether an exception matches a particular tag, and also to get a particular value by index (if the exception matches specified tag). </p> <p> JavaScript and other client code can only access WebAssembly exception values, and visa versa, when the associated tag is shared (you can't just use another tag that happens to define the same data types). Without the matching tag, exceptions can be caught and re-thrown, but they can't be inspected. </p> <p> In order to make exception-throwing faster, exceptions thrown from WebAssembly generally do not include a stack trace. WebAssembly code that needs to provide a stack trace must call a JavaScript function to create the exception, passing <code>options.traceStack=true</code> parameter in the constructor. The constructor may then return an exception with a stack trace attached to the <a href="exception/stack"><code>stack</code></a> property. </p>
<div class="notecard note" id="sect1"> <p><strong>Note:</strong> This feature is available in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API">Web Workers</a></p> </div>
</div>
<section aria-labelledby="constructor"><h2 id="constructor">Constructor</h2>
<div class="section-content"><dl> <dt id="webassembly.exception"><a href="exception/exception"><code>WebAssembly.Exception()</code></a></dt> <dd> <p>Creates a new <code>WebAssembly.Exception</code> object.</p> </dd> </dl></div></section><section aria-labelledby="instance_methods"><h2 id="instance_methods">Instance methods</h2>
<div class="section-content"><dl> <dt id="exception.prototype.is"><a href="exception/is"><code>Exception.prototype.is()</code></a></dt> <dd> <p>Tests whether the exception matches a particular tag.</p> </dd> <dt id="exception.prototype.getarg"><a href="exception/getarg"><code>Exception.prototype.getArg()</code></a></dt> <dd> <p>Returns the data fields of an exception that matches a specified tag.</p> </dd> </dl></div></section><section aria-labelledby="instance_properties"><h2 id="instance_properties">Instance properties</h2>
<div class="section-content"><dl> <dt id="exception.prototype.stack">
<a href="exception/stack"><code>Exception.prototype.stack</code></a> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-Standard</span> </abbr>
</dt> <dd> <p>Returns the stack trace for the exception, or <code>undefined</code>.</p> </dd> </dl></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content">
<p>This example shows how to define a tag and import it into a module, then use it to throw an exception that is caught in JavaScript.</p> <p>Consider the following WebAssembly code, which is assumed to be compiled to a file <strong>example.wasm</strong>.</p> <ul> <li> The module imports a tag that is referred to as <code>$tagname</code> internally and that has a single <code>i32</code> parameter. The tag expects the tag to be passed using module <code>extmod</code> and tag <code>exttag</code>. </li> <li>The <code>$throwException</code> function throws an exception using the <code>throw</code> instruction, taking the <code>$tagname</code> and the parameter argument.</li> <li>The module exports the function <code>run()</code> that throws an exception with the value "42".</li> </ul> <div class="code-example"><pre data-language="wasm"><span class="token punctuation">(</span><span class="token keyword">module</span>
  <span class="token comment">;; import tag that will be referred to here as $tagname</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">"extmod"</span> <span class="token string">"exttag"</span> <span class="token punctuation">(</span>tag <span class="token variable">$tagname</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token keyword">i32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">;; $throwException function throws i32 param as a $tagname exception</span>
  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token variable">$throwException</span> <span class="token punctuation">(</span><span class="token keyword">param</span> <span class="token variable">$errorValueArg</span> <span class="token keyword">i32</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span>.get <span class="token variable">$errorValueArg</span>
    throw <span class="token variable">$tagname</span>
  <span class="token punctuation">)</span>

  <span class="token comment">;; Exported function "run" that calls $throwException</span>
  <span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">"run"</span><span class="token punctuation">)</span>
    <span class="token keyword">i32<span class="token punctuation">.</span>const</span> <span class="token number">42</span>
    <span class="token keyword">call</span> <span class="token variable">$throwException</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</pre></div> <p> The code below below calls <a href="instantiatestreaming"><code>WebAssembly.instantiateStreaming</code></a> to import the <strong>example.wasm</strong> file, passing in an "import object" (<code>importObject</code>) that includes a new <a href="tag"><code>WebAssembly.Tag</code></a> named <code>tagToImport</code>. The import object defines an object with properties that match the <code>import</code> statement in the WebAssembly code. </p> <p>Once the file is instantiated, the code calls the exported WebAssembly <code>run()</code> method, which will immediately throw an exception.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> tagToImport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebAssembly<span class="token punctuation">.</span>Tag</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">parameters</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"i32"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Note: import object properties match the WebAssembly import statement!</span>
<span class="token keyword">const</span> importObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">"extmod"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"exttag"</span><span class="token operator">:</span> tagToImport
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

WebAssembly<span class="token punctuation">.</span><span class="token function">instantiateStreaming</span><span class="token punctuation">(</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"example.wasm"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> importObject<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Check we have the right tag for the exception</span>
    <span class="token comment">// If so, use getArg() to inspect it</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>tagToImport<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">getArg 0 : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span><span class="token function">getArg</span><span class="token punctuation">(</span>tagToImport<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Log output
example.js:40 WebAssembly.Exception: wasm exception
example.js:41 getArg 0 : 42
*/</span>
</pre></div> <p> The exception is caught in JavaScript using the <code>catch</code> block. We can see it is of type <code>WebAssembly.Exception</code>, but if we didn't have the right tag we couldn't do much else. </p> <p>However, because we have a tag, we use <a href="exception/is"><code>Exception.prototype.is()</code></a> to check that it's the right one, and because it is correct, we call <a href="exception/getarg"><code>Exception.prototype.getArg()</code></a> to read the value of "42".</p>
</div></section><h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://webassembly.github.io/exception-handling/js-api/#runtime-exceptions">WebAssembly JavaScript Interface: Exception Handling <br><small># runtime-exceptions</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
<th colspan="2">Server</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>Deno</th>
<th>Node.js</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>Exception</code></th>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes">
<div>100</div>
<div>98-100</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>81</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>100</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>17.0</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>17.0.0</div></td>
</tr>
<tr>
<th><code>Exception</code></th>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes">
<div>100</div>
<div>98-100</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>81</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>100</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>17.0</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>17.0.0</div></td>
</tr>
<tr>
<th><code>getArg</code></th>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes">
<div>100</div>
<div>98-100</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>81</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>100</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>17.0</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>17.0.0</div></td>
</tr>
<tr>
<th><code>is</code></th>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes">
<div>100</div>
<div>98-100</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>81</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>100</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>17.0</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>17.0.0</div></td>
</tr>
<tr>
<th><code>stack</code></th>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes">
<div>100</div>
<div>98-100</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>81</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>95</div></td>
<td class="bc-supports-yes"><div>100</div></td>
<td class="bc-supports-yes"><div>67</div></td>
<td class="bc-supports-yes"><div>15.2</div></td>
<td class="bc-supports-yes"><div>17.0</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>17.0.0</div></td>
</tr>
</tbody>
</table>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly</a> overview</li> <li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly/Concepts">WebAssembly concepts</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly/Using_the_JavaScript_API">Using the WebAssembly JavaScript API</a></li> </ul></div></section><aside class="metadata"><div class="metadata-content-container">
<div id="on-github" class="on-github">
<h3>Found a problem with this page?</h3>
<ul>
<li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/javascript/reference/global_objects/webassembly/exception/index.md" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/javascript/reference/global_objects/webassembly/exception/index.md?plain=1" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li>
<li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FWebAssembly%2FException&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fjavascript%2Freference%2Fglobal_objects%2Fwebassembly%2Fexception%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FWebAssembly%2FException%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fjavascript%2Freference%2Fglobal_objects%2Fwebassembly%2Fexception%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F8bf018f0a39d012a0d98afe3f15e0ed0fb7c8ce5%0A*+Document+last+modified%3A+2022-07-23T16%3A53%3A08.000Z%0A%0A%3C%2Fdetails%3E" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li>
<li>Want to fix the problem yourself? See <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li>
</ul>
</div>
<p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-07-23T16:53:08.000Z">Jul 23, 2022</time>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Exception/contributors.txt">by MDN contributors</a></p>
</div></aside><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Exception" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Exception</a>
  </p>
</div>
