<h1>Class static initialization blocks</h1>
<p><strong>Class static initialization blocks</strong> are a special feature of a <a href="../statements/class"><code>class</code></a> that enable more flexible initialization of <a href="static"><code>static</code></a> properties than can be achieved using per-field initialization.</p> <p>Static blocks allow statements to be evaluated during initialization, which allows initializations that (for example) include <code>try...catch</code> or set multiple fields from a single value.</p> <p> Initialization is performed in the context of the current class declaration, with privileged access to private state. This means that static blocks can also be used to share information between classes with instance private fields and other classes or functions declared in the same scope (analogous to "friend" classes in C++). </p>
<iframe class="interactive" height="490" src="https://interactive-examples.mdn.mozilla.net/pages/js/classes-static-initialization.html" title="MDN Web Docs Interactive Example" loading="lazy"></iframe><h2 id="syntax">Syntax</h2>
<div class="code-example"><pre data-language="js"><span class="token keyword">static</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
</pre></div>
<h2 id="description">Description</h2>
<p> A <a href="../statements/class"><code>class</code></a> can have any number of <code>static {}</code> initialization blocks in its class body. These are evaluated, along with any interleaved static field initializers, in the order they are declared. Any static initialization of a super class is performed first, before that of its sub classes. </p> <p> The scope of the variables declared inside the static block is local to the block. Since <code>var</code>, <code>function</code>, <code>const</code> or <code>let</code> declared in a <code>static {}</code> initialization block are local to the block, any <code>var</code> declarations in the block are not hoisted. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token string">'Outer y'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> field <span class="token operator">=</span> <span class="token string">'Inner y'</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>field<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// var defined in static block is not hoisted</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &gt; 'Outer y'</span>
</pre></div> <p> The <code>this</code> inside a static block refers to the constructor object of the class. <code>super.&lt;property&gt;</code> can be used to access properties of a super class. Note however that it is a syntax error to call <a href="../operators/super"><code>super()</code></a> in a class static initialization block, or to attempt to access arguments of the class constructor function. </p> <p>The scope of the static block is nested <em>within</em> the lexical scope of the class body, and can access the private instance variables of the class.</p> <p>A static initialization block may not have decorators (the class itself may).</p>
<h2 id="examples">Examples</h2>
<h3 id="multiple_blocks">Multiple blocks</h3>
<p> The code below demonstrates a class with static initialization blocks and interleaved static field initializers. The output shows that the blocks and fields are evaluated in execution order. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> field1 <span class="token operator">=</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'field1 called'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Class static block #1 called'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> field2 <span class="token operator">=</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'field2 called'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Class static block #2 called'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
&gt; "field1 called"
&gt; "Class static block #1 called"
&gt; "field2 called"
&gt; "Class static block #2 called"
*/</span>
</pre></div> <p>Note that any static initialization of a super class is performed first, before that of its sub classes.</p>
<h3 id="using_this_and_super.property">Using <code>this</code> and <code>super.property</code>
</h3>
<p> The <code>this</code> inside a static block refers to the constructor object of the class. This code shows how to access a public static field. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> field <span class="token operator">=</span> <span class="token string">'A static field'</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>field<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div> <p> The <a href="../operators/super"><code>super.property</code></a> can be used inside a <code>static</code> block to reference properties of a super class. This includes static properties, as shown below: </p> <div class="code-example"><pre data-language="js"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> fieldA <span class="token operator">=</span> <span class="token string">'A.fieldA'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span>fieldA<span class="token punctuation">;</span>
    <span class="token comment">// 'A.fieldA'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div>
<h3 id="access_to_private_fields">Access to private fields</h3>
<p>This example below shows how access can be granted to the private object of a class from an object outside the class (example from the <a href="https://v8.dev/features/class-static-initializer-blocks#access-to-private-fields" rel=" noopener">v8.dev blog</a>):</p> <div class="code-example"><pre data-language="js"><span class="token keyword">let</span> getDPrivateField<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token punctuation">{</span>
  #privateField<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#privateField <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getDPrivateField</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>#privateField<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">getDPrivateField</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token string">'private'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &gt; private</span>
</pre></div>
<h3 id="workarounds">Workarounds</h3>
<p>Prior to ES13 more complex static initialization might be achieved by using a static method that is called after the other properties to perform static initialization, or having a method that is external to the class that performs initialization tasks.</p> <p>In both cases the approach is less elegant, and does not grant access to private methods in the class.</p>
<h2 id="specifications">Specifications</h2>
<div class="notecard warning">
<strong>No specification found</strong><p>No specification data found for <code>javascript.classes.class_static_initialization_blocks</code>.<br><a href="#on-github">Check for problems with this page</a> or contribute a missing <code>spec_url</code> to <a href="https://github.com/mdn/browser-compat-data">mdn/browser-compat-data</a>. Also make sure the specification is included in <a href="https://github.com/w3c/browser-specs">w3c/browser-specs</a>.</p>
</div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="notecard warning"><p>No compatibility data found for <code>javascript.classes.class_static_initialization_blocks</code>.<br><a href="#on-github">Check for problems with this page</a> or contribute missing data to <a href="https://github.com/mdn/browser-compat-data">mdn/browser-compat-data</a>.</p></div>
<h2 id="see_also">See also</h2>
<ul> <li>
<a href="https://v8.dev/features/class-static-initializer-blocks" rel=" noopener">Class static initialization blocks</a> (v8.dev blog)</li> <li>
<a href="https://2ality.com/2021/09/class-static-block.html" rel=" noopener">ES2022 feature: class static initialization blocks</a> (2ality.com blog)</li> <li><a href="../classes">Classes</a></li> <li><a href="../operators/super"><code>super()</code></a></li> <li><a href="../global_objects/object/constructor">Object.prototype.constructor</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Class_static_initialization_blocks" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Class_static_initialization_blocks</a>
  </p>
</div>
