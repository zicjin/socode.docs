<h1>Experiments</h1>
<h2 id="experiments">experiments
</h2>
<p><code>boolean: false</code></p>
<p><code>experiments</code> option was introduced in webpack 5 to empower users with the ability to activate and try out experimental features.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6>
<p>Because experimental features have relaxed semantic versioning and might contain breaking changes, make sure to fix webpack's version to minor e.g. <code>webpack: ~5.4.3</code> instead of <code>webpack: ^5.4.3</code> or use a lockfile when using <code>experiments</code>.</p></aside><p>Available options:</p>
<ul>
<li>
<code>asyncWebAssembly</code>: Support the new WebAssembly according to the <a href="https://github.com/WebAssembly/esm-integration">updated specification</a>, it makes a WebAssembly module an async module.</li>
<li><a href="#experimentsbuildhttp"><code>buildHttp</code></a></li>
<li><a href="#experimentsexecutemodule"><code>executeModule</code></a></li>
<li>
<code>layers</code>: Enable module and chunk layers.</li>
<li><a href="#experimentslazycompilation"><code>lazyCompilation</code></a></li>
<li><a href="#experimentsoutputmodule"><code>outputModule</code></a></li>
<li>
<code>syncWebAssembly</code>: Support the old WebAssembly like in webpack 4.</li>
<li>
<code>topLevelAwait</code>: Support the <a href="https://github.com/tc39/proposal-top-level-await">Top Level Await Stage 3 proposal</a>, it makes the module an async module when <code>await</code> is used on the top-level.</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre data-language="js">module.exports = {
  //...
  experiments: {
    asyncWebAssembly: true,
    buildHttp: true,
    executeModule: true,
    layers: true,
    lazyCompilation: true,
    outputModule: true,
    syncWebAssembly: true,
    topLevelAwait: true,
  },
};</pre>
<h3 id="experimentsbuildhttp">experiments.buildHttp
</h3>
<p>When enabled, webpack can build remote resources that begin with the <code>http(s):</code> protocol.</p>
<ul>
<li>
<p>Type:</p>
<p>One of the following:</p>
<ul>
<li><code>boolean</code></li>
<li>
<code>HttpUriOptions</code><pre data-language="ts">{
  cacheLocation?: false | string,
  frozen?: boolean,
  lockfileLocation?: string,
  upgrade?: boolean
}</pre>
</li>
</ul>
</li>
<li><p>Available: 5.49.0+</p></li>
<li>
<p>Example</p>
<pre data-language="javascript">// webpack.config.js
module.exports = {
  //...
  experiments: {
    buildHttp: true,
  },
};</pre>
<pre data-language="js">// src/index.js
import pMap1 from 'https://cdn.skypack.dev/p-map';
// with `buildHttp` enabled, webpack will build pMap1 just like a regular local module
console.log(pMap1);</pre>
</li>
</ul>
<h4 id="experimentsbuildhttpcachelocation">experiments.buildHttp.cacheLocation
</h4>
<p>Define the location for caching remote resources.</p>
<ul>
<li>Type<ul>
<li><code>string</code></li>
<li><code>false</code></li>
</ul>
</li>
<li>Example<pre data-language="javascript">// webpack.config.js
module.exports = {
  //...
  experiments: {
    buildHttp: {
      cacheLocation: false,
    },
  },
};</pre>
</li>
</ul>
<p>By default webpack would use <code>&lt;compiler-name.&gt;webpack.lock.data/</code> for caching, but you can disable it by setting its value to <code>false</code>.</p>
<p>Note that you should commit files under <code>experiments.buildHttp.cacheLocation</code> into a version control system as no network requests will be made during the <code>production</code> build.</p>
<h4 id="experimentsbuildhttpfrozen">experiments.buildHttp.frozen
</h4>
<p>Freeze the remote resources and lockfile. Any modification to the lockfile or resource contents will result in an error.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<h4 id="experimentsbuildhttplockfilelocation">experiments.buildHttp.lockfileLocation
</h4>
<p>Define the location to store the lockfile.</p>
<ul><li>Type: <code>string</code>
</li></ul>
<p>By default webpack would generate a <code>&lt;compiler-name.&gt;webpack.lock</code> file&gt;. Make sure to commit it into a version control system. During the <code>production</code> build, webpack will build those modules beginning with <code>http(s):</code> protocol from the lockfile and caches under <a href="#experimentsbuildhttpcachelocation"><code>experiments.buildHttp.cacheLocation</code></a>.</p>
<h4 id="experimentsbuildhttpupgrade">experiments.buildHttp.upgrade
</h4>
<p>Detect changes to remote resources and upgrade them automatically.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<h3 id="experimentsexecutemodule">experiments.executeModule
</h3>
<p>Enable execution of modules from the module graph for plugins and loaders at build time to generate code or other assets.</p>
<ul>
<li><p>Type: <code>boolean</code></p></li>
<li><p>Available: 5.32.0+</p></li>
<li>
<p>Example:</p>
<pre data-language="js">module.exports = {
  // …
  experiments: {
    executeModule: true,
  },
};</pre>
</li>
</ul>
<h3 id="experimentslazycompilation">experiments.lazyCompilation
</h3>
<p>Compile entrypoints and dynamic <code>import</code>s only when they are in use. It can be used for either Web or Node.js.</p>
<ul>
<li>
<p>Type</p>
<ul>
<li><code>boolean</code></li>
<li>
<code>object</code><pre data-language="ts">{
  // define a custom backend
  backend?: ((
    compiler: webpack.Compiler,
    client: string,
    callback: (err?: Error, api?: any) =&gt; void
  ) =&gt; void)
  | ((
      compiler: webpack.Compiler,
      client: string
    ) =&gt; Promise&lt;any&gt;)
  client?: string,
  entries?: boolean,
  imports?: boolean,
  test?: RegExp | string | ((module: import("../lib/Module")) =&gt; boolean)
}</pre>
<ul>
<li>
<code>client</code>: Path to a custom client, defaults to <code>webpack/hot/lazy-compilation-{node|web}.js</code>.</li>
<li>
<code>backend</code>: Customize the backend, defaults to <code>webpack/lib/hmr/lazyCompilationBackend</code>.</li>
<li>
<code>entries</code>: Enable lazy compilation for entries.</li>
<li>
<code>imports</code> <span class="badge">5.20.0+</span>: Enable lazy compilation for dynamic imports.</li>
<li>
<code>test</code> <span class="badge">5.20.0+</span>: Specify which imported modules should be lazily compiled.</li>
</ul>
</li>
</ul>
</li>
<li><p>Available: 5.17.0+</p></li>
<li>
<p>Example 1:</p>
<pre data-language="js">module.exports = {
  // …
  experiments: {
    lazyCompilation: true,
  },
};</pre>
</li>
<li>
<p>Example 2:</p>
<pre data-language="js">module.exports = {
  // …
  experiments: {
    lazyCompilation: {
      // disable lazy compilation for dynamic imports
      imports: false,

      // disable lazy compilation for entries
      entries: false,

      // do not lazily compile moduleB
      test: (module) =&gt; !/moduleB/.test(module.nameForCondition()),
    },
  },
};</pre>
</li>
</ul>
<h3 id="experimentsoutputmodule">experiments.outputModule
</h3>
<p><code>boolean</code></p>
<p>Once enabled, webpack will ouput ECMAScript module syntax whenever possible. For instance, <code>import()</code> to load chunks, ESM exports to expose chunk data, among others.</p>
<pre data-language="js">module.exports = {
  experiments: {
    outputModule: true,
  },
};</pre>
<div class="print:hidden mt-20">
<a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/configuration/experiments.mdx">Edit this page</a><span class="mx-5 text-black font-bold dark:text-white">·</span><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline">Print this page</a>
</div>
<div class="contributors__section"><h3>Contributors</h3></div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://webpack.js.org/configuration/experiments" class="_attribution-link" target="_blank">https://webpack.js.org/configuration/experiments</a>
  </p>
</div>
