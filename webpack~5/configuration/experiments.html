<h1>Experiments</h1>
<div id="md-content">
<h2>
experiments
</h2>
<p><code>boolean: false</code></p>
<p><code>experiments</code> option was introduced in webpack 5 to empower users with the ability to activate and try out experimental features.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6>
<p>Because experimental features have relaxed semantic versioning and might contain breaking changes, make sure to fix webpack's version to minor e.g. <code>webpack: ~5.4.3</code> instead of <code>webpack: ^5.4.3</code> or use a lockfile when using <code>experiments</code>.</p></aside><p>Available options:</p>
<ul>
<li>
<code>asyncWebAssembly</code>: Support the new WebAssembly according to the <a href="https://github.com/WebAssembly/esm-integration">updated specification</a>, it makes a WebAssembly module an async module. And it is enabled by default when <a href="#experimentsfuturedefaults"><code>experiments.futureDefaults</code></a> is set to <code>true</code>.</li>
<li><a href="#experimentsbackcompat"><code>backCompat</code></a></li>
<li><a href="#experimentsbuildhttp"><code>buildHttp</code></a></li>
<li><a href="#experimentscacheunaffected"><code>cacheUnaffected</code></a></li>
<li><a href="#experimentscss"><code>css</code></a></li>
<li><a href="#experimentsfuturedefaults"><code>futureDefaults</code></a></li>
<li>
<code>layers</code>: Enable module and chunk layers.</li>
<li><a href="#experimentslazycompilation"><code>lazyCompilation</code></a></li>
<li><a href="#experimentsoutputmodule"><code>outputModule</code></a></li>
<li>
<code>syncWebAssembly</code>: Support the old WebAssembly like in webpack 4.</li>
<li>
<code>topLevelAwait</code>: Support the <a href="https://github.com/tc39/proposal-top-level-await">Top Level Await Stage 3 proposal</a>, it makes the module an async module when <code>await</code> is used on the top-level. And it is enabled by default when <a href="#experimentsfuturedefaults"><code>experiments.futureDefaults</code></a> is set to <code>true</code>.</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre class="hljs language-javascript" data-language="js">module.exports = {
  //...
  experiments: {
    asyncWebAssembly: true,
    buildHttp: true,
    layers: true,
    lazyCompilation: true,
    outputModule: true,
    syncWebAssembly: true,
    topLevelAwait: true,
  },
};</pre>
<h3>
experiments.backCompat
</h3>
<p>Enable backward-compat layer with deprecation warnings for many webpack 4 APIs.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<pre class="hljs language-js" data-language="js">module.exports = {
  //...
  experiments: {
    backCompat: true,
  },
};</pre>
<h3>
experiments.buildHttp
</h3>
<p>When enabled, webpack can build remote resources that begin with the <code>http(s):</code> protocol.</p>
<ul>
<li>
<p>Type:</p>
<ul>
<li>
<p><code>(string | RegExp | ((uri: string) =&gt; boolean))[]</code></p>
<p>A shortcut for <a href="#experimentsbuildhttpalloweduris"><code>experiments.buildHttp.allowedUris</code></a>.</p>
</li>
<li>
<p><code>HttpUriOptions</code></p>
<pre data-language="ts">{
  allowedUris: (string|RegExp|(uri: string) =&gt; boolean)[],
  cacheLocation?: false | string,
  frozen?: boolean,
  lockfileLocation?: string,
  upgrade?: boolean
}</pre>
</li>
</ul>
</li>
<li><p>Available: 5.49.0+</p></li>
<li>
<p>Example</p>
<pre data-language="javascript">// webpack.config.js
module.exports = {
  //...
  experiments: {
    buildHttp: true,
  },
};</pre>
<pre data-language="js">// src/index.js
import pMap1 from 'https://cdn.skypack.dev/p-map';
// with `buildHttp` enabled, webpack will build pMap1 just like a regular local module
console.log(pMap1);</pre>
</li>
</ul>
<h4>
experiments.buildHttp.allowedUris
</h4>
<p>A list of allowed URIs.</p>
<ul>
<li><p>Type: <code>(string|RegExp|(uri: string) =&gt; boolean)[]</code></p></li>
<li>
<p>Example</p>
<pre data-language="javascript">// webpack.config.js
module.exports = {
  //...
  experiments: {
    buildHttp: {
      allowedUris: [
        'http://localhost:9990/',
        'https://raw.githubusercontent.com/',
      ],
    },
  },
};</pre>
</li>
</ul>
<h4>
experiments.buildHttp.cacheLocation
</h4>
<p>Define the location for caching remote resources.</p>
<ul>
<li>Type<ul>
<li><code>string</code></li>
<li><code>false</code></li>
</ul>
</li>
<li>Example<pre data-language="javascript">// webpack.config.js
module.exports = {
  //...
  experiments: {
    buildHttp: {
      cacheLocation: false,
    },
  },
};</pre>
</li>
</ul>
<p>By default webpack would use <code>&lt;compiler-name.&gt;webpack.lock.data/</code> for caching, but you can disable it by setting its value to <code>false</code>.</p>
<p>Note that you should commit files under <code>experiments.buildHttp.cacheLocation</code> into a version control system as no network requests will be made during the <code>production</code> build.</p>
<h4>
experiments.buildHttp.frozen
</h4>
<p>Freeze the remote resources and lockfile. Any modification to the lockfile or resource contents will result in an error.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<h4>
experiments.buildHttp.lockfileLocation
</h4>
<p>Define the location to store the lockfile.</p>
<ul><li>Type: <code>string</code>
</li></ul>
<p>By default webpack would generate a <code>&lt;compiler-name.&gt;webpack.lock</code> file&gt;. Make sure to commit it into a version control system. During the <code>production</code> build, webpack will build those modules beginning with <code>http(s):</code> protocol from the lockfile and caches under <a href="#experimentsbuildhttpcachelocation"><code>experiments.buildHttp.cacheLocation</code></a>.</p>
<h4>
experiments.buildHttp.proxy
</h4>
<p>Specify the proxy server to use for fetching remote resources.</p>
<ul><li>Type: <code>string</code>
</li></ul>
<p>By default, Webpack would imply the proxy server to use for fetching remote resources from the <code>http_proxy</code> (case insensitive) environment variable. However, you can also specify one through the <code>proxy</code> option.</p>
<h4>
experiments.buildHttp.upgrade
</h4>
<p>Detect changes to remote resources and upgrade them automatically.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<h3>
experiments.css
</h3>
<p>Enable native CSS support. Note that it's an experimental feature still under development and will be enabled by default in webpack v6, however you can track the progress on <a href="https://github.com/webpack/webpack/issues/14893">GitHub</a>.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<h3>
experiments.cacheUnaffected
</h3>
<p>Enable additional in-memory caching of modules which are unchanged and reference only unchanged modules.</p>
<ul><li>Type: <code>boolean</code>
</li></ul>
<p>Defaults to the value of <a href="#experimentsfuturedefaults"><code>futureDefaults</code></a>.</p>
<h3>
experiments.futureDefaults
</h3>
<p>Use defaults of the next major webpack and show warnings in any problematic places.</p>
<p><strong>webpack.config.js</strong></p>
<pre class="hljs language-js" data-language="js">module.exports = {
  //...
  experiments: {
    futureDefaults: true,
  },
};</pre>
<h3>
experiments.lazyCompilation
</h3>
<p>Compile entrypoints and dynamic <code>import</code>s only when they are in use. It can be used for either Web or Node.js.</p>
<ul>
<li>
<p>Type</p>
<ul>
<li><p><code>boolean</code></p></li>
<li>
<p><code>object</code></p>
<pre data-language="ts">{
// define a custom backend
backend?: ((
  compiler: Compiler,
  callback: (err?: Error, api?: BackendApi) =&gt; void
  ) =&gt; void)
  | ((compiler: Compiler) =&gt; Promise&lt;BackendApi&gt;)
  | {
    /**
     * A custom client.
    */
    client?: string;

    /**
     * Specify where to listen to from the server.
     */
    listen?: number | ListenOptions | ((server: typeof Server) =&gt; void);

    /**
     * Specify the protocol the client should use to connect to the server.
     */
    protocol?: "http" | "https";

    /**
     * Specify how to create the server handling the EventSource requests.
     */
    server?: ServerOptionsImport | ServerOptionsHttps | (() =&gt; typeof Server);

},
entries?: boolean,
imports?: boolean,
test?: string | RegExp | ((module: Module) =&gt; boolean)
}</pre>
<ul>
<li>
<code>backend</code>: Customize the backend.</li>
<li>
<code>entries</code>: Enable lazy compilation for entries.</li>
<li>
<code>imports</code> <span class="badge">5.20.0+</span>: Enable lazy compilation for dynamic imports.</li>
<li>
<code>test</code> <span class="badge">5.20.0+</span>: Specify which imported modules should be lazily compiled.</li>
</ul>
</li>
</ul>
</li>
<li><p>Available: 5.17.0+</p></li>
<li>
<p>Example 1:</p>
<pre data-language="js">module.exports = {
  // …
  experiments: {
    lazyCompilation: true,
  },
};</pre>
</li>
<li>
<p>Example 2:</p>
<pre data-language="js">module.exports = {
  // …
  experiments: {
    lazyCompilation: {
      // disable lazy compilation for dynamic imports
      imports: false,

      // disable lazy compilation for entries
      entries: false,

      // do not lazily compile moduleB
      test: (module) =&gt; !/moduleB/.test(module.nameForCondition()),
    },
  },
};</pre>
</li>
</ul>
<h3>
experiments.outputModule
</h3>
<p><code>boolean</code></p>
<p>Once enabled, webpack will output ECMAScript module syntax whenever possible. For instance, <code>import()</code> to load chunks, ESM exports to expose chunk data, among others.</p>
<pre class="hljs language-js" data-language="js">module.exports = {
  experiments: {
    outputModule: true,
  },
};</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://webpack.js.org/configuration/experiments" class="_attribution-link" target="_blank">https://webpack.js.org/configuration/experiments</a>
  </p>
</div>
