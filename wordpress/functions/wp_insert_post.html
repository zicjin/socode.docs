<h1>wp_insert_post( array $postarr, bool $wp_error = false, bool $fire_after_hooks = true )</h1>  <section> <p>Insert or update a post.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>If the $postarr parameter has ‘ID’ set to a value, then post will be updated.</p> <p>You can set the post date manually, by setting the values for ‘post_date’ and ‘post_date_gmt’ keys. You can close the comments or open the comments by setting the value for ‘comment_status’ key.</p> <h3 id="see-also">See also</h3> <ul> <li><a href="sanitize_post">sanitize_post()</a></li> </ul> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$postarr</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">An array of elements that make up a post to update or insert. <ul class="param-hash">
<li>
<b>'ID'</b><br><i><span class="type">(int)</span></i> The post ID. If equal to something other than 0, the post with that ID will be updated. Default 0.</li> <li>
<b>'post_author'</b><br><i><span class="type">(int)</span></i> The ID of the user who added the post. Default is the current user ID.</li> <li>
<b>'post_date'</b><br><i><span class="type">(string)</span></i> The date of the post. Default is the current time.</li> <li>
<b>'post_date_gmt'</b><br><i><span class="type">(string)</span></i> The date of the post in the GMT timezone. Default is the value of <code>$post_date</code>.</li> <li>
<b>'post_content'</b><br><i><span class="type">(string)</span></i> The post content. Default empty.</li> <li>
<b>'post_content_filtered'</b><br><i><span class="type">(string)</span></i> The filtered post content. Default empty.</li> <li>
<b>'post_title'</b><br><i><span class="type">(string)</span></i> The post title. Default empty.</li> <li>
<b>'post_excerpt'</b><br><i><span class="type">(string)</span></i> The post excerpt. Default empty.</li> <li>
<b>'post_status'</b><br><i><span class="type">(string)</span></i> The post status. Default 'draft'.</li> <li>
<b>'post_type'</b><br><i><span class="type">(string)</span></i> The post type. Default 'post'.</li> <li>
<b>'comment_status'</b><br><i><span class="type">(string)</span></i> Whether the post can accept comments. Accepts 'open' or 'closed'. Default is the value of 'default_comment_status' option.</li> <li>
<b>'ping_status'</b><br><i><span class="type">(string)</span></i> Whether the post can accept pings. Accepts 'open' or 'closed'. Default is the value of 'default_ping_status' option.</li> <li>
<b>'post_password'</b><br><i><span class="type">(string)</span></i> The password to access the post. Default empty.</li> <li>
<b>'post_name'</b><br><i><span class="type">(string)</span></i> The post name. Default is the sanitized post title when creating a new post.</li> <li>
<b>'to_ping'</b><br><i><span class="type">(string)</span></i> Space or carriage return-separated list of URLs to ping. Default empty.</li> <li>
<b>'pinged'</b><br><i><span class="type">(string)</span></i> Space or carriage return-separated list of URLs that have been pinged. Default empty.</li> <li>
<b>'post_modified'</b><br><i><span class="type">(string)</span></i> The date when the post was last modified. Default is the current time.</li> <li>
<b>'post_modified_gmt'</b><br><i><span class="type">(string)</span></i> The date when the post was last modified in the GMT timezone. Default is the current time.</li> <li>
<b>'post_parent'</b><br><i><span class="type">(int)</span></i> Set this for the post it belongs to, if any. Default 0.</li> <li>
<b>'menu_order'</b><br><i><span class="type">(int)</span></i> The order the post should be displayed in. Default 0.</li> <li>
<b>'post_mime_type'</b><br><i><span class="type">(string)</span></i> The mime type of the post. Default empty.</li> <li>
<b>'guid'</b><br><i><span class="type">(string)</span></i> Global Unique ID for referencing the post. Default empty.</li> <li>
<b>'import_id'</b><br><i><span class="type">(int)</span></i> The post ID to be used when inserting a new post. If specified, must not match any existing post ID. Default 0.</li> <li>
<b>'post_category'</b><br><i><span class="type">(int[])</span></i> Array of category IDs. Defaults to value of the 'default_category' option.</li> <li>
<b>'tags_input'</b><br><i><span class="type">(array)</span></i> Array of tag names, slugs, or IDs. Default empty.</li> <li>
<b>'tax_input'</b><br><i><span class="type">(array)</span></i> An array of taxonomy terms keyed by their taxonomy name. If the taxonomy is hierarchical, the term list needs to be either an array of term IDs or a comma-separated string of IDs. If the taxonomy is non-hierarchical, the term list can be an array that contains term names or slugs, or a comma-separated string of names or slugs. This is because, in hierarchical taxonomy, child terms can have the same names with different parent terms, so the only way to connect them is using ID. Default empty.</li> <li>
<b>'meta_input'</b><br><i><span class="type">(array)</span></i> Array of post meta values keyed by their post meta key. Default empty.</li> </ul> </span> </p> </dd> <dt>$wp_error</dt> <dd> <p class="desc"> <span class="type">(<span class="bool">bool</span>)</span> <span class="required">(Optional)</span> <span class="description"> Whether to return a <a href="../classes/wp_error">WP_Error</a> on failure. </span> </p> <p class="default">Default value: false</p> </dd> <dt>$fire_after_hooks</dt> <dd> <p class="desc"> <span class="type">(<span class="bool">bool</span>)</span> <span class="required">(Optional)</span> <span class="description"> Whether to fire the after insert hooks. </span> </p> <p class="default">Default value: true</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(int|<a href="../classes/wp_error">WP_Error</a>)</span> The post ID on success. The value 0 or <a href="../classes/wp_error">WP_Error</a> on failure.</p> </section>  <section> <h2 id="more-information">More Information</h2> <h3 id="usage">Usage</h3> <pre class="brush: php; title: ; notranslate" title="" data-language="php">
wp_insert_post( $post, $wp_error );
</pre> <h3 id="notes">Notes</h3> <ul> <li>
<tt>post_title</tt> and <tt>post_content</tt> are required</li> <li>
<tt>post_status</tt>: If providing a post_status of ‘future’ you must specify the post_date in order for WordPress to know when to publish your post. See also <a title="Post Status Transitions" href="https://codex.wordpress.org/Post_Status_Transitions">Post Status Transitions</a>.</li> <li>
<tt>post_category</tt>: Equivalent to calling <a title="Function Reference/wp set post categories" href="wp_set_post_categories">wp_set_post_categories()</a>.</li> <li>
<tt>tags_input</tt>: Equivalent to calling <a title="Function Reference/wp set post tags" href="wp_set_post_tags">wp_set_post_tags()</a>.</li> <li>
<tt>tax_input</tt>: Equivalent to calling <a title="Function Reference/wp set post terms" href="wp_set_post_terms">wp_set_post_terms()</a> for each custom taxonomy in the array. If the current user doesn’t have the capability to work with a taxonomy, then you must use <a title="Function Reference/wp set object terms" href="wp_set_object_terms">wp_set_object_terms()</a> instead.</li> <li>
<tt>page_template</tt>: If post_type is ‘page’, will attempt to set the <a title="Page Templates" href="https://codex.wordpress.org/Page_Templates">page template</a>. On failure, the function will return either a <a href="../classes/wp_error">WP_Error</a> or 0, and stop before the final actions are called. If the post_type is not ‘page’, the parameter is ignored. You can set the page template for a non-page by calling <a title="Function Reference/update post meta" href="update_post_meta">update_post_meta()</a> with a key of ‘_wp_page_template’.</li> </ul> <h3 id="categories">Categories</h3> <p>Categories need to be passed as an array of integers that match the category IDs in the database. This is the case even where only one category is assigned to the post.</p> <p>See also: <a title="Function Reference/wp set post terms" href="wp_set_post_terms">wp_set_post_terms()</a></p> <h3 id="security">Security</h3> <p><tt><a href="wp_insert_post">wp_insert_post()</a></tt> passes data through <a href="_wp_link_placeholder">sanitize_post()</a>, which itself handles all necessary sanitization and validation (kses, etc.).</p> <p>As such, you don’t need to worry about that.</p> <p>You may wish, however, to remove HTML, JavaScript, and PHP tags from the post_title and any other fields. Surprisingly, WordPress does not do this automatically. This can be easily done by using the <a href="_wp_link_placeholder">wp_strip_all_tags()</a> function and is especially useful when building front-end post submission forms.</p> <pre class="brush: php; title: ; notranslate" title="" data-language="php">
// Create post object
$my_post = array(
  'post_title'    =&gt; wp_strip_all_tags( $_POST['post_title'] ),
  'post_content'  =&gt; $_POST['post_content'],
  'post_status'   =&gt; 'publish',
  'post_author'   =&gt; 1,
  'post_category' =&gt; array( 8,39 )
);

// Insert the post into the database
wp_insert_post( $my_post );
</pre> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/post.php/">wp-includes/post.php</a> </p> <pre data-language="php">function wp_insert_post( $postarr, $wp_error = false, $fire_after_hooks = true ) {
	global $wpdb;

	// Capture original pre-sanitized array for passing into filters.
	$unsanitized_postarr = $postarr;

	$user_id = get_current_user_id();

	$defaults = array(
		'post_author'           =&gt; $user_id,
		'post_content'          =&gt; '',
		'post_content_filtered' =&gt; '',
		'post_title'            =&gt; '',
		'post_excerpt'          =&gt; '',
		'post_status'           =&gt; 'draft',
		'post_type'             =&gt; 'post',
		'comment_status'        =&gt; '',
		'ping_status'           =&gt; '',
		'post_password'         =&gt; '',
		'to_ping'               =&gt; '',
		'pinged'                =&gt; '',
		'post_parent'           =&gt; 0,
		'menu_order'            =&gt; 0,
		'guid'                  =&gt; '',
		'import_id'             =&gt; 0,
		'context'               =&gt; '',
		'post_date'             =&gt; '',
		'post_date_gmt'         =&gt; '',
	);

	$postarr = wp_parse_args( $postarr, $defaults );

	unset( $postarr['filter'] );

	$postarr = sanitize_post( $postarr, 'db' );

	// Are we updating or creating?
	$post_ID = 0;
	$update  = false;
	$guid    = $postarr['guid'];

	if ( ! empty( $postarr['ID'] ) ) {
		$update = true;

		// Get the post ID and GUID.
		$post_ID     = $postarr['ID'];
		$post_before = get_post( $post_ID );

		if ( is_null( $post_before ) ) {
			if ( $wp_error ) {
				return new WP_Error( 'invalid_post', __( 'Invalid post ID.' ) );
			}
			return 0;
		}

		$guid            = get_post_field( 'guid', $post_ID );
		$previous_status = get_post_field( 'post_status', $post_ID );
	} else {
		$previous_status = 'new';
		$post_before     = null;
	}

	$post_type = empty( $postarr['post_type'] ) ? 'post' : $postarr['post_type'];

	$post_title   = $postarr['post_title'];
	$post_content = $postarr['post_content'];
	$post_excerpt = $postarr['post_excerpt'];

	if ( isset( $postarr['post_name'] ) ) {
		$post_name = $postarr['post_name'];
	} elseif ( $update ) {
		// For an update, don't modify the post_name if it wasn't supplied as an argument.
		$post_name = $post_before-&gt;post_name;
	}

	$maybe_empty = 'attachment' !== $post_type
		&amp;&amp; ! $post_content &amp;&amp; ! $post_title &amp;&amp; ! $post_excerpt
		&amp;&amp; post_type_supports( $post_type, 'editor' )
		&amp;&amp; post_type_supports( $post_type, 'title' )
		&amp;&amp; post_type_supports( $post_type, 'excerpt' );

	/**
	 * Filters whether the post should be considered "empty".
	 *
	 * The post is considered "empty" if both:
	 * 1. The post type supports the title, editor, and excerpt fields
	 * 2. The title, editor, and excerpt fields are all empty
	 *
	 * Returning a truthy value from the filter will effectively short-circuit
	 * the new post being inserted and return 0. If $wp_error is true, a WP_Error
	 * will be returned instead.
	 *
	 * @since 3.3.0
	 *
	 * @param bool  $maybe_empty Whether the post should be considered "empty".
	 * @param array $postarr     Array of post data.
	 */
	if ( apply_filters( 'wp_insert_post_empty_content', $maybe_empty, $postarr ) ) {
		if ( $wp_error ) {
			return new WP_Error( 'empty_content', __( 'Content, title, and excerpt are empty.' ) );
		} else {
			return 0;
		}
	}

	$post_status = empty( $postarr['post_status'] ) ? 'draft' : $postarr['post_status'];

	if ( 'attachment' === $post_type &amp;&amp; ! in_array( $post_status, array( 'inherit', 'private', 'trash', 'auto-draft' ), true ) ) {
		$post_status = 'inherit';
	}

	if ( ! empty( $postarr['post_category'] ) ) {
		// Filter out empty terms.
		$post_category = array_filter( $postarr['post_category'] );
	}

	// Make sure we set a valid category.
	if ( empty( $post_category ) || 0 === count( $post_category ) || ! is_array( $post_category ) ) {
		// 'post' requires at least one category.
		if ( 'post' === $post_type &amp;&amp; 'auto-draft' !== $post_status ) {
			$post_category = array( get_option( 'default_category' ) );
		} else {
			$post_category = array();
		}
	}

	/*
	 * Don't allow contributors to set the post slug for pending review posts.
	 *
	 * For new posts check the primitive capability, for updates check the meta capability.
	 */
	$post_type_object = get_post_type_object( $post_type );

	if ( ! $update &amp;&amp; 'pending' === $post_status &amp;&amp; ! current_user_can( $post_type_object-&gt;cap-&gt;publish_posts ) ) {
		$post_name = '';
	} elseif ( $update &amp;&amp; 'pending' === $post_status &amp;&amp; ! current_user_can( 'publish_post', $post_ID ) ) {
		$post_name = '';
	}

	/*
	 * Create a valid post name. Drafts and pending posts are allowed to have
	 * an empty post name.
	 */
	if ( empty( $post_name ) ) {
		if ( ! in_array( $post_status, array( 'draft', 'pending', 'auto-draft' ), true ) ) {
			$post_name = sanitize_title( $post_title );
		} else {
			$post_name = '';
		}
	} else {
		// On updates, we need to check to see if it's using the old, fixed sanitization context.
		$check_name = sanitize_title( $post_name, '', 'old-save' );

		if ( $update &amp;&amp; strtolower( urlencode( $post_name ) ) == $check_name &amp;&amp; get_post_field( 'post_name', $post_ID ) == $check_name ) {
			$post_name = $check_name;
		} else { // new post, or slug has changed.
			$post_name = sanitize_title( $post_name );
		}
	}

	/*
	 * Resolve the post date from any provided post date or post date GMT strings;
	 * if none are provided, the date will be set to now.
	 */
	$post_date = wp_resolve_post_date( $postarr['post_date'], $postarr['post_date_gmt'] );
	if ( ! $post_date ) {
		if ( $wp_error ) {
			return new WP_Error( 'invalid_date', __( 'Invalid date.' ) );
		} else {
			return 0;
		}
	}

	if ( empty( $postarr['post_date_gmt'] ) || '0000-00-00 00:00:00' === $postarr['post_date_gmt'] ) {
		if ( ! in_array( $post_status, get_post_stati( array( 'date_floating' =&gt; true ) ), true ) ) {
			$post_date_gmt = get_gmt_from_date( $post_date );
		} else {
			$post_date_gmt = '0000-00-00 00:00:00';
		}
	} else {
		$post_date_gmt = $postarr['post_date_gmt'];
	}

	if ( $update || '0000-00-00 00:00:00' === $post_date ) {
		$post_modified     = current_time( 'mysql' );
		$post_modified_gmt = current_time( 'mysql', 1 );
	} else {
		$post_modified     = $post_date;
		$post_modified_gmt = $post_date_gmt;
	}

	if ( 'attachment' !== $post_type ) {
		$now = gmdate( 'Y-m-d H:i:s' );

		if ( 'publish' === $post_status ) {
			if ( strtotime( $post_date_gmt ) - strtotime( $now ) &gt;= MINUTE_IN_SECONDS ) {
				$post_status = 'future';
			}
		} elseif ( 'future' === $post_status ) {
			if ( strtotime( $post_date_gmt ) - strtotime( $now ) &lt; MINUTE_IN_SECONDS ) {
				$post_status = 'publish';
			}
		}
	}

	// Comment status.
	if ( empty( $postarr['comment_status'] ) ) {
		if ( $update ) {
			$comment_status = 'closed';
		} else {
			$comment_status = get_default_comment_status( $post_type );
		}
	} else {
		$comment_status = $postarr['comment_status'];
	}

	// These variables are needed by compact() later.
	$post_content_filtered = $postarr['post_content_filtered'];
	$post_author           = isset( $postarr['post_author'] ) ? $postarr['post_author'] : $user_id;
	$ping_status           = empty( $postarr['ping_status'] ) ? get_default_comment_status( $post_type, 'pingback' ) : $postarr['ping_status'];
	$to_ping               = isset( $postarr['to_ping'] ) ? sanitize_trackback_urls( $postarr['to_ping'] ) : '';
	$pinged                = isset( $postarr['pinged'] ) ? $postarr['pinged'] : '';
	$import_id             = isset( $postarr['import_id'] ) ? $postarr['import_id'] : 0;

	/*
	 * The 'wp_insert_post_parent' filter expects all variables to be present.
	 * Previously, these variables would have already been extracted
	 */
	if ( isset( $postarr['menu_order'] ) ) {
		$menu_order = (int) $postarr['menu_order'];
	} else {
		$menu_order = 0;
	}

	$post_password = isset( $postarr['post_password'] ) ? $postarr['post_password'] : '';
	if ( 'private' === $post_status ) {
		$post_password = '';
	}

	if ( isset( $postarr['post_parent'] ) ) {
		$post_parent = (int) $postarr['post_parent'];
	} else {
		$post_parent = 0;
	}

	$new_postarr = array_merge(
		array(
			'ID' =&gt; $post_ID,
		),
		compact( array_diff( array_keys( $defaults ), array( 'context', 'filter' ) ) )
	);

	/**
	 * Filters the post parent -- used to check for and prevent hierarchy loops.
	 *
	 * @since 3.1.0
	 *
	 * @param int   $post_parent Post parent ID.
	 * @param int   $post_ID     Post ID.
	 * @param array $new_postarr Array of parsed post data.
	 * @param array $postarr     Array of sanitized, but otherwise unmodified post data.
	 */
	$post_parent = apply_filters( 'wp_insert_post_parent', $post_parent, $post_ID, $new_postarr, $postarr );

	/*
	 * If the post is being untrashed and it has a desired slug stored in post meta,
	 * reassign it.
	 */
	if ( 'trash' === $previous_status &amp;&amp; 'trash' !== $post_status ) {
		$desired_post_slug = get_post_meta( $post_ID, '_wp_desired_post_slug', true );

		if ( $desired_post_slug ) {
			delete_post_meta( $post_ID, '_wp_desired_post_slug' );
			$post_name = $desired_post_slug;
		}
	}

	// If a trashed post has the desired slug, change it and let this post have it.
	if ( 'trash' !== $post_status &amp;&amp; $post_name ) {
		/**
		 * Filters whether or not to add a `__trashed` suffix to trashed posts that match the name of the updated post.
		 *
		 * @since 5.4.0
		 *
		 * @param bool   $add_trashed_suffix Whether to attempt to add the suffix.
		 * @param string $post_name          The name of the post being updated.
		 * @param int    $post_ID            Post ID.
		 */
		$add_trashed_suffix = apply_filters( 'add_trashed_suffix_to_trashed_posts', true, $post_name, $post_ID );

		if ( $add_trashed_suffix ) {
			wp_add_trashed_suffix_to_post_name_for_trashed_posts( $post_name, $post_ID );
		}
	}

	// When trashing an existing post, change its slug to allow non-trashed posts to use it.
	if ( 'trash' === $post_status &amp;&amp; 'trash' !== $previous_status &amp;&amp; 'new' !== $previous_status ) {
		$post_name = wp_add_trashed_suffix_to_post_name_for_post( $post_ID );
	}

	$post_name = wp_unique_post_slug( $post_name, $post_ID, $post_status, $post_type, $post_parent );

	// Don't unslash.
	$post_mime_type = isset( $postarr['post_mime_type'] ) ? $postarr['post_mime_type'] : '';

	// Expected_slashed (everything!).
	$data = compact( 'post_author', 'post_date', 'post_date_gmt', 'post_content', 'post_content_filtered', 'post_title', 'post_excerpt', 'post_status', 'post_type', 'comment_status', 'ping_status', 'post_password', 'post_name', 'to_ping', 'pinged', 'post_modified', 'post_modified_gmt', 'post_parent', 'menu_order', 'post_mime_type', 'guid' );

	$emoji_fields = array( 'post_title', 'post_content', 'post_excerpt' );

	foreach ( $emoji_fields as $emoji_field ) {
		if ( isset( $data[ $emoji_field ] ) ) {
			$charset = $wpdb-&gt;get_col_charset( $wpdb-&gt;posts, $emoji_field );

			if ( 'utf8' === $charset ) {
				$data[ $emoji_field ] = wp_encode_emoji( $data[ $emoji_field ] );
			}
		}
	}

	if ( 'attachment' === $post_type ) {
		/**
		 * Filters attachment post data before it is updated in or added to the database.
		 *
		 * @since 3.9.0
		 * @since 5.4.1 The `$unsanitized_postarr` parameter was added.
		 * @since 6.0.0 The `$update` parameter was added.
		 *
		 * @param array $data                An array of slashed, sanitized, and processed attachment post data.
		 * @param array $postarr             An array of slashed and sanitized attachment post data, but not processed.
		 * @param array $unsanitized_postarr An array of slashed yet *unsanitized* and unprocessed attachment post data
		 *                                   as originally passed to wp_insert_post().
		 * @param bool  $update              Whether this is an existing attachment post being updated.
		 */
		$data = apply_filters( 'wp_insert_attachment_data', $data, $postarr, $unsanitized_postarr, $update );
	} else {
		/**
		 * Filters slashed post data just before it is inserted into the database.
		 *
		 * @since 2.7.0
		 * @since 5.4.1 The `$unsanitized_postarr` parameter was added.
		 * @since 6.0.0 The `$update` parameter was added.
		 *
		 * @param array $data                An array of slashed, sanitized, and processed post data.
		 * @param array $postarr             An array of sanitized (and slashed) but otherwise unmodified post data.
		 * @param array $unsanitized_postarr An array of slashed yet *unsanitized* and unprocessed post data as
		 *                                   originally passed to wp_insert_post().
		 * @param bool  $update              Whether this is an existing post being updated.
		 */
		$data = apply_filters( 'wp_insert_post_data', $data, $postarr, $unsanitized_postarr, $update );
	}

	$data  = wp_unslash( $data );
	$where = array( 'ID' =&gt; $post_ID );

	if ( $update ) {
		/**
		 * Fires immediately before an existing post is updated in the database.
		 *
		 * @since 2.5.0
		 *
		 * @param int   $post_ID Post ID.
		 * @param array $data    Array of unslashed post data.
		 */
		do_action( 'pre_post_update', $post_ID, $data );

		if ( false === $wpdb-&gt;update( $wpdb-&gt;posts, $data, $where ) ) {
			if ( $wp_error ) {
				if ( 'attachment' === $post_type ) {
					$message = __( 'Could not update attachment in the database.' );
				} else {
					$message = __( 'Could not update post in the database.' );
				}

				return new WP_Error( 'db_update_error', $message, $wpdb-&gt;last_error );
			} else {
				return 0;
			}
		}
	} else {
		// If there is a suggested ID, use it if not already present.
		if ( ! empty( $import_id ) ) {
			$import_id = (int) $import_id;

			if ( ! $wpdb-&gt;get_var( $wpdb-&gt;prepare( "SELECT ID FROM $wpdb-&gt;posts WHERE ID = %d", $import_id ) ) ) {
				$data['ID'] = $import_id;
			}
		}

		if ( false === $wpdb-&gt;insert( $wpdb-&gt;posts, $data ) ) {
			if ( $wp_error ) {
				if ( 'attachment' === $post_type ) {
					$message = __( 'Could not insert attachment into the database.' );
				} else {
					$message = __( 'Could not insert post into the database.' );
				}

				return new WP_Error( 'db_insert_error', $message, $wpdb-&gt;last_error );
			} else {
				return 0;
			}
		}

		$post_ID = (int) $wpdb-&gt;insert_id;

		// Use the newly generated $post_ID.
		$where = array( 'ID' =&gt; $post_ID );
	}

	if ( empty( $data['post_name'] ) &amp;&amp; ! in_array( $data['post_status'], array( 'draft', 'pending', 'auto-draft' ), true ) ) {
		$data['post_name'] = wp_unique_post_slug( sanitize_title( $data['post_title'], $post_ID ), $post_ID, $data['post_status'], $post_type, $post_parent );

		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'post_name' =&gt; $data['post_name'] ), $where );
		clean_post_cache( $post_ID );
	}

	if ( is_object_in_taxonomy( $post_type, 'category' ) ) {
		wp_set_post_categories( $post_ID, $post_category );
	}

	if ( isset( $postarr['tags_input'] ) &amp;&amp; is_object_in_taxonomy( $post_type, 'post_tag' ) ) {
		wp_set_post_tags( $post_ID, $postarr['tags_input'] );
	}

	// Add default term for all associated custom taxonomies.
	if ( 'auto-draft' !== $post_status ) {
		foreach ( get_object_taxonomies( $post_type, 'object' ) as $taxonomy =&gt; $tax_object ) {

			if ( ! empty( $tax_object-&gt;default_term ) ) {

				// Filter out empty terms.
				if ( isset( $postarr['tax_input'][ $taxonomy ] ) &amp;&amp; is_array( $postarr['tax_input'][ $taxonomy ] ) ) {
					$postarr['tax_input'][ $taxonomy ] = array_filter( $postarr['tax_input'][ $taxonomy ] );
				}

				// Passed custom taxonomy list overwrites the existing list if not empty.
				$terms = wp_get_object_terms( $post_ID, $taxonomy, array( 'fields' =&gt; 'ids' ) );
				if ( ! empty( $terms ) &amp;&amp; empty( $postarr['tax_input'][ $taxonomy ] ) ) {
					$postarr['tax_input'][ $taxonomy ] = $terms;
				}

				if ( empty( $postarr['tax_input'][ $taxonomy ] ) ) {
					$default_term_id = get_option( 'default_term_' . $taxonomy );
					if ( ! empty( $default_term_id ) ) {
						$postarr['tax_input'][ $taxonomy ] = array( (int) $default_term_id );
					}
				}
			}
		}
	}

	// New-style support for all custom taxonomies.
	if ( ! empty( $postarr['tax_input'] ) ) {
		foreach ( $postarr['tax_input'] as $taxonomy =&gt; $tags ) {
			$taxonomy_obj = get_taxonomy( $taxonomy );

			if ( ! $taxonomy_obj ) {
				/* translators: %s: Taxonomy name. */
				_doing_it_wrong( __FUNCTION__, sprintf( __( 'Invalid taxonomy: %s.' ), $taxonomy ), '4.4.0' );
				continue;
			}

			// array = hierarchical, string = non-hierarchical.
			if ( is_array( $tags ) ) {
				$tags = array_filter( $tags );
			}

			if ( current_user_can( $taxonomy_obj-&gt;cap-&gt;assign_terms ) ) {
				wp_set_post_terms( $post_ID, $tags, $taxonomy );
			}
		}
	}

	if ( ! empty( $postarr['meta_input'] ) ) {
		foreach ( $postarr['meta_input'] as $field =&gt; $value ) {
			update_post_meta( $post_ID, $field, $value );
		}
	}

	$current_guid = get_post_field( 'guid', $post_ID );

	// Set GUID.
	if ( ! $update &amp;&amp; '' === $current_guid ) {
		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'guid' =&gt; get_permalink( $post_ID ) ), $where );
	}

	if ( 'attachment' === $postarr['post_type'] ) {
		if ( ! empty( $postarr['file'] ) ) {
			update_attached_file( $post_ID, $postarr['file'] );
		}

		if ( ! empty( $postarr['context'] ) ) {
			add_post_meta( $post_ID, '_wp_attachment_context', $postarr['context'], true );
		}
	}

	// Set or remove featured image.
	if ( isset( $postarr['_thumbnail_id'] ) ) {
		$thumbnail_support = current_theme_supports( 'post-thumbnails', $post_type ) &amp;&amp; post_type_supports( $post_type, 'thumbnail' ) || 'revision' === $post_type;

		if ( ! $thumbnail_support &amp;&amp; 'attachment' === $post_type &amp;&amp; $post_mime_type ) {
			if ( wp_attachment_is( 'audio', $post_ID ) ) {
				$thumbnail_support = post_type_supports( 'attachment:audio', 'thumbnail' ) || current_theme_supports( 'post-thumbnails', 'attachment:audio' );
			} elseif ( wp_attachment_is( 'video', $post_ID ) ) {
				$thumbnail_support = post_type_supports( 'attachment:video', 'thumbnail' ) || current_theme_supports( 'post-thumbnails', 'attachment:video' );
			}
		}

		if ( $thumbnail_support ) {
			$thumbnail_id = (int) $postarr['_thumbnail_id'];
			if ( -1 === $thumbnail_id ) {
				delete_post_thumbnail( $post_ID );
			} else {
				set_post_thumbnail( $post_ID, $thumbnail_id );
			}
		}
	}

	clean_post_cache( $post_ID );

	$post = get_post( $post_ID );

	if ( ! empty( $postarr['page_template'] ) ) {
		$post-&gt;page_template = $postarr['page_template'];
		$page_templates      = wp_get_theme()-&gt;get_page_templates( $post );

		if ( 'default' !== $postarr['page_template'] &amp;&amp; ! isset( $page_templates[ $postarr['page_template'] ] ) ) {
			if ( $wp_error ) {
				return new WP_Error( 'invalid_page_template', __( 'Invalid page template.' ) );
			}

			update_post_meta( $post_ID, '_wp_page_template', 'default' );
		} else {
			update_post_meta( $post_ID, '_wp_page_template', $postarr['page_template'] );
		}
	}

	if ( 'attachment' !== $postarr['post_type'] ) {
		wp_transition_post_status( $data['post_status'], $previous_status, $post );
	} else {
		if ( $update ) {
			/**
			 * Fires once an existing attachment has been updated.
			 *
			 * @since 2.0.0
			 *
			 * @param int $post_ID Attachment ID.
			 */
			do_action( 'edit_attachment', $post_ID );

			$post_after = get_post( $post_ID );

			/**
			 * Fires once an existing attachment has been updated.
			 *
			 * @since 4.4.0
			 *
			 * @param int     $post_ID      Post ID.
			 * @param WP_Post $post_after   Post object following the update.
			 * @param WP_Post $post_before  Post object before the update.
			 */
			do_action( 'attachment_updated', $post_ID, $post_after, $post_before );
		} else {

			/**
			 * Fires once an attachment has been added.
			 *
			 * @since 2.0.0
			 *
			 * @param int $post_ID Attachment ID.
			 */
			do_action( 'add_attachment', $post_ID );
		}

		return $post_ID;
	}

	if ( $update ) {
		/**
		 * Fires once an existing post has been updated.
		 *
		 * The dynamic portion of the hook name, `$post-&gt;post_type`, refers to
		 * the post type slug.
		 *
		 * Possible hook names include:
		 *
		 *  - `edit_post_post`
		 *  - `edit_post_page`
		 *
		 * @since 5.1.0
		 *
		 * @param int     $post_ID Post ID.
		 * @param WP_Post $post    Post object.
		 */
		do_action( "edit_post_{$post-&gt;post_type}", $post_ID, $post );

		/**
		 * Fires once an existing post has been updated.
		 *
		 * @since 1.2.0
		 *
		 * @param int     $post_ID Post ID.
		 * @param WP_Post $post    Post object.
		 */
		do_action( 'edit_post', $post_ID, $post );

		$post_after = get_post( $post_ID );

		/**
		 * Fires once an existing post has been updated.
		 *
		 * @since 3.0.0
		 *
		 * @param int     $post_ID      Post ID.
		 * @param WP_Post $post_after   Post object following the update.
		 * @param WP_Post $post_before  Post object before the update.
		 */
		do_action( 'post_updated', $post_ID, $post_after, $post_before );
	}

	/**
	 * Fires once a post has been saved.
	 *
	 * The dynamic portion of the hook name, `$post-&gt;post_type`, refers to
	 * the post type slug.
	 *
	 * Possible hook names include:
	 *
	 *  - `save_post_post`
	 *  - `save_post_page`
	 *
	 * @since 3.7.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( "save_post_{$post-&gt;post_type}", $post_ID, $post, $update );

	/**
	 * Fires once a post has been saved.
	 *
	 * @since 1.5.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( 'save_post', $post_ID, $post, $update );

	/**
	 * Fires once a post has been saved.
	 *
	 * @since 2.0.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( 'wp_insert_post', $post_ID, $post, $update );

	if ( $fire_after_hooks ) {
		wp_after_insert_post( $post, $update, $post_before );
	}

	return $post_ID;
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_resolve_post_date">wp_resolve_post_date()</a> </td> <td class="related-desc"> <p>Uses wp_checkdate to return a valid Gregorian-calendar value for post_date.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_after_insert_post">wp_after_insert_post()</a> </td> <td class="related-desc"> <p>Fires actions after a post, its terms and meta data has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/add_trashed_suffix_to_trashed_posts">add_trashed_suffix_to_trashed_posts</a> </td> <td class="related-desc"> <p>Filters whether or not to add a <code>__trashed</code> suffix to trashed posts that match the name of the updated post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/edit_post_post-post_type">edit_post_{$post-&gt;post_type}</a> </td> <td class="related-desc"> <p>Fires once an existing post has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_add_trashed_suffix_to_post_name_for_trashed_posts">wp_add_trashed_suffix_to_post_name_for_trashed_posts()</a> </td> <td class="related-desc"> <p>Adds a suffix if any trashed posts have a given slug.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_add_trashed_suffix_to_post_name_for_post">wp_add_trashed_suffix_to_post_name_for_post()</a> </td> <td class="related-desc"> <p>Adds a trashed suffix for a given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/attachment_updated">attachment_updated</a> </td> <td class="related-desc"> <p>Fires once an existing attachment has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="get_default_comment_status">get_default_comment_status()</a> </td> <td class="related-desc"> <p>Gets the default comment status for a post type.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/add_attachment">add_attachment</a> </td> <td class="related-desc"> <p>Fires once an attachment has been added.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/get_col_charset">wpdb::get_col_charset()</a> </td> <td class="related-desc"> <p>Retrieves the character set for the given column.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="wp_encode_emoji">wp_encode_emoji()</a> </td> <td class="related-desc"> <p>Converts emoji characters to their equivalent HTML entity.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_attachment_is">wp_attachment_is()</a> </td> <td class="related-desc"> <p>Verifies an attachment is of a given type.</p> </td> </tr> <tr> <td> <span>wp-includes/capabilities.php:</span> <a href="current_user_can">current_user_can()</a> </td> <td class="related-desc"> <p>Returns whether the current user has the specified capability.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="current_theme_supports">current_theme_supports()</a> </td> <td class="related-desc"> <p>Checks a theme’s support for a given feature.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="wp_get_theme">wp_get_theme()</a> </td> <td class="related-desc"> <p>Gets a <a href="../classes/wp_theme">WP_Theme</a> object for a theme.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="sanitize_trackback_urls">sanitize_trackback_urls()</a> </td> <td class="related-desc"> <p>Sanitizes space or carriage return separated URLs that are used to send trackbacks.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="wp_unslash">wp_unslash()</a> </td> <td class="related-desc"> <p>Removes slashes from a string or recursively removes slashes from strings within an array.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="get_gmt_from_date">get_gmt_from_date()</a> </td> <td class="related-desc"> <p>Given a date in the timezone of the site, returns that date in UTC.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="sanitize_title">sanitize_title()</a> </td> <td class="related-desc"> <p>Sanitizes a string into a slug, which can be used in URLs or HTML attributes.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-theme.php:</span> <a href="../classes/wp_theme/get_page_templates">WP_Theme::get_page_templates()</a> </td> <td class="related-desc"> <p>Returns the theme’s post templates for a given post type.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="_doing_it_wrong">_doing_it_wrong()</a> </td> <td class="related-desc"> <p>Mark something as being incorrectly called.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="wp_parse_args">wp_parse_args()</a> </td> <td class="related-desc"> <p>Merges user defined arguments into defaults array.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="current_time">current_time()</a> </td> <td class="related-desc"> <p>Retrieves the current time based on specified type.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="is_object_in_taxonomy">is_object_in_taxonomy()</a> </td> <td class="related-desc"> <p>Determines if the given object type is associated with the given taxonomy.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="wp_get_object_terms">wp_get_object_terms()</a> </td> <td class="related-desc"> <p>Retrieves the terms associated with the given object(s), in the supplied taxonomies.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="get_object_taxonomies">get_object_taxonomies()</a> </td> <td class="related-desc"> <p>Returns the names or objects of the taxonomies which are registered for the requested object or object type, such as a post object or post type name.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="get_taxonomy">get_taxonomy()</a> </td> <td class="related-desc"> <p>Retrieves the taxonomy object of $taxonomy.</p> </td> </tr> <tr> <td> <span>wp-includes/link-template.php:</span> <a href="get_permalink">get_permalink()</a> </td> <td class="related-desc"> <p>Retrieves the full permalink for the current post or post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="apply_filters">apply_filters()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="do_action">do_action()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook.</p> </td> </tr> <tr> <td> <span>wp-includes/option.php:</span> <a href="get_option">get_option()</a> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="get_current_user_id">get_current_user_id()</a> </td> <td class="related-desc"> <p>Gets the current user’s ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="clean_post_cache">clean_post_cache()</a> </td> <td class="related-desc"> <p>Will clean the post in the cache.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="delete_post_thumbnail">delete_post_thumbnail()</a> </td> <td class="related-desc"> <p>Removes the thumbnail (featured image) from the given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="set_post_thumbnail">set_post_thumbnail()</a> </td> <td class="related-desc"> <p>Sets the post thumbnail (featured image) for the given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_attachment_data">wp_insert_attachment_data</a> </td> <td class="related-desc"> <p>Filters attachment post data before it is updated in or added to the database.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/edit_attachment">edit_attachment</a> </td> <td class="related-desc"> <p>Fires once an existing attachment has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_unique_post_slug">wp_unique_post_slug()</a> </td> <td class="related-desc"> <p>Computes a unique slug for the post, when given the desired slug and some post details.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_set_post_categories">wp_set_post_categories()</a> </td> <td class="related-desc"> <p>Set categories for a post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_set_post_tags">wp_set_post_tags()</a> </td> <td class="related-desc"> <p>Set the tags for a post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_set_post_terms">wp_set_post_terms()</a> </td> <td class="related-desc"> <p>Set the terms for a post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_transition_post_status">wp_transition_post_status()</a> </td> <td class="related-desc"> <p>Fires actions related to the transitioning of a post’s status.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post_empty_content">wp_insert_post_empty_content</a> </td> <td class="related-desc"> <p>Filters whether the post should be considered “empty”.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post_parent">wp_insert_post_parent</a> </td> <td class="related-desc"> <p>Filters the post parent — used to check for and prevent hierarchy loops.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post_data">wp_insert_post_data</a> </td> <td class="related-desc"> <p>Filters slashed post data just before it is inserted into the database.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/pre_post_update">pre_post_update</a> </td> <td class="related-desc"> <p>Fires immediately before an existing post is updated in the database.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/edit_post">edit_post</a> </td> <td class="related-desc"> <p>Fires once an existing post has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/post_updated">post_updated</a> </td> <td class="related-desc"> <p>Fires once an existing post has been updated.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/save_post_post-post_type">save_post_{$post-&gt;post_type}</a> </td> <td class="related-desc"> <p>Fires once a post has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/save_post">save_post</a> </td> <td class="related-desc"> <p>Fires once a post has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../hooks/wp_insert_post">wp_insert_post</a> </td> <td class="related-desc"> <p>Fires once a post has been saved.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="sanitize_post">sanitize_post()</a> </td> <td class="related-desc"> <p>Sanitizes every post field.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="post_type_supports">post_type_supports()</a> </td> <td class="related-desc"> <p>Check a post type’s support for a given feature.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_meta">get_post_meta()</a> </td> <td class="related-desc"> <p>Retrieves a post meta field for the given post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="delete_post_meta">delete_post_meta()</a> </td> <td class="related-desc"> <p>Deletes a post meta field for the given post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="update_post_meta">update_post_meta()</a> </td> <td class="related-desc"> <p>Updates a post meta field based on the given post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="add_post_meta">add_post_meta()</a> </td> <td class="related-desc"> <p>Adds a meta field to the given post.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post">get_post()</a> </td> <td class="related-desc"> <p>Retrieves post data given a post ID or post object.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_field">get_post_field()</a> </td> <td class="related-desc"> <p>Retrieve data from a post field based on Post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_type_object">get_post_type_object()</a> </td> <td class="related-desc"> <p>Retrieves a post type object by name.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_stati">get_post_stati()</a> </td> <td class="related-desc"> <p>Get a list of post statuses.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="update_attached_file">update_attached_file()</a> </td> <td class="related-desc"> <p>Update attachment file path based on attachment ID.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/update">wpdb::update()</a> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/get_var">wpdb::get_var()</a> </td> <td class="related-desc"> <p>Retrieves one variable from the database.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/insert">wpdb::insert()</a> </td> <td class="related-desc"> <p>Inserts a row into the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/prepare">wpdb::prepare()</a> </td> <td class="related-desc"> <p>Prepares a SQL query for safe execution.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-error.php:</span> <a href="../classes/wp_error/__construct">WP_Error::__construct()</a> </td> <td class="related-desc"> <p>Initializes the error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-wp-theme-json-resolver.php:</span> <a href="../classes/wp_theme_json_resolver/get_user_data_from_wp_global_styles">WP_Theme_JSON_Resolver::get_user_data_from_wp_global_styles()</a> </td> <td class="related-desc"> <p>Returns the custom post type that contains the user’s origin config for the active theme or a void array if none are found.</p> </td> </tr> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-templates-controller.php:</span> <a href="../classes/wp_rest_templates_controller/update_item">WP_REST_Templates_Controller::update_item()</a> </td> <td class="related-desc"> <p>Updates a single template.</p> </td> </tr> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-templates-controller.php:</span> <a href="../classes/wp_rest_templates_controller/create_item">WP_REST_Templates_Controller::create_item()</a> </td> <td class="related-desc"> <p>Creates a single template.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="wp_create_user_request">wp_create_user_request()</a> </td> <td class="related-desc"> <p>Creates and logs a user request to perform a specific action.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-customize-manager.php:</span> <a href="../classes/wp_customize_manager/save_changeset_post">WP_Customize_Manager::save_changeset_post()</a> </td> <td class="related-desc"> <p>Saves the post for the loaded changeset.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="wp_update_custom_css_post">wp_update_custom_css_post()</a> </td> <td class="related-desc"> <p>Updates the <code>custom_css</code> post for a given theme.</p> </td> </tr> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-posts-controller.php:</span> <a href="../classes/wp_rest_posts_controller/create_item">WP_REST_Posts_Controller::create_item()</a> </td> <td class="related-desc"> <p>Creates a single post.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-customize-nav-menus.php:</span> <a href="../classes/wp_customize_nav_menus/insert_auto_draft_post">WP_Customize_Nav_Menus::insert_auto_draft_post()</a> </td> <td class="related-desc"> <p>Adds a new <code>auto-draft</code> post.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/post.php:</span> <a href="wp_write_post">wp_write_post()</a> </td> <td class="related-desc"> <p>Creates a new post from the “Write Post” form using <code>$_POST</code> information.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/post.php:</span> <a href="get_default_post_to_edit">get_default_post_to_edit()</a> </td> <td class="related-desc"> <p>Returns default post information to use when populating the “Write Post” form.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-embed.php:</span> <a href="../classes/wp_embed/shortcode">WP_Embed::shortcode()</a> </td> <td class="related-desc"> <p>The <a href="do_shortcode">do_shortcode()</a> callback function.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_insert_attachment">wp_insert_attachment()</a> </td> <td class="related-desc"> <p>Insert an attachment.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_update_post">wp_update_post()</a> </td> <td class="related-desc"> <p>Update a post with new post data.</p> </td> </tr> <tr> <td> <span>wp-includes/revision.php:</span> <a href="_wp_put_post_revision">_wp_put_post_revision()</a> </td> <td class="related-desc"> <p>Inserts post data into the posts table as a post revision.</p> </td> </tr> <tr> <td> <span>wp-includes/nav-menu.php:</span> <a href="wp_update_nav_menu_item">wp_update_nav_menu_item()</a> </td> <td class="related-desc"> <p>Saves the properties of a menu item or create a new one.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../classes/wp_xmlrpc_server/blogger_newpost">wp_xmlrpc_server::blogger_newPost()</a> </td> <td class="related-desc"> <p>Creates new post.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../classes/wp_xmlrpc_server/mw_newpost">wp_xmlrpc_server::mw_newPost()</a> </td> <td class="related-desc"> <p>Create a new post.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-xmlrpc-server.php:</span> <a href="../classes/wp_xmlrpc_server/_insert_post">wp_xmlrpc_server::_insert_post()</a> </td> <td class="related-desc"> <p>Helper method for wp_newPost() and wp_editPost(), containing shared logic.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.6.0/" alt="WordPress 5.6.0">5.6.0</a></td> <td><span class="since-description">Added the <code>$fire_after_hooks</code> parameter.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.4.0/" alt="WordPress 4.4.0">4.4.0</a></td> <td><span class="since-description">A 'meta_input' array can now be passed to <code>$postarr</code> to add post meta data.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.2.0/" alt="WordPress 4.2.0">4.2.0</a></td> <td><span class="since-description">Support was added for encoding emoji in the post title, content, and excerpt.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.6.0/" alt="WordPress 2.6.0">2.6.0</a></td> <td><span class="since-description">Added the <code>$wp_error</code> parameter to allow a <a href="../classes/wp_error">WP_Error</a> to be returned on failure.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.0.0/" alt="WordPress 1.0.0">1.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/wp_insert_post" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/wp_insert_post</a>
  </p>
</div>
