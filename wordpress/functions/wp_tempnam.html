<h1>wp_tempnam( string $filename = '', string $dir = '' )</h1>  <section> <p>Returns a filename of a temporary unique file.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>Please note that the calling function must unlink() this itself.</p> <p>The filename is based off the passed parameter or defaults to the current unix timestamp, while the directory can either be passed as well, or by leaving it blank, default to a writable temporary directory.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$filename</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Optional)</span> <span class="description"> Filename to base the Unique file off. </span> </p> <p class="default">Default value: ''</p> </dd> <dt>$dir</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Optional)</span> <span class="description"> Directory to store the file in. </span> </p> <p class="default">Default value: ''</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(string)</span> A writable filename.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/file.php/">wp-admin/includes/file.php</a> </p> <pre data-language="php">function wp_tempnam( $filename = '', $dir = '' ) {
	if ( empty( $dir ) ) {
		$dir = get_temp_dir();
	}

	if ( empty( $filename ) || in_array( $filename, array( '.', '/', '\\' ), true ) ) {
		$filename = uniqid();
	}

	// Use the basename of the given file without the extension as the name for the temporary directory.
	$temp_filename = basename( $filename );
	$temp_filename = preg_replace( '|\.[^.]*$|', '', $temp_filename );

	// If the folder is falsey, use its parent directory name instead.
	if ( ! $temp_filename ) {
		return wp_tempnam( dirname( $filename ), $dir );
	}

	// Suffix some random data to avoid filename conflicts.
	$temp_filename .= '-' . wp_generate_password( 6, false );
	$temp_filename .= '.tmp';
	$temp_filename  = $dir . wp_unique_filename( $dir, $temp_filename );

	$fp = @fopen( $temp_filename, 'x' );

	if ( ! $fp &amp;&amp; is_writable( $dir ) &amp;&amp; file_exists( $temp_filename ) ) {
		return wp_tempnam( $filename, $dir );
	}

	if ( $fp ) {
		fclose( $fp );
	}

	return $temp_filename;
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/file.php:</span> <a href="wp_tempnam">wp_tempnam()</a> </td> <td class="related-desc"> <p>Returns a filename of a temporary unique file.</p> </td> </tr> <tr> <td> <span>wp-includes/pluggable.php:</span> <a href="wp_generate_password">wp_generate_password()</a> </td> <td class="related-desc"> <p>Generates a random password drawn from the defined set of characters.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="get_temp_dir">get_temp_dir()</a> </td> <td class="related-desc"> <p>Determine a writable directory for temporary files.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="wp_unique_filename">wp_unique_filename()</a> </td> <td class="related-desc"> <p>Get a filename that is sanitized and unique for the given directory.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-wp-customize-manager.php:</span> <a href="../classes/wp_customize_manager/import_theme_starter_content">WP_Customize_Manager::import_theme_starter_content()</a> </td> <td class="related-desc"> <p>Imports theme starter content into the customized state.</p> </td> </tr> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-attachments-controller.php:</span> <a href="../classes/wp_rest_attachments_controller/upload_from_data">WP_REST_Attachments_Controller::upload_from_data()</a> </td> <td class="related-desc"> <p>Handles an upload via raw POST data.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-filesystem-ftpext.php:</span> <a href="../classes/wp_filesystem_ftpext/get_contents">WP_Filesystem_FTPext::get_contents()</a> </td> <td class="related-desc"> <p>Reads entire file into a string.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-filesystem-ftpext.php:</span> <a href="../classes/wp_filesystem_ftpext/put_contents">WP_Filesystem_FTPext::put_contents()</a> </td> <td class="related-desc"> <p>Writes a string to a file.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-filesystem-ftpsockets.php:</span> <a href="../classes/wp_filesystem_ftpsockets/get_contents">WP_Filesystem_ftpsockets::get_contents()</a> </td> <td class="related-desc"> <p>Reads entire file into a string.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-filesystem-ftpsockets.php:</span> <a href="../classes/wp_filesystem_ftpsockets/put_contents">WP_Filesystem_ftpsockets::put_contents()</a> </td> <td class="related-desc"> <p>Writes a string to a file.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/file.php:</span> <a href="wp_tempnam">wp_tempnam()</a> </td> <td class="related-desc"> <p>Returns a filename of a temporary unique file.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/file.php:</span> <a href="download_url">download_url()</a> </td> <td class="related-desc"> <p>Downloads a URL to a local temporary file using the WordPress HTTP API.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.6.0/" alt="WordPress 2.6.0">2.6.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/wp_tempnam" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/wp_tempnam</a>
  </p>
</div>
