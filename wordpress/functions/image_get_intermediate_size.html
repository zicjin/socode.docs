<h1>image_get_intermediate_size( int $post_id, string|int[] $size = 'thumbnail' )</h1>  <section> <p>Retrieves the image’s intermediate size (resized) path, width, and height.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>The $size parameter can be an array with the width and height respectively. If the size matches the ‘sizes’ metadata array for width and height, then it will be used. If there is no direct match, then the nearest image size larger than the specified size will be used. If nothing is found, then the function will break out and return false.</p> <p>The metadata ‘sizes’ is used for compatible sizes that can be used for the parameter $size value.</p> <p>The url path will be given, when the $size parameter is a string.</p> <p>If you are passing an array for the $size, you should consider using <a href="add_image_size">add_image_size()</a> so that a cropped version is generated. It’s much more efficient than having to find the closest-sized image and then having the browser scale down the image.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$post_id</dt> <dd> <p class="desc"> <span class="type">(<span class="int">int</span>)</span> <span class="required">(Required)</span> <span class="description">Attachment ID.</span> </p> </dd> <dt>$size</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>|<span class="int[]">int[]</span>)</span> <span class="required">(Optional)</span> <span class="description"> Image size. Accepts any registered image size name, or an array of width and height values in pixels (in that order). </span> </p> <p class="default">Default value: 'thumbnail'</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(array|false)</span> Array of file relative path, width, and height on success. Additionally includes absolute path and URL if registered size is passed to <code>$size</code> parameter. False on failure. </p>
<ul class="param-hash">
<li>
<b>'file'</b><br><i><span class="type">(string)</span></i> Path of image relative to uploads directory.</li> <li>
<b>'width'</b><br><i><span class="type">(int)</span></i> Width of image in pixels.</li> <li>
<b>'height'</b><br><i><span class="type">(int)</span></i> Height of image in pixels.</li> <li>
<b>'path'</b><br><i><span class="type">(string)</span></i> Absolute filesystem path of image.</li> <li>
<b>'url'</b><br><i><span class="type">(string)</span></i> URL of image.</li> </ul> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/media.php/">wp-includes/media.php</a> </p> <pre data-language="php">function image_get_intermediate_size( $post_id, $size = 'thumbnail' ) {
	$imagedata = wp_get_attachment_metadata( $post_id );

	if ( ! $size || ! is_array( $imagedata ) || empty( $imagedata['sizes'] ) ) {
		return false;
	}

	$data = array();

	// Find the best match when '$size' is an array.
	if ( is_array( $size ) ) {
		$candidates = array();

		if ( ! isset( $imagedata['file'] ) &amp;&amp; isset( $imagedata['sizes']['full'] ) ) {
			$imagedata['height'] = $imagedata['sizes']['full']['height'];
			$imagedata['width']  = $imagedata['sizes']['full']['width'];
		}

		foreach ( $imagedata['sizes'] as $_size =&gt; $data ) {
			// If there's an exact match to an existing image size, short circuit.
			if ( (int) $data['width'] === (int) $size[0] &amp;&amp; (int) $data['height'] === (int) $size[1] ) {
				$candidates[ $data['width'] * $data['height'] ] = $data;
				break;
			}

			// If it's not an exact match, consider larger sizes with the same aspect ratio.
			if ( $data['width'] &gt;= $size[0] &amp;&amp; $data['height'] &gt;= $size[1] ) {
				// If '0' is passed to either size, we test ratios against the original file.
				if ( 0 === $size[0] || 0 === $size[1] ) {
					$same_ratio = wp_image_matches_ratio( $data['width'], $data['height'], $imagedata['width'], $imagedata['height'] );
				} else {
					$same_ratio = wp_image_matches_ratio( $data['width'], $data['height'], $size[0], $size[1] );
				}

				if ( $same_ratio ) {
					$candidates[ $data['width'] * $data['height'] ] = $data;
				}
			}
		}

		if ( ! empty( $candidates ) ) {
			// Sort the array by size if we have more than one candidate.
			if ( 1 &lt; count( $candidates ) ) {
				ksort( $candidates );
			}

			$data = array_shift( $candidates );
			/*
			* When the size requested is smaller than the thumbnail dimensions, we
			* fall back to the thumbnail size to maintain backward compatibility with
			* pre 4.6 versions of WordPress.
			*/
		} elseif ( ! empty( $imagedata['sizes']['thumbnail'] ) &amp;&amp; $imagedata['sizes']['thumbnail']['width'] &gt;= $size[0] &amp;&amp; $imagedata['sizes']['thumbnail']['width'] &gt;= $size[1] ) {
			$data = $imagedata['sizes']['thumbnail'];
		} else {
			return false;
		}

		// Constrain the width and height attributes to the requested values.
		list( $data['width'], $data['height'] ) = image_constrain_size_for_editor( $data['width'], $data['height'], $size );

	} elseif ( ! empty( $imagedata['sizes'][ $size ] ) ) {
		$data = $imagedata['sizes'][ $size ];
	}

	// If we still don't have a match at this point, return false.
	if ( empty( $data ) ) {
		return false;
	}

	// Include the full filesystem path of the intermediate file.
	if ( empty( $data['path'] ) &amp;&amp; ! empty( $data['file'] ) &amp;&amp; ! empty( $imagedata['file'] ) ) {
		$file_url     = wp_get_attachment_url( $post_id );
		$data['path'] = path_join( dirname( $imagedata['file'] ), $data['file'] );
		$data['url']  = path_join( dirname( $file_url ), $data['file'] );
	}

	/**
	 * Filters the output of image_get_intermediate_size()
	 *
	 * @since 4.4.0
	 *
	 * @see image_get_intermediate_size()
	 *
	 * @param array        $data    Array of file relative path, width, and height on success. May also include
	 *                              file absolute path and URL.
	 * @param int          $post_id The ID of the image attachment.
	 * @param string|int[] $size    Requested image size. Can be any registered image size name, or
	 *                              an array of width and height values in pixels (in that order).
	 */
	return apply_filters( 'image_get_intermediate_size', $data, $post_id, $size );
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/media.php:</span> <a href="wp_image_matches_ratio">wp_image_matches_ratio()</a> </td> <td class="related-desc"> <p>Helper function to test if aspect ratios for two images match.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../hooks/image_get_intermediate_size">image_get_intermediate_size</a> </td> <td class="related-desc"> <p>Filters the output of <a href="image_get_intermediate_size">image_get_intermediate_size()</a></p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="path_join">path_join()</a> </td> <td class="related-desc"> <p>Join two filesystem paths together.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="apply_filters">apply_filters()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="image_constrain_size_for_editor">image_constrain_size_for_editor()</a> </td> <td class="related-desc"> <p>Scale down the default size of an image.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_get_attachment_metadata">wp_get_attachment_metadata()</a> </td> <td class="related-desc"> <p>Retrieves attachment metadata for attachment ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_get_attachment_url">wp_get_attachment_url()</a> </td> <td class="related-desc"> <p>Retrieve the URL for an attachment.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/image-edit.php:</span> <a href="wp_image_editor">wp_image_editor()</a> </td> <td class="related-desc"> <p>Loads the WP image-editing interface.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/image.php:</span> <a href="_load_image_to_edit_path">_load_image_to_edit_path()</a> </td> <td class="related-desc"> <p>Retrieve the path or URL of an attachment’s attached file.</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="image_downsize">image_downsize()</a> </td> <td class="related-desc"> <p>Scale an image to fit a particular size (such as ‘thumb’ or ‘medium’).</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.5.0/" alt="WordPress 2.5.0">2.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/image_get_intermediate_size" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/image_get_intermediate_size</a>
  </p>
</div>
