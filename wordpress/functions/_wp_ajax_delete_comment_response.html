<h1>_wp_ajax_delete_comment_response( int $comment_id, int $delta = -1 )</h1> <div class="callout callout-alert">
<p> This function’s access is marked private. This means it is not intended for use by plugin or theme developers, only in other core functions. It is listed here for completeness.</p> </div>  <section> <p>Sends back current comment total and new page links if they need to be updated.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>Contrary to normal success Ajax response ("1"), die with time() on success.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$comment_id</dt> <dd> <p class="desc"> <span class="type">(<span class="int">int</span>)</span> <span class="required">(Required)</span> </p> </dd> <dt>$delta</dt> <dd> <p class="desc"> <span class="type">(<span class="int">int</span>)</span> <span class="required">(Optional)</span> </p> <p class="default">Default value: -1</p> </dd> </dl> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/ajax-actions.php/">wp-admin/includes/ajax-actions.php</a> </p> <pre data-language="php">function _wp_ajax_delete_comment_response( $comment_id, $delta = -1 ) {
	$total    = isset( $_POST['_total'] ) ? (int) $_POST['_total'] : 0;
	$per_page = isset( $_POST['_per_page'] ) ? (int) $_POST['_per_page'] : 0;
	$page     = isset( $_POST['_page'] ) ? (int) $_POST['_page'] : 0;
	$url      = isset( $_POST['_url'] ) ? esc_url_raw( $_POST['_url'] ) : '';

	// JS didn't send us everything we need to know. Just die with success message.
	if ( ! $total || ! $per_page || ! $page || ! $url ) {
		$time           = time();
		$comment        = get_comment( $comment_id );
		$comment_status = '';
		$comment_link   = '';

		if ( $comment ) {
			$comment_status = $comment-&gt;comment_approved;
		}

		if ( 1 === (int) $comment_status ) {
			$comment_link = get_comment_link( $comment );
		}

		$counts = wp_count_comments();

		$x = new WP_Ajax_Response(
			array(
				'what'         =&gt; 'comment',
				// Here for completeness - not used.
				'id'           =&gt; $comment_id,
				'supplemental' =&gt; array(
					'status'               =&gt; $comment_status,
					'postId'               =&gt; $comment ? $comment-&gt;comment_post_ID : '',
					'time'                 =&gt; $time,
					'in_moderation'        =&gt; $counts-&gt;moderated,
					'i18n_comments_text'   =&gt; sprintf(
						/* translators: %s: Number of comments. */
						_n( '%s Comment', '%s Comments', $counts-&gt;approved ),
						number_format_i18n( $counts-&gt;approved )
					),
					'i18n_moderation_text' =&gt; sprintf(
						/* translators: %s: Number of comments. */
						_n( '%s Comment in moderation', '%s Comments in moderation', $counts-&gt;moderated ),
						number_format_i18n( $counts-&gt;moderated )
					),
					'comment_link'         =&gt; $comment_link,
				),
			)
		);
		$x-&gt;send();
	}

	$total += $delta;
	if ( $total &lt; 0 ) {
		$total = 0;
	}

	// Only do the expensive stuff on a page-break, and about 1 other time per page.
	if ( 0 == $total % $per_page || 1 == mt_rand( 1, $per_page ) ) {
		$post_id = 0;
		// What type of comment count are we looking for?
		$status = 'all';
		$parsed = parse_url( $url );

		if ( isset( $parsed['query'] ) ) {
			parse_str( $parsed['query'], $query_vars );

			if ( ! empty( $query_vars['comment_status'] ) ) {
				$status = $query_vars['comment_status'];
			}

			if ( ! empty( $query_vars['p'] ) ) {
				$post_id = (int) $query_vars['p'];
			}

			if ( ! empty( $query_vars['comment_type'] ) ) {
				$type = $query_vars['comment_type'];
			}
		}

		if ( empty( $type ) ) {
			// Only use the comment count if not filtering by a comment_type.
			$comment_count = wp_count_comments( $post_id );

			// We're looking for a known type of comment count.
			if ( isset( $comment_count-&gt;$status ) ) {
				$total = $comment_count-&gt;$status;
			}
		}
		// Else use the decremented value from above.
	}

	// The time since the last comment count.
	$time    = time();
	$comment = get_comment( $comment_id );
	$counts  = wp_count_comments();

	$x = new WP_Ajax_Response(
		array(
			'what'         =&gt; 'comment',
			'id'           =&gt; $comment_id,
			'supplemental' =&gt; array(
				'status'               =&gt; $comment ? $comment-&gt;comment_approved : '',
				'postId'               =&gt; $comment ? $comment-&gt;comment_post_ID : '',
				/* translators: %s: Number of comments. */
				'total_items_i18n'     =&gt; sprintf( _n( '%s item', '%s items', $total ), number_format_i18n( $total ) ),
				'total_pages'          =&gt; ceil( $total / $per_page ),
				'total_pages_i18n'     =&gt; number_format_i18n( ceil( $total / $per_page ) ),
				'total'                =&gt; $total,
				'time'                 =&gt; $time,
				'in_moderation'        =&gt; $counts-&gt;moderated,
				'i18n_moderation_text' =&gt; sprintf(
					/* translators: %s: Number of comments. */
					_n( '%s Comment in moderation', '%s Comments in moderation', $counts-&gt;moderated ),
					number_format_i18n( $counts-&gt;moderated )
				),
			),
		)
	);
	$x-&gt;send();
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="_n">_n()</a> </td> <td class="related-desc"> <p>Translates and retrieves the singular or plural form based on the supplied number.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="esc_url_raw">esc_url_raw()</a> </td> <td class="related-desc"> <p>Performs <a href="esc_url">esc_url()</a> for database or redirect usage.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="number_format_i18n">number_format_i18n()</a> </td> <td class="related-desc"> <p>Convert float number to format based on the locale.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-ajax-response.php:</span> <a href="../classes/wp_ajax_response/__construct">WP_Ajax_Response::__construct()</a> </td> <td class="related-desc"> <p>Constructor – Passes args to <a href="../classes/wp_ajax_response/add">WP_Ajax_Response::add()</a>.</p> </td> </tr> <tr> <td> <span>wp-includes/comment-template.php:</span> <a href="get_comment_link">get_comment_link()</a> </td> <td class="related-desc"> <p>Retrieves the link to a given comment.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="wp_count_comments">wp_count_comments()</a> </td> <td class="related-desc"> <p>Retrieves the total comment counts for the whole site or a single post.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="get_comment">get_comment()</a> </td> <td class="related-desc"> <p>Retrieves comment data given a comment ID or comment object.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/ajax-actions.php:</span> <a href="wp_ajax_delete_comment">wp_ajax_delete_comment()</a> </td> <td class="related-desc"> <p>Ajax handler for deleting a comment.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/ajax-actions.php:</span> <a href="wp_ajax_dim_comment">wp_ajax_dim_comment()</a> </td> <td class="related-desc"> <p>Ajax handler to dim a comment.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.7.0/" alt="WordPress 2.7.0">2.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/_wp_ajax_delete_comment_response" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/_wp_ajax_delete_comment_response</a>
  </p>
</div>
