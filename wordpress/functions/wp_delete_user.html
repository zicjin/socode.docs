<h1>wp_delete_user( int $id, int $reassign = null )</h1>  <section> <p>Remove user and optionally reassign posts and links to another user.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>If the $reassign parameter is not assigned to a User ID, then all posts will be deleted of that user. The action <a href="../hooks/delete_user">‘delete_user’</a> that is passed the User ID being deleted will be run after the posts are either reassigned or deleted. The user meta will also be deleted that are for that User ID.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$id</dt> <dd> <p class="desc"> <span class="type">(<span class="int">int</span>)</span> <span class="required">(Required)</span> <span class="description">User ID.</span> </p> </dd> <dt>$reassign</dt> <dd> <p class="desc"> <span class="type">(<span class="int">int</span>)</span> <span class="required">(Optional)</span> <span class="description"> Reassign posts and links to new User ID.</span> </p> <p class="default">Default value: null</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(bool)</span> True when finished.</p> </section>  <section> <h2 id="more-information">More Information</h2> <ul> <li>If you wish to use this function in a plugin then you must include the ./wp-admin/includes/user.php file in your plugin function, else it will throw a ‘call to undefined function’ error</li> <li>Uses global: (<tt>object</tt>) <a title="Class Reference/wpdb" href="https://codex.wordpress.org/Class_Reference/wpdb"><tt>$<a href="../classes/wpdb">wpdb</a></tt></a>
</li> <li>This is an Admin function.</li> <li>Uses: <a title="Function Reference/do action" href="do_action"><tt><a href="do_action">do_action()</a></tt></a> Calls <a title="Plugin API/Action Reference/deleted user" href="../hooks/deleted_user">‘deleted_user’</a> hook</li> </ul> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/user.php/">wp-admin/includes/user.php</a> </p> <pre data-language="php">function wp_delete_user( $id, $reassign = null ) {
	global $wpdb;

	if ( ! is_numeric( $id ) ) {
		return false;
	}

	$id   = (int) $id;
	$user = new WP_User( $id );

	if ( ! $user-&gt;exists() ) {
		return false;
	}

	// Normalize $reassign to null or a user ID. 'novalue' was an older default.
	if ( 'novalue' === $reassign ) {
		$reassign = null;
	} elseif ( null !== $reassign ) {
		$reassign = (int) $reassign;
	}

	/**
	 * Fires immediately before a user is deleted from the database.
	 *
	 * @since 2.0.0
	 * @since 5.5.0 Added the `$user` parameter.
	 *
	 * @param int      $id       ID of the user to delete.
	 * @param int|null $reassign ID of the user to reassign posts and links to.
	 *                           Default null, for no reassignment.
	 * @param WP_User  $user     WP_User object of the user to delete.
	 */
	do_action( 'delete_user', $id, $reassign, $user );

	if ( null === $reassign ) {
		$post_types_to_delete = array();
		foreach ( get_post_types( array(), 'objects' ) as $post_type ) {
			if ( $post_type-&gt;delete_with_user ) {
				$post_types_to_delete[] = $post_type-&gt;name;
			} elseif ( null === $post_type-&gt;delete_with_user &amp;&amp; post_type_supports( $post_type-&gt;name, 'author' ) ) {
				$post_types_to_delete[] = $post_type-&gt;name;
			}
		}

		/**
		 * Filters the list of post types to delete with a user.
		 *
		 * @since 3.4.0
		 *
		 * @param string[] $post_types_to_delete Array of post types to delete.
		 * @param int      $id                   User ID.
		 */
		$post_types_to_delete = apply_filters( 'post_types_to_delete_with_user', $post_types_to_delete, $id );
		$post_types_to_delete = implode( "', '", $post_types_to_delete );
		$post_ids             = $wpdb-&gt;get_col( $wpdb-&gt;prepare( "SELECT ID FROM $wpdb-&gt;posts WHERE post_author = %d AND post_type IN ('$post_types_to_delete')", $id ) );
		if ( $post_ids ) {
			foreach ( $post_ids as $post_id ) {
				wp_delete_post( $post_id );
			}
		}

		// Clean links.
		$link_ids = $wpdb-&gt;get_col( $wpdb-&gt;prepare( "SELECT link_id FROM $wpdb-&gt;links WHERE link_owner = %d", $id ) );

		if ( $link_ids ) {
			foreach ( $link_ids as $link_id ) {
				wp_delete_link( $link_id );
			}
		}
	} else {
		$post_ids = $wpdb-&gt;get_col( $wpdb-&gt;prepare( "SELECT ID FROM $wpdb-&gt;posts WHERE post_author = %d", $id ) );
		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'post_author' =&gt; $reassign ), array( 'post_author' =&gt; $id ) );
		if ( ! empty( $post_ids ) ) {
			foreach ( $post_ids as $post_id ) {
				clean_post_cache( $post_id );
			}
		}
		$link_ids = $wpdb-&gt;get_col( $wpdb-&gt;prepare( "SELECT link_id FROM $wpdb-&gt;links WHERE link_owner = %d", $id ) );
		$wpdb-&gt;update( $wpdb-&gt;links, array( 'link_owner' =&gt; $reassign ), array( 'link_owner' =&gt; $id ) );
		if ( ! empty( $link_ids ) ) {
			foreach ( $link_ids as $link_id ) {
				clean_bookmark_cache( $link_id );
			}
		}
	}

	// FINALLY, delete user.
	if ( is_multisite() ) {
		remove_user_from_blog( $id, get_current_blog_id() );
	} else {
		$meta = $wpdb-&gt;get_col( $wpdb-&gt;prepare( "SELECT umeta_id FROM $wpdb-&gt;usermeta WHERE user_id = %d", $id ) );
		foreach ( $meta as $mid ) {
			delete_metadata_by_mid( 'user', $mid );
		}

		$wpdb-&gt;delete( $wpdb-&gt;users, array( 'ID' =&gt; $id ) );
	}

	clean_user_cache( $user );

	/**
	 * Fires immediately after a user is deleted from the database.
	 *
	 * @since 2.9.0
	 * @since 5.5.0 Added the `$user` parameter.
	 *
	 * @param int      $id       ID of the deleted user.
	 * @param int|null $reassign ID of the user to reassign posts and links to.
	 *                           Default null, for no reassignment.
	 * @param WP_User  $user     WP_User object of the deleted user.
	 */
	do_action( 'deleted_user', $id, $reassign, $user );

	return true;
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/user.php:</span> <a href="../hooks/delete_user">delete_user</a> </td> <td class="related-desc"> <p>Fires immediately before a user is deleted from the database.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/user.php:</span> <a href="../hooks/post_types_to_delete_with_user">post_types_to_delete_with_user</a> </td> <td class="related-desc"> <p>Filters the list of post types to delete with a user.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/user.php:</span> <a href="../hooks/deleted_user">deleted_user</a> </td> <td class="related-desc"> <p>Fires immediately after a user is deleted from the database.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/bookmark.php:</span> <a href="wp_delete_link">wp_delete_link()</a> </td> <td class="related-desc"> <p>Deletes a specified link from the database.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-user.php:</span> <a href="../classes/wp_user/__construct">WP_User::__construct()</a> </td> <td class="related-desc"> <p>Constructor.</p> </td> </tr> <tr> <td> <span>wp-includes/load.php:</span> <a href="is_multisite">is_multisite()</a> </td> <td class="related-desc"> <p>If Multisite is enabled.</p> </td> </tr> <tr> <td> <span>wp-includes/load.php:</span> <a href="get_current_blog_id">get_current_blog_id()</a> </td> <td class="related-desc"> <p>Retrieve the current site ID.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="do_action">do_action()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="apply_filters">apply_filters()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="clean_user_cache">clean_user_cache()</a> </td> <td class="related-desc"> <p>Cleans all user caches.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="clean_post_cache">clean_post_cache()</a> </td> <td class="related-desc"> <p>Will clean the post in the cache.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="wp_delete_post">wp_delete_post()</a> </td> <td class="related-desc"> <p>Trash or delete a post or page.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="post_type_supports">post_type_supports()</a> </td> <td class="related-desc"> <p>Check a post type’s support for a given feature.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_post_types">get_post_types()</a> </td> <td class="related-desc"> <p>Get a list of all registered post type objects.</p> </td> </tr> <tr> <td> <span>wp-includes/bookmark.php:</span> <a href="clean_bookmark_cache">clean_bookmark_cache()</a> </td> <td class="related-desc"> <p>Deletes the bookmark cache.</p> </td> </tr> <tr> <td> <span>wp-includes/ms-functions.php:</span> <a href="remove_user_from_blog">remove_user_from_blog()</a> </td> <td class="related-desc"> <p>Removes a user from a blog.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/get_col">wpdb::get_col()</a> </td> <td class="related-desc"> <p>Retrieves one column from the database.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/update">wpdb::update()</a> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/delete">wpdb::delete()</a> </td> <td class="related-desc"> <p>Deletes a row in the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/prepare">wpdb::prepare()</a> </td> <td class="related-desc"> <p>Prepares a SQL query for safe execution.</p> </td> </tr> <tr> <td> <span>wp-includes/meta.php:</span> <a href="delete_metadata_by_mid">delete_metadata_by_mid()</a> </td> <td class="related-desc"> <p>Deletes metadata by meta ID.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-users-controller.php:</span> <a href="../classes/wp_rest_users_controller/delete_item">WP_REST_Users_Controller::delete_item()</a> </td> <td class="related-desc"> <p>Deletes a single user.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.0.0/" alt="WordPress 2.0.0">2.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/wp_delete_user" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/wp_delete_user</a>
  </p>
</div>
