<h1>_get_plugin_data_markup_translate( string $plugin_file, array $plugin_data, bool $markup = true, bool $translate = true )</h1> <div class="callout callout-alert">
<p> This function’s access is marked private. This means it is not intended for use by plugin or theme developers, only in other core functions. It is listed here for completeness. Use <a href="get_plugin_data">get_plugin_data()</a> instead.</p> </div>  <section> <p>Sanitizes plugin data, optionally adds markup, optionally translates.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <h3 id="see-also">See also</h3> <ul> <li><a href="get_plugin_data">get_plugin_data()</a></li> </ul> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$plugin_file</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Required)</span> <span class="description">Path to the main plugin file.</span> </p> </dd> <dt>$plugin_data</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">An array of plugin data. See <code>get_plugin_data()</code>.</span> </p> </dd> <dt>$markup</dt> <dd> <p class="desc"> <span class="type">(<span class="bool">bool</span>)</span> <span class="required">(Optional)</span> <span class="description"> If the returned data should have HTML markup applied. </span> </p> <p class="default">Default value: true</p> </dd> <dt>$translate</dt> <dd> <p class="desc"> <span class="type">(<span class="bool">bool</span>)</span> <span class="required">(Optional)</span> <span class="description"> If the returned data should be translated. </span> </p> <p class="default">Default value: true</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(array)</span> Plugin data. Values will be empty if not supplied by the plugin. See <a href="get_plugin_data">get_plugin_data()</a> for the list of possible values.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/plugin.php/">wp-admin/includes/plugin.php</a> </p> <pre data-language="php">function _get_plugin_data_markup_translate( $plugin_file, $plugin_data, $markup = true, $translate = true ) {

	// Sanitize the plugin filename to a WP_PLUGIN_DIR relative path.
	$plugin_file = plugin_basename( $plugin_file );

	// Translate fields.
	if ( $translate ) {
		$textdomain = $plugin_data['TextDomain'];
		if ( $textdomain ) {
			if ( ! is_textdomain_loaded( $textdomain ) ) {
				if ( $plugin_data['DomainPath'] ) {
					load_plugin_textdomain( $textdomain, false, dirname( $plugin_file ) . $plugin_data['DomainPath'] );
				} else {
					load_plugin_textdomain( $textdomain, false, dirname( $plugin_file ) );
				}
			}
		} elseif ( 'hello.php' === basename( $plugin_file ) ) {
			$textdomain = 'default';
		}
		if ( $textdomain ) {
			foreach ( array( 'Name', 'PluginURI', 'Description', 'Author', 'AuthorURI', 'Version' ) as $field ) {
				if ( ! empty( $plugin_data[ $field ] ) ) {
					// phpcs:ignore WordPress.WP.I18n.LowLevelTranslationFunction,WordPress.WP.I18n.NonSingularStringLiteralText,WordPress.WP.I18n.NonSingularStringLiteralDomain
					$plugin_data[ $field ] = translate( $plugin_data[ $field ], $textdomain );
				}
			}
		}
	}

	// Sanitize fields.
	$allowed_tags_in_links = array(
		'abbr'    =&gt; array( 'title' =&gt; true ),
		'acronym' =&gt; array( 'title' =&gt; true ),
		'code'    =&gt; true,
		'em'      =&gt; true,
		'strong'  =&gt; true,
	);

	$allowed_tags      = $allowed_tags_in_links;
	$allowed_tags['a'] = array(
		'href'  =&gt; true,
		'title' =&gt; true,
	);

	// Name is marked up inside &lt;a&gt; tags. Don't allow these.
	// Author is too, but some plugins have used &lt;a&gt; here (omitting Author URI).
	$plugin_data['Name']   = wp_kses( $plugin_data['Name'], $allowed_tags_in_links );
	$plugin_data['Author'] = wp_kses( $plugin_data['Author'], $allowed_tags );

	$plugin_data['Description'] = wp_kses( $plugin_data['Description'], $allowed_tags );
	$plugin_data['Version']     = wp_kses( $plugin_data['Version'], $allowed_tags );

	$plugin_data['PluginURI'] = esc_url( $plugin_data['PluginURI'] );
	$plugin_data['AuthorURI'] = esc_url( $plugin_data['AuthorURI'] );

	$plugin_data['Title']      = $plugin_data['Name'];
	$plugin_data['AuthorName'] = $plugin_data['Author'];

	// Apply markup.
	if ( $markup ) {
		if ( $plugin_data['PluginURI'] &amp;&amp; $plugin_data['Name'] ) {
			$plugin_data['Title'] = '&lt;a href="' . $plugin_data['PluginURI'] . '"&gt;' . $plugin_data['Name'] . '&lt;/a&gt;';
		}

		if ( $plugin_data['AuthorURI'] &amp;&amp; $plugin_data['Author'] ) {
			$plugin_data['Author'] = '&lt;a href="' . $plugin_data['AuthorURI'] . '"&gt;' . $plugin_data['Author'] . '&lt;/a&gt;';
		}

		$plugin_data['Description'] = wptexturize( $plugin_data['Description'] );

		if ( $plugin_data['Author'] ) {
			$plugin_data['Description'] .= sprintf(
				/* translators: %s: Plugin author. */
				' &lt;cite&gt;' . __( 'By %s.' ) . '&lt;/cite&gt;',
				$plugin_data['Author']
			);
		}
	}

	return $plugin_data;
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="is_textdomain_loaded">is_textdomain_loaded()</a> </td> <td class="related-desc"> <p>Whether there are translations for the text domain.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="load_plugin_textdomain">load_plugin_textdomain()</a> </td> <td class="related-desc"> <p>Loads a plugin’s translated strings.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="translate">translate()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="esc_url">esc_url()</a> </td> <td class="related-desc"> <p>Checks and cleans a URL.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="wptexturize">wptexturize()</a> </td> <td class="related-desc"> <p>Replaces common plain text characters with formatted entities.</p> </td> </tr> <tr> <td> <span>wp-includes/kses.php:</span> <a href="wp_kses">wp_kses()</a> </td> <td class="related-desc"> <p>Filters text content and strips out disallowed HTML.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="plugin_basename">plugin_basename()</a> </td> <td class="related-desc"> <p>Gets the basename of a plugin.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/rest-api/endpoints/class-wp-rest-plugins-controller.php:</span> <a href="../classes/wp_rest_plugins_controller/prepare_item_for_response">WP_REST_Plugins_Controller::prepare_item_for_response()</a> </td> <td class="related-desc"> <p>Prepares the plugin for the REST response.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-plugins-list-table.php:</span> <a href="../classes/wp_plugins_list_table/prepare_items">WP_Plugins_List_Table::prepare_items()</a> </td> <td class="related-desc"> </td> </tr> <tr> <td> <span>wp-admin/includes/plugin.php:</span> <a href="get_plugin_data">get_plugin_data()</a> </td> <td class="related-desc"> <p>Parses the plugin contents to retrieve plugin’s metadata.</p> </td> </tr> <tr> <td> <span>wp-admin/update-core.php:</span> <a href="list_plugin_updates">list_plugin_updates()</a> </td> <td class="related-desc"> <p>Display the upgrade plugins form.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.7.0/" alt="WordPress 2.7.0">2.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/_get_plugin_data_markup_translate" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/_get_plugin_data_markup_translate</a>
  </p>
</div>
