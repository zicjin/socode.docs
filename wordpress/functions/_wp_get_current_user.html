<h1>_wp_get_current_user()</h1> <div class="callout callout-alert">
<p> This function’s access is marked private. This means it is not intended for use by plugin or theme developers, only in other core functions. It is listed here for completeness. Use <a href="wp_get_current_user">wp_get_current_user()</a> instead.</p> </div>  <section> <p>Retrieves the current user object.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>Will set the current user, if the current user is not set. The current user will be set to the logged-in person. If no user is logged-in, then it will set the current user to 0, which is invalid and won’t have any permissions.</p> <p>This function is used by the pluggable functions <a href="wp_get_current_user">wp_get_current_user()</a> and <a href="get_currentuserinfo">get_currentuserinfo()</a>, the latter of which is deprecated but used for backward compatibility.</p> <h3 id="see-also">See also</h3> <ul> <li><a href="wp_get_current_user">wp_get_current_user()</a></li> </ul> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(<a href="../classes/wp_user">WP_User</a>)</span> Current <a href="../classes/wp_user">WP_User</a> instance.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/user.php/">wp-includes/user.php</a> </p> <pre data-language="php">function _wp_get_current_user() {
	global $current_user;

	if ( ! empty( $current_user ) ) {
		if ( $current_user instanceof WP_User ) {
			return $current_user;
		}

		// Upgrade stdClass to WP_User.
		if ( is_object( $current_user ) &amp;&amp; isset( $current_user-&gt;ID ) ) {
			$cur_id       = $current_user-&gt;ID;
			$current_user = null;
			wp_set_current_user( $cur_id );
			return $current_user;
		}

		// $current_user has a junk value. Force to WP_User with ID 0.
		$current_user = null;
		wp_set_current_user( 0 );
		return $current_user;
	}

	if ( defined( 'XMLRPC_REQUEST' ) &amp;&amp; XMLRPC_REQUEST ) {
		wp_set_current_user( 0 );
		return $current_user;
	}

	/**
	 * Filters the current user.
	 *
	 * The default filters use this to determine the current user from the
	 * request's cookies, if available.
	 *
	 * Returning a value of false will effectively short-circuit setting
	 * the current user.
	 *
	 * @since 3.9.0
	 *
	 * @param int|false $user_id User ID if one has been determined, false otherwise.
	 */
	$user_id = apply_filters( 'determine_current_user', false );
	if ( ! $user_id ) {
		wp_set_current_user( 0 );
		return $current_user;
	}

	wp_set_current_user( $user_id );

	return $current_user;
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/pluggable.php:</span> <a href="wp_set_current_user">wp_set_current_user()</a> </td> <td class="related-desc"> <p>Changes the current user by ID or name.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="../hooks/determine_current_user">determine_current_user</a> </td> <td class="related-desc"> <p>Filters the current user.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="apply_filters">apply_filters()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/pluggable-deprecated.php:</span> <a href="get_currentuserinfo">get_currentuserinfo()</a> </td> <td class="related-desc"> <p>Populate global variables with information about the currently logged in user.</p> </td> </tr> <tr> <td> <span>wp-includes/pluggable.php:</span> <a href="wp_get_current_user">wp_get_current_user()</a> </td> <td class="related-desc"> <p>Retrieve the current user object.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.5.0/" alt="WordPress 4.5.0">4.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/_wp_get_current_user" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/_wp_get_current_user</a>
  </p>
</div>
