<h1>esc_sql( string|array $data )</h1>  <section> <p>Escapes data for use in a MySQL query.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>Usually you should prepare queries using <a href="../classes/wpdb/prepare">wpdb::prepare()</a>. Sometimes, spot-escaping is required or useful. One example is preparing an array for use in an IN clause.</p> <p>NOTE: Since 4.8.3, ‘%’ characters will be replaced with a placeholder string, this prevents certain SQLi attacks from taking place. This change in behaviour may cause issues for code that expects the return value of <a href="esc_sql">esc_sql()</a> to be useable for other purposes.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$data</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>|<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">Unescaped data</span> </p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(string|array)</span> Escaped data</p> </section>  <section> <h2 id="more-information">More Information</h2> <ul> <li>Be careful in using this function correctly. <strong>It will only escape values to be used in strings in the query</strong>. That is, it only provides escaping for values that will be within quotes in the SQL (as in <code>field = '{$escaped_value}'</code>). If your value is not going to be within quotes, your code will still be vulnerable to SQL injection. For example, this is vulnerable, because the escaped value is not surrounded by quotes in the SQL query: <code>ORDER BY {$escaped_value}</code>. As such, <strong>this function does not escape unquoted numeric values, field names, or SQL keywords</strong>.</li> <li>
<a href="../classes/wpdb/prepare"><code>$wpdb-&gt;prepare()</code></a> is generally preferred as it corrects some common formatting errors.</li> <li>This function was formerly just an alias for <a href="../classes/wpdb/escape"><code>$wpdb-&gt;escape()</code></a>, but that function has now been deprecated.</li> </ul> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/formatting.php/">wp-includes/formatting.php</a> </p> <pre data-language="php">function esc_sql( $data ) {
	global $wpdb;
	return $wpdb-&gt;_escape( $data );
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../classes/wpdb/_escape">wpdb::_escape()</a> </td> <td class="related-desc"> <p>Escapes data. Works on arrays.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-wp-user-query.php:</span> <a href="../classes/wp_user_query/parse_orderby">WP_User_Query::parse_orderby()</a> </td> <td class="related-desc"> <p>Parses and sanitizes ‘orderby’ keys passed to the user query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-comment-query.php:</span> <a href="../classes/wp_comment_query/parse_orderby">WP_Comment_Query::parse_orderby()</a> </td> <td class="related-desc"> <p>Parse and sanitize ‘orderby’ keys passed to the comment query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-date-query.php:</span> <a href="../classes/wp_date_query/get_sql_for_clause">WP_Date_Query::get_sql_for_clause()</a> </td> <td class="related-desc"> <p>Turns a first-order date query into SQL for a WHERE clause.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../classes/wp_query/get_posts">WP_Query::get_posts()</a> </td> <td class="related-desc"> <p>Retrieves an array of posts based on query variables.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="_pad_term_counts">_pad_term_counts()</a> </td> <td class="related-desc"> <p>Adds count of children to parent count.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="_update_post_term_count">_update_post_term_count()</a> </td> <td class="related-desc"> <p>Updates term count based on object types of the current taxonomy.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-date-query.php:</span> <a href="../classes/wp_date_query/__construct">WP_Date_Query::__construct()</a> </td> <td class="related-desc"> <p>Constructor.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_page_by_path">get_page_by_path()</a> </td> <td class="related-desc"> <p>Retrieves a page given its path.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="get_page_by_title">get_page_by_title()</a> </td> <td class="related-desc"> <p>Retrieve a page given its title.</p> </td> </tr> <tr> <td> <span>wp-includes/canonical.php:</span> <a href="redirect_guess_404_permalink">redirect_guess_404_permalink()</a> </td> <td class="related-desc"> <p>Attempts to guess the correct URL for a 404 request based on query vars.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.8.0/" alt="WordPress 2.8.0">2.8.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/esc_sql" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/esc_sql</a>
  </p>
</div>
