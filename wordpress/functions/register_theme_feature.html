<h1>register_theme_feature( string $feature, array $args = array() )</h1>  <section> <p>Registers a theme feature for use in <a href="add_theme_support">add_theme_support()</a>.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>This does not indicate that the active theme supports the feature, it only describes the feature’s supported options.</p> <h3 id="see-also">See also</h3> <ul> <li><a href="add_theme_support">add_theme_support()</a></li> </ul> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$feature</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Required)</span> <span class="description">The name uniquely identifying the feature. See <a href="add_theme_support">add_theme_support()</a> for the list of possible values.</span> </p> </dd> <dt>$args</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Optional)</span> <span class="description">Data used to describe the theme. <ul class="param-hash">
<li>
<b>'type'</b><br><i><span class="type">(string)</span></i> The type of data associated with this feature. Valid values are 'string', 'boolean', 'integer', 'number', 'array', and 'object'. Defaults to 'boolean'.</li> <li>
<b>'variadic'</b><br><i><span class="type">(bool)</span></i> Does this feature utilize the variadic support of <a href="add_theme_support">add_theme_support()</a>, or are all arguments specified as the second parameter. Must be used with the "array" type.</li> <li>
<b>'description'</b><br><i><span class="type">(string)</span></i> A short description of the feature. Included in the Themes REST API schema. Intended for developers.</li> <li>
<b>'show_in_rest'</b><br><i><span class="type">(bool|array)</span></i> Whether this feature should be included in the Themes REST API endpoint. Defaults to not being included. When registering an 'array' or 'object' type, this argument must be an array with the 'schema' key.<ul class="param-hash"> <li>
<b>'schema'</b><br><i><span class="type">(array)</span></i> Specifies the JSON Schema definition describing the feature. If any objects in the schema do not include the 'additionalProperties' keyword, it is set to false.</li> <li>
<b>'name'</b><br><i><span class="type">(string)</span></i> An alternate name to be used as the property name in the REST API.</li> <li>
<b>'prepare_callback'</b><br><i><span class="type">(callable)</span></i> A function used to format the theme support in the REST API. Receives the raw theme support value. </li>
</ul> </li> </ul> </span> </p> <p class="default">Default value: array()</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(true|<a href="../classes/wp_error">WP_Error</a>)</span> True if the theme feature was successfully registered, a <a href="../classes/wp_error">WP_Error</a> object if not.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/theme.php/">wp-includes/theme.php</a> </p> <pre data-language="php">function register_theme_feature( $feature, $args = array() ) {
	global $_wp_registered_theme_features;

	if ( ! is_array( $_wp_registered_theme_features ) ) {
		$_wp_registered_theme_features = array();
	}

	$defaults = array(
		'type'         =&gt; 'boolean',
		'variadic'     =&gt; false,
		'description'  =&gt; '',
		'show_in_rest' =&gt; false,
	);

	$args = wp_parse_args( $args, $defaults );

	if ( true === $args['show_in_rest'] ) {
		$args['show_in_rest'] = array();
	}

	if ( is_array( $args['show_in_rest'] ) ) {
		$args['show_in_rest'] = wp_parse_args(
			$args['show_in_rest'],
			array(
				'schema'           =&gt; array(),
				'name'             =&gt; $feature,
				'prepare_callback' =&gt; null,
			)
		);
	}

	if ( ! in_array( $args['type'], array( 'string', 'boolean', 'integer', 'number', 'array', 'object' ), true ) ) {
		return new WP_Error(
			'invalid_type',
			__( 'The feature "type" is not valid JSON Schema type.' )
		);
	}

	if ( true === $args['variadic'] &amp;&amp; 'array' !== $args['type'] ) {
		return new WP_Error(
			'variadic_must_be_array',
			__( 'When registering a "variadic" theme feature, the "type" must be an "array".' )
		);
	}

	if ( false !== $args['show_in_rest'] &amp;&amp; in_array( $args['type'], array( 'array', 'object' ), true ) ) {
		if ( ! is_array( $args['show_in_rest'] ) || empty( $args['show_in_rest']['schema'] ) ) {
			return new WP_Error(
				'missing_schema',
				__( 'When registering an "array" or "object" feature to show in the REST API, the feature\'s schema must also be defined.' )
			);
		}

		if ( 'array' === $args['type'] &amp;&amp; ! isset( $args['show_in_rest']['schema']['items'] ) ) {
			return new WP_Error(
				'missing_schema_items',
				__( 'When registering an "array" feature, the feature\'s schema must include the "items" keyword.' )
			);
		}

		if ( 'object' === $args['type'] &amp;&amp; ! isset( $args['show_in_rest']['schema']['properties'] ) ) {
			return new WP_Error(
				'missing_schema_properties',
				__( 'When registering an "object" feature, the feature\'s schema must include the "properties" keyword.' )
			);
		}
	}

	if ( is_array( $args['show_in_rest'] ) ) {
		if ( isset( $args['show_in_rest']['prepare_callback'] )
			&amp;&amp; ! is_callable( $args['show_in_rest']['prepare_callback'] )
		) {
			return new WP_Error(
				'invalid_rest_prepare_callback',
				sprintf(
					/* translators: %s: prepare_callback */
					__( 'The "%s" must be a callable function.' ),
					'prepare_callback'
				)
			);
		}

		$args['show_in_rest']['schema'] = wp_parse_args(
			$args['show_in_rest']['schema'],
			array(
				'description' =&gt; $args['description'],
				'type'        =&gt; $args['type'],
				'default'     =&gt; false,
			)
		);

		if ( is_bool( $args['show_in_rest']['schema']['default'] )
			&amp;&amp; ! in_array( 'boolean', (array) $args['show_in_rest']['schema']['type'], true )
		) {
			// Automatically include the "boolean" type when the default value is a boolean.
			$args['show_in_rest']['schema']['type'] = (array) $args['show_in_rest']['schema']['type'];
			array_unshift( $args['show_in_rest']['schema']['type'], 'boolean' );
		}

		$args['show_in_rest']['schema'] = rest_default_additional_properties_to_false( $args['show_in_rest']['schema'] );
	}

	$_wp_registered_theme_features[ $feature ] = $args;

	return true;
}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/rest-api.php:</span> <a href="rest_default_additional_properties_to_false">rest_default_additional_properties_to_false()</a> </td> <td class="related-desc"> <p>Sets the “additionalProperties” to false by default for all object definitions in the schema.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="wp_parse_args">wp_parse_args()</a> </td> <td class="related-desc"> <p>Merges user defined arguments into defaults array.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-error.php:</span> <a href="../classes/wp_error/__construct">WP_Error::__construct()</a> </td> <td class="related-desc"> <p>Initializes the error.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/theme.php:</span> <a href="create_initial_theme_features">create_initial_theme_features()</a> </td> <td class="related-desc"> <p>Creates the initial theme features when the ‘setup_theme’ action is fired.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.5.0/" alt="WordPress 5.5.0">5.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/functions/register_theme_feature" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/functions/register_theme_feature</a>
  </p>
</div>
