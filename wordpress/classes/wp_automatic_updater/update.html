<h1>WP_Automatic_Updater::update( string $type, object $item )</h1>  <section> <p>Updates an item, if appropriate.</p> </section> <div class="content-toc">  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$type</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Required)</span> <span class="description">The type of update being checked: 'core', 'theme', 'plugin', 'translation'.</span> </p> </dd> <dt>$item</dt> <dd> <p class="desc"> <span class="type">(<span class="object">object</span>)</span> <span class="required">(Required)</span> <span class="description">The update offer.</span> </p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(null|<a href="../wp_error">WP_Error</a>)</span> </p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-wp-automatic-updater.php/">wp-admin/includes/class-wp-automatic-updater.php</a> </p> <pre data-language="php">public function update( $type, $item ) {
		$skin = new Automatic_Upgrader_Skin;

		switch ( $type ) {
			case 'core':
				// The Core upgrader doesn't use the Upgrader's skin during the actual main part of the upgrade, instead, firing a filter.
				add_filter( 'update_feedback', array( $skin, 'feedback' ) );
				$upgrader = new Core_Upgrader( $skin );
				$context  = ABSPATH;
				break;
			case 'plugin':
				$upgrader = new Plugin_Upgrader( $skin );
				$context  = WP_PLUGIN_DIR; // We don't support custom Plugin directories, or updates for WPMU_PLUGIN_DIR.
				break;
			case 'theme':
				$upgrader = new Theme_Upgrader( $skin );
				$context  = get_theme_root( $item-&gt;theme );
				break;
			case 'translation':
				$upgrader = new Language_Pack_Upgrader( $skin );
				$context  = WP_CONTENT_DIR; // WP_LANG_DIR;
				break;
		}

		// Determine whether we can and should perform this update.
		if ( ! $this-&gt;should_update( $type, $item, $context ) ) {
			return false;
		}

		/**
		 * Fires immediately prior to an auto-update.
		 *
		 * @since 4.4.0
		 *
		 * @param string $type    The type of update being checked: 'core', 'theme', 'plugin', or 'translation'.
		 * @param object $item    The update offer.
		 * @param string $context The filesystem context (a path) against which filesystem access and status
		 *                        should be checked.
		 */
		do_action( 'pre_auto_update', $type, $item, $context );

		$upgrader_item = $item;
		switch ( $type ) {
			case 'core':
				/* translators: %s: WordPress version. */
				$skin-&gt;feedback( __( 'Updating to WordPress %s' ), $item-&gt;version );
				/* translators: %s: WordPress version. */
				$item_name = sprintf( __( 'WordPress %s' ), $item-&gt;version );
				break;
			case 'theme':
				$upgrader_item = $item-&gt;theme;
				$theme         = wp_get_theme( $upgrader_item );
				$item_name     = $theme-&gt;Get( 'Name' );
				// Add the current version so that it can be reported in the notification email.
				$item-&gt;current_version = $theme-&gt;get( 'Version' );
				if ( empty( $item-&gt;current_version ) ) {
					$item-&gt;current_version = false;
				}
				/* translators: %s: Theme name. */
				$skin-&gt;feedback( __( 'Updating theme: %s' ), $item_name );
				break;
			case 'plugin':
				$upgrader_item = $item-&gt;plugin;
				$plugin_data   = get_plugin_data( $context . '/' . $upgrader_item );
				$item_name     = $plugin_data['Name'];
				// Add the current version so that it can be reported in the notification email.
				$item-&gt;current_version = $plugin_data['Version'];
				if ( empty( $item-&gt;current_version ) ) {
					$item-&gt;current_version = false;
				}
				/* translators: %s: Plugin name. */
				$skin-&gt;feedback( __( 'Updating plugin: %s' ), $item_name );
				break;
			case 'translation':
				$language_item_name = $upgrader-&gt;get_name_for_update( $item );
				/* translators: %s: Project name (plugin, theme, or WordPress). */
				$item_name = sprintf( __( 'Translations for %s' ), $language_item_name );
				/* translators: 1: Project name (plugin, theme, or WordPress), 2: Language. */
				$skin-&gt;feedback( sprintf( __( 'Updating translations for %1$s (%2$s)&amp;#8230;' ), $language_item_name, $item-&gt;language ) );
				break;
		}

		$allow_relaxed_file_ownership = false;
		if ( 'core' === $type &amp;&amp; isset( $item-&gt;new_files ) &amp;&amp; ! $item-&gt;new_files ) {
			$allow_relaxed_file_ownership = true;
		}

		// Boom, this site's about to get a whole new splash of paint!
		$upgrade_result = $upgrader-&gt;upgrade(
			$upgrader_item,
			array(
				'clear_update_cache'           =&gt; false,
				// Always use partial builds if possible for core updates.
				'pre_check_md5'                =&gt; false,
				// Only available for core updates.
				'attempt_rollback'             =&gt; true,
				// Allow relaxed file ownership in some scenarios.
				'allow_relaxed_file_ownership' =&gt; $allow_relaxed_file_ownership,
			)
		);

		// If the filesystem is unavailable, false is returned.
		if ( false === $upgrade_result ) {
			$upgrade_result = new WP_Error( 'fs_unavailable', __( 'Could not access filesystem.' ) );
		}

		if ( 'core' === $type ) {
			if ( is_wp_error( $upgrade_result )
				&amp;&amp; ( 'up_to_date' === $upgrade_result-&gt;get_error_code()
					|| 'locked' === $upgrade_result-&gt;get_error_code() )
			) {
				// These aren't actual errors, treat it as a skipped-update instead
				// to avoid triggering the post-core update failure routines.
				return false;
			}

			// Core doesn't output this, so let's append it, so we don't get confused.
			if ( is_wp_error( $upgrade_result ) ) {
				$upgrade_result-&gt;add( 'installation_failed', __( 'Installation failed.' ) );
				$skin-&gt;error( $upgrade_result );
			} else {
				$skin-&gt;feedback( __( 'WordPress updated successfully.' ) );
			}
		}

		$this-&gt;update_results[ $type ][] = (object) array(
			'item'     =&gt; $item,
			'result'   =&gt; $upgrade_result,
			'name'     =&gt; $item_name,
			'messages' =&gt; $skin-&gt;get_upgrade_messages(),
		);

		return $upgrade_result;
	}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/class-wp-automatic-updater.php:</span> <a href="../../hooks/pre_auto_update">pre_auto_update</a> </td> <td class="related-desc"> <p>Fires immediately prior to an auto-update.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-automatic-updater.php:</span> <a href="should_update">WP_Automatic_Updater::should_update()</a> </td> <td class="related-desc"> <p>Tests to see if we can and should update a specific item.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/plugin.php:</span> <a href="../../functions/get_plugin_data">get_plugin_data()</a> </td> <td class="related-desc"> <p>Parses the plugin contents to retrieve pluginâ€™s metadata.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="../../functions/get_theme_root">get_theme_root()</a> </td> <td class="related-desc"> <p>Retrieves path to themes directory.</p> </td> </tr> <tr> <td> <span>wp-includes/theme.php:</span> <a href="../../functions/wp_get_theme">wp_get_theme()</a> </td> <td class="related-desc"> <p>Gets a <a href="../wp_theme">WP_Theme</a> object for a theme.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="../../functions/__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/add_filter">add_filter()</a> </td> <td class="related-desc"> <p>Adds a callback function to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/do_action">do_action()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook.</p> </td> </tr> <tr> <td> <span>wp-includes/load.php:</span> <a href="../../functions/is_wp_error">is_wp_error()</a> </td> <td class="related-desc"> <p>Checks whether the given variable is a WordPress Error.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-error.php:</span> <a href="../wp_error/__construct">WP_Error::__construct()</a> </td> <td class="related-desc"> <p>Initializes the error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/class-wp-automatic-updater.php:</span> <a href="run">WP_Automatic_Updater::run()</a> </td> <td class="related-desc"> <p>Kicks off the background update process, looping through all pending updates.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/3.7.0/" alt="WordPress 3.7.0">3.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/classes/wp_automatic_updater/update" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/classes/wp_automatic_updater/update</a>
  </p>
</div>
