<h1>WP_Site_Health::get_test_http_requests()</h1>  <section> <p>Test if HTTP requests are blocked.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>Itâ€™s possible to block all outgoing communication (with the possibility of allowing certain hosts) via the HTTP API. This may create problems for users as many features are running as services these days.</p> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(array)</span> The test results.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-wp-site-health.php/">wp-admin/includes/class-wp-site-health.php</a> </p> <pre data-language="php">public function get_test_http_requests() {
		$result = array(
			'label'       =&gt; __( 'HTTP requests seem to be working as expected' ),
			'status'      =&gt; 'good',
			'badge'       =&gt; array(
				'label' =&gt; __( 'Performance' ),
				'color' =&gt; 'blue',
			),
			'description' =&gt; sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				__( 'It is possible for site maintainers to block all, or some, communication to other sites and services. If set up incorrectly, this may prevent plugins and themes from working as intended.' )
			),
			'actions'     =&gt; '',
			'test'        =&gt; 'http_requests',
		);

		$blocked = false;
		$hosts   = array();

		if ( defined( 'WP_HTTP_BLOCK_EXTERNAL' ) &amp;&amp; WP_HTTP_BLOCK_EXTERNAL ) {
			$blocked = true;
		}

		if ( defined( 'WP_ACCESSIBLE_HOSTS' ) ) {
			$hosts = explode( ',', WP_ACCESSIBLE_HOSTS );
		}

		if ( $blocked &amp;&amp; 0 === count( $hosts ) ) {
			$result['status'] = 'critical';

			$result['label'] = __( 'HTTP requests are blocked' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: Name of the constant used. */
					__( 'HTTP requests have been blocked by the %s constant, with no allowed hosts.' ),
					'&lt;code&gt;WP_HTTP_BLOCK_EXTERNAL&lt;/code&gt;'
				)
			);
		}

		if ( $blocked &amp;&amp; 0 &lt; count( $hosts ) ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'HTTP requests are partially blocked' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: Name of the constant used. 2: List of allowed hostnames. */
					__( 'HTTP requests have been blocked by the %1$s constant, with some allowed hosts: %2$s.' ),
					'&lt;code&gt;WP_HTTP_BLOCK_EXTERNAL&lt;/code&gt;',
					implode( ',', $hosts )
				)
			);
		}

		return $result;
	}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="../../functions/__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.2.0/" alt="WordPress 5.2.0">5.2.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/classes/wp_site_health/get_test_http_requests" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/classes/wp_site_health/get_test_http_requests</a>
  </p>
</div>
