<h1>WP_Community_Events::trim_events( array $events )</h1>  <section> <p>Prepares the event list for presentation.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>Discards expired events, and makes WordCamps "sticky." Attendees need more advanced notice about WordCamps than they do for meetups, so camps should appear in the list sooner. If a WordCamp is coming up, the API will "stick" it in the response, even if it wouldn’t otherwise appear. When that happens, the event will be at the end of the list, and will need to be moved into a higher position, so that it doesn’t get trimmed off.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$events</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">The events that will be prepared.</span> </p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(array)</span> The response body with events trimmed.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-wp-community-events.php/">wp-admin/includes/class-wp-community-events.php</a> </p> <pre data-language="php">protected function trim_events( array $events ) {
		$future_events = array();

		foreach ( $events as $event ) {
			/*
			 * The API's `date` and `end_date` fields are in the _event's_ local timezone, but UTC is needed so
			 * it can be converted to the _user's_ local time.
			 */
			$end_time = (int) $event['end_unix_timestamp'];

			if ( time() &lt; $end_time ) {
				// Decode HTML entities from the event title.
				$event['title'] = html_entity_decode( $event['title'], ENT_QUOTES, 'UTF-8' );

				array_push( $future_events, $event );
			}
		}

		$future_wordcamps = array_filter(
			$future_events,
			static function( $wordcamp ) {
				return 'wordcamp' === $wordcamp['type'];
			}
		);

		$future_wordcamps    = array_values( $future_wordcamps ); // Remove gaps in indices.
		$trimmed_events      = array_slice( $future_events, 0, 3 );
		$trimmed_event_types = wp_list_pluck( $trimmed_events, 'type' );

		// Make sure the soonest upcoming WordCamp is pinned in the list.
		if ( $future_wordcamps &amp;&amp; ! in_array( 'wordcamp', $trimmed_event_types, true ) ) {
			array_pop( $trimmed_events );
			array_push( $trimmed_events, $future_wordcamps[0] );
		}

		return $trimmed_events;
	}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/functions.php:</span> <a href="../../functions/wp_list_pluck">wp_list_pluck()</a> </td> <td class="related-desc"> <p>Plucks a certain field out of each object or array in an array.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-admin/includes/class-wp-community-events.php:</span> <a href="get_events">WP_Community_Events::get_events()</a> </td> <td class="related-desc"> <p>Gets data about events near a particular location.</p> </td> </tr> <tr> <td> <span>wp-admin/includes/class-wp-community-events.php:</span> <a href="get_cached_events">WP_Community_Events::get_cached_events()</a> </td> <td class="related-desc"> <p>Gets cached events.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/6.0.0/" alt="WordPress 6.0.0">6.0.0</a></td> <td><span class="since-description">Decode HTML entities from the event title.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.5.2/" alt="WordPress 5.5.2">5.5.2</a></td> <td><span class="since-description">Accepts and returns only the events, rather than an entire HTTP response.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.9.7/" alt="WordPress 4.9.7">4.9.7</a></td> <td><span class="since-description">Stick a WordCamp to the final list.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.8.0/" alt="WordPress 4.8.0">4.8.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/classes/wp_community_events/trim_events" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/classes/wp_community_events/trim_events</a>
  </p>
</div>
