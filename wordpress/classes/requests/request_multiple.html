<h1>Requests::request_multiple( array $requests, array $options = array() )</h1>  <section> <p>Send multiple HTTP requests simultaneously</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>The <code>$requests</code> parameter takes an associative or indexed array of request fields. The key of each request can be used to match up the request with the returned data, or with the request passed into your <code>multiple.request.complete</code> callback.</p> <p>The request fields value is an associative array with the following keys:</p> <ul> <li>
<code>url</code>: Request URL Same as the <code>$url</code> parameter to <a href="../requests/request">Requests::request</a> (string, required)</li> <li>
<code>headers</code>: Associative array of header fields. Same as the <code>$headers</code> parameter to <a href="../requests/request">Requests::request</a> (array, default: <code>array()</code>)</li> <li>
<code>data</code>: Associative array of data fields or a string. Same as the <code>$data</code> parameter to <a href="../requests/request">Requests::request</a> (array|string, default: <code>array()</code>)</li> <li>
<code>type</code>: HTTP request type (use Requests constants). Same as the <code>$type</code> parameter to <a href="../requests/request">Requests::request</a> (string, default: <code>Requests::GET</code>)</li> <li>
<code>cookies</code>: Associative array of cookie name to value, or cookie jar. (array|<a href="../requests_cookie_jar">Requests_Cookie_Jar</a>)</li> </ul> <p>If the <code>$options</code> parameter is specified, individual requests will inherit options from it. This can be used to use a single hooking system, or set all the types to <code>Requests::POST</code>, for example.</p> <p>In addition, the <code>$options</code> parameter takes the following global options:</p> <ul> <li>
<code>complete</code>: A callback for when a request is complete. Takes two parameters, a <a href="../requests_response">Requests_Response</a>/Requests_Exception reference, and the ID from the request array (Note: this can also be overridden on a per-request basis, although thatâ€™s a little silly) (callback)</li> </ul> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$requests</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">Requests data (see description for more information)</span> </p> </dd> <dt>$options</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Optional)</span> <span class="description">Global and default options (see <a href="../requests/request">Requests::request</a>)</span> </p> <p class="default">Default value: array()</p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(array)</span> Responses (either <a href="../requests_response">Requests_Response</a> or a <a href="../requests_exception">Requests_Exception</a> object)</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/class-requests.php/">wp-includes/class-requests.php</a> </p> <pre data-language="php">public static function request_multiple($requests, $options = array()) {
		$options = array_merge(self::get_default_options(true), $options);

		if (!empty($options['hooks'])) {
			$options['hooks']-&gt;register('transport.internal.parse_response', array('Requests', 'parse_multiple'));
			if (!empty($options['complete'])) {
				$options['hooks']-&gt;register('multiple.request.complete', $options['complete']);
			}
		}

		foreach ($requests as $id =&gt; &amp;$request) {
			if (!isset($request['headers'])) {
				$request['headers'] = array();
			}
			if (!isset($request['data'])) {
				$request['data'] = array();
			}
			if (!isset($request['type'])) {
				$request['type'] = self::GET;
			}
			if (!isset($request['options'])) {
				$request['options']         = $options;
				$request['options']['type'] = $request['type'];
			}
			else {
				if (empty($request['options']['type'])) {
					$request['options']['type'] = $request['type'];
				}
				$request['options'] = array_merge($options, $request['options']);
			}

			self::set_defaults($request['url'], $request['headers'], $request['data'], $request['type'], $request['options']);

			// Ensure we only hook in once
			if ($request['options']['hooks'] !== $options['hooks']) {
				$request['options']['hooks']-&gt;register('transport.internal.parse_response', array('Requests', 'parse_multiple'));
				if (!empty($request['options']['complete'])) {
					$request['options']['hooks']-&gt;register('multiple.request.complete', $request['options']['complete']);
				}
			}
		}
		unset($request);

		if (!empty($options['transport'])) {
			$transport = $options['transport'];

			if (is_string($options['transport'])) {
				$transport = new $transport();
			}
		}
		else {
			$transport = self::get_transport();
		}
		$responses = $transport-&gt;request_multiple($requests, $options);

		foreach ($responses as $id =&gt; &amp;$response) {
			// If our hook got messed with somehow, ensure we end up with the
			// correct response
			if (is_string($response)) {
				$request = $requests[$id];
				self::parse_multiple($response, $request);
				$request['options']['hooks']-&gt;dispatch('multiple.request.complete', array(&amp;$response, $id));
			}
		}

		return $responses;
	}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="set_defaults">Requests::set_defaults()</a> </td> <td class="related-desc"> <p>Set the default values</p> </td> </tr> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="parse_multiple">Requests::parse_multiple()</a> </td> <td class="related-desc"> <p>Callback for <code>transport.internal.parse_response</code></p> </td> </tr> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="get_default_options">Requests::get_default_options()</a> </td> <td class="related-desc"> <p>Get the default options</p> </td> </tr> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="get_transport">Requests::get_transport()</a> </td> <td class="related-desc"> <p>Get a working transport</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/Requests/Session.php:</span> <a href="../requests_session/request_multiple">Requests_Session::request_multiple()</a> </td> <td class="related-desc"> <p>Send multiple HTTP requests simultaneously</p> </td> </tr> </tbody>

</table> </article> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/classes/requests/request_multiple" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/classes/requests/request_multiple</a>
  </p>
</div>
