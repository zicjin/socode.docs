<h1>wpdb::process_fields( string $table, array $data, mixed $format )</h1>  <section> <p>Processes arrays of field/value pairs and field formats.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>This is a helper method for <a href="../wpdb">wpdb</a>â€™s CRUD methods, which take field/value pairs for inserts, updates, and where clauses. This method first pairs each value with a format. Then it determines the charset of that field, using that to determine if any invalid text would be stripped. If text is stripped, then field processing is rejected and the query fails.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$table</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Required)</span> <span class="description">Table name.</span> </p> </dd> <dt>$data</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">Field/value pair.</span> </p> </dd> <dt>$format</dt> <dd> <p class="desc"> <span class="type">(<span class="mixed">mixed</span>)</span> <span class="required">(Required)</span> <span class="description">Format for each field.</span> </p> </dd> </dl> </section>  <section> <h2 id="return">Return</h2> <p><span class="return-type">(array|false)</span> An array of fields that contain paired value and formats. False for invalid values.</p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/wp-db.php/">wp-includes/wp-db.php</a> </p> <pre data-language="php">protected function process_fields( $table, $data, $format ) {
		$data = $this-&gt;process_field_formats( $data, $format );
		if ( false === $data ) {
			return false;
		}

		$data = $this-&gt;process_field_charsets( $data, $table );
		if ( false === $data ) {
			return false;
		}

		$data = $this-&gt;process_field_lengths( $data, $table );
		if ( false === $data ) {
			return false;
		}

		$converted_data = $this-&gt;strip_invalid_text( $data );

		if ( $data !== $converted_data ) {

			$problem_fields = array();
			foreach ( $data as $field =&gt; $value ) {
				if ( $value !== $converted_data[ $field ] ) {
					$problem_fields[] = $field;
				}
			}

			wp_load_translations_early();

			if ( 1 === count( $problem_fields ) ) {
				$this-&gt;last_error = sprintf(
					/* translators: %s: Database field where the error occurred. */
					__( 'WordPress database error: Processing the value for the following field failed: %s. The supplied value may be too long or contains invalid data.' ),
					reset( $problem_fields )
				);
			} else {
				$this-&gt;last_error = sprintf(
					/* translators: %s: Database fields where the error occurred. */
					__( 'WordPress database error: Processing the values for the following fields failed: %s. The supplied values may be too long or contain invalid data.' ),
					implode( ', ', $problem_fields )
				);
			}

			return false;
		}

		return $data;
	}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="process_field_lengths">wpdb::process_field_lengths()</a> </td> <td class="related-desc"> <p>For string fields, records the maximum string length that field can safely save.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="strip_invalid_text">wpdb::strip_invalid_text()</a> </td> <td class="related-desc"> <p>Strips any invalid characters based on value/charset pairs.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="process_field_formats">wpdb::process_field_formats()</a> </td> <td class="related-desc"> <p>Prepares arrays of value/format pairs as passed to <a href="../wpdb">wpdb</a> CRUD methods.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="process_field_charsets">wpdb::process_field_charsets()</a> </td> <td class="related-desc"> <p>Adds field charsets to field/value/format arrays generated by <a href="process_field_formats">wpdb::process_field_formats()</a>.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="../../functions/__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/load.php:</span> <a href="../../functions/wp_load_translations_early">wp_load_translations_early()</a> </td> <td class="related-desc"> <p>Attempt an early load of translations.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="_insert_replace_helper">wpdb::_insert_replace_helper()</a> </td> <td class="related-desc"> <p>Helper function for insert and replace.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="update">wpdb::update()</a> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="delete">wpdb::delete()</a> </td> <td class="related-desc"> <p>Deletes a row in the table.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.2.0/" alt="WordPress 4.2.0">4.2.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/classes/wpdb/process_fields" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/classes/wpdb/process_fields</a>
  </p>
</div>
