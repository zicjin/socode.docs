<h1>WP_User::set_role( string $role )</h1>  <section> <p>Sets the role of the user.</p> </section> <div class="content-toc">  <section> <h2 id="description">Description</h2> <p>This will remove the previous roles of the user and assign the user the new one. You can set the role to an empty string and it will remove all of the roles from the user.</p> </section>  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$role</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="required">(Required)</span> <span class="description">Role name.</span> </p> </dd> </dl> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/class-wp-user.php/">wp-includes/class-wp-user.php</a> </p> <pre data-language="php">public function set_role( $role ) {
		if ( 1 === count( $this-&gt;roles ) &amp;&amp; current( $this-&gt;roles ) == $role ) {
			return;
		}

		foreach ( (array) $this-&gt;roles as $oldrole ) {
			unset( $this-&gt;caps[ $oldrole ] );
		}

		$old_roles = $this-&gt;roles;

		if ( ! empty( $role ) ) {
			$this-&gt;caps[ $role ] = true;
			$this-&gt;roles         = array( $role =&gt; true );
		} else {
			$this-&gt;roles = array();
		}

		update_user_meta( $this-&gt;ID, $this-&gt;cap_key, $this-&gt;caps );
		$this-&gt;get_role_caps();
		$this-&gt;update_user_level_from_caps();

		foreach ( $old_roles as $old_role ) {
			if ( ! $old_role || $old_role === $role ) {
				continue;
			}

			/** This action is documented in wp-includes/class-wp-user.php */
			do_action( 'remove_user_role', $this-&gt;ID, $old_role );
		}

		if ( $role &amp;&amp; ! in_array( $role, $old_roles, true ) ) {
			/** This action is documented in wp-includes/class-wp-user.php */
			do_action( 'add_user_role', $this-&gt;ID, $role );
		}

		/**
		 * Fires after the user's role has changed.
		 *
		 * @since 2.9.0
		 * @since 3.6.0 Added $old_roles to include an array of the user's previous roles.
		 *
		 * @param int      $user_id   The user ID.
		 * @param string   $role      The new role.
		 * @param string[] $old_roles An array of the user's previous roles.
		 */
		do_action( 'set_user_role', $this-&gt;ID, $role, $old_roles );
	}</pre>  </section>  <section> <h2 id="related">Related</h2> <article class="uses"> <h3 id="uses">Uses</h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-wp-user.php:</span> <a href="../../hooks/remove_user_role">remove_user_role</a> </td> <td class="related-desc"> <p>Fires immediately after a role as been removed from a user.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-user.php:</span> <a href="../../hooks/add_user_role">add_user_role</a> </td> <td class="related-desc"> <p>Fires immediately after the user has been given a new role.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-user.php:</span> <a href="update_user_level_from_caps">WP_User::update_user_level_from_caps()</a> </td> <td class="related-desc"> <p>Updates the maximum user level for the user.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-user.php:</span> <a href="get_role_caps">WP_User::get_role_caps()</a> </td> <td class="related-desc"> <p>Retrieves all of the capabilities of the user’s roles, and merges them with individual user capabilities.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-user.php:</span> <a href="../../hooks/set_user_role">set_user_role</a> </td> <td class="related-desc"> <p>Fires after the user’s role has changed.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/do_action">do_action()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="../../functions/update_user_meta">update_user_meta()</a> </td> <td class="related-desc"> <p>Updates user meta field based on user ID.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.0.0/" alt="WordPress 2.0.0">2.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/classes/wp_user/set_role" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/classes/wp_user/set_role</a>
  </p>
</div>
