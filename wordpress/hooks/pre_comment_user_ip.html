<h1>apply_filters( 'pre_comment_user_ip', string $comment_author_ip )</h1>  <section> <p>Filters the comment author’s IP address before it is set.</p> </section> <div class="content-toc">  <section> <h2 id="parameters">Parameters</h2> <dl> <dt>$comment_author_ip</dt> <dd> <p class="desc"> <span class="type">(<span class="string">string</span>)</span> <span class="description">The comment author's IP address.</span> </p> </dd> </dl> </section>  <section> <h2 id="more-information">More Information</h2> <p>With this filter, we can change the comment author’s IP before it’s recorded. Example use case can be when a client submits a comment through a proxy server.</p> <p>The general format of the header is:<br> <code>X-Forwarded-For: client1, proxy1, proxy2</code></p> <p>where the value is a comma+space separated list of IP addresses, the left-most being the original client, and each successive proxy that passed the request adding the IP address where it received the request from. In this example, the request goes through the IPs: client1 -&gt; proxy1 -&gt; proxy2 -&gt; proxy3. Proxy3 is not shown in the <code>X-Forwarded-For</code> header here and appears as the remote address of the request.</p> <p>Since it is easy to forge an <code>X-Forwarded-For</code> header, the given information should be used with care.</p> <p><code>X-Forwarded-For</code>, <code>X-Forwarded-By</code>, and <code>X-Forwarded-Proto</code> are non-standard header fields and in increasing cases, have been superseded by the standard <code>Forwarded</code> header defined in RFC 7239. Example of a <code>Forwarded</code> header:<br> <code>Forwarded: for=192.0.2.60;proto=http;by=203.0.113.43</code></p> </section>  <section> <h2 id="source">Source</h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/comment.php/">wp-includes/comment.php</a> </p> <p> <a href="https://core.trac.wordpress.org/browser/tags/6.0/src/wp-includes/comment.php#L2110">View on Trac</a> </p> </section>  <section> <h2 id="related">Related</h2> <article class="used-by"> <h3 id="used-by">Used By</h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../functions/wp_filter_comment">wp_filter_comment()</a> </td> <td class="related-desc"> <p>Filters and sanitizes comment data.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <h2 id="changelog">Changelog</h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.5.0/" alt="WordPress 1.5.0">1.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>    </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.wordpress.org/reference/hooks/pre_comment_user_ip" class="_attribution-link" target="_blank">https://developer.wordpress.org/reference/hooks/pre_comment_user_ip</a>
  </p>
</div>
