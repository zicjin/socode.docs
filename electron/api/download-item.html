<h1>Class: DownloadItem</h1>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="class-downloaditem">Class: DownloadItem<a class="hash-link" href="#class-downloaditem" title="Direct link to heading">​</a>
</h2>
<blockquote><p>Control file downloads from remote sources.</p></blockquote>
<p>Process: <a href="../glossary#main-process">Main</a><br> <em>This class is not exported from the <code>'electron'</code> module. It is only available as a return value of other methods in the Electron API.</em></p>
<p><code>DownloadItem</code> is an <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer">EventEmitter</a> that represents a download item in Electron. It is used in <code>will-download</code> event of <code>Session</code> class, and allows users to control the download item.</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In the main process.</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> win </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">win</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'will-download'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> item</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> webContents</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Set the save path, making Electron not to prompt a save dialog.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setSavePath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/tmp/save.pdf'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'updated'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">===</span><span class="token string" style="color:#e3116c">'interrupted'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Download is interrupted but can be resumed'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">===</span><span class="token string" style="color:#e3116c">'progressing'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isPaused</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Download is paused'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Received bytes: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation function" style="color:#d73a49">getReceivedBytes</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'done'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">===</span><span class="token string" style="color:#e3116c">'completed'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Download successfully'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Download failed: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">state</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="instance-events">Instance Events<a class="hash-link" href="#instance-events" title="Direct link to heading">​</a>
</h3>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="event-updated">Event: 'updated'<a class="hash-link" href="#event-updated" title="Direct link to heading">​</a>
</h4>
<p>Returns:</p>
<ul>
<li>
<code>event</code> Event</li>
<li>
<code>state</code> String - Can be <code>progressing</code> or <code>interrupted</code>.</li>
</ul>
<p>Emitted when the download has been updated and is not done.</p>
<p>The <code>state</code> can be one of following:</p>
<ul>
<li>
<code>progressing</code> - The download is in-progress.</li>
<li>
<code>interrupted</code> - The download has interrupted and can be resumed.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="event-done">Event: 'done'<a class="hash-link" href="#event-done" title="Direct link to heading">​</a>
</h4>
<p>Returns:</p>
<ul>
<li>
<code>event</code> Event</li>
<li>
<code>state</code> String - Can be <code>completed</code>, <code>cancelled</code> or <code>interrupted</code>.</li>
</ul>
<p>Emitted when the download is in a terminal state. This includes a completed download, a cancelled download (via <code>downloadItem.cancel()</code>), and interrupted download that can't be resumed.</p>
<p>The <code>state</code> can be one of following:</p>
<ul>
<li>
<code>completed</code> - The download completed successfully.</li>
<li>
<code>cancelled</code> - The download has been cancelled.</li>
<li>
<code>interrupted</code> - The download has interrupted and can not resume.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="instance-methods">Instance Methods<a class="hash-link" href="#instance-methods" title="Direct link to heading">​</a>
</h3>
<p>The <code>downloadItem</code> object has the following methods:</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemsetsavepathpath">
<code>downloadItem.setSavePath(path)</code><a class="hash-link" href="#downloaditemsetsavepathpath" title="Direct link to heading">​</a>
</h4>
<ul><li>
<code>path</code> String - Set the save file path of the download item.</li></ul>
<p>The API is only available in session's <code>will-download</code> callback function. If <code>path</code> doesn't exist, Electron will try to make the directory recursively. If user doesn't set the save path via the API, Electron will use the original routine to determine the save path; this usually prompts a save dialog.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetsavepath">
<code>downloadItem.getSavePath()</code><a class="hash-link" href="#downloaditemgetsavepath" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - The save path of the download item. This will be either the path set via <code>downloadItem.setSavePath(path)</code> or the path selected from the shown save dialog.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemsetsavedialogoptionsoptions">
<code>downloadItem.setSaveDialogOptions(options)</code><a class="hash-link" href="#downloaditemsetsavedialogoptionsoptions" title="Direct link to heading">​</a>
</h4>
<ul><li>
<code>options</code> SaveDialogOptions - Set the save file dialog options. This object has the same properties as the <code>options</code> parameter of <a href="dialog"><code>dialog.showSaveDialog()</code></a>.</li></ul>
<p>This API allows the user to set custom options for the save dialog that opens for the download item by default. The API is only available in session's <code>will-download</code> callback function.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetsavedialogoptions">
<code>downloadItem.getSaveDialogOptions()</code><a class="hash-link" href="#downloaditemgetsavedialogoptions" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>SaveDialogOptions</code> - Returns the object previously set by <code>downloadItem.setSaveDialogOptions(options)</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditempause">
<code>downloadItem.pause()</code><a class="hash-link" href="#downloaditempause" title="Direct link to heading">​</a>
</h4>
<p>Pauses the download.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemispaused">
<code>downloadItem.isPaused()</code><a class="hash-link" href="#downloaditemispaused" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>Boolean</code> - Whether the download is paused.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemresume">
<code>downloadItem.resume()</code><a class="hash-link" href="#downloaditemresume" title="Direct link to heading">​</a>
</h4>
<p>Resumes the download that has been paused.</p>
<p><strong>Note:</strong> To enable resumable downloads the server you are downloading from must support range requests and provide both <code>Last-Modified</code> and <code>ETag</code> header values. Otherwise <code>resume()</code> will dismiss previously received bytes and restart the download from the beginning.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemcanresume">
<code>downloadItem.canResume()</code><a class="hash-link" href="#downloaditemcanresume" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>Boolean</code> - Whether the download can resume.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemcancel">
<code>downloadItem.cancel()</code><a class="hash-link" href="#downloaditemcancel" title="Direct link to heading">​</a>
</h4>
<p>Cancels the download operation.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgeturl">
<code>downloadItem.getURL()</code><a class="hash-link" href="#downloaditemgeturl" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - The origin URL where the item is downloaded from.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetmimetype">
<code>downloadItem.getMimeType()</code><a class="hash-link" href="#downloaditemgetmimetype" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - The files mime type.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemhasusergesture">
<code>downloadItem.hasUserGesture()</code><a class="hash-link" href="#downloaditemhasusergesture" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>Boolean</code> - Whether the download has user gesture.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetfilename">
<code>downloadItem.getFilename()</code><a class="hash-link" href="#downloaditemgetfilename" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - The file name of the download item.</p>
<p><strong>Note:</strong> The file name is not always the same as the actual one saved in local disk. If user changes the file name in a prompted download saving dialog, the actual name of saved file will be different.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgettotalbytes">
<code>downloadItem.getTotalBytes()</code><a class="hash-link" href="#downloaditemgettotalbytes" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>Integer</code> - The total size in bytes of the download item.</p>
<p>If the size is unknown, it returns 0.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetreceivedbytes">
<code>downloadItem.getReceivedBytes()</code><a class="hash-link" href="#downloaditemgetreceivedbytes" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>Integer</code> - The received bytes of the download item.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetcontentdisposition">
<code>downloadItem.getContentDisposition()</code><a class="hash-link" href="#downloaditemgetcontentdisposition" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - The Content-Disposition field from the response header.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetstate">
<code>downloadItem.getState()</code><a class="hash-link" href="#downloaditemgetstate" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - The current state. Can be <code>progressing</code>, <code>completed</code>, <code>cancelled</code> or <code>interrupted</code>.</p>
<p><strong>Note:</strong> The following methods are useful specifically to resume a <code>cancelled</code> item when session is restarted.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgeturlchain">
<code>downloadItem.getURLChain()</code><a class="hash-link" href="#downloaditemgeturlchain" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String[]</code> - The complete URL chain of the item including any redirects.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetlastmodifiedtime">
<code>downloadItem.getLastModifiedTime()</code><a class="hash-link" href="#downloaditemgetlastmodifiedtime" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - Last-Modified header value.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetetag">
<code>downloadItem.getETag()</code><a class="hash-link" href="#downloaditemgetetag" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>String</code> - ETag header value.</p>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemgetstarttime">
<code>downloadItem.getStartTime()</code><a class="hash-link" href="#downloaditemgetstarttime" title="Direct link to heading">​</a>
</h4>
<p>Returns <code>Double</code> - Number of seconds since the UNIX epoch when the download was started.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="instance-properties">Instance Properties<a class="hash-link" href="#instance-properties" title="Direct link to heading">​</a>
</h3>
<h4 class="anchor anchorWithStickyNavbar_31ik" id="downloaditemsavepath">
<code>downloadItem.savePath</code><a class="hash-link" href="#downloaditemsavepath" title="Direct link to heading">​</a>
</h4>
<p>A <code>String</code> property that determines the save file path of the download item.</p>
<p>The property is only available in session's <code>will-download</code> callback function. If user doesn't set the save path via the property, Electron will use the original routine to determine the save path; this usually prompts a save dialog.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/api/download-item" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/api/download-item</a>
  </p>
</div>
