<h1>contentTracing</h1>
<blockquote><p>Collect tracing data from Chromium to find performance bottlenecks and slow operations.</p></blockquote>
<p>Process: <a href="../glossary#main-process">Main</a></p>
<p>This module does not include a web interface. To view recorded traces, use <a href="https://chromium.googlesource.com/catapult/+/HEAD/tracing/README.md" target="_blank" rel="noopener noreferrer">trace viewer</a>, available at <code>chrome://tracing</code> in Chrome.</p>
<p><strong>Note:</strong> You should not use this module until the <code>ready</code> event of the app module is emitted.</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> contentTracing </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">whenReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> contentTracing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startRecording</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      included_categories</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'*'</span><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Tracing started'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> contentTracing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stopRecording</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Tracing data recorded to '</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="methods">Methods<a class="hash-link" href="#methods" title="Direct link to heading">​</a>
</h2>
<p>The <code>contentTracing</code> module has the following methods:</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="contenttracinggetcategories">
<code>contentTracing.getCategories()</code><a class="hash-link" href="#contenttracinggetcategories" title="Direct link to heading">​</a>
</h3>
<p>Returns <code>Promise&lt;String[]&gt;</code> - resolves with an array of category groups once all child processes have acknowledged the <code>getCategories</code> request</p>
<p>Get a set of category groups. The category groups can change as new code paths are reached. See also the <a href="https://chromium.googlesource.com/chromium/src/+/master/base/trace_event/builtin_categories.h" target="_blank" rel="noopener noreferrer">list of built-in tracing categories</a>.</p>
<blockquote><p><strong>NOTE:</strong> Electron adds a non-default tracing category called <code>"electron"</code>. This category can be used to capture Electron-specific tracing events.</p></blockquote>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="contenttracingstartrecordingoptions">
<code>contentTracing.startRecording(options)</code><a class="hash-link" href="#contenttracingstartrecordingoptions" title="Direct link to heading">​</a>
</h3>
<ul><li>
<code>options</code> (<a aria-describedby="structures-tooltip" href="structures/trace-config" class="link_2NU_">TraceConfig</a> | <a aria-describedby="structures-tooltip" href="structures/trace-categories-and-options" class="link_2NU_">TraceCategoriesAndOptions</a>)</li></ul>
<p>Returns <code>Promise&lt;void&gt;</code> - resolved once all child processes have acknowledged the <code>startRecording</code> request.</p>
<p>Start recording on all processes.</p>
<p>Recording begins immediately locally and asynchronously on child processes as soon as they receive the EnableRecording request.</p>
<p>If a recording is already running, the promise will be immediately resolved, as only one trace operation can be in progress at a time.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="contenttracingstoprecordingresultfilepath">
<code>contentTracing.stopRecording([resultFilePath])</code><a class="hash-link" href="#contenttracingstoprecordingresultfilepath" title="Direct link to heading">​</a>
</h3>
<ul><li>
<code>resultFilePath</code> String (optional)</li></ul>
<p>Returns <code>Promise&lt;String&gt;</code> - resolves with a path to a file that contains the traced data once all child processes have acknowledged the <code>stopRecording</code> request</p>
<p>Stop recording on all processes.</p>
<p>Child processes typically cache trace data and only rarely flush and send trace data back to the main process. This helps to minimize the runtime overhead of tracing since sending trace data over IPC can be an expensive operation. So, to end tracing, Chromium asynchronously asks all child processes to flush any pending trace data.</p>
<p>Trace data will be written into <code>resultFilePath</code>. If <code>resultFilePath</code> is empty or not provided, trace data will be written to a temporary file, and the path will be returned in the promise.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="contenttracinggettracebufferusage">
<code>contentTracing.getTraceBufferUsage()</code><a class="hash-link" href="#contenttracinggettracebufferusage" title="Direct link to heading">​</a>
</h3>
<p>Returns <code>Promise&lt;Object&gt;</code> - Resolves with an object containing the <code>value</code> and <code>percentage</code> of trace buffer maximum usage</p>
<ul>
<li>
<code>value</code> Number</li>
<li>
<code>percentage</code> Number</li>
</ul>
<p>Get the maximum usage across processes of trace buffer as a percentage of the full state.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/api/content-tracing" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/api/content-tracing</a>
  </p>
</div>
