<h1>Creating a New Electron Browser Module</h1>
<p>Welcome to the Electron API guide! If you are unfamiliar with creating a new Electron API module within the <a href="https://github.com/electron/electron/tree/main/shell/browser" target="_blank" rel="noopener noreferrer"><code>browser</code></a> directory, this guide serves as a checklist for some of the necessary steps that you will need to implement.</p>
<p>This is not a comprehensive end-all guide to creating an Electron Browser API, rather an outline documenting some of the more unintuitive steps.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-your-files-to-electrons-project-configuration">Add your files to Electron's project configuration<a class="hash-link" href="#add-your-files-to-electrons-project-configuration" title="Direct link to heading">​</a>
</h2>
<p>Electron uses <a href="https://gn.googlesource.com/gn" target="_blank" rel="noopener noreferrer">GN</a> as a meta build system to generate files for its compiler, <a href="https://ninja-build.org/" target="_blank" rel="noopener noreferrer">Ninja</a>. This means that in order to tell Electron to compile your code, we have to add your API's code and header file names into <a href="https://github.com/electron/electron/blob/main/filenames.gni" target="_blank" rel="noopener noreferrer"><code>filenames.gni</code></a>.</p>
<p>You will need to append your API file names alphabetically into the appropriate files like so:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">filenames.gni</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">lib_sources </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name.cc"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name.h"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lib_sources_mac </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name_mac.h"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name_mac.mm"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lib_sources_win </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name_win.cc"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name_win.h"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lib_sources_linux </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name_linux.cc"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">"path/to/api/api_name_linux.h"</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre>

</div>
</div>
<p>Note that the Windows, macOS and Linux array additions are optional and should only be added if your API has specific platform implementations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-api-documentation">Create API documentation<a class="hash-link" href="#create-api-documentation" title="Direct link to heading">​</a>
</h2>
<p>Type definitions are generated by Electron using <a href="https://github.com/electron/docs-parser" target="_blank" rel="noopener noreferrer"><code>@electron/docs-parser</code></a> and <a href="https://github.com/electron/typescript-definitions" target="_blank" rel="noopener noreferrer"><code>@electron/typescript-definitions</code></a>. This step is necessary to ensure consistency across Electron's API documentation. This means that for your API type definition to appear in the <code>electron.d.ts</code> file, we must create a <code>.md</code> file. Examples can be found in <a href="https://github.com/electron/electron/tree/main/docs/api" target="_blank" rel="noopener noreferrer">this folder</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-objecttemplatebuilder-and-wrappable">Set up <code>ObjectTemplateBuilder</code> and <code>Wrappable</code><a class="hash-link" href="#set-up-objecttemplatebuilder-and-wrappable" title="Direct link to heading">​</a>
</h2>
<p>Electron constructs its modules using <a href="https://www.electronjs.org/blog/from-native-to-js#mateobjecttemplatebuilder" target="_blank" rel="noopener noreferrer"><code>object_template_builder</code></a>.</p>
<p><a href="https://chromium.googlesource.com/chromium/src/+/refs/heads/main/gin/wrappable.h" target="_blank" rel="noopener noreferrer"><code>wrappable</code></a> is a base class for C++ objects that have corresponding v8 wrapper objects.</p>
<p>Here is a basic example of code that you may need to add, in order to incorporate <code>object_template_builder</code> and <code>wrappable</code> into your API. For further reference, you can find more implementations <a href="https://github.com/electron/electron/tree/main/shell/browser/api" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>In your <code>api_name.h</code> file:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">api_name.h</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">ifndef</span><span class="token macro property expression" style="color:#36acaa">ELECTRON_SHELL_BROWSER_API_ELECTRON_API_</span><span class="token macro property expression punctuation" style="color:#393A34">{</span><span class="token macro property expression" style="color:#36acaa">API_NAME</span><span class="token macro property expression punctuation" style="color:#393A34">}</span><span class="token macro property expression" style="color:#36acaa">_H_</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property macro-name" style="color:#36acaa">ELECTRON_SHELL_BROWSER_API_ELECTRON_API_</span><span class="token macro property expression punctuation" style="color:#393A34">{</span><span class="token macro property expression" style="color:#36acaa">API_NAME</span><span class="token macro property expression punctuation" style="color:#393A34">}</span><span class="token macro property expression" style="color:#36acaa">_H_</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"gin/handle.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"gin/wrappable.h"</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> electron </span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> api </span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token class-name">ApiName</span><span class="token operator" style="color:#393A34">:</span><span class="token base-clause keyword" style="color:#00009f">public</span><span class="token base-clause"> gin</span><span class="token base-clause double-colon punctuation" style="color:#393A34">::</span><span class="token base-clause class-name">Wrappable</span><span class="token base-clause operator" style="color:#393A34">&lt;</span><span class="token base-clause class-name">ApiName</span><span class="token base-clause operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Handle</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ApiName</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Isolate</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> isolate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// gin::Wrappable</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">WrapperInfo kWrapperInfo</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ObjectTemplateBuilder </span><span class="token function" style="color:#d73a49">GetObjectTemplateBuilder</span><span class="token punctuation" style="color:#393A34">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Isolate</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> isolate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token keyword" style="color:#00009f">override</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token function" style="color:#d73a49">GetTypeName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token keyword" style="color:#00009f">override</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">// namespace api</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">// namespace electron</span><br></span></code></pre>

</div>
</div>
<p>In your <code>api_name.cc</code> file:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">api_name.cc</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/browser/api/electron_api_safe_storage.h"</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/browser/browser.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/common/gin_converters/base_converter.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/common/gin_converters/callback_converter.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/common/gin_helper/dictionary.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/common/gin_helper/object_template_builder.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/common/node_includes.h"</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property string" style="color:#e3116c">"shell/common/platform_util.h"</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> electron </span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> api </span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">WrapperInfo ApiName</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">kWrapperInfo </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">kEmbedderNativeGin</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ObjectTemplateBuilder </span><span class="token class-name">ApiName</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">GetObjectTemplateBuilder</span><span class="token punctuation" style="color:#393A34">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Isolate</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> isolate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">ObjectTemplateBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isolate</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetMethod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"methodName"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ApiName</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">methodName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token class-name">ApiName</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">GetTypeName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token string" style="color:#e3116c">"ApiName"</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Handle</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ApiName</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token class-name">ApiName</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Isolate</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> isolate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> gin</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CreateHandle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isolate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">new</span><span class="token function" style="color:#d73a49">ApiName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">// namespace api</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">// namespace electron</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token function" style="color:#d73a49">Initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Local</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Object</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Local</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Value</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> unused</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Local</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Context</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> priv</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  v8</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Isolate</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> isolate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetIsolate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gin_helper</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dictionary </span><span class="token function" style="color:#d73a49">dict</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isolate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dict</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"apiName"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> electron</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">api</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">ApiName</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isolate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token comment" style="color:#999988;font-style:italic">// namespace</span><br></span></code></pre>

</div>
</div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="link-your-electron-api-with-node">Link your Electron API with Node<a class="hash-link" href="#link-your-electron-api-with-node" title="Direct link to heading">​</a>
</h2>
<p>In the <a href="https://github.com/electron/electron/blob/main/typings/internal-ambient.d.ts" target="_blank" rel="noopener noreferrer"><code>typings/internal-ambient.d.ts</code></a> file, we need to append a new property onto the <code>Process</code> interface like so:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">typings/internal-ambient.d.ts</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token class-name">Process</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">_linkedBinding</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'electron_browser_{api_name}'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Electron</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ApiName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre>

</div>
</div>
<p>At the very bottom of your <code>api_name.cc</code> file:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">api_name.cc</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">NODE_LINKED_MODULE_CONTEXT_AWARE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">electron_browser_</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">api_name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">Initialize</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>In your <a href="https://github.com/electron/electron/blob/main/shell/common/node_bindings.cc" target="_blank" rel="noopener noreferrer"><code>shell/common/node_bindings.cc</code></a> file, add your node binding name to Electron's built-in modules.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">shell/common/node_bindings.cc</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property macro-name function" style="color:#d73a49">ELECTRON_BUILTIN_MODULES</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">V</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property punctuation" style="color:#393A34">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property expression function" style="color:#d73a49">V</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">electron_browser_</span><span class="token macro property expression punctuation" style="color:#393A34">{</span><span class="token macro property expression" style="color:#36acaa">api_name</span><span class="token macro property expression punctuation" style="color:#393A34">}</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<blockquote><p>Note: More technical details on how Node links with Electron can be found on <a href="https://www.electronjs.org/blog/electron-internals-using-node-as-a-library#link-node-with-electron" target="_blank" rel="noopener noreferrer">our blog</a>.</p></blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expose-your-api-to-typescript">Expose your API to TypeScript<a class="hash-link" href="#expose-your-api-to-typescript" title="Direct link to heading">​</a>
</h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="export-your-api-as-a-module">Export your API as a module<a class="hash-link" href="#export-your-api-as-a-module" title="Direct link to heading">​</a>
</h3>
<p>We will need to create a new TypeScript file in the path that follows:</p>
<p><code>"lib/browser/api/{electron_browser_{api_name}}.ts"</code></p>
<p>An example of the contents of this file can be found <a href="https://github.com/electron/electron/blob/main/lib/browser/api/native-image.ts" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="expose-your-module-to-typescript">Expose your module to TypeScript<a class="hash-link" href="#expose-your-module-to-typescript" title="Direct link to heading">​</a>
</h3>
<p>Add your module to the module list found at <code>"lib/browser/api/module-list.ts"</code> like so:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">lib/browser/api/module-list.ts</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> browserModuleList</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ElectronInternal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ModuleEntry</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'apiName'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function-variable function" style="color:#d73a49">loader</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'./api-name'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre>

</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/development/creating-api" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/development/creating-api</a>
  </p>
</div>
