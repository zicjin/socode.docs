<h1>Build System Overview</h1>
<p>Electron uses <a href="https://gn.googlesource.com/gn" target="_blank" rel="noopener noreferrer">GN</a> for project generation and <a href="https://ninja-build.org/" target="_blank" rel="noopener noreferrer">ninja</a> for building. Project configurations can be found in the <code>.gn</code> and <code>.gni</code> files.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="gn-files">GN Files<a class="hash-link" href="#gn-files" title="Direct link to heading">​</a>
</h2>
<p>The following <code>gn</code> files contain the main rules for building Electron:</p>
<ul>
<li>
<code>BUILD.gn</code> defines how Electron itself is built and includes the default configurations for linking with Chromium.</li>
<li>
<code>build/args/{debug,release,all}.gn</code> contain the default build arguments for building Electron.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="component-build">Component Build<a class="hash-link" href="#component-build" title="Direct link to heading">​</a>
</h2>
<p>Since Chromium is quite a large project, the final linking stage can take quite a few minutes, which makes it hard for development. In order to solve this, Chromium introduced the "component build", which builds each component as a separate shared library, making linking very quick but sacrificing file size and performance.</p>
<p>Electron inherits this build option from Chromium. In <code>Debug</code> builds, the binary will be linked to a shared library version of Chromium's components to achieve fast linking time; for <code>Release</code> builds, the binary will be linked to the static library versions, so we can have the best possible binary size and performance.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="tests">Tests<a class="hash-link" href="#tests" title="Direct link to heading">​</a>
</h2>
<p><strong>NB</strong> <em>this section is out of date and contains information that is no longer relevant to the GN-built electron.</em></p>
<p>Test your changes conform to the project coding style using:</p>
<div class="codeBlockContainer_K1bP language-sh theme-code-block"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run lint</span><br></span></code></pre></div></div>
<p>Test functionality using:</p>
<div class="codeBlockContainer_K1bP language-sh theme-code-block"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm test</span><br></span></code></pre></div></div>
<p>Whenever you make changes to Electron source code, you'll need to re-run the build before the tests:</p>
<div class="codeBlockContainer_K1bP language-sh theme-code-block"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run build &amp;&amp; npm test</span><br></span></code></pre></div></div>
<p>You can make the test suite run faster by isolating the specific test or block you're currently working on using Mocha's <a href="https://mochajs.org/#exclusive-tests" target="_blank" rel="noopener noreferrer">exclusive tests</a> feature. Append <code>.only</code> to any <code>describe</code> or <code>it</code> function call:</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">describe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">only</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'some feature'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ... only tests in this block will be run</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Alternatively, you can use mocha's <code>grep</code> option to only run tests matching the given regular expression pattern:</p>
<div class="codeBlockContainer_K1bP language-sh theme-code-block"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm test -- --grep child_process</span><br></span></code></pre></div></div>
<p>Tests that include native modules (e.g. <code>runas</code>) can't be executed with the debug build (see <a href="https://github.com/electron/electron/issues/2558" target="_blank" rel="noopener noreferrer">#2558</a> for details), but they will work with the release build.</p>
<p>To run the tests with the release build use:</p>
<div class="codeBlockContainer_K1bP language-sh theme-code-block"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm test -- -R</span><br></span></code></pre></div></div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/development/build-system-overview" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/development/build-system-overview</a>
  </p>
</div>
