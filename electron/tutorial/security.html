<h1>Security, Native Capabilities, and Your Responsibility</h1>
<p>As web developers, we usually enjoy the strong security net of the browser - the risks associated with the code we write are relatively small. Our websites are granted limited powers in a sandbox, and we trust that our users enjoy a browser built by a large team of engineers that is able to quickly respond to newly discovered security threats.</p>
<p>When working with Electron, it is important to understand that Electron is not a web browser. It allows you to build feature-rich desktop applications with familiar web technologies, but your code wields much greater power. JavaScript can access the filesystem, user shell, and more. This allows you to build high quality native applications, but the inherent security risks scale with the additional powers granted to your code.</p>
<p>With that in mind, be aware that displaying arbitrary content from untrusted sources poses a severe security risk that Electron is not intended to handle. In fact, the most popular Electron apps (Atom, Slack, Visual Studio Code, etc) display primarily local content (or trusted, secure remote content without Node integration) – if your application executes code from an online source, it is your responsibility to ensure that the code is not malicious.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="reporting-security-issues">Reporting Security Issues<a class="hash-link" href="#reporting-security-issues" title="Direct link to heading">​</a>
</h2>
<p>For information on how to properly disclose an Electron vulnerability, see <a href="https://github.com/electron/electron/tree/main/SECURITY.md" target="_blank" rel="noopener noreferrer">SECURITY.md</a></p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="chromium-security-issues-and-upgrades">Chromium Security Issues and Upgrades<a class="hash-link" href="#chromium-security-issues-and-upgrades" title="Direct link to heading">​</a>
</h2>
<p>Electron keeps up to date with alternating Chromium releases. For more information, see the <a href="https://electronjs.org/blog/12-week-cadence" target="_blank" rel="noopener noreferrer">Electron Release Cadence blog post</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="security-is-everyones-responsibility">Security Is Everyone's Responsibility<a class="hash-link" href="#security-is-everyones-responsibility" title="Direct link to heading">​</a>
</h2>
<p>It is important to remember that the security of your Electron application is the result of the overall security of the framework foundation (<em>Chromium</em>, <em>Node.js</em>), Electron itself, all NPM dependencies and your code. As such, it is your responsibility to follow a few important best practices:</p>
<ul>
<li><p><strong>Keep your application up-to-date with the latest Electron framework release.</strong> When releasing your product, you’re also shipping a bundle composed of Electron, Chromium shared library and Node.js. Vulnerabilities affecting these components may impact the security of your application. By updating Electron to the latest version, you ensure that critical vulnerabilities (such as <em>nodeIntegration bypasses</em>) are already patched and cannot be exploited in your application. For more information, see "<a href="#16-use-a-current-version-of-electron">Use a current version of Electron</a>".</p></li>
<li><p><strong>Evaluate your dependencies.</strong> While NPM provides half a million reusable packages, it is your responsibility to choose trusted 3rd-party libraries. If you use outdated libraries affected by known vulnerabilities or rely on poorly maintained code, your application security could be in jeopardy.</p></li>
<li><p><strong>Adopt secure coding practices.</strong> The first line of defense for your application is your own code. Common web vulnerabilities, such as Cross-Site Scripting (XSS), have a higher security impact on Electron applications hence it is highly recommended to adopt secure software development best practices and perform security testing.</p></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="isolation-for-untrusted-content">Isolation For Untrusted Content<a class="hash-link" href="#isolation-for-untrusted-content" title="Direct link to heading">​</a>
</h2>
<p>A security issue exists whenever you receive code from an untrusted source (e.g. a remote server) and execute it locally. As an example, consider a remote website being displayed inside a default <a href="../api/browser-window"><code>BrowserWindow</code></a>. If an attacker somehow manages to change said content (either by attacking the source directly, or by sitting between your app and the actual destination), they will be able to execute native code on the user's machine.</p>
<blockquote><p>⚠️ Under no circumstances should you load and execute remote code with Node.js integration enabled. Instead, use only local files (packaged together with your application) to execute Node.js code. To display remote content, use the <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a> tag or <a href="../api/browser-view"><code>BrowserView</code></a>, make sure to disable the <code>nodeIntegration</code> and enable <code>contextIsolation</code>.</p></blockquote>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="electron-security-warnings">Electron Security Warnings<a class="hash-link" href="#electron-security-warnings" title="Direct link to heading">​</a>
</h2>
<p>From Electron 2.0 on, developers will see warnings and recommendations printed to the developer console. They only show up when the binary's name is Electron, indicating that a developer is currently looking at the console.</p>
<p>You can force-enable or force-disable these warnings by setting <code>ELECTRON_ENABLE_SECURITY_WARNINGS</code> or <code>ELECTRON_DISABLE_SECURITY_WARNINGS</code> on either <code>process.env</code> or the <code>window</code> object.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="checklist-security-recommendations">Checklist: Security Recommendations<a class="hash-link" href="#checklist-security-recommendations" title="Direct link to heading">​</a>
</h2>
<p>You should at least follow these steps to improve the security of your application:</p>
<ol>
<li><a href="#1-only-load-secure-content">Only load secure content</a></li>
<li><a href="#2-do-not-enable-nodejs-integration-for-remote-content">Disable the Node.js integration in all renderers that display remote content</a></li>
<li><a href="#3-enable-context-isolation-for-remote-content">Enable context isolation in all renderers that display remote content</a></li>
<li><a href="#4-enable-sandboxing">Enable sandboxing</a></li>
<li><a href="#5-handle-session-permission-requests-from-remote-content">Use <code>ses.setPermissionRequestHandler()</code> in all sessions that load remote content</a></li>
<li><a href="#6-do-not-disable-websecurity">Do not disable <code>webSecurity</code></a></li>
<li>
<a href="#7-define-a-content-security-policy">Define a <code>Content-Security-Policy</code></a> and use restrictive rules (i.e. <code>script-src 'self'</code>)</li>
<li><a href="#8-do-not-set-allowrunninginsecurecontent-to-true">Do not set <code>allowRunningInsecureContent</code> to <code>true</code></a></li>
<li><a href="#9-do-not-enable-experimental-features">Do not enable experimental features</a></li>
<li><a href="#10-do-not-use-enableblinkfeatures">Do not use <code>enableBlinkFeatures</code></a></li>
<li><a href="#11-do-not-use-allowpopups"><code>&lt;webview&gt;</code>: Do not use <code>allowpopups</code></a></li>
<li><a href="#12-verify-webview-options-before-creation"><code>&lt;webview&gt;</code>: Verify options and params</a></li>
<li><a href="#13-disable-or-limit-navigation">Disable or limit navigation</a></li>
<li><a href="#14-disable-or-limit-creation-of-new-windows">Disable or limit creation of new windows</a></li>
<li><a href="#15-do-not-use-openexternal-with-untrusted-content">Do not use <code>openExternal</code> with untrusted content</a></li>
<li><a href="#16-use-a-current-version-of-electron">Use a current version of Electron</a></li>
</ol>
<p>To automate the detection of misconfigurations and insecure patterns, it is possible to use <a href="https://github.com/doyensec/electronegativity" target="_blank" rel="noopener noreferrer">electronegativity</a>. For additional details on potential weaknesses and implementation bugs when developing applications using Electron, please refer to this <a href="https://doyensec.com/resources/us-17-Carettoni-Electronegativity-A-Study-Of-Electron-Security-wp.pdf" target="_blank" rel="noopener noreferrer">guide for developers and auditors</a></p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="1-only-load-secure-content">1) Only Load Secure Content<a class="hash-link" href="#1-only-load-secure-content" title="Direct link to heading">​</a>
</h2>
<p>Any resources not included with your application should be loaded using a secure protocol like <code>HTTPS</code>. In other words, do not use insecure protocols like <code>HTTP</code>. Similarly, we recommend the use of <code>WSS</code> over <code>WS</code>, <code>FTPS</code> over <code>FTP</code>, and so on.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why">Why?<a class="hash-link" href="#why" title="Direct link to heading">​</a>
</h3>
<p><code>HTTPS</code> has three main benefits:</p>
<p>1) It authenticates the remote server, ensuring your app connects to the correct host instead of an impersonator. 2) It ensures data integrity, asserting that the data was not modified while in transit between your application and the host. 3) It encrypts the traffic between your user and the destination host, making it more difficult to eavesdrop on the information sent between your app and the host.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how">How?<a class="hash-link" href="#how" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">browserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'http://example.com'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">browserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://example.com'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Bad --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">crossorigin</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://example.com/react.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://example.com/style.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Good --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">crossorigin</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://example.com/react.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://example.com/style.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="2-do-not-enable-nodejs-integration-for-remote-content">2) Do not enable Node.js Integration for Remote Content<a class="hash-link" href="#2-do-not-enable-nodejs-integration-for-remote-content" title="Direct link to heading">​</a>
</h2>
<p><em>This recommendation is the default behavior in Electron since 5.0.0.</em></p>
<p>It is paramount that you do not enable Node.js integration in any renderer (<a href="../api/browser-window"><code>BrowserWindow</code></a>, <a href="../api/browser-view"><code>BrowserView</code></a>, or <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a>) that loads remote content. The goal is to limit the powers you grant to remote content, thus making it dramatically more difficult for an attacker to harm your users should they gain the ability to execute JavaScript on your website.</p>
<p>After this, you can grant additional permissions for specific hosts. For example, if you are opening a BrowserWindow pointed at <code>https://example.com/</code>, you can give that website exactly the abilities it needs, but no more.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-1">Why?<a class="hash-link" href="#why-1" title="Direct link to heading">​</a>
</h3>
<p>A cross-site-scripting (XSS) attack is more dangerous if an attacker can jump out of the renderer process and execute code on the user's computer. Cross-site-scripting attacks are fairly common - and while an issue, their power is usually limited to messing with the website that they are executed on. Disabling Node.js integration helps prevent an XSS from being escalated into a so-called "Remote Code Execution" (RCE) attack.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-1">How?<a class="hash-link" href="#how-1" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodeIntegration</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodeIntegrationInWorker</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://example.com'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAppPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://example.com'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Bad --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag attr-name" style="color:#00a4db">nodeIntegration</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">page.html</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Good --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">page.html</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>When disabling Node.js integration, you can still expose APIs to your website that do consume Node.js modules or features. Preload scripts continue to have access to <code>require</code> and other Node.js features, allowing developers to expose a custom API to remotely loaded content.</p>
<p>In the following example preload script, the later loaded website will have access to a <code>window.readConfig()</code> method, but no Node.js features.</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> readFileSync </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'fs'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">readConfig</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'./config.json'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="3-enable-context-isolation-for-remote-content">3) Enable Context Isolation for Remote Content<a class="hash-link" href="#3-enable-context-isolation-for-remote-content" title="Direct link to heading">​</a>
</h2>
<p>Context isolation is an Electron feature that allows developers to run code in preload scripts and in Electron APIs in a dedicated JavaScript context. In practice, that means that global objects like <code>Array.prototype.push</code> or <code>JSON.parse</code> cannot be modified by scripts running in the renderer process.</p>
<p>Electron uses the same technology as Chromium's <a href="https://developer.chrome.com/extensions/content_scripts#execution-environment" target="_blank" rel="noopener noreferrer">Content Scripts</a> to enable this behavior.</p>
<p>Even when <code>nodeIntegration: false</code> is used, to truly enforce strong isolation and prevent the use of Node primitives <code>contextIsolation</code> <strong>must</strong> also be used.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why--how">Why &amp; How?<a class="hash-link" href="#why--how" title="Direct link to heading">​</a>
</h3>
<p>For more information on what <code>contextIsolation</code> is and how to enable it please see our dedicated <a href="context-isolation">Context Isolation</a> document.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="4-enable-sandboxing">4) Enable Sandboxing<a class="hash-link" href="#4-enable-sandboxing" title="Direct link to heading">​</a>
</h2>
<p><a href="sandbox">Sandboxing</a> is a Chromium feature that uses the operating system to significantly limit what renderer processes have access to. You should enable the sandbox in all renderers. Loading, reading or processing any untrusted content in an unsandboxed process, including the main process, is not advised.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-2">How?<a class="hash-link" href="#how-2" title="Direct link to heading">​</a>
</h3>
<p>When creating a window, pass the <code>sandbox: true</code> option in <code>webPreferences</code>:</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> win </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sandbox</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="5-handle-session-permission-requests-from-remote-content">5) Handle Session Permission Requests From Remote Content<a class="hash-link" href="#5-handle-session-permission-requests-from-remote-content" title="Direct link to heading">​</a>
</h2>
<p>You may have seen permission requests while using Chrome: They pop up whenever the website attempts to use a feature that the user has to manually approve ( like notifications).</p>
<p>The API is based on the <a href="https://developer.chrome.com/extensions/permissions" target="_blank" rel="noopener noreferrer">Chromium permissions API</a> and implements the same types of permissions.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-2">Why?<a class="hash-link" href="#why-2" title="Direct link to heading">​</a>
</h3>
<p>By default, Electron will automatically approve all permission requests unless the developer has manually configured a custom handler. While a solid default, security-conscious developers might want to assume the very opposite.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-3">How?<a class="hash-link" href="#how-3" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> session </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fromPartition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'some-partition'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setPermissionRequestHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">webContents</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> permission</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">permission </span><span class="token operator" style="color:#393A34">===</span><span class="token string" style="color:#e3116c">'notifications'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Approves the permissions request</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Verify URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://example.com/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Denies the permissions request</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="6-do-not-disable-websecurity">6) Do Not Disable WebSecurity<a class="hash-link" href="#6-do-not-disable-websecurity" title="Direct link to heading">​</a>
</h2>
<p><em>Recommendation is Electron's default</em></p>
<p>You may have already guessed that disabling the <code>webSecurity</code> property on a renderer process (<a href="../api/browser-window"><code>BrowserWindow</code></a>, <a href="../api/browser-view"><code>BrowserView</code></a>, or <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a>) disables crucial security features.</p>
<p>Do not disable <code>webSecurity</code> in production applications.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-3">Why?<a class="hash-link" href="#why-3" title="Direct link to heading">​</a>
</h3>
<p>Disabling <code>webSecurity</code> will disable the same-origin policy and set <code>allowRunningInsecureContent</code> property to <code>true</code>. In other words, it allows the execution of insecure code from different domains.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-4">How?<a class="hash-link" href="#how-4" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    webSecurity</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">false</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Bad --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag attr-name" style="color:#00a4db">disablewebsecurity</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">page.html</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Good --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">page.html</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="7-define-a-content-security-policy">7) Define a Content Security Policy<a class="hash-link" href="#7-define-a-content-security-policy" title="Direct link to heading">​</a>
</h2>
<p>A Content Security Policy (CSP) is an additional layer of protection against cross-site-scripting attacks and data injection attacks. We recommend that they be enabled by any website you load inside Electron.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-4">Why?<a class="hash-link" href="#why-4" title="Direct link to heading">​</a>
</h3>
<p>CSP allows the server serving content to restrict and control the resources Electron can load for that given web page. <code>https://example.com</code> should be allowed to load scripts from the origins you defined while scripts from <code>https://evil.attacker.com</code> should not be allowed to run. Defining a CSP is an easy way to improve your application's security.</p>
<p>The following CSP will allow Electron to execute scripts from the current website and from <code>apis.example.com</code>.</p>
<div class="codeBlockContainer_K1bP language-plaintext theme-code-block"><div class="codeBlockContent_hGly plaintext"><pre tabindex="0" class="prism-code language-plaintext codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Security-Policy: '*'</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Security-Policy: script-src 'self' https://apis.example.com</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="csp-http-header">CSP HTTP Header<a class="hash-link" href="#csp-http-header" title="Direct link to heading">​</a>
</h3>
<p>Electron respects the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy" target="_blank" rel="noopener noreferrer"><code>Content-Security-Policy</code> HTTP header</a> which can be set using Electron's <a href="../api/web-request#webrequestonheadersreceivedfilter-listener"><code>webRequest.onHeadersReceived</code></a> handler:</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> session </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">defaultSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">onHeadersReceived</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">details</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    responseHeaders</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">details</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseHeaders</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">'Content-Security-Policy'</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'default-src \'none\''</span><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="csp-meta-tag">CSP Meta Tag<a class="hash-link" href="#csp-meta-tag" title="Direct link to heading">​</a>
</h3>
<p>CSP's preferred delivery mechanism is an HTTP header, however it is not possible to use this method when loading a resource using the <code>file://</code> protocol. It can be useful in some cases, such as using the <code>file://</code> protocol, to set a policy on a page directly in the markup using a <code>&lt;meta&gt;</code> tag:</p>
<div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">none</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="8-do-not-set-allowrunninginsecurecontent-to-true">8) Do Not Set <code>allowRunningInsecureContent</code> to <code>true</code><a class="hash-link" href="#8-do-not-set-allowrunninginsecurecontent-to-true" title="Direct link to heading">​</a>
</h2>
<p><em>Recommendation is Electron's default</em></p>
<p>By default, Electron will not allow websites loaded over <code>HTTPS</code> to load and execute scripts, CSS, or plugins from insecure sources (<code>HTTP</code>). Setting the property <code>allowRunningInsecureContent</code> to <code>true</code> disables that protection.</p>
<p>Loading the initial HTML of a website over <code>HTTPS</code> and attempting to load subsequent resources via <code>HTTP</code> is also known as "mixed content".</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-5">Why?<a class="hash-link" href="#why-5" title="Direct link to heading">​</a>
</h3>
<p>Loading content over <code>HTTPS</code> assures the authenticity and integrity of the loaded resources while encrypting the traffic itself. See the section on <a href="#1-only-load-secure-content">only displaying secure content</a> for more details.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-5">How?<a class="hash-link" href="#how-5" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allowRunningInsecureContent</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="9-do-not-enable-experimental-features">9) Do Not Enable Experimental Features<a class="hash-link" href="#9-do-not-enable-experimental-features" title="Direct link to heading">​</a>
</h2>
<p><em>Recommendation is Electron's default</em></p>
<p>Advanced users of Electron can enable experimental Chromium features using the <code>experimentalFeatures</code> property.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-6">Why?<a class="hash-link" href="#why-6" title="Direct link to heading">​</a>
</h3>
<p>Experimental features are, as the name suggests, experimental and have not been enabled for all Chromium users. Furthermore, their impact on Electron as a whole has likely not been tested.</p>
<p>Legitimate use cases exist, but unless you know what you are doing, you should not enable this property.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-6">How?<a class="hash-link" href="#how-6" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    experimentalFeatures</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="10-do-not-use-enableblinkfeatures">10) Do Not Use <code>enableBlinkFeatures</code><a class="hash-link" href="#10-do-not-use-enableblinkfeatures" title="Direct link to heading">​</a>
</h2>
<p><em>Recommendation is Electron's default</em></p>
<p>Blink is the name of the rendering engine behind Chromium. As with <code>experimentalFeatures</code>, the <code>enableBlinkFeatures</code> property allows developers to enable features that have been disabled by default.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-7">Why?<a class="hash-link" href="#why-7" title="Direct link to heading">​</a>
</h3>
<p>Generally speaking, there are likely good reasons if a feature was not enabled by default. Legitimate use cases for enabling specific features exist. As a developer, you should know exactly why you need to enable a feature, what the ramifications are, and how it impacts the security of your application. Under no circumstances should you enable features speculatively.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-7">How?<a class="hash-link" href="#how-7" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enableBlinkFeatures</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'ExecCommandInJavaScript'</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="11-do-not-use-allowpopups">11) Do Not Use <code>allowpopups</code><a class="hash-link" href="#11-do-not-use-allowpopups" title="Direct link to heading">​</a>
</h2>
<p><em>Recommendation is Electron's default</em></p>
<p>If you are using <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a>, you might need the pages and scripts loaded in your <code>&lt;webview&gt;</code> tag to open new windows. The <code>allowpopups</code> attribute enables them to create new <a href="../api/browser-window"><code>BrowserWindows</code></a> using the <code>window.open()</code> method. <code>&lt;webview&gt;</code> tags are otherwise not allowed to create new windows.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-8">Why?<a class="hash-link" href="#why-8" title="Direct link to heading">​</a>
</h3>
<p>If you do not need popups, you are better off not allowing the creation of new <a href="../api/browser-window"><code>BrowserWindows</code></a> by default. This follows the principle of minimally required access: Don't let a website create new popups unless you know it needs that feature.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-8">How?<a class="hash-link" href="#how-8" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-html theme-code-block"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Bad --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag attr-name" style="color:#00a4db">allowpopups</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">page.html</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Good --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">page.html</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">webview</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="12-verify-webview-options-before-creation">12) Verify WebView Options Before Creation<a class="hash-link" href="#12-verify-webview-options-before-creation" title="Direct link to heading">​</a>
</h2>
<p>A WebView created in a renderer process that does not have Node.js integration enabled will not be able to enable integration itself. However, a WebView will always create an independent renderer process with its own <code>webPreferences</code>.</p>
<p>It is a good idea to control the creation of new <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a> tags from the main process and to verify that their webPreferences do not disable security features.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-9">Why?<a class="hash-link" href="#why-9" title="Direct link to heading">​</a>
</h3>
<p>Since <code>&lt;webview&gt;</code> live in the DOM, they can be created by a script running on your website even if Node.js integration is otherwise disabled.</p>
<p>Electron enables developers to disable various security features that control a renderer process. In most cases, developers do not need to disable any of those features - and you should therefore not allow different configurations for newly created <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a> tags.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-9">How?<a class="hash-link" href="#how-9" title="Direct link to heading">​</a>
</h3>
<p>Before a <a href="../api/webview-tag"><code>&lt;webview&gt;</code></a> tag is attached, Electron will fire the <code>will-attach-webview</code> event on the hosting <code>webContents</code>. Use the event to prevent the creation of <code>webViews</code> with possibly insecure options.</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'web-contents-created'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> contents</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'will-attach-webview'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> webPreferences</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Strip away preload scripts if unused or verify their location is legitimate</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> webPreferences</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">preload</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> webPreferences</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">preloadURL</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Disable Node.js integration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    webPreferences</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">nodeIntegration</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Verify URL being loaded</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">params</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">src</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://example.com/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Again, this list merely minimizes the risk, it does not remove it. If your goal is to display a website, a browser will be a more secure option.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="13-disable-or-limit-navigation">13) Disable or limit navigation<a class="hash-link" href="#13-disable-or-limit-navigation" title="Direct link to heading">​</a>
</h2>
<p>If your app has no need to navigate or only needs to navigate to known pages, it is a good idea to limit navigation outright to that known scope, disallowing any other kinds of navigation.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-10">Why?<a class="hash-link" href="#why-10" title="Direct link to heading">​</a>
</h3>
<p>Navigation is a common attack vector. If an attacker can convince your app to navigate away from its current page, they can possibly force your app to open web sites on the Internet. Even if your <code>webContents</code> are configured to be more secure (like having <code>nodeIntegration</code> disabled or <code>contextIsolation</code> enabled), getting your app to open a random web site will make the work of exploiting your app a lot easier.</p>
<p>A common attack pattern is that the attacker convinces your app's users to interact with the app in such a way that it navigates to one of the attacker's pages. This is usually done via links, plugins, or other user-generated content.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-10">How?<a class="hash-link" href="#how-10" title="Direct link to heading">​</a>
</h3>
<p>If your app has no need for navigation, you can call <code>event.preventDefault()</code> in a <a href="../api/web-contents#event-will-navigate"><code>will-navigate</code></a> handler. If you know which pages your app might navigate to, check the URL in the event handler and only let navigation occur if it matches the URLs you're expecting.</p>
<p>We recommend that you use Node's parser for URLs. Simple string comparisons can sometimes be fooled - a <code>startsWith('https://example.com')</code> test would let <code>https://example.com.attacker.com</code> through.</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token constant" style="color:#36acaa">URL</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'url'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">URL</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'web-contents-created'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> contents</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'will-navigate'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> navigationUrl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> parsedUrl </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">URL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">navigationUrl</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">parsedUrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">origin</span><span class="token operator" style="color:#393A34">!==</span><span class="token string" style="color:#e3116c">'https://example.com'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="14-disable-or-limit-creation-of-new-windows">14) Disable or limit creation of new windows<a class="hash-link" href="#14-disable-or-limit-creation-of-new-windows" title="Direct link to heading">​</a>
</h2>
<p>If you have a known set of windows, it's a good idea to limit the creation of additional windows in your app.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-11">Why?<a class="hash-link" href="#why-11" title="Direct link to heading">​</a>
</h3>
<p>Much like navigation, the creation of new <code>webContents</code> is a common attack vector. Attackers attempt to convince your app to create new windows, frames, or other renderer processes with more privileges than they had before; or with pages opened that they couldn't open before.</p>
<p>If you have no need to create windows in addition to the ones you know you'll need to create, disabling the creation buys you a little bit of extra security at no cost. This is commonly the case for apps that open one <code>BrowserWindow</code> and do not need to open an arbitrary number of additional windows at runtime.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-11">How?<a class="hash-link" href="#how-11" title="Direct link to heading">​</a>
</h3>
<p><a href="../api/web-contents"><code>webContents</code></a> will delegate to its <a href="../api/web-contents#contentssetwindowopenhandlerhandler">window open handler</a> before creating new windows. The handler will receive, amongst other parameters, the <code>url</code> the window was requested to open and the options used to create it. We recommend that you register a handler to monitor the creation of windows, and deny any unexpected window creation.</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> shell </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'web-contents-created'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> contents</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setWindowOpenHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> url </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In this example, we'll ask the operating system</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// to open this event's url in the default browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// See the following item for considerations regarding what</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// URLs should be allowed through to shell.openExternal.</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isSafeForExternalOpen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setImmediate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shell</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">openExternal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> action</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'deny'</span><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="15-do-not-use-openexternal-with-untrusted-content">15) Do not use <code>openExternal</code> with untrusted content<a class="hash-link" href="#15-do-not-use-openexternal-with-untrusted-content" title="Direct link to heading">​</a>
</h2>
<p>Shell's <a href="../api/shell#shellopenexternalurl-options"><code>openExternal</code></a> allows opening a given protocol URI with the desktop's native utilities. On macOS, for instance, this function is similar to the <code>open</code> terminal command utility and will open the specific application based on the URI and filetype association.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-12">Why?<a class="hash-link" href="#why-12" title="Direct link to heading">​</a>
</h3>
<p>Improper use of <a href="../api/shell#shellopenexternalurl-options"><code>openExternal</code></a> can be leveraged to compromise the user's host. When openExternal is used with untrusted content, it can be leveraged to execute arbitrary commands.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="how-12">How?<a class="hash-link" href="#how-12" title="Direct link to heading">​</a>
</h3>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//  Bad</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> shell </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">openExternal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">USER_CONTROLLED_DATA_HERE</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//  Good</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> shell </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">openExternal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://example.com/index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="16-use-a-current-version-of-electron">16) Use a current version of Electron<a class="hash-link" href="#16-use-a-current-version-of-electron" title="Direct link to heading">​</a>
</h2>
<p>You should strive for always using the latest available version of Electron. Whenever a new major version is released, you should attempt to update your app as quickly as possible.</p>
<h3 class="anchor anchorWithStickyNavbar_31ik" id="why-13">Why?<a class="hash-link" href="#why-13" title="Direct link to heading">​</a>
</h3>
<p>An application built with an older version of Electron, Chromium, and Node.js is an easier target than an application that is using more recent versions of those components. Generally speaking, security issues and exploits for older versions of Chromium and Node.js are more widely available.</p>
<p>Both Chromium and Node.js are impressive feats of engineering built by thousands of talented developers. Given their popularity, their security is carefully tested and analyzed by equally skilled security researchers. Many of those researchers <a href="https://en.wikipedia.org/wiki/Responsible_disclosure" target="_blank" rel="noopener noreferrer">disclose vulnerabilities responsibly</a>, which generally means that researchers will give Chromium and Node.js some time to fix issues before publishing them. Your application will be more secure if it is running a recent version of Electron (and thus, Chromium and Node.js) for which potential security issues are not as widely known.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/tutorial/security" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/tutorial/security</a>
  </p>
</div>
