<h1>Inter-Process Communication</h1>
<p>Inter-process communication (IPC) is a key part of building feature-rich desktop applications in Electron. Because the main and renderer processes have different responsibilities in Electron's process model, IPC is the only way to perform many common tasks, such as calling a native API from your UI or triggering changes in your web contents from native menus.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipc-channels">IPC channels<a class="hash-link" href="#ipc-channels" title="Direct link to heading">​</a>
</h2>
<p>In Electron, processes communicate by passing messages through developer-defined "channels" with the <a href="../api/ipc-main"><code>ipcMain</code></a> and <a href="../api/ipc-renderer"><code>ipcRenderer</code></a> modules. These channels are <strong>arbitrary</strong> (you can name them anything you want) and <strong>bidirectional</strong> (you can use the same channel name for both modules).</p>
<p>In this guide, we'll be going over some fundamental IPC patterns with concrete examples that you can use as a reference for your app code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-context-isolated-processes">Understanding context-isolated processes<a class="hash-link" href="#understanding-context-isolated-processes" title="Direct link to heading">​</a>
</h2>
<p>Before proceeding to implementation details, you should be familiar with the idea of using a <a href="process-model#preload-scripts">preload script</a> to import Node.js and Electron modules in a context-isolated renderer process.</p>
<ul>
<li>For a full overview of Electron's process model, you can read the <a href="process-model">process model docs</a>.</li>
<li>For a primer into exposing APIs from your preload script using the <code>contextBridge</code> module, check out the <a href="context-isolation">context isolation tutorial</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-1-renderer-to-main-one-way">Pattern 1: Renderer to main (one-way)<a class="hash-link" href="#pattern-1-renderer-to-main-one-way" title="Direct link to heading">​</a>
</h2>
<p>To fire a one-way IPC message from a renderer process to the main process, you can use the <a href="../api/ipc-renderer"><code>ipcRenderer.send</code></a> API to send a message that is then received by the <a href="../api/ipc-main"><code>ipcMain.on</code></a> API.</p>
<p>You usually use this pattern to call a main process API from your web contents. We'll demonstrate this pattern by creating a simple app that can programmatically change its window title.</p>
<p>For this demo, you'll need to add code to your main process, your renderer process, and a preload script. The full code is below, but we'll be explaining each file individually in the following sections.</p>
<div class="editorWindow_ZQWz">
<div class="editorWindowHeader_GqG7">

<a class="editorTitle_buME" href="https://github.com/electron/electron/tree/v20.0.1/docs/fiddles/ipc/pattern-1">docs/fiddles/ipc/pattern-1 (20.0.1)</a><a target="_blank" class="button button--primary button--md" href="https://fiddle.electronjs.org/launch?target=electron/v20.0.1/docs/fiddles/ipc/pattern-1" rel="noreferrer">Open in Fiddle</a>
</div>
<div class="editorWindowBody_R11m"><div class="tabs-container tabList__CuJ">
<ul role="tablist" aria-orientation="horizontal" class="tabs">
<li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">main.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">preload.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">index.html</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">renderer.js</li>
</ul>
<div class="margin-top--md">
<div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcMain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'set-title'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> webContents </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sender</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> win </span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fromWebContents</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">webContents</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    win</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">whenReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'activate'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAllWindows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token operator" style="color:#393A34">===</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'window-all-closed'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">platform</span><span class="token operator" style="color:#393A34">!==</span><span class="token string" style="color:#e3116c">'darwin'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contextBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contextBridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">exposeInMainWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electronAPI'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">setTitle</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'set-title'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">; script-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Hello World!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Title: </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">title</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">btn</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">button</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Set</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">./renderer.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> setButton </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'btn'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> titleInput </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'title'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'click'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> titleInput</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre>

</div></div></div>
</div>
</div></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-listen-for-events-with-ipcmainon">1. Listen for events with <code>ipcMain.on</code><a class="hash-link" href="#1-listen-for-events-with-ipcmainon" title="Direct link to heading">​</a>
</h3>
<p>In the main process, set an IPC listener on the <code>set-title</code> channel with the <code>ipcMain.on</code> API:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcMain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">handleSetTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> webContents </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sender</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> win </span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fromWebContents</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">webContents</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  win</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">whenReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'set-title'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSetTitle</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span></code></pre>

</div>
</div>
<p>The above <code>handleSetTitle</code> callback has two parameters: an <a href="../api/structures/ipc-main-event">IpcMainEvent</a> structure and a <code>title</code> string. Whenever a message comes through the <code>set-title</code> channel, this function will find the BrowserWindow instance attached to the message sender and use the <code>win.setTitle</code> API on it.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>Make sure you're loading the <code>index.html</code> and <code>preload.js</code> entry points for the following steps!</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-expose-ipcrenderersend-via-preload">2. Expose <code>ipcRenderer.send</code> via preload<a class="hash-link" href="#2-expose-ipcrenderersend-via-preload" title="Direct link to heading">​</a>
</h3>
<p>To send messages to the listener created above, you can use the <code>ipcRenderer.send</code> API. By default, the renderer process has no Node.js or Electron module access. As an app developer, you need to choose which APIs to expose from your preload script using the <code>contextBridge</code> API.</p>
<p>In your preload script, add the following code, which will expose a global <code>window.electronAPI</code> variable to your renderer process.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contextBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contextBridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">exposeInMainWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electronAPI'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">setTitle</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'set-title'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>At this point, you'll be able to use the <code>window.electronAPI.setTitle()</code> function in the renderer process.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
Security warning</div>
<div class="admonitionContent_S0QG"><p>We don't directly expose the whole <code>ipcRenderer.send</code> API for <a href="context-isolation#security-considerations">security reasons</a>. Make sure to limit the renderer's access to Electron APIs as much as possible.</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-the-renderer-process-ui">3. Build the renderer process UI<a class="hash-link" href="#3-build-the-renderer-process-ui" title="Direct link to heading">​</a>
</h3>
<p>In our BrowserWindow's loaded HTML file, add a basic user interface consisting of a text input and a button:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">index.html</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">; script-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Hello World!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Title: </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">title</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">btn</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">button</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Set</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">./renderer.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre>

</div>
</div>
<p>To make these elements interactive, we'll be adding a few lines of code in the imported <code>renderer.js</code> file that leverages the <code>window.electronAPI</code> functionality exposed from the preload script:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> setButton </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'btn'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> titleInput </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'title'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'click'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> titleInput</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setTitle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre>

</div>
</div>
<p>At this point, your demo should be fully functional. Try using the input field and see what happens to your BrowserWindow title!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-2-renderer-to-main-two-way">Pattern 2: Renderer to main (two-way)<a class="hash-link" href="#pattern-2-renderer-to-main-two-way" title="Direct link to heading">​</a>
</h2>
<p>A common application for two-way IPC is calling a main process module from your renderer process code and waiting for a result. This can be done by using <a href="../api/ipc-renderer#ipcrendererinvokechannel-args"><code>ipcRenderer.invoke</code></a> paired with <a href="../api/ipc-main#ipcmainhandlechannel-listener"><code>ipcMain.handle</code></a>.</p>
<p>In the following example, we'll be opening a native file dialog from the renderer process and returning the selected file's path.</p>
<p>For this demo, you'll need to add code to your main process, your renderer process, and a preload script. The full code is below, but we'll be explaining each file individually in the following sections.</p>
<div class="editorWindow_ZQWz">
<div class="editorWindowHeader_GqG7">

<a class="editorTitle_buME" href="https://github.com/electron/electron/tree/v20.0.1/docs/fiddles/ipc/pattern-2">docs/fiddles/ipc/pattern-2 (20.0.1)</a><a target="_blank" class="button button--primary button--md" href="https://fiddle.electronjs.org/launch?target=electron/v20.0.1/docs/fiddles/ipc/pattern-2" rel="noreferrer">Open in Fiddle</a>
</div>
<div class="editorWindowBody_R11m"><div class="tabs-container tabList__CuJ">
<ul role="tablist" aria-orientation="horizontal" class="tabs">
<li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">main.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">preload.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">index.html</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">renderer.js</li>
</ul>
<div class="margin-top--md">
<div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcMain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dialog</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">handleFileOpen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> canceled</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filePaths </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> dialog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">showOpenDialog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">canceled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> filePaths</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">whenReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">handle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'dialog:openFile'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleFileOpen</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'activate'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAllWindows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token operator" style="color:#393A34">===</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'window-all-closed'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">platform</span><span class="token operator" style="color:#393A34">!==</span><span class="token string" style="color:#e3116c">'darwin'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contextBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contextBridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">exposeInMainWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electronAPI'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">openFile</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">invoke</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'dialog:openFile'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">; script-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Dialog</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">button</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">btn</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Open a File</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    File path: </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">filePath</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">./renderer.js</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> btn </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'btn'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePathElement </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'filePath'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">btn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'click'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePath </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">openFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filePathElement</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> filePath</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
</div>
</div></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-listen-for-events-with-ipcmainhandle">1. Listen for events with <code>ipcMain.handle</code><a class="hash-link" href="#1-listen-for-events-with-ipcmainhandle" title="Direct link to heading">​</a>
</h3>
<p>In the main process, we'll be creating a <code>handleFileOpen()</code> function that calls <code>dialog.showOpenDialog</code> and returns the value of the file path selected by the user. This function is used as a callback whenever an <code>ipcRender.invoke</code> message is sent through the <code>dialog:openFile</code> channel from the renderer process. The return value is then returned as a Promise to the original <code>invoke</code> call.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
A word on error handling</div>
<div class="admonitionContent_S0QG"><p>Errors thrown through <code>handle</code> in the main process are not transparent as they are serialized and only the <code>message</code> property from the original error is provided to the renderer process. Please refer to <a href="https://github.com/electron/electron/issues/24427" target="_blank" rel="noopener noreferrer">#24427</a> for details.</p></div>
</div>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dialog</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcMain </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">handleFileOpen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> canceled</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filePaths </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> dialog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">showOpenDialog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">canceled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> filePaths</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">whenReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">handle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'dialog:openFile'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleFileOpen</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span></code></pre>

</div>
</div>
<div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
<div class="admonitionHeading_tbUL">
on channel names</div>
<div class="admonitionContent_S0QG"><p>The <code>dialog:</code> prefix on the IPC channel name has no effect on the code. It only serves as a namespace that helps with code readability.</p></div>
</div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>Make sure you're loading the <code>index.html</code> and <code>preload.js</code> entry points for the following steps!</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-expose-ipcrendererinvoke-via-preload">2. Expose <code>ipcRenderer.invoke</code> via preload<a class="hash-link" href="#2-expose-ipcrendererinvoke-via-preload" title="Direct link to heading">​</a>
</h3>
<p>In the preload script, we expose a one-line <code>openFile</code> function that calls and returns the value of <code>ipcRenderer.invoke('dialog:openFile')</code>. We'll be using this API in the next step to call the native dialog from our renderer's user interface.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contextBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contextBridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">exposeInMainWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electronAPI'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">openFile</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">invoke</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'dialog:openFile'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
Security warning</div>
<div class="admonitionContent_S0QG"><p>We don't directly expose the whole <code>ipcRenderer.invoke</code> API for <a href="context-isolation#security-considerations">security reasons</a>. Make sure to limit the renderer's access to Electron APIs as much as possible.</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-the-renderer-process-ui-1">3. Build the renderer process UI<a class="hash-link" href="#3-build-the-renderer-process-ui-1" title="Direct link to heading">​</a>
</h3>
<p>Finally, let's build the HTML file that we load into our BrowserWindow.</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">index.html</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">; script-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Dialog</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">button</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">btn</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Open a File</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    File path: </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">filePath</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">./renderer.js</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre>

</div>
</div>
<p>The UI consists of a single <code>#btn</code> button element that will be used to trigger our preload API, and a <code>#filePath</code> element that will be used to display the path of the selected file. Making these pieces work will take a few lines of code in the renderer process script:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> btn </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'btn'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePathElement </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'filePath'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">btn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'click'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePath </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">openFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filePathElement</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> filePath</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>In the above snippet, we listen for clicks on the <code>#btn</code> button, and call our <code>window.electronAPI.openFile()</code> API to activate the native Open File dialog. We then display the selected file path in the <code>#filePath</code> element.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="note-legacy-approaches">Note: legacy approaches<a class="hash-link" href="#note-legacy-approaches" title="Direct link to heading">​</a>
</h3>
<p>The <code>ipcRenderer.invoke</code> API was added in Electron 7 as a developer-friendly way to tackle two-way IPC from the renderer process. However, there exist a couple alternative approaches to this IPC pattern.</p>
<div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9">
<div class="admonitionHeading_tbUL">
Avoid legacy approaches if possible</div>
<div class="admonitionContent_S0QG"><p>We recommend using <code>ipcRenderer.invoke</code> whenever possible. The following two-way renderer-to-main patterns are documented for historical purposes.</p></div>
</div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>For the following examples, we're calling <code>ipcRenderer</code> directly from the preload script to keep the code samples small.</p></div>
</div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-ipcrenderersend">Using <code>ipcRenderer.send</code><a class="hash-link" href="#using-ipcrenderersend" title="Direct link to heading">​</a>
</h4>
<p>The <code>ipcRenderer.send</code> API that we used for single-way communication can also be leveraged to perform two-way communication. This was the recommended way for asynchronous two-way communication via IPC prior to Electron 7.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// You can also put expose this code to the renderer</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// process with the `contextBridge` API</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'asynchronous-reply'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">// prints "pong" in the DevTools console</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'asynchronous-message'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'ping'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'asynchronous-message'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">// prints "ping" in the Node console</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// works like `send`, but returning a message back</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// to the renderer that sent the original message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">reply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'asynchronous-reply'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'pong'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>There are a couple downsides to this approach:</p>
<ul>
<li>You need to set up a second <code>ipcRenderer.on</code> listener to handle the response in the renderer process. With <code>invoke</code>, you get the response value returned as a Promise to the original API call.</li>
<li>There's no obvious way to pair the <code>asynchronous-reply</code> message to the original <code>asynchronous-message</code> one. If you have very frequent messages going back and forth through these channels, you would need to add additional app code to track each call and response individually.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-ipcrenderersendsync">Using <code>ipcRenderer.sendSync</code><a class="hash-link" href="#using-ipcrenderersendsync" title="Direct link to heading">​</a>
</h4>
<p>The <code>ipcRenderer.sendSync</code> API sends a message to the main process and waits <em>synchronously</em> for a response.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ipcMain </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'synchronous-message'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">// prints "ping" in the Node console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">returnValue</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'pong'</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// You can also put expose this code to the renderer</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// process with the `contextBridge` API</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'synchronous-message'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'ping'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">// prints "pong" in the DevTools console</span><br></span></code></pre>

</div>
</div>
<p>The structure of this code is very similar to the <code>invoke</code> model, but we recommend <strong>avoiding this API</strong> for performance reasons. Its synchronous nature means that it'll block the renderer process until a reply is received.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-3-main-to-renderer">Pattern 3: Main to renderer<a class="hash-link" href="#pattern-3-main-to-renderer" title="Direct link to heading">​</a>
</h2>
<p>When sending a message from the main process to a renderer process, you need to specify which renderer is receiving the message. Messages need to be sent to a renderer process via its <a href="../api/web-contents"><code>WebContents</code></a> instance. This WebContents instance contains a <a href="../api/web-contents#contentssendchannel-args"><code>send</code></a> method that can be used in the same way as <code>ipcRenderer.send</code>.</p>
<p>To demonstrate this pattern, we'll be building a number counter controlled by the native operating system menu.</p>
<p>For this demo, you'll need to add code to your main process, your renderer process, and a preload script. The full code is below, but we'll be explaining each file individually in the following sections.</p>
<div class="editorWindow_ZQWz">
<div class="editorWindowHeader_GqG7">

<a class="editorTitle_buME" href="https://github.com/electron/electron/tree/v20.0.1/docs/fiddles/ipc/pattern-3">docs/fiddles/ipc/pattern-3 (20.0.1)</a><a target="_blank" class="button button--primary button--md" href="https://fiddle.electronjs.org/launch?target=electron/v20.0.1/docs/fiddles/ipc/pattern-3" rel="noreferrer">Open in Fiddle</a>
</div>
<div class="editorWindowBody_R11m"><div class="tabs-container tabList__CuJ">
<ul role="tablist" aria-orientation="horizontal" class="tabs">
<li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">main.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">preload.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">index.html</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">renderer.js</li>
</ul>
<div class="margin-top--md">
<div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcMain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> menu </span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">buildFromTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">submenu</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">click</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'Increment'</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">click</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'Decrement'</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setApplicationMenu</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">menu</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Open the DevTools.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">openDevTools</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">whenReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter-value'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">// will print value to Node console</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'activate'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAllWindows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token operator" style="color:#393A34">===</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'window-all-closed'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">platform</span><span class="token operator" style="color:#393A34">!==</span><span class="token string" style="color:#e3116c">'darwin'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contextBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contextBridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">exposeInMainWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electronAPI'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">handleCounter</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">; script-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Menu Counter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Current value: </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">counter</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">./renderer.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">handleCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">=</span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sender</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter-value'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newValue</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div></div>
</div>
</div></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-send-messages-with-the-webcontents-module">1. Send messages with the <code>webContents</code> module<a class="hash-link" href="#1-send-messages-with-the-webcontents-module" title="Direct link to heading">​</a>
</h3>
<p>For this demo, we'll need to first build a custom menu in the main process using Electron's <code>Menu</code> module that uses the <code>webContents.send</code> API to send an IPC message from the main process to the target renderer.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcMain</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token function" style="color:#d73a49">createWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mainWindow </span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">new</span><span class="token class-name">BrowserWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">webPreferences</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">preload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'preload.js'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> menu </span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">buildFromTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">submenu</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">click</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'Increment'</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">click</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">label</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'Decrement'</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setApplicationMenu</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">menu</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'index.html'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span><span class="token-line" style="color:#393A34"><br></span></code></pre>

</div>
</div>
<p>For the purposes of the tutorial, it's important to note that the <code>click</code> handler sends a message (either <code>1</code> or <code>-1</code>) to the renderer process through the <code>update-counter</code> channel.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">click</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> mainWindow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">webContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>Make sure you're loading the <code>index.html</code> and <code>preload.js</code> entry points for the following steps!</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-expose-ipcrendereron-via-preload">2. Expose <code>ipcRenderer.on</code> via preload<a class="hash-link" href="#2-expose-ipcrendereron-via-preload" title="Direct link to heading">​</a>
</h3>
<p>Like in the previous renderer-to-main example, we use the <code>contextBridge</code> and <code>ipcRenderer</code> modules in the preload script to expose IPC functionality to the renderer process:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contextBridge</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contextBridge</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">exposeInMainWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electronAPI'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">onUpdateCounter</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>After loading the preload script, your renderer process should have access to the <code>window.electronAPI.onUpdateCounter()</code> listener function.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
Security warning</div>
<div class="admonitionContent_S0QG"><p>We don't directly expose the whole <code>ipcRenderer.on</code> API for <a href="context-isolation#security-considerations">security reasons</a>. Make sure to limit the renderer's access to Electron APIs as much as possible.</p></div>
</div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG">
<p>In the case of this minimal example, you can call <code>ipcRenderer.on</code> directly in the preload script rather than exposing it over the context bridge.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ipcRenderer </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'DOMContentLoaded'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ipcRenderer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-counter'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">=</span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>However, this approach has limited flexibility compared to exposing your preload APIs over the context bridge, since your listener can't directly interact with your renderer code.</p>
</div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-the-renderer-process-ui-2">3. Build the renderer process UI<a class="hash-link" href="#3-build-the-renderer-process-ui-2" title="Direct link to heading">​</a>
</h3>
<p>To tie it all together, we'll create an interface in the loaded HTML file that contains a <code>#counter</code> element that we'll use to display the values:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">index.html</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag attr-name" style="color:#00a4db">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">default-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">; script-src </span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value" style="color:#e3116c">self</span><span class="token tag attr-value punctuation" style="color:#393A34">'</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Menu Counter</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    Current value: </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">counter</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">strong</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">./renderer.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre>

</div>
</div>
<p>Finally, to make the values update in the HTML document, we'll add a few lines of DOM manipulation so that the value of the <code>#counter</code> element is updated whenever we fire an <code>update-counter</code> event.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">onUpdateCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">=</span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>In the above code, we're passing in a callback to the <code>window.electronAPI.onUpdateCounter</code> function exposed from our preload script. The second <code>value</code> parameter corresponds to the <code>1</code> or <code>-1</code> we were passing in from the <code>webContents.send</code> call from the native menu.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-returning-a-reply">Optional: returning a reply<a class="hash-link" href="#optional-returning-a-reply" title="Direct link to heading">​</a>
</h3>
<p>There's no equivalent for <code>ipcRenderer.invoke</code> for main-to-renderer IPC. Instead, you can send a reply back to the main process from within the <code>ipcRenderer.on</code> callback.</p>
<p>We can demonstrate this with slight modifications to the code from the previous example. In the renderer process, use the <code>event</code> parameter to send a reply back to the main process through the <code>counter-value</code> channel.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">electronAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">onUpdateCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">=</span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oldValue </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerText</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newValue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sender</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter-value'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newValue</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre>

</div>
</div>
<p>In the main process, listen for <code>counter-value</code> events and handle them appropriately.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipcMain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'counter-value'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">_event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">// will print value to Node console</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//...</span><br></span></code></pre>

</div>
</div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-4-renderer-to-renderer">Pattern 4: Renderer to renderer<a class="hash-link" href="#pattern-4-renderer-to-renderer" title="Direct link to heading">​</a>
</h2>
<p>There's no direct way to send messages between renderer processes in Electron using the <code>ipcMain</code> and <code>ipcRenderer</code> modules. To achieve this, you have two options:</p>
<ul>
<li>Use the main process as a message broker between renderers. This would involve sending a message from one renderer to the main process, which would forward the message to the other renderer.</li>
<li>Pass a <a href="message-ports">MessagePort</a> from the main process to both renderers. This will allow direct communication between renderers after the initial setup.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="object-serialization">Object serialization<a class="hash-link" href="#object-serialization" title="Direct link to heading">​</a>
</h2>
<p>Electron's IPC implementation uses the HTML standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noopener noreferrer">Structured Clone Algorithm</a> to serialize objects passed between processes, meaning that only certain types of objects can be passed through IPC channels.</p>
<p>In particular, DOM objects (e.g. <code>Element</code>, <code>Location</code> and <code>DOMMatrix</code>), Node.js objects backed by C++ classes (e.g. <code>process.env</code>, some members of <code>Stream</code>), and Electron objects backed by C++ classes (e.g. <code>WebContents</code>, <code>BrowserWindow</code> and <code>WebFrame</code>) are not serializable with Structured Clone.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/tutorial/ipc" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/tutorial/ipc</a>
  </p>
</div>
