<h1 id="multithreading">Multithreading</h1> <p>With <a href="https://developer.mozilla.org/en/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a>, it is possible to run JavaScript in OS-level threads.</p> <h2 id="multi-threaded-nodejs">Multi-threaded Node.js</h2> <p>It is possible to use Node.js features in Electron's Web Workers, to do so the <code>nodeIntegrationInWorker</code> option should be set to <code>true</code> in <code>webPreferences</code>.</p> <pre data-language="javascript">const win = new BrowserWindow({
  webPreferences: {
    nodeIntegrationInWorker: true
  }
})
</pre> <p>The <code>nodeIntegrationInWorker</code> can be used independent of <code>nodeIntegration</code>, but <code>sandbox</code> must not be set to <code>true</code>.</p> <h2 id="available-apis">Available APIs</h2> <p>All built-in modules of Node.js are supported in Web Workers, and <code>asar</code> archives can still be read with Node.js APIs. However none of Electron's built-in modules can be used in a multi-threaded environment.</p> <h2 id="native-nodejs-modules">Native Node.js modules</h2> <p>Any native Node.js module can be loaded directly in Web Workers, but it is strongly recommended not to do so. Most existing native modules have been written assuming single-threaded environment, using them in Web Workers will lead to crashes and memory corruptions.</p> <p>Note that even if a native Node.js module is thread-safe it's still not safe to load it in a Web Worker because the <code>process.dlopen</code> function is not thread safe.</p> <p>The only way to load a native module safely for now, is to make sure the app loads no native modules after the Web Workers get started.</p> <pre data-language="javascript">process.dlopen = () =&gt; {
  throw new Error('Load native module is not safe')
}
const worker = new Worker('script.js')
</pre><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/tutorial/multithreading" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/tutorial/multithreading</a>
  </p>
</div>
