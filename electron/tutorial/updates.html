<h1>Updating Applications</h1>
<p>There are several ways to update an Electron application. The easiest and officially supported one is taking advantage of the built-in <a href="https://github.com/Squirrel" target="_blank" rel="noopener noreferrer">Squirrel</a> framework and Electron's <a href="../api/auto-updater">autoUpdater</a> module.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="using-updateelectronjsorg">Using <code>update.electronjs.org</code><a class="hash-link" href="#using-updateelectronjsorg" title="Direct link to heading">​</a>
</h2>
<p>The Electron team maintains <a href="https://github.com/electron/update.electronjs.org" target="_blank" rel="noopener noreferrer">update.electronjs.org</a>, a free and open-source webservice that Electron apps can use to self-update. The service is designed for Electron apps that meet the following criteria:</p>
<ul>
<li>App runs on macOS or Windows</li>
<li>App has a public GitHub repository</li>
<li>Builds are published to GitHub Releases</li>
<li>Builds are code-signed</li>
</ul>
<p>The easiest way to use this service is by installing <a href="https://github.com/electron/update-electron-app" target="_blank" rel="noopener noreferrer">update-electron-app</a>, a Node.js module preconfigured for use with update.electronjs.org.</p>
<p>Install the module:</p>
<div class="codeBlockContainer_K1bP language-sh theme-code-block"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">npm install update-electron-app</span><br></span></code></pre></div></div>
<p>Invoke the updater from your app's main process file:</p>
<div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-electron-app'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>By default, this module will check for updates at app startup, then every ten minutes. When an update is found, it will automatically be downloaded in the background. When the download completes, a dialog is displayed allowing the user to restart the app.</p>
<p>If you need to customize your configuration, you can <a href="https://github.com/electron/update-electron-app" target="_blank" rel="noopener noreferrer">pass options to <code>update-electron-app</code></a> or <a href="https://github.com/electron/update.electronjs.org" target="_blank" rel="noopener noreferrer">use the update service directly</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="deploying-an-update-server">Deploying an Update Server<a class="hash-link" href="#deploying-an-update-server" title="Direct link to heading">​</a>
</h2>
<p>If you're developing a private Electron application, or if you're not publishing releases to GitHub Releases, it may be necessary to run your own update server.</p>
<p>Depending on your needs, you can choose from one of these:</p>
<ul>
<li>
<a href="https://github.com/vercel/hazel" target="_blank" rel="noopener noreferrer">Hazel</a> – Update server for private or open-source apps which can be deployed for free on <a href="https://vercel.com" target="_blank" rel="noopener noreferrer">Vercel</a>. It pulls from <a href="https://help.github.com/articles/creating-releases/" target="_blank" rel="noopener noreferrer">GitHub Releases</a> and leverages the power of GitHub's CDN.</li>
<li>
<a href="https://github.com/GitbookIO/nuts" target="_blank" rel="noopener noreferrer">Nuts</a> – Also uses <a href="https://help.github.com/articles/creating-releases/" target="_blank" rel="noopener noreferrer">GitHub Releases</a>, but caches app updates on disk and supports private repositories.</li>
<li>
<a href="https://github.com/ArekSredzki/electron-release-server" target="_blank" rel="noopener noreferrer">electron-release-server</a> – Provides a dashboard for handling releases and does not require releases to originate on GitHub.</li>
<li>
<a href="https://github.com/atlassian/nucleus" target="_blank" rel="noopener noreferrer">Nucleus</a> – A complete update server for Electron apps maintained by Atlassian. Supports multiple applications and channels; uses a static file store to minify server cost.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="implementing-updates-in-your-app">Implementing Updates in Your App<a class="hash-link" href="#implementing-updates-in-your-app" title="Direct link to heading">​</a>
</h2>
<p>Once you've deployed your update server, continue with importing the required modules in your code. The following code might vary for different server software, but it works like described when using <a href="https://github.com/vercel/hazel" target="_blank" rel="noopener noreferrer">Hazel</a>.</p>
<p><strong>Important:</strong> Please ensure that the code below will only be executed in your packaged app, and not in development. You can use <a href="https://github.com/sindresorhus/electron-is-dev" target="_blank" rel="noopener noreferrer">electron-is-dev</a> to check for the environment.</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> autoUpdater</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dialog </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">=</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'electron'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Next, construct the URL of the update server and tell <a href="../api/auto-updater">autoUpdater</a> about it:</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'https://your-deployment-url.com'</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">server</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/update/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">process</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">platform</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">app</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation function" style="color:#d73a49">getVersion</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autoUpdater</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setFeedURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> url </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>As the final step, check for updates. The example below will check every minute:</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  autoUpdater</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">checkForUpdates</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">60000</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Once your application is <a href="application-distribution">packaged</a>, it will receive an update for each new <a href="https://help.github.com/articles/creating-releases/" target="_blank" rel="noopener noreferrer">GitHub Release</a> that you publish.</p>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="applying-updates">Applying Updates<a class="hash-link" href="#applying-updates" title="Direct link to heading">​</a>
</h2>
<p>Now that you've configured the basic update mechanism for your application, you need to ensure that the user will get notified when there's an update. This can be achieved using the autoUpdater API <a href="../api/auto-updater#events">events</a>:</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">autoUpdater</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'update-downloaded'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> releaseNotes</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> releaseName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dialogOpts </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'info'</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buttons</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'Restart'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'Later'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'Application Update'</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">platform</span><span class="token operator" style="color:#393A34">===</span><span class="token string" style="color:#e3116c">'win32'</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> releaseNotes </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> releaseName</span><span class="token punctuation" style="color:#393A34">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    detail</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">'A new version has been downloaded. Restart the application to apply the updates.'</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><br></span><span class="token-line" style="color:#393A34"><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dialog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">showMessageBox</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dialogOpts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">returnValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">returnValue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">response</span><span class="token operator" style="color:#393A34">===</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> autoUpdater</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">quitAndInstall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Also make sure that errors are <a href="../api/auto-updater#event-error">being handled</a>. Here's an example for logging them to <code>stderr</code>:</p>
<div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">autoUpdater</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token parameter">message</span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token punctuation" style="color:#393A34">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'There was a problem updating the application'</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_31ik" id="handling-updates-manually">Handling Updates Manually<a class="hash-link" href="#handling-updates-manually" title="Direct link to heading">​</a>
</h2>
<p>Because the requests made by Auto Update aren't under your direct control, you may find situations that are difficult to handle (such as if the update server is behind authentication). The <code>url</code> field does support files, which means that with some effort, you can sidestep the server-communication aspect of the process. <a href="https://github.com/electron/electron/issues/5020#issuecomment-477636990" target="_blank" rel="noopener noreferrer">Here's an example of how this could work</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.electronjs.org/docs/latest/tutorial/updates" class="_attribution-link" target="_blank">https://www.electronjs.org/docs/latest/tutorial/updates</a>
  </p>
</div>
