      <h1>Closing A Database Connection</h1>  <pre data-language="sql">
int sqlite3_close(sqlite3*);
int sqlite3_close_v2(sqlite3*);
</pre> <p> The sqlite3_close() and sqlite3_close_v2() routines are destructors for the <a href="sqlite3">sqlite3</a> object. Calls to sqlite3_close() and sqlite3_close_v2() return <a href="../rescode#ok">SQLITE_OK</a> if the <a href="sqlite3">sqlite3</a> object is successfully destroyed and all associated resources are deallocated.</p> <p>Ideally, applications should <a href="finalize">finalize</a> all <a href="stmt">prepared statements</a>, <a href="blob_close">close</a> all <a href="blob">BLOB handles</a>, and <a href="backup_finish#sqlite3backupfinish">finish</a> all <a href="backup">sqlite3_backup</a> objects associated with the <a href="sqlite3">sqlite3</a> object prior to attempting to close the object. If the database connection is associated with unfinalized prepared statements, BLOB handlers, and/or unfinished sqlite3_backup objects then sqlite3_close() will leave the database connection open and return <a href="../rescode#busy">SQLITE_BUSY</a>. If sqlite3_close_v2() is called with unfinalized prepared statements, unclosed BLOB handlers, and/or unfinished sqlite3_backups, it returns <a href="../rescode#ok">SQLITE_OK</a> regardless, but instead of deallocating the database connection immediately, it marks the database connection as an unusable "zombie" and makes arrangements to automatically deallocate the database connection after all prepared statements are finalized, all BLOB handles are closed, and all backups have finished. The sqlite3_close_v2() interface is intended for use with host languages that are garbage collected, and where the order in which destructors are called is arbitrary.</p> <p>If an <a href="sqlite3">sqlite3</a> object is destroyed while a transaction is open, the transaction is automatically rolled back.</p> <p>The C parameter to <a href="close">sqlite3_close(C)</a> and <a href="close">sqlite3_close_v2(C)</a> must be either a NULL pointer or an <a href="sqlite3">sqlite3</a> object pointer obtained from <a href="open">sqlite3_open()</a>, <a href="open">sqlite3_open16()</a>, or <a href="open">sqlite3_open_v2()</a>, and not previously closed. Calling sqlite3_close() or sqlite3_close_v2() with a NULL pointer argument is a harmless no-op. </p>
<p>See also lists of <a href="objlist">Objects</a>, <a href="constlist">Constants</a>, and <a href="funclist">Functions</a>.</p> <div class="_attribution">
  <p class="_attribution-p">
    SQLite is in the Public Domain.<br>
    <a href="https://sqlite.org/c3ref/close.html" class="_attribution-link">https://sqlite.org/c3ref/close.html</a>
  </p>
</div>
