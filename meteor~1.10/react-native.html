<p>React Native has grown to be one of the most popular platforms for building native apps, being used by <a href="https://reactnative.dev/showcase" target="_blank" rel="noopener">companies like Tesla, Instagram, and Facebook</a> in production. React Native allows you to write apps in JavaScript that are rendered with native code. It has many of the features that you value when working with Meteor, like instant refresh on save. </p> <p>You can easily integrate your React Native app with Meteor, using the same methods you would on a Meteor + React Web app. The integration supports most Meteor features, including Methods, Pub/Sub, and Password Accounts, and has the same usage as <code>react-meteor-data</code>.</p> <h2 id="getting-started">Getting started with React Native</h2> <p>React Native projects are coded using the same React principles, but have a completely separate codebase from your Meteor project.</p> <p>A collection of NPM packages are being developed to make it easy for you to integrate React Native with Meteor. In order to use React Native with Meteor, you create a React Native app and use the <code>@meteorrn/core</code> package to connect your app to your Meteor server. The <code>@meteorrn/core</code> package contains Meteor, MongoDB, <code>withTracker</code>, Accounts, and more.</p> <p>For most projects, since your native app will display the same data and call the same methods as your Meteor web app, creating a React Native app that connects to your Meteor server does not require any changes to your Meteor codebase.</p> <p>The only time you will need to make changes to your Meteor codebase is to enable certain features that are unique to your native app. For example, if you want to add push notifications to your native app, you will need to create a method on your Meteor app to store the native push tokens for a user.</p> <p>There are two routes for getting started with React Native. You can use “Vanilla” React Native, or you can use <a href="https://expo.io/" target="_blank" rel="noopener">Expo</a>. Expo is a set of tools built around React Native. You can even try out React Native from your web browser using <a href="https://snack.expo.io/" target="_blank" rel="noopener">Expo Snack</a>. You don’t even need to install XCode or Android Studio to start using Expo.</p> <p>Here are the downsides to using Expo:</p> <ul> <li>You cannot add Native Modules that use Native Code (Java, Swift, etc)</li> <li>You cannot use packages that require linking (these are npm modules that include native code, and allow you to acess native features like the camera, push notifications, fingerprint authentication, etc). \</li> <li>Apps that use Expo are much larger then pure React Native apps</li> </ul> <p>Expo does provide some native features (<a href="https://docs.expo.io/versions/latest/" target="_blank" rel="noopener">click here for the full list</a>), but if there is a feature missing that you need, you’ll likely need to use an npm package or your own custom native code.</p> <p>You can “eject” your app from Expo to take advantage of Vanilla React Native features, but ejection cannot be undone easily.</p> <p>The React Native documentation lets you choose between the Expo (“Expo CLI”) and Vanilla React Native (“React Native CLI”) setup instructions. You can read through the installation instructions and decide which option makes more sense for you.</p> <p>Here is the link to the React Native getting started documentation: <a href="https://reactnative.dev/docs/environment-setup" target="_blank" rel="noopener">https://reactnative.dev/docs/environment-setup</a></p> <p>Once you have your environment setup and have your app running on your device or in the emulator, you can proceed to the next step of the guide: “Meteor React Native Installation”</p> <h2 id="installation">Meteor React Native Installation</h2> <p>To install the <code>@meteorrn/core</code> package, run the following command in your React Native project:</p>  <pre class="line-numbers" style><code class="language-clike">npm install --save @meteorrn/core
</code></pre> <p>You also need to confirm you have the package’s peer dependencies installed:</p> <ul> <li>Confirm you have <code>@react-native-community/netinfo</code> installed</li> <li>Confirm you have <code>@react-native-async-storage/async-storage@&gt;=1.8.1</code> installed. If you are using Expo, or otherwise cannot use <code>@react-native-async-storage/async-storage</code>, please see <a href="https://github.com/TheRealNate/meteor-react-native#custom-storage-adapter" target="_blank" rel="noopener">these instructions</a>.</li> </ul> <p>The <code>@meteorrn/core</code> package enables your React Native app to establish a DDP connection with your Meteor server so it can receive data from publications and call server methods. It also provides access to core Meteor client methods like <code>Accounts.createUser</code> and <code>Meteor.loginWithPasword</code>, and allows you to display data in your app with the <code>withTracker</code> method.</p> <p><strong>Note: If your React Native app uses version 0.59 or lower, the @meteorrn/core package contains breaking changes. Use <a href="https://www.npmjs.com/package/react-native-meteor" target="_blank" rel="noopener">react-native-meteor</a> instead.</strong></p> <h2 id="setup">Setup</h2> <p>First, import <code>Meteor</code>, <code>withTracker</code>, and <code>Mongo</code>:</p>  <pre class="line-numbers" style><code class="language-clike">import Meteor, { Mongo, withTracker } from '@meteorrn/core';
</code></pre> <p>Next, you need to connect to your Meteor server. This should typically be at the start of your App.jsx.</p>  <pre class="line-numbers" style><code class="language-clike">Meteor.connect("wss://myapp.meteor.com/websocket");
</code></pre> <p>Define your collections:</p>  <pre class="line-numbers" style><code class="language-clike">const Todos = new Mongo.Collection("todos");
</code></pre> <p>And now you’re ready to start coding.</p> <h2 id="usage">Coding with Meteor React Native</h2> <p>If you’ve used React before, coding with React Native is pretty straightforward. However, instead of components like <code>div</code> and <code>span</code>, we have <code>View</code> and <code>Text</code>. You can learn the fundamentals of React Native <a href="https://reactnative.dev/docs/intro-react" target="_blank" rel="noopener">here</a>.</p> <p>Meteor React Native’s usage is designed to be as close to <code>meteor/react-meteor-data</code> and the Meteor core as possible. It provides a <code>withTracker</code> method. The package also has full support for accounts, including <code>Meteor.loginWithPassword</code>, <code>Meteor.user</code>, <code>Accounts.createUser</code>, <code>Meteor.loggingIn</code>, <code>Accounts.forgotPassword</code>, etc.</p>  <pre class="line-numbers" style><code class="language-clike">const MyAppContainer = withTracker(() =&gt; {
    
    const myTodoTasks = Todos.find({completed:false}).fetch();
    const handle = Meteor.subscribe("myTodos");
    
    return {
        myTodoTasks,
        loading:!handle.ready()
    };
    
})(MyApp);
</code></pre> <p>When rendering small amounts of data, you can use the array map method:</p>  <pre class="line-numbers" style><code class="language-clike">import { View, ScrollView, Text } from 'react-native';

class MyApp extends React.Component {
    render() {
        const { loading, myTodoTasks } = this.props;
        
        if(loading) {
            return &lt;View&gt;&lt;Text&gt;Loading your tasks...&lt;/Text&gt;&lt;/View&gt;
        }
        
        return (
            &lt;ScrollView&gt;
                {!myTodoTasks.length ?
                    &lt;Text&gt;You don't have any tasks&lt;/Text&gt;
                :
                    myTodoTasks.map(task =&gt; (
                        &lt;Text&gt;{task.text}&lt;/Text&gt;
                    ))
                }
            &lt;/ScrollView&gt;
        );
    }
}
</code></pre> <p>If you are rendering a large amounts of data, you should use the <a href="https://reactnative.dev/docs/flatlist" target="_blank" rel="noopener">FlatList</a> component.</p> <h2 id="conclusion">Conclusion</h2> <p><strong>Here are some useful links for futher reading:</strong></p> <p>You can see a list of example components built with <code>MeteorRN</code> <a href="https://github.com/TheRealNate/meteor-react-native/tree/master/examples" target="_blank" rel="noopener">here</a>.</p> <p>You can view the full API docs for <code>MeteorRN</code> on the <a href="https://github.com/TheRealNate/meteor-react-native/blob/master/docs/api.md" target="_blank" rel="noopener">meteor-react-native repo</a></p> <p>You can see the official React Native API docs <a href="https://reactnative.dev/docs/components-and-apis" target="_blank" rel="noopener">here</a></p> <p><a href="https://hackernoon.com/react-native-how-to-setup-your-first-app-a36c450a8a2f" target="_blank" rel="noopener">“How to setup your first app” from HackerNoon</a></p> <p><a href="https://medium.com/wix-engineering/the-full-react-native-layout-cheat-sheet-a4147802405c" target="_blank" rel="noopener">“The Full React Native Layout Cheat Sheet” from WixEngineering</a></p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://guide.meteor.com/react-native.html" class="_attribution-link" target="_blank">https://guide.meteor.com/react-native.html</a>
  </p>
</div>
