<p>This package replaces the <code>http</code> package for HTTP calls. <code>fetch</code> package provides polyfill for the <a href="https://fetch.spec.whatwg.org/" target="_blank" rel="noopener">WHATWG fetch specification</a> for legacy browsers or defaults to the global class which is available in modern browsers and Node. It is recomended that you use this package for compatibility with non-modern browsers.</p> <p>For more information we recommend <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener">reading the MDN articles</a> about it as this article covers only basic usage in Meteor.</p> <h2 id="Usage">Usage</h2>
<h3 id="Installation">
Installation</h3>
<p>To add this package to an existing app, run the following command from your app directory:</p>  <pre class="line-numbers" style><code class="language-bash">meteor add ecmascript
</code></pre> <p>To add the <code>fetch</code> package to an existing package, include the statement <code>api.use('fetch');</code> in the <code>Package.onUse</code> callback in your <code>package.js</code> file:</p>  <pre class="line-numbers" style><code class="language-js">Package.onUse((api) =&gt; {
  api.use('fetch');
});
</code></pre> <h2 id="API">API</h2>
<p>You can import <code>fetch</code>, <code>Headers</code>, <code>Request</code> and <code>Response</code> classes from <code>meteor/fetch</code>.</p>  <pre class="line-numbers" style><code class="language-js">import { fetch, Headers, Request, Response } from 'meteor/fetch';
</code></pre> <p>For the most part though, you will only need to import <code>fetch</code> and <code>Headers</code>.</p>  <pre class="line-numbers" style><code class="language-js">import { Meteor } from 'meteor/meteor';
import { fetch, Headers } from 'meteor/fetch';

async function postData (url, data) {
    const response = await fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        mode: 'cors', // no-cors, *cors, same-origin
        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        credentials: 'same-origin', // include, *same-origin, omit
        headers: new Headers({
            Authorization: 'Bearer my-secret-key',
            'Content-Type': 'application/json'
        }),
        redirect: 'follow', // manual, *follow, error
        referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
        body: JSON.stringify(data) // body data type must match "Content-Type" header
    });
    return response.json();
}

const postDataCall = Meteor.wrapAsync(postData);
const results = postDataCall('https://www.example.org/statsSubmission', { totalUsers: 55 }));
</code></pre><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.meteor.com/packages/fetch" class="_attribution-link" target="_blank">https://docs.meteor.com/packages/fetch</a>
  </p>
</div>
