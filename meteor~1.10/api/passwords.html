<p>The <code>accounts-password</code> package contains a full system for password-based authentication. In addition to the basic username and password-based sign-in process, it also supports email-based sign-in including address verification and password recovery emails.</p> <p>The Meteor server stores passwords using the <a href="http://en.wikipedia.org/wiki/Bcrypt" target="_blank" rel="noopener">bcrypt</a> algorithm. This helps protect against embarrassing password leaks if the server’s database is compromised.</p> <p>To add password support to your application, run this command in your terminal:</p>  <pre class="line-numbers" style><code class="language-bash">meteor add accounts-password
</code></pre> <blockquote> <p>In addition to configuring the <a href="email"><code>email</code></a> package’s <code>MAIL_URL</code>, it is critical that you set proper values (specifically the <code>from</code> address) in <a href="#Accounts-emailTemplates"><code>Accounts.emailTemplates</code></a> to ensure proper delivery of e-mails!</p> </blockquote> <p>You can construct your own user interface using the functions below, or use the <a href="#accountsui"><code>accounts-ui</code> package</a> to include a turn-key user interface for password-based sign-in.</p>  <h2 class="api-heading" id="Accounts-createUser"> <div class="locus"> Anywhere </div> <code>Accounts.createUser(options, [callback])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_client.js#L107" target="_blank"> (accounts-password/password_client.js, line 107) </a> </div> </h2>   <p>Create a new user.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>Client only, optional callback. Called with no arguments on success, or with a single <code>Error</code> argument on failure.</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>username</code> <span class="type">String</span> </dt> <dd> <p>A unique name for this user.</p> </dd> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>The user's email address.</p> </dd> <dt> <code>password</code> <span class="type">String</span> </dt> <dd> <p>The user's password. This is <strong>not</strong> sent in plain text over the wire.</p> </dd> <dt> <code>profile</code> <span class="type">Object</span> </dt> <dd> <p>The user's profile, typically including the <code>name</code> field.</p> </dd> </dl>   <p>On the client, this function logs in as the newly created user on successful completion. On the server, it returns the newly created user id.</p> <p>On the client, you must pass <code>password</code> and at least one of <code>username</code> or <code>email</code> — enough information for the user to be able to log in again later. If there are existing users with a username or email only differing in case, <code>createUser</code> will fail. The callback’s <code>error.reason</code> will be <code>'Username already exists.'</code> or <code>'Email already exists.'</code> In the latter case, the user can then either <a href="accounts#Meteor-loginWithPassword">login</a> or <a href="#Accounts-resetPassword">reset their password</a>.</p> <p>On the server, you do not need to specify <code>password</code>, but the user will not be able to log in until it has a password (eg, set with <a href="#accounts_setpassword"><code>Accounts.setPassword</code></a>). To create an account without a password on the server and still let the user pick their own password, call <code>createUser</code> with the <code>email</code> option and then call <a href="#accounts_sendenrollmentemail"><code>Accounts.sendEnrollmentEmail</code></a>. This will send the user an email with a link to set their initial password.</p> <p>By default the <code>profile</code> option is added directly to the new user document. To override this behavior, use <a href="#accounts_oncreateuser"><code>Accounts.onCreateUser</code></a>.</p> <p>This function is only used for creating users with passwords. The external service login flows do not use this function.</p> <p>Instead of modifying documents in the <a href="#meteor_users"><code>Meteor.users</code></a> collection directly, use these convenience functions which correctly check for case insensitive duplicates before updates.</p>  <h2 class="api-heading" id="Accounts-createUserVerifyingEmail"> <div class="locus"> Server </div> <code>Accounts.createUserVerifyingEmail(options)</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L951" target="_blank"> (accounts-password/password_server.js, line 951) </a> </div> </h2>   <p>Creates an user and sends an email if <code>options.email</code> is informed. Then if the <code>sendVerificationEmail</code> option from the <code>Accounts</code> package is enabled, you'll send a verification email if <code>options.password</code> is informed, otherwise you'll send an enrollment email.</p>  <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>username</code> <span class="type">String</span> </dt> <dd> <p>A unique name for this user.</p> </dd> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>The user's email address.</p> </dd> <dt> <code>password</code> <span class="type">String</span> </dt> <dd> <p>The user's password. This is <strong>not</strong> sent in plain text over the wire.</p> </dd> <dt> <code>profile</code> <span class="type">Object</span> </dt> <dd> <p>The user's profile, typically including the <code>name</code> field.</p> </dd> </dl>    <h2 class="api-heading" id="Accounts-setUsername"> <div class="locus"> Server </div> <code>Accounts.setUsername(userId, newUsername)</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L227" target="_blank"> (accounts-password/password_server.js, line 227) </a> </div> </h2>   <p>Change a user's username. Use this instead of updating the database directly. The operation will fail if there is an existing user with a username only differing in case.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The ID of the user to update.</p> </dd> <dt> <code>newUsername</code> <span class="type">String</span> </dt> <dd> <p>A new username for the user.</p> </dd> </dl>    <h2 class="api-heading" id="Accounts-addEmail"> <div class="locus"> Server </div> <code>Accounts.addEmail(userId, newEmail, [verified])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L781" target="_blank"> (accounts-password/password_server.js, line 781) </a> </div> </h2>   <p>Add an email address for a user. Use this instead of directly updating the database. The operation will fail if there is a different user with an email only differing in case. If the specified user has an existing email only differing in case however, we replace it.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The ID of the user to update.</p> </dd> <dt> <code>newEmail</code> <span class="type">String</span> </dt> <dd> <p>A new email address for the user.</p> </dd> <dt> <code>verified</code> <span class="type">Boolean</span> </dt> <dd> <p>Optional - whether the new email address should be marked as verified. Defaults to false.</p> </dd> </dl>   <p>By default, an email address is added with <code>{ verified: false }</code>. Use <a href="#Accounts-sendVerificationEmail"><code>Accounts.sendVerificationEmail</code></a> to send an email with a link the user can use to verify their email address.</p>  <h2 class="api-heading" id="Accounts-removeEmail"> <div class="locus"> Server </div> <code>Accounts.removeEmail(userId, email)</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L870" target="_blank"> (accounts-password/password_server.js, line 870) </a> </div> </h2>   <p>Remove an email address for a user. Use this instead of updating the database directly.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The ID of the user to update.</p> </dd> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>The email address to remove.</p> </dd> </dl>    <h2 class="api-heading" id="Accounts-verifyEmail"> <div class="locus"> Client </div> <code>Accounts.verifyEmail(token, [callback])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_client.js#L245" target="_blank"> (accounts-password/password_client.js, line 245) </a> </div> </h2>   <p>Marks the user's email address as verified. Logs the user in afterwards.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>token</code> <span class="type">String</span> </dt> <dd> <p>The token retrieved from the verification URL.</p> </dd> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>Optional callback. Called with no arguments on success, or with a single <code>Error</code> argument on failure.</p> </dd> </dl>   <p>This function accepts tokens passed into the callback registered with <a href="#Accounts-onEmailVerificationLink"><code>Accounts.onEmailVerificationLink</code></a>.</p>  <h2 class="api-heading" id="Accounts-findUserByUsername"> <div class="locus"> Server </div> <code>Accounts.findUserByUsername(username, [options])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L121" target="_blank"> (accounts-password/password_server.js, line 121) </a> </div> </h2>   <p>Finds the user with the specified username. First tries to match username case sensitively; if that fails, it tries case insensitively; but if more than one user matches the case insensitive search, it returns null.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>username</code> <span class="type">String</span> </dt> <dd> <p>The username to look for</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>fields</code> <span class="type"><a href="collections#fieldspecifiers">Mongo Field Specifier</a></span> </dt> <dd> <p>Dictionary of fields to return or exclude.</p> </dd> </dl>    <h2 class="api-heading" id="Accounts-findUserByEmail"> <div class="locus"> Server </div> <code>Accounts.findUserByEmail(email, [options])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L136" target="_blank"> (accounts-password/password_server.js, line 136) </a> </div> </h2>   <p>Finds the user with the specified email. First tries to match email case sensitively; if that fails, it tries case insensitively; but if more than one user matches the case insensitive search, it returns null.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>The email address to look for</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>fields</code> <span class="type"><a href="collections#fieldspecifiers">Mongo Field Specifier</a></span> </dt> <dd> <p>Dictionary of fields to return or exclude.</p> </dd> </dl>   <p>Use the below functions to initiate password changes or resets from the server or the client.</p>  <h2 class="api-heading" id="Accounts-changePassword"> <div class="locus"> Client </div> <code>Accounts.changePassword(oldPassword, newPassword, [callback])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_client.js#L142" target="_blank"> (accounts-password/password_client.js, line 142) </a> </div> </h2>   <p>Change the current user's password. Must be logged in.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>oldPassword</code> <span class="type">String</span> </dt> <dd> <p>The user's current password. This is <strong>not</strong> sent in plain text over the wire.</p> </dd> <dt> <code>newPassword</code> <span class="type">String</span> </dt> <dd> <p>A new password for the user. This is <strong>not</strong> sent in plain text over the wire.</p> </dd> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>Optional callback. Called with no arguments on success, or with a single <code>Error</code> argument on failure.</p> </dd> </dl>    <h2 class="api-heading" id="Accounts-forgotPassword"> <div class="locus"> Client </div> <code>Accounts.forgotPassword(options, [callback])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_client.js#L186" target="_blank"> (accounts-password/password_client.js, line 186) </a> </div> </h2>   <p>Request a forgot password email.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>Optional callback. Called with no arguments on success, or with a single <code>Error</code> argument on failure.</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>The email address to send a password reset link.</p> </dd> </dl>   <p>This triggers a call to <a href="#accounts_sendresetpasswordemail"><code>Accounts.sendResetPasswordEmail</code></a> on the server. When the user visits the link in this email, the callback registered with <a href="#Accounts-onResetPasswordLink"><code>Accounts.onResetPasswordLink</code></a> will be called.</p> <p>If you are using the <a href="#accountsui"><code>accounts-ui</code> package</a>, this is handled automatically. Otherwise, it is your responsibility to prompt the user for the new password and call <code>resetPassword</code>.</p>  <h2 class="api-heading" id="Accounts-resetPassword"> <div class="locus"> Client </div> <code>Accounts.resetPassword(token, newPassword, [callback])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_client.js#L213" target="_blank"> (accounts-password/password_client.js, line 213) </a> </div> </h2>   <p>Reset the password for a user using a token received in email. Logs the user in afterwards.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>token</code> <span class="type">String</span> </dt> <dd> <p>The token retrieved from the reset password URL.</p> </dd> <dt> <code>newPassword</code> <span class="type">String</span> </dt> <dd> <p>A new password for the user. This is <strong>not</strong> sent in plain text over the wire.</p> </dd> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>Optional callback. Called with no arguments on success, or with a single <code>Error</code> argument on failure.</p> </dd> </dl>   <p>This function accepts tokens passed into the callbacks registered with <a href="#Accounts-onResetPasswordLink"><code>AccountsClient#onResetPasswordLink</code></a> and <a href="#Accounts-onEnrollmentLink"><code>Accounts.onEnrollmentLink</code></a>.</p>  <h2 class="api-heading" id="Accounts-setPassword"> <div class="locus"> Server </div> <code>Accounts.setPassword(userId, newPassword, [options])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L319" target="_blank"> (accounts-password/password_server.js, line 319) </a> </div> </h2>   <p>Forcibly change the password for a user.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The id of the user to update.</p> </dd> <dt> <code>newPassword</code> <span class="type">String</span> </dt> <dd> <p>A new password for the user.</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>logout</code> <span class="type">Object</span> </dt> <dd> <p>Logout all current connections with this userId (default: true)</p> </dd> </dl>    <h2 class="api-heading" id="Accounts-sendResetPasswordEmail"> <div class="locus"> Server </div> <code>Accounts.sendResetPasswordEmail(userId, [email], [extraTokenData], [extraParams])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L518" target="_blank"> (accounts-password/password_server.js, line 518) </a> </div> </h2>   <p>Send an email with a link the user can use to reset their password.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The id of the user to send email to.</p> </dd> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>Optional. Which address of the user's to send the email to. This address must be in the user's <code>emails</code> list. Defaults to the first email in the list.</p> </dd> <dt> <code>extraTokenData</code> <span class="type">Object</span> </dt> <dd> <p>Optional additional data to be added into the token record.</p> </dd> <dt> <code>extraParams</code> <span class="type">Object</span> </dt> <dd> <p>Optional additional params to be added to the reset url.</p> </dd> </dl>   <p>When the user visits the link in this email, the callback registered with <a href="#Accounts-onResetPasswordLink"><code>AccountsClient#onResetPasswordLink</code></a> will be called.</p> <p>To customize the contents of the email, see <a href="#accounts_emailtemplates"><code>Accounts.emailTemplates</code></a>.</p>  <h2 class="api-heading" id="Accounts-sendEnrollmentEmail"> <div class="locus"> Server </div> <code>Accounts.sendEnrollmentEmail(userId, [email], [extraTokenData], [extraParams])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L548" target="_blank"> (accounts-password/password_server.js, line 548) </a> </div> </h2>   <p>Send an email with a link the user can use to set their initial password.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The id of the user to send email to.</p> </dd> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>Optional. Which address of the user's to send the email to. This address must be in the user's <code>emails</code> list. Defaults to the first email in the list.</p> </dd> <dt> <code>extraTokenData</code> <span class="type">Object</span> </dt> <dd> <p>Optional additional data to be added into the token record.</p> </dd> <dt> <code>extraParams</code> <span class="type">Object</span> </dt> <dd> <p>Optional additional params to be added to the enrollment url.</p> </dd> </dl>   <p>When the user visits the link in this email, the callback registered with <a href="#Accounts-onEnrollmentLink"><code>Accounts.onEnrollmentLink</code></a> will be called.</p> <p>To customize the contents of the email, see <a href="#accounts_emailtemplates"><code>Accounts.emailTemplates</code></a>.</p>  <h2 class="api-heading" id="Accounts-sendVerificationEmail"> <div class="locus"> Server </div> <code>Accounts.sendVerificationEmail(userId, [email], [extraTokenData], [extraParams])</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-password/password_server.js#L697" target="_blank"> (accounts-password/password_server.js, line 697) </a> </div> </h2>   <p>Send an email with a link the user can use verify their email address.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>userId</code> <span class="type">String</span> </dt> <dd> <p>The id of the user to send email to.</p> </dd> <dt> <code>email</code> <span class="type">String</span> </dt> <dd> <p>Optional. Which address of the user's to send the email to. This address must be in the user's <code>emails</code> list. Defaults to the first unverified email in the list.</p> </dd> <dt> <code>extraTokenData</code> <span class="type">Object</span> </dt> <dd> <p>Optional additional data to be added into the token record.</p> </dd> <dt> <code>extraParams</code> <span class="type">Object</span> </dt> <dd> <p>Optional additional params to be added to the verification url.</p> </dd> </dl>   <p>When the user visits the link in this email, the callback registered with <a href="#Accounts-onEmailVerificationLink"><code>Accounts.onEmailVerificationLink</code></a> will be called.</p> <p>To customize the contents of the email, see <a href="#accounts_emailtemplates"><code>Accounts.emailTemplates</code></a>.</p>  <h2 class="api-heading" id="Accounts-onResetPasswordLink"> <div class="locus"> Client </div> <code>Accounts.onResetPasswordLink</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-base/accounts_client.js#L657" target="_blank"> (accounts-base/accounts_client.js, line 657) </a> </div> </h2>   <p>Register a function to call when a reset password link is clicked in an email sent by <a href="#accounts_sendresetpasswordemail"><code>Accounts.sendResetPasswordEmail</code></a>. This function should be called in top-level code, not inside <code>Meteor.startup()</code>.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>The function to call. It is given two arguments:</p> <ol> <li>
<code>token</code>: A password reset token that can be passed to <a href="#accounts_resetpassword"><code>Accounts.resetPassword</code></a>.</li> <li>
<code>done</code>: A function to call when the password reset UI flow is complete. The normal login process is suspended until this function is called, so that the password for user A can be reset even if user B was logged in.</li> </ol> </dd> </dl>    <h2 class="api-heading" id="Accounts-onEnrollmentLink"> <div class="locus"> Client </div> <code>Accounts.onEnrollmentLink</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-base/accounts_client.js#L710" target="_blank"> (accounts-base/accounts_client.js, line 710) </a> </div> </h2>   <p>Register a function to call when an account enrollment link is clicked in an email sent by <a href="#accounts_sendenrollmentemail"><code>Accounts.sendEnrollmentEmail</code></a>. This function should be called in top-level code, not inside <code>Meteor.startup()</code>.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>The function to call. It is given two arguments:</p> <ol> <li>
<code>token</code>: A password reset token that can be passed to <a href="#accounts_resetpassword"><code>Accounts.resetPassword</code></a> to give the newly enrolled account a password.</li> <li>
<code>done</code>: A function to call when the enrollment UI flow is complete. The normal login process is suspended until this function is called, so that user A can be enrolled even if user B was logged in.</li> </ol> </dd> </dl>    <h2 class="api-heading" id="Accounts-onEmailVerificationLink"> <div class="locus"> Client </div> <code>Accounts.onEmailVerificationLink</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-base/accounts_client.js#L683" target="_blank"> (accounts-base/accounts_client.js, line 683) </a> </div> </h2>   <p>Register a function to call when an email verification link is clicked in an email sent by <a href="#accounts_sendverificationemail"><code>Accounts.sendVerificationEmail</code></a>. This function should be called in top-level code, not inside <code>Meteor.startup()</code>.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>The function to call. It is given two arguments:</p> <ol> <li>
<code>token</code>: An email verification token that can be passed to <a href="#accounts_verifyemail"><code>Accounts.verifyEmail</code></a>.</li> <li>
<code>done</code>: A function to call when the email verification UI flow is complete. The normal login process is suspended until this function is called, so that the user can be notified that they are verifying their email before being logged in.</li> </ol> </dd> </dl>    <h2 class="api-heading" id="Accounts-emailTemplates"> <div class="locus"> Server </div> <code>Accounts.emailTemplates</code> <div class="subtext-api"> <code>import { Accounts } from 'meteor/accounts-base'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/accounts-passwordless/email_templates.js#L6" target="_blank"> (accounts-passwordless/email_templates.js, line 6) </a> </div> </h2>   <p>Options to customize emails sent from the Accounts system.</p>    <p>This is an <code>Object</code> with several fields that are used to generate text/html for the emails sent by <code>sendResetPasswordEmail</code>, <code>sendEnrollmentEmail</code>, and <code>sendVerificationEmail</code>.</p> <p>Set the fields of the object by assigning to them:</p> <ul> <li>
<code>from</code>: (<strong>required</strong>) A <code>String</code> with an <a href="http://tools.ietf.org/html/rfc5322" target="_blank" rel="noopener">RFC5322</a> From address. By default, the email is sent from <code>no-reply@example.com</code>. <strong>If you want e-mails to send correctly, this should be changed to your own domain as most e-mail providers will reject mail sent from <code>example.com</code>.</strong>
</li> <li>
<code>siteName</code>: The public name of your application. Defaults to the DNS name of the application (eg: <code>awesome.meteor.com</code>).</li> <li>
<code>headers</code>: An <code>Object</code> for custom email headers as described in <a href="#email_send"><code>Email.send</code></a>.</li> <li>
<code>resetPassword</code>: An <code>Object</code> with the fields:<ul> <li>
<code>from</code>: A <code>Function</code> used to override the <code>from</code> address defined by the <code>emailTemplates.from</code> field.</li> <li>
<code>subject</code>: A <code>Function</code> that takes a user object and returns a <code>String</code> for the subject line of a reset password email.</li> <li>
<code>text</code>: An optional <code>Function</code> that takes a user object and a url, and returns the body text for a reset password email.</li> <li>
<code>html</code>: An optional <code>Function</code> that takes a user object and a url, and returns the body html for a reset password email.</li> </ul> </li> <li>
<code>enrollAccount</code>: Same as <code>resetPassword</code>, but for initial password setup for new accounts.</li> <li>
<code>verifyEmail</code>: Same as <code>resetPassword</code>, but for verifying the users email address.</li> </ul> <p>Example:</p>  <pre class="line-numbers" style><code class="language-js">Accounts.emailTemplates.siteName = 'AwesomeSite';
Accounts.emailTemplates.from = 'AwesomeSite Admin &lt;accounts@example.com&gt;';

Accounts.emailTemplates.enrollAccount.subject = (user) =&gt; {
  return `Welcome to Awesome Town, ${user.profile.name}`;
};

Accounts.emailTemplates.enrollAccount.text = (user, url) =&gt; {
  return 'You have been selected to participate in building a better future!'
    + ' To activate your account, simply click the link below:\n\n'
    + url;
};

Accounts.emailTemplates.resetPassword.from = () =&gt; {
  // Overrides the value set in `Accounts.emailTemplates.from` when resetting
  // passwords.
  return 'AwesomeSite Password Reset &lt;no-reply@example.com&gt;';
};
Accounts.emailTemplates.verifyEmail = {
   subject() {
      return "Activate your account now!";
   },
   text(user, url) {
      return `Hey ${user}! Verify your e-mail by following this link: ${url}`;
   }
};
</code></pre> <h3 id="enabling-2fa">Enable 2FA for this package</h3> <p>You can add 2FA to your login flow by using the package <a href="../packages/accounts-2fa">accounts-2fa</a>. You can find an example showing how this would look like <a href="../packages/accounts-2fa#working-with-accounts-password">here</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.meteor.com/api/passwords.html" class="_attribution-link" target="_blank">https://docs.meteor.com/api/passwords.html</a>
  </p>
</div>
