<h1 class="devsite-page-title">tf.keras.preprocessing.sequence.TimeseriesGenerator</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.keras.preprocessing.sequence.TimeseriesGenerator"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="__getitem__"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="__iter__"> <meta itemprop="property" content="__len__"> <meta itemprop="property" content="get_config"> <meta itemprop="property" content="on_epoch_end"> <meta itemprop="property" content="to_json"> </div>  <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/keras/preprocessing/sequence/TimeseriesGenerator">  TensorFlow 1 version</a> </td> <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/preprocessing/sequence.py#L35-L89">  View source on GitHub </a> </td>
</table>  <h2 id="class_timeseriesgenerator">Class <code translate="no" dir="ltr">TimeseriesGenerator</code>
</h2> <p>Utility class for generating batches of temporal data.</p> <p>Inherits From: <a href="../../utils/sequence"><code translate="no" dir="ltr">Sequence</code></a></p>  <p>This class takes in a sequence of data-points gathered at equal intervals, along with time series parameters such as stride, length of history, etc., to produce batches for training/validation.</p> <h1 id="arguments" class="page-title">Arguments</h1> <pre class="prettyprint" translate="no" dir="ltr" data-language="python">data: Indexable generator (such as list or Numpy array)
    containing consecutive data points (timesteps).
    The data should be at 2D, and axis 0 is expected
    to be the time dimension.
targets: Targets corresponding to timesteps in `data`.
    It should have same length as `data`.
length: Length of the output sequences (in number of timesteps).
sampling_rate: Period between successive individual timesteps
    within sequences. For rate `r`, timesteps
    `data[i]`, `data[i-r]`, ... `data[i - length]`
    are used for create a sample sequence.
stride: Period between successive output sequences.
    For stride `s`, consecutive output samples would
    be centered around `data[i]`, `data[i+s]`, `data[i+2*s]`, etc.
start_index: Data points earlier than `start_index` will not be used
    in the output sequences. This is useful to reserve part of the
    data for test or validation.
end_index: Data points later than `end_index` will not be used
    in the output sequences. This is useful to reserve part of the
    data for test or validation.
shuffle: Whether to shuffle output samples,
    or instead draw them in chronological order.
reverse: Boolean: if `true`, timesteps in each output sample will be
    in reverse chronological order.
batch_size: Number of timeseries samples in each batch
    (except maybe the last one).
</pre> <h1 id="returns" class="page-title">Returns</h1> <pre class="prettyprint" translate="no" dir="ltr" data-language="python">A [Sequence](/utils/#sequence) instance.
</pre> <h1 id="examples" class="page-title">Examples</h1> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">from keras.preprocessing.sequence import TimeseriesGenerator
import numpy as np
data = np.array([[i] for i in range(50)])
targets = np.array([[i] for i in range(50)])
data_gen = TimeseriesGenerator(data, targets,
                               length=10, sampling_rate=2,
                               batch_size=2)
assert len(data_gen) == 20
batch_0 = data_gen[0]
x, y = batch_0
assert np.array_equal(x,
                      np.array([[[0], [2], [4], [6], [8]],
                                [[1], [3], [5], [7], [9]]]))
assert np.array_equal(y,
                      np.array([[10], [11]]))
</pre> <h2 id="__init__"><code translate="no" dir="ltr">__init__</code></h2> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__init__(
    data,
    targets,
    length,
    sampling_rate=1,
    stride=1,
    start_index=0,
    end_index=None,
    shuffle=False,
    reverse=False,
    batch_size=128
)
</pre> <p>Initialize self. See help(type(self)) for accurate signature.</p> <h2 id="methods">Methods</h2> <h3 id="__getitem__"><code translate="no" dir="ltr">__getitem__</code></h3> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__getitem__(index)
</pre> <h3 id="__iter__"><code translate="no" dir="ltr">__iter__</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/utils/data_utils.py#L470-L473">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__iter__()
</pre> <p>Create a generator that iterate over the Sequence.</p> <h3 id="__len__"><code translate="no" dir="ltr">__len__</code></h3> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__len__()
</pre> <h3 id="get_config"><code translate="no" dir="ltr">get_config</code></h3> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">get_config()
</pre> <p>Returns the TimeseriesGenerator configuration as Python dictionary.</p> <h1 id="returns_2" class="page-title">Returns</h1> <pre class="prettyprint" translate="no" dir="ltr" data-language="python">A Python dictionary with the TimeseriesGenerator configuration.
</pre> <h3 id="on_epoch_end"><code translate="no" dir="ltr">on_epoch_end</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/utils/data_utils.py#L465-L468">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">on_epoch_end()
</pre> <p>Method called at the end of every epoch.</p> <h3 id="to_json"><code translate="no" dir="ltr">to_json</code></h3> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">to_json(**kwargs)
</pre> <p>Returns a JSON string containing the timeseries generator configuration. To load a generator from a JSON string, use <code translate="no" dir="ltr">keras.preprocessing.sequence.timeseries_generator_from_json(json_string)</code>.</p> <h1 id="arguments_2" class="page-title">Arguments</h1> <pre class="prettyprint" translate="no" dir="ltr" data-language="python">**kwargs: Additional keyword arguments
    to be passed to `json.dumps()`.
</pre> <h1 id="returns_3" class="page-title">Returns</h1> <pre class="prettyprint" translate="no" dir="ltr" data-language="python">A JSON string containing the tokenizer configuration.
</pre> <h2 id="compat_aliases">Compat aliases</h2> <ul> <li><a href="timeseriesgenerator"><code translate="no" dir="ltr">tf.compat.v1.keras.preprocessing.sequence.TimeseriesGenerator</code></a></li> <li><a href="timeseriesgenerator"><code translate="no" dir="ltr">tf.compat.v2.keras.preprocessing.sequence.TimeseriesGenerator</code></a></li> </ul>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/sequence/TimeseriesGenerator" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/sequence/TimeseriesGenerator</a>
  </p>
</div>
