<h1 class="devsite-page-title">tf.keras.callbacks.ModelCheckpoint</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.keras.callbacks.ModelCheckpoint"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="set_model"> <meta itemprop="property" content="set_params"> </div>   <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/keras/callbacks/ModelCheckpoint">  TensorFlow 1 version</a> </td> <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/callbacks.py#L813-L1166">  View source on GitHub </a> </td>
</table>  <h2 id="class_modelcheckpoint_2">Class <code translate="no" dir="ltr">ModelCheckpoint</code>
</h2> <p>Save the model after every epoch.</p> <p>Inherits From: <a href="callback"><code translate="no" dir="ltr">Callback</code></a></p> <h3 id="used_in_the_guide_2">Used in the guide:</h3> <ul> <li><a href="https://www.tensorflow.org/guide/keras/train_and_evaluate">Train and evaluate with Keras</a></li> </ul> <h3 id="used_in_the_tutorials_2">Used in the tutorials:</h3> <ul> <li><a href="https://www.tensorflow.org/tutorials/keras/save_and_load">Save and load models</a></li> <li><a href="https://www.tensorflow.org/tutorials/distribute/keras">Distributed training with Keras</a></li> <li><a href="https://www.tensorflow.org/tutorials/distribute/multi_worker_with_keras">Multi-worker training with Keras</a></li> <li><a href="https://www.tensorflow.org/tutorials/text/text_generation">Text generation with an RNN</a></li> </ul> <p><code translate="no" dir="ltr">filepath</code> can contain named formatting options, which will be filled the value of <code translate="no" dir="ltr">epoch</code> and keys in <code translate="no" dir="ltr">logs</code> (passed in <code translate="no" dir="ltr">on_epoch_end</code>).</p> <p>For example: if <code translate="no" dir="ltr">filepath</code> is <code translate="no" dir="ltr">weights.{epoch:02d}-{val_loss:.2f}.hdf5</code>, then the model checkpoints will be saved with the epoch number and the validation loss in the filename.</p> <h4 id="arguments_2">Arguments:</h4> <ul> <li>
<b><code translate="no" dir="ltr">filepath</code></b>: string, path to save the model file.</li> <li>
<b><code translate="no" dir="ltr">monitor</code></b>: quantity to monitor.</li> <li>
<b><code translate="no" dir="ltr">verbose</code></b>: verbosity mode, 0 or 1.</li> <li>
<b><code translate="no" dir="ltr">save_best_only</code></b>: if <code translate="no" dir="ltr">save_best_only=True</code>, the latest best model according to the quantity monitored will not be overwritten. If <code translate="no" dir="ltr">filepath</code> doesn't contain formatting options like <code translate="no" dir="ltr">{epoch}</code> then <code translate="no" dir="ltr">filepath</code> will be overwritten by each new better model.</li> <li>
<b><code translate="no" dir="ltr">mode</code></b>: one of {auto, min, max}. If <code translate="no" dir="ltr">save_best_only=True</code>, the decision to overwrite the current save file is made based on either the maximization or the minimization of the monitored quantity. For <code translate="no" dir="ltr">val_acc</code>, this should be <code translate="no" dir="ltr">max</code>, for <code translate="no" dir="ltr">val_loss</code> this should be <code translate="no" dir="ltr">min</code>, etc. In <code translate="no" dir="ltr">auto</code> mode, the direction is automatically inferred from the name of the monitored quantity.</li> <li>
<b><code translate="no" dir="ltr">save_weights_only</code></b>: if True, then only the model's weights will be saved (<code translate="no" dir="ltr">model.save_weights(filepath)</code>), else the full model is saved (<code translate="no" dir="ltr">model.save(filepath)</code>).</li> <li>
<b><code translate="no" dir="ltr">save_freq</code></b>: <code translate="no" dir="ltr">'epoch'</code> or integer. When using <code translate="no" dir="ltr">'epoch'</code>, the callback saves the model after each epoch. When using integer, the callback saves the model at end of a batch at which this many samples have been seen since last saving. Note that if the saving isn't aligned to epochs, the monitored metric may potentially be less reliable (it could reflect as little as 1 batch, since the metrics get reset every epoch). Defaults to <code translate="no" dir="ltr">'epoch'</code>
</li> <li>
<b><code translate="no" dir="ltr">**kwargs</code></b>: Additional arguments for backwards compatibility. Possible key is <code translate="no" dir="ltr">period</code>.</li> </ul> <h2 id="__init__"><code translate="no" dir="ltr">__init__</code></h2> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/callbacks.py#L852-L915">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__init__(
    filepath,
    monitor='val_loss',
    verbose=0,
    save_best_only=False,
    save_weights_only=False,
    mode='auto',
    save_freq='epoch',
    **kwargs
)
</pre> <p>Initialize self. See help(type(self)) for accurate signature.</p> <h2 id="methods_2">Methods</h2> <h3 id="set_model"><code translate="no" dir="ltr">set_model</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/callbacks.py#L917-L923">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">set_model(model)
</pre> <h3 id="set_params"><code translate="no" dir="ltr">set_params</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/keras/callbacks.py#L462-L463">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">set_params(params)
</pre> <h2 id="compat_aliases_2">Compat aliases</h2> <ul> <li><a href="modelcheckpoint"><code translate="no" dir="ltr">tf.compat.v1.keras.callbacks.ModelCheckpoint</code></a></li> <li><a href="modelcheckpoint"><code translate="no" dir="ltr">tf.compat.v2.keras.callbacks.ModelCheckpoint</code></a></li> </ul>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/keras/callbacks/ModelCheckpoint" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/keras/callbacks/ModelCheckpoint</a>
  </p>
</div>
