<h1 class="devsite-page-title">tf.distribute.InputContext</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.distribute.InputContext"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="input_pipeline_id"> <meta itemprop="property" content="num_input_pipelines"> <meta itemprop="property" content="num_replicas_in_sync"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="get_per_replica_batch_size"> </div>  <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/distribute/InputContext">  TensorFlow 1 version</a> </td> <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/distribute/distribute_lib.py#L345-L406">  View source on GitHub </a> </td>
</table>  <h2 id="class_inputcontext">Class <code translate="no" dir="ltr">InputContext</code>
</h2> <p>A class wrapping information needed by an input function.</p>  <p>This is a context class that is passed to the user's input function and contains information about the compute replicas and input pipelines. The number of compute replicas (in sync training) helps compute the local batch size from the desired global batch size for each replica. The input pipeline information can be used to return a different subset of the input in each replica (for e.g. shard the input pipeline, use a different input source etc).</p> <h2 id="__init__"><code translate="no" dir="ltr">__init__</code></h2> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/distribute/distribute_lib.py#L357-L371">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__init__(
    num_input_pipelines=1,
    input_pipeline_id=0,
    num_replicas_in_sync=1
)
</pre> <p>Initializes an InputContext object.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">num_input_pipelines</code></b>: the number of input pipelines in a cluster.</li> <li>
<b><code translate="no" dir="ltr">input_pipeline_id</code></b>: the current input pipeline id, should be an int in [0,<code translate="no" dir="ltr">num_input_pipelines</code>).</li> <li>
<b><code translate="no" dir="ltr">num_replicas_in_sync</code></b>: the number of replicas that are in sync.</li> </ul> <h2 id="properties">Properties</h2> <h3 id="input_pipeline_id"><code translate="no" dir="ltr">input_pipeline_id</code></h3> <p>Returns the input pipeline ID.</p> <h3 id="num_input_pipelines"><code translate="no" dir="ltr">num_input_pipelines</code></h3> <p>Returns the number of input pipelines.</p> <h3 id="num_replicas_in_sync"><code translate="no" dir="ltr">num_replicas_in_sync</code></h3> <p>Returns the number of compute replicas in sync.</p> <h2 id="methods">Methods</h2> <h3 id="get_per_replica_batch_size"><code translate="no" dir="ltr">get_per_replica_batch_size</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/distribute/distribute_lib.py#L388-L406">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">get_per_replica_batch_size(global_batch_size)
</pre> <p>Returns the per-replica batch size.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">global_batch_size</code></b>: the global batch size which should be divisible by <code translate="no" dir="ltr">num_replicas_in_sync</code>.</li> </ul> <h4 id="returns">Returns:</h4> <p>the per-replica batch size.</p> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code translate="no" dir="ltr">ValueError</code></b>: if <code translate="no" dir="ltr">global_batch_size</code> not divisible by <code translate="no" dir="ltr">num_replicas_in_sync</code>.</li> </ul> <h2 id="compat_aliases">Compat aliases</h2> <ul> <li><a href="inputcontext"><code translate="no" dir="ltr">tf.compat.v1.distribute.InputContext</code></a></li> <li><a href="inputcontext"><code translate="no" dir="ltr">tf.compat.v2.distribute.InputContext</code></a></li> </ul>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/distribute/InputContext" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/distribute/InputContext</a>
  </p>
</div>
