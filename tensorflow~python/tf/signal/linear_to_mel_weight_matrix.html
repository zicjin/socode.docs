<h1 class="devsite-page-title">tf.signal.linear_to_mel_weight_matrix</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.signal.linear_to_mel_weight_matrix"> <meta itemprop="path" content="Stable"> </div>   <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/signal/linear_to_mel_weight_matrix">  TensorFlow 1 version</a> </td> <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/ops/signal/mel_ops.py#L92-L210">  View source on GitHub </a> </td>
</table>  <p>Returns a matrix to warp linear scale spectrograms to the <a href="https://en.wikipedia.org/wiki/Mel_scale">mel scale</a>.</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">tf.signal.linear_to_mel_weight_matrix(
    num_mel_bins=20,
    num_spectrogram_bins=129,
    sample_rate=8000,
    lower_edge_hertz=125.0,
    upper_edge_hertz=3800.0,
    dtype=tf.dtypes.float32,
    name=None
)
</pre>  <p>Returns a weight matrix that can be used to re-weight a <code translate="no" dir="ltr">Tensor</code> containing <code translate="no" dir="ltr">num_spectrogram_bins</code> linearly sampled frequency information from <code translate="no" dir="ltr">[0, sample_rate / 2]</code> into <code translate="no" dir="ltr">num_mel_bins</code> frequency information from <code translate="no" dir="ltr">[lower_edge_hertz, upper_edge_hertz]</code> on the <a href="https://en.wikipedia.org/wiki/Mel_scale">mel scale</a>.</p> <p>For example, the returned matrix <code translate="no" dir="ltr">A</code> can be used to right-multiply a spectrogram <code translate="no" dir="ltr">S</code> of shape <code translate="no" dir="ltr">[frames, num_spectrogram_bins]</code> of linear scale spectrum values (e.g. STFT magnitudes) to generate a "mel spectrogram" <code translate="no" dir="ltr">M</code> of shape <code translate="no" dir="ltr">[frames, num_mel_bins]</code>.</p> <pre class="prettyprint" translate="no" dir="ltr" data-language="python"># `S` has shape [frames, num_spectrogram_bins]
# `M` has shape [frames, num_mel_bins]
M = tf.matmul(S, A)
</pre> <p>The matrix can be used with <a href="../tensordot"><code translate="no" dir="ltr">tf.tensordot</code></a> to convert an arbitrary rank <code translate="no" dir="ltr">Tensor</code> of linear-scale spectral bins into the mel scale.</p> <pre class="prettyprint" translate="no" dir="ltr" data-language="python"># S has shape [..., num_spectrogram_bins].
# M has shape [..., num_mel_bins].
M = tf.tensordot(S, A, 1)
# tf.tensordot does not support shape inference for this case yet.
M.set_shape(S.shape[:-1].concatenate(A.shape[-1:]))
</pre> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">num_mel_bins</code></b>: Python int. How many bands in the resulting mel spectrum.</li> <li>
<b><code translate="no" dir="ltr">num_spectrogram_bins</code></b>: An integer <code translate="no" dir="ltr">Tensor</code>. How many bins there are in the source spectrogram data, which is understood to be <code translate="no" dir="ltr">fft_size // 2 + 1</code>, i.e. the spectrogram only contains the nonredundant FFT bins.</li> <li>
<b><code translate="no" dir="ltr">sample_rate</code></b>: An integer or float <code translate="no" dir="ltr">Tensor</code>. Samples per second of the input signal used to create the spectrogram. Used to figure out the frequencies corresponding to each spectrogram bin, which dictates how they are mapped into the mel scale.</li> <li>
<b><code translate="no" dir="ltr">lower_edge_hertz</code></b>: Python float. Lower bound on the frequencies to be included in the mel spectrum. This corresponds to the lower edge of the lowest triangular band.</li> <li>
<b><code translate="no" dir="ltr">upper_edge_hertz</code></b>: Python float. The desired top edge of the highest frequency band.</li> <li>
<b><code translate="no" dir="ltr">dtype</code></b>: The <code translate="no" dir="ltr">DType</code> of the result matrix. Must be a floating point type.</li> <li>
<b><code translate="no" dir="ltr">name</code></b>: An optional name for the operation.</li> </ul> <h4 id="returns_2">Returns:</h4> <p>A <code translate="no" dir="ltr">Tensor</code> of shape <code translate="no" dir="ltr">[num_spectrogram_bins, num_mel_bins]</code>.</p> <h4 id="raises_2">Raises:</h4> <ul> <li>
<b><code translate="no" dir="ltr">ValueError</code></b>: If <code translate="no" dir="ltr">num_mel_bins</code>/<code translate="no" dir="ltr">num_spectrogram_bins</code>/<code translate="no" dir="ltr">sample_rate</code> are not positive, <code translate="no" dir="ltr">lower_edge_hertz</code> is negative, frequency edges are incorrectly ordered, <code translate="no" dir="ltr">upper_edge_hertz</code> is larger than the Nyquist frequency.</li> </ul> <h2 id="compat_aliases_2">Compat aliases</h2> <ul> <li><a href="linear_to_mel_weight_matrix"><code translate="no" dir="ltr">tf.compat.v1.signal.linear_to_mel_weight_matrix</code></a></li> <li><a href="linear_to_mel_weight_matrix"><code translate="no" dir="ltr">tf.compat.v2.signal.linear_to_mel_weight_matrix</code></a></li> </ul>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/signal/linear_to_mel_weight_matrix" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/signal/linear_to_mel_weight_matrix</a>
  </p>
</div>
