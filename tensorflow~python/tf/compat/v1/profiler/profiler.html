<h1 class="devsite-page-title">tf.compat.v1.profiler.Profiler</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.compat.v1.profiler.Profiler"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="add_step"> <meta itemprop="property" content="advise"> <meta itemprop="property" content="profile_graph"> <meta itemprop="property" content="profile_name_scope"> <meta itemprop="property" content="profile_operations"> <meta itemprop="property" content="profile_python"> <meta itemprop="property" content="serialize_to_string"> </div>  <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L126-L306">  View source on GitHub </a> </td>
</table>  <h2 id="class_profiler">Class <code translate="no" dir="ltr">Profiler</code>
</h2> <p>TensorFlow multi-step profiler.</p>  <p>https://github.com/tensorflow/tensorflow/tree/master/tensorflow/core/profiler/README.md</p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">Typical use case:
  # Currently we are only allowed to create 1 profiler per process.
  profiler = Profiler(sess.graph)

  for i in xrange(total_steps):
    if i % 10000 == 0:
      run_meta = tf.compat.v1.RunMetadata()
      _ = sess.run(...,
                   options=tf.compat.v1.RunOptions(
                       trace_level=tf.RunOptions.FULL_TRACE),
                   run_metadata=run_meta)
      profiler.add_step(i, run_meta)

      # Profile the parameters of your model.
      profiler.profile_name_scope(options=(option_builder.ProfileOptionBuilder
          .trainable_variables_parameter()))

      # Or profile the timing of your model operations.
      opts = option_builder.ProfileOptionBuilder.time_and_memory()
      profiler.profile_operations(options=opts)

      # Or you can generate a timeline:
      opts = (option_builder.ProfileOptionBuilder(
              option_builder.ProfileOptionBuilder.time_and_memory())
              .with_step(i)
              .with_timeline_output(filename).build())
      profiler.profile_graph(options=opts)
    else:
      _ = sess.run(...)
  # Auto detect problems and generate advice.
  profiler.advise()
</pre> <h2 id="__init__"><code translate="no" dir="ltr">__init__</code></h2> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L166-L184">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__init__(
    graph=None,
    op_log=None
)
</pre> <p>Constructor.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">graph</code></b>: tf.Graph. If None and eager execution is not enabled, use default graph.</li> <li>
<b><code translate="no" dir="ltr">op_log</code></b>: optional. tensorflow::tfprof::OpLogProto proto. Used to define extra op types.</li> </ul> <h2 id="methods">Methods</h2> <h3 id="add_step"><code translate="no" dir="ltr">add_step</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L189-L205">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">add_step(
    step,
    run_meta
)
</pre> <p>Add statistics of a step.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">step</code></b>: int, An id used to group one or more different <code translate="no" dir="ltr">run_meta</code> together. When profiling with the profile_xxx APIs, user can use the <code translate="no" dir="ltr">step</code> id in the <code translate="no" dir="ltr">options</code> to profile these <code translate="no" dir="ltr">run_meta</code> together.</li> <li>
<b><code translate="no" dir="ltr">run_meta</code></b>: RunMetadata proto that contains statistics of a session run.</li> </ul> <h3 id="advise"><code translate="no" dir="ltr">advise</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L279-L291">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">advise(options)
</pre> <p>Automatically detect problems and generate reports.</p> <h4 id="args_3">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">options</code></b>: A dict of options. See ALL_ADVICE example above.</li> </ul> <h4 id="returns">Returns:</h4> <p>A Advise proto that conains the reports from all checkers.</p> <h3 id="profile_graph"><code translate="no" dir="ltr">profile_graph</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L262-L277">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">profile_graph(options)
</pre> <p>Profile the statistics of graph nodes, organized by dataflow graph.</p> <h4 id="args_4">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">options</code></b>: A dict of options. See core/profiler/g3doc/options.md.</li> </ul> <h4 id="returns_2">Returns:</h4> <p>a GraphNodeProto that records the results.</p> <h3 id="profile_name_scope"><code translate="no" dir="ltr">profile_name_scope</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L245-L260">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">profile_name_scope(options)
</pre> <p>Profile the statistics of graph nodes, organized by name scope.</p> <h4 id="args_5">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">options</code></b>: A dict of options. See core/profiler/g3doc/options.md.</li> </ul> <h4 id="returns_3">Returns:</h4> <p>a GraphNodeProto that records the results.</p> <h3 id="profile_operations"><code translate="no" dir="ltr">profile_operations</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L228-L243">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">profile_operations(options)
</pre> <p>Profile the statistics of the Operation types (e.g. MatMul, Conv2D).</p> <h4 id="args_6">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">options</code></b>: A dict of options. See core/profiler/g3doc/options.md.</li> </ul> <h4 id="returns_4">Returns:</h4> <p>a MultiGraphNodeProto that records the results.</p> <h3 id="profile_python"><code translate="no" dir="ltr">profile_python</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L207-L226">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">profile_python(options)
</pre> <p>Profile the statistics of the Python codes.</p> <p>By default, it shows the call stack from root. To avoid redundant output, you may use options to filter as below options['show_name_regexes'] = ['.<em>my_code.py.</em>']</p> <h4 id="args_7">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">options</code></b>: A dict of options. See core/profiler/g3doc/options.md.</li> </ul> <h4 id="returns_5">Returns:</h4> <p>a MultiGraphNodeProto that records the results.</p> <h3 id="serialize_to_string"><code translate="no" dir="ltr">serialize_to_string</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/profiler/model_analyzer.py#L293-L302">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">serialize_to_string()
</pre> <p>Serialize the ProfileProto to a binary string.</p> <p>Users can write it to file for offline analysis by tfprof commandline or graphical interface.</p> <h4 id="returns_6">Returns:</h4> <p>ProfileProto binary string.</p>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/compat/v1/profiler/Profiler" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/compat/v1/profiler/Profiler</a>
  </p>
</div>
