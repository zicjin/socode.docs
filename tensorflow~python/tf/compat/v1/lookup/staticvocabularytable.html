<h1 class="devsite-page-title">tf.compat.v1.lookup.StaticVocabularyTable</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.compat.v1.lookup.StaticVocabularyTable"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="initializer"> <meta itemprop="property" content="key_dtype"> <meta itemprop="property" content="name"> <meta itemprop="property" content="resource_handle"> <meta itemprop="property" content="value_dtype"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="lookup"> <meta itemprop="property" content="size"> </div>  <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/ops/lookup_ops.py#L1206-L1213">  View source on GitHub </a> </td>
</table>  <h2 id="class_staticvocabularytable">Class <code translate="no" dir="ltr">StaticVocabularyTable</code>
</h2> <p>String to Id table wrapper that assigns out-of-vocabulary keys to buckets.</p> <p>Inherits From: <a href="../../../lookup/staticvocabularytable"><code translate="no" dir="ltr">StaticVocabularyTable</code></a></p>  <p>For example, if an instance of <code translate="no" dir="ltr">StaticVocabularyTable</code> is initialized with a string-to-id initializer that maps:</p> <ul> <li><code translate="no" dir="ltr">emerson -&gt; 0</code></li> <li><code translate="no" dir="ltr">lake -&gt; 1</code></li> <li><code translate="no" dir="ltr">palmer -&gt; 2</code></li> </ul> <p>The <code translate="no" dir="ltr">Vocabulary</code> object will performs the following mapping:</p> <ul> <li><code translate="no" dir="ltr">emerson -&gt; 0</code></li> <li><code translate="no" dir="ltr">lake -&gt; 1</code></li> <li><code translate="no" dir="ltr">palmer -&gt; 2</code></li> <li>
<code translate="no" dir="ltr">&lt;other term&gt; -&gt; bucket_id</code>, where bucket_id will be between <code translate="no" dir="ltr">3</code> and <code translate="no" dir="ltr">3 + num_oov_buckets - 1</code>, calculated by: <code translate="no" dir="ltr">hash(&lt;term&gt;) % num_oov_buckets + vocab_size</code>
</li> </ul> <p>If input_tensor is <code translate="no" dir="ltr">["emerson", "lake", "palmer", "king", "crimson"]</code>, the lookup result is <code translate="no" dir="ltr">[0, 1, 2, 4, 7]</code>.</p> <p>If <code translate="no" dir="ltr">initializer</code> is None, only out-of-vocabulary buckets are used.</p> <h4 id="example_usage">Example usage:</h4> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">num_oov_buckets = 3
input_tensor = tf.constant(["emerson", "lake", "palmer", "king", "crimnson"])
table = tf.lookup.StaticVocabularyTable(
    tf.TextFileIdTableInitializer(filename), num_oov_buckets)
out = table.lookup(input_tensor).
table.init.run()
print(out.eval())
</pre> <p>The hash function used for generating out-of-vocabulary buckets ID is Fingerprint64.</p> <h2 id="__init__"><code translate="no" dir="ltr">__init__</code></h2> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/ops/lookup_ops.py#L1070-L1131">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__init__(
    initializer,
    num_oov_buckets,
    lookup_key_dtype=None,
    name=None
)
</pre> <p>Construct a <code translate="no" dir="ltr">StaticVocabularyTable</code> object.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">initializer</code></b>: A TableInitializerBase object that contains the data used to initialize the table. If None, then we only use out-of-vocab buckets.</li> <li>
<b><code translate="no" dir="ltr">num_oov_buckets</code></b>: Number of buckets to use for out-of-vocabulary keys. Must be greater than zero.</li> <li>
<b><code translate="no" dir="ltr">lookup_key_dtype</code></b>: Data type of keys passed to <code translate="no" dir="ltr">lookup</code>. Defaults to <code translate="no" dir="ltr">initializer.key_dtype</code> if <code translate="no" dir="ltr">initializer</code> is specified, otherwise <a href="../../../../tf#string"><code translate="no" dir="ltr">tf.string</code></a>. Must be string or integer, and must be castable to <code translate="no" dir="ltr">initializer.key_dtype</code>.</li> <li>
<b><code translate="no" dir="ltr">name</code></b>: A name for the operation (optional).</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code translate="no" dir="ltr">ValueError</code></b>: when <code translate="no" dir="ltr">num_oov_buckets</code> is not positive.</li> <li>
<b><code translate="no" dir="ltr">TypeError</code></b>: when lookup_key_dtype or initializer.key_dtype are not integer or string. Also when initializer.value_dtype != int64.</li> </ul> <h2 id="properties">Properties</h2> <h3 id="initializer"><code translate="no" dir="ltr">initializer</code></h3> <h3 id="key_dtype"><code translate="no" dir="ltr">key_dtype</code></h3> <p>The table key dtype.</p> <h3 id="name"><code translate="no" dir="ltr">name</code></h3> <p>The name of the table.</p> <h3 id="resource_handle"><code translate="no" dir="ltr">resource_handle</code></h3> <p>Returns the resource handle associated with this Resource.</p> <h3 id="value_dtype"><code translate="no" dir="ltr">value_dtype</code></h3> <p>The table value dtype.</p> <h2 id="methods">Methods</h2> <h3 id="lookup"><code translate="no" dir="ltr">lookup</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/ops/lookup_ops.py#L1163-L1202">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">lookup(
    keys,
    name=None
)
</pre> <p>Looks up <code translate="no" dir="ltr">keys</code> in the table, outputs the corresponding values.</p> <p>It assigns out-of-vocabulary keys to buckets based in their hashes.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">keys</code></b>: Keys to look up. May be either a <code translate="no" dir="ltr">SparseTensor</code> or dense <code translate="no" dir="ltr">Tensor</code>.</li> <li>
<b><code translate="no" dir="ltr">name</code></b>: Optional name for the op.</li> </ul> <h4 id="returns">Returns:</h4> <p>A <code translate="no" dir="ltr">SparseTensor</code> if keys are sparse, otherwise a dense <code translate="no" dir="ltr">Tensor</code>.</p> <h4 id="raises_2">Raises:</h4> <ul> <li>
<b><code translate="no" dir="ltr">TypeError</code></b>: when <code translate="no" dir="ltr">keys</code> doesn't match the table key data type.</li> </ul> <h3 id="size"><code translate="no" dir="ltr">size</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/r2.1/tensorflow/python/ops/lookup_ops.py#L1154-L1161">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">size(name=None)
</pre> <p>Compute the number of elements in this table.</p>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/compat/v1/lookup/StaticVocabularyTable" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/compat/v1/lookup/StaticVocabularyTable</a>
  </p>
</div>
