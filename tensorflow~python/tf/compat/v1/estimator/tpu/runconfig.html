<h1 class="devsite-page-title">tf.compat.v1.estimator.tpu.RunConfig</h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.compat.v1.estimator.tpu.RunConfig"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="cluster"> <meta itemprop="property" content="cluster_spec"> <meta itemprop="property" content="device_fn"> <meta itemprop="property" content="eval_distribute"> <meta itemprop="property" content="evaluation_master"> <meta itemprop="property" content="experimental_max_worker_delay_secs"> <meta itemprop="property" content="global_id_in_cluster"> <meta itemprop="property" content="is_chief"> <meta itemprop="property" content="keep_checkpoint_every_n_hours"> <meta itemprop="property" content="keep_checkpoint_max"> <meta itemprop="property" content="log_step_count_steps"> <meta itemprop="property" content="master"> <meta itemprop="property" content="model_dir"> <meta itemprop="property" content="num_ps_replicas"> <meta itemprop="property" content="num_worker_replicas"> <meta itemprop="property" content="protocol"> <meta itemprop="property" content="save_checkpoints_secs"> <meta itemprop="property" content="save_checkpoints_steps"> <meta itemprop="property" content="save_summary_steps"> <meta itemprop="property" content="service"> <meta itemprop="property" content="session_config"> <meta itemprop="property" content="session_creation_timeout_secs"> <meta itemprop="property" content="task_id"> <meta itemprop="property" content="task_type"> <meta itemprop="property" content="tf_random_seed"> <meta itemprop="property" content="tpu_config"> <meta itemprop="property" content="train_distribute"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="replace"> </div>  <table class="tfo-notebook-buttons tfo-api" align="left"> <td> <a target="_blank" href="https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/tpu/tpu_config.py">  View source on GitHub </a> </td>
</table>  <h2 id="class_runconfig">Class <code translate="no" dir="ltr">RunConfig</code>
</h2> <p>RunConfig with TPU support.</p> <p>Inherits From: <a href="../../../../estimator/runconfig"><code translate="no" dir="ltr">RunConfig</code></a></p>  <h2 id="__init__"><code translate="no" dir="ltr">__init__</code></h2> <p><a target="_blank" href="https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/tpu/tpu_config.py">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">__init__(
    tpu_config=None,
    evaluation_master=None,
    master=None,
    cluster=None,
    **kwargs
)
</pre> <p>Constructs a RunConfig.</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">tpu_config</code></b>: the TPUConfig that specifies TPU-specific configuration.</li> <li>
<b><code translate="no" dir="ltr">evaluation_master</code></b>: a string. The address of the master to use for eval. Defaults to master if not set.</li> <li>
<b><code translate="no" dir="ltr">master</code></b>: a string. The address of the master to use for training.</li> <li>
<b><code translate="no" dir="ltr">cluster</code></b>: a ClusterResolver</li> <li>
<b><code translate="no" dir="ltr">**kwargs</code></b>: keyword config parameters.</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code translate="no" dir="ltr">ValueError</code></b>: if cluster is not None and the provided session_config has a cluster_def already.</li> </ul> <h2 id="properties">Properties</h2> <h3 id="cluster"><code translate="no" dir="ltr">cluster</code></h3> <h3 id="cluster_spec"><code translate="no" dir="ltr">cluster_spec</code></h3> <h3 id="device_fn"><code translate="no" dir="ltr">device_fn</code></h3> <p>Returns the device_fn.</p> <p>If device_fn is not <code translate="no" dir="ltr">None</code>, it overrides the default device function used in <code translate="no" dir="ltr">Estimator</code>. Otherwise the default one is used.</p> <h3 id="eval_distribute"><code translate="no" dir="ltr">eval_distribute</code></h3> <p>Optional <a href="../../../../distribute/strategy"><code translate="no" dir="ltr">tf.distribute.Strategy</code></a> for evaluation.</p> <h3 id="evaluation_master"><code translate="no" dir="ltr">evaluation_master</code></h3> <h3 id="experimental_max_worker_delay_secs"><code translate="no" dir="ltr">experimental_max_worker_delay_secs</code></h3> <h3 id="global_id_in_cluster"><code translate="no" dir="ltr">global_id_in_cluster</code></h3> <p>The global id in the training cluster.</p> <p>All global ids in the training cluster are assigned from an increasing sequence of consecutive integers. The first id is 0.</p> <blockquote class="note">
<strong>Note:</strong><span> Task id (the property field <code translate="no" dir="ltr">task_id</code>) is tracking the index of the node among all nodes with the SAME task type. For example, given the cluster definition as follows:</span>
</blockquote>
<pre class="prettyprint" translate="no" dir="ltr" data-language="python">cluster = {'chief': ['host0:2222'],
           'ps': ['host1:2222', 'host2:2222'],
           'worker': ['host3:2222', 'host4:2222', 'host5:2222']}
</pre> <p>Nodes with task type <code translate="no" dir="ltr">worker</code> can have id 0, 1, 2. Nodes with task type <code translate="no" dir="ltr">ps</code> can have id, 0, 1. So, <code translate="no" dir="ltr">task_id</code> is not unique, but the pair (<code translate="no" dir="ltr">task_type</code>, <code translate="no" dir="ltr">task_id</code>) can uniquely determine a node in the cluster.</p> <p>Global id, i.e., this field, is tracking the index of the node among ALL nodes in the cluster. It is uniquely assigned. For example, for the cluster spec given above, the global ids are assigned as:</p> <pre class="prettyprint" translate="no" dir="ltr" data-language="python">task_type  | task_id  |  global_id
--------------------------------
chief      | 0        |  0
worker     | 0        |  1
worker     | 1        |  2
worker     | 2        |  3
ps         | 0        |  4
ps         | 1        |  5
</pre> <h4 id="returns">Returns:</h4> <p>An integer id.</p> <h3 id="is_chief"><code translate="no" dir="ltr">is_chief</code></h3> <h3 id="keep_checkpoint_every_n_hours"><code translate="no" dir="ltr">keep_checkpoint_every_n_hours</code></h3> <h3 id="keep_checkpoint_max"><code translate="no" dir="ltr">keep_checkpoint_max</code></h3> <h3 id="log_step_count_steps"><code translate="no" dir="ltr">log_step_count_steps</code></h3> <h3 id="master"><code translate="no" dir="ltr">master</code></h3> <h3 id="model_dir"><code translate="no" dir="ltr">model_dir</code></h3> <h3 id="num_ps_replicas"><code translate="no" dir="ltr">num_ps_replicas</code></h3> <h3 id="num_worker_replicas"><code translate="no" dir="ltr">num_worker_replicas</code></h3> <h3 id="protocol"><code translate="no" dir="ltr">protocol</code></h3> <p>Returns the optional protocol value.</p> <h3 id="save_checkpoints_secs"><code translate="no" dir="ltr">save_checkpoints_secs</code></h3> <h3 id="save_checkpoints_steps"><code translate="no" dir="ltr">save_checkpoints_steps</code></h3> <h3 id="save_summary_steps"><code translate="no" dir="ltr">save_summary_steps</code></h3> <h3 id="service"><code translate="no" dir="ltr">service</code></h3> <p>Returns the platform defined (in TF_CONFIG) service dict.</p> <h3 id="session_config"><code translate="no" dir="ltr">session_config</code></h3> <h3 id="session_creation_timeout_secs"><code translate="no" dir="ltr">session_creation_timeout_secs</code></h3> <h3 id="task_id"><code translate="no" dir="ltr">task_id</code></h3> <h3 id="task_type"><code translate="no" dir="ltr">task_type</code></h3> <h3 id="tf_random_seed"><code translate="no" dir="ltr">tf_random_seed</code></h3> <h3 id="tpu_config"><code translate="no" dir="ltr">tpu_config</code></h3> <h3 id="train_distribute"><code translate="no" dir="ltr">train_distribute</code></h3> <p>Optional <a href="../../../../distribute/strategy"><code translate="no" dir="ltr">tf.distribute.Strategy</code></a> for training.</p> <h2 id="methods">Methods</h2> <h3 id="replace"><code translate="no" dir="ltr">replace</code></h3> <p><a target="_blank" href="https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/tpu/tpu_config.py">View source</a></p> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">replace(**kwargs)
</pre> <p>Returns a new instance of <code translate="no" dir="ltr">RunConfig</code> replacing specified properties.</p> <p>Only the properties in the following list are allowed to be replaced:</p> <ul> <li>
<code translate="no" dir="ltr">model_dir</code>,</li> <li>
<code translate="no" dir="ltr">tf_random_seed</code>,</li> <li>
<code translate="no" dir="ltr">save_summary_steps</code>,</li> <li>
<code translate="no" dir="ltr">save_checkpoints_steps</code>,</li> <li>
<code translate="no" dir="ltr">save_checkpoints_secs</code>,</li> <li>
<code translate="no" dir="ltr">session_config</code>,</li> <li>
<code translate="no" dir="ltr">keep_checkpoint_max</code>,</li> <li>
<code translate="no" dir="ltr">keep_checkpoint_every_n_hours</code>,</li> <li>
<code translate="no" dir="ltr">log_step_count_steps</code>,</li> <li>
<code translate="no" dir="ltr">train_distribute</code>,</li> <li>
<code translate="no" dir="ltr">device_fn</code>,</li> <li>
<code translate="no" dir="ltr">protocol</code>.</li> <li>
<code translate="no" dir="ltr">eval_distribute</code>,</li> <li>
<code translate="no" dir="ltr">experimental_distribute</code>,</li> <li>
<code translate="no" dir="ltr">experimental_max_worker_delay_secs</code>,</li> </ul> <p>In addition, either <code translate="no" dir="ltr">save_checkpoints_steps</code> or <code translate="no" dir="ltr">save_checkpoints_secs</code> can be set (should not be both).</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code translate="no" dir="ltr">**kwargs</code></b>: keyword named properties with new values.</li> </ul> <h4 id="raises_2">Raises:</h4> <ul> <li>
<b><code translate="no" dir="ltr">ValueError</code></b>: If any property name in <code translate="no" dir="ltr">kwargs</code> does not exist or is not allowed to be replaced, or both <code translate="no" dir="ltr">save_checkpoints_steps</code> and <code translate="no" dir="ltr">save_checkpoints_secs</code> are set.</li> </ul> <h4 id="returns_2">Returns:</h4> <p>a new instance of <code translate="no" dir="ltr">RunConfig</code>.</p>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/compat/v1/estimator/tpu/RunConfig" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/compat/v1/estimator/tpu/RunConfig</a>
  </p>
</div>
