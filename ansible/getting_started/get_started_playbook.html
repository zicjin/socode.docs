<section id="creating-a-playbook"> <h1 id="get-started-playbook">Creating a playbook</h1> <p>Playbooks are automation blueprints, in <code>YAML</code> format, that Ansible uses to deploy and configure managed nodes.</p> <dl class="simple"> <dt>Playbook</dt>
<dd>
<p>A list of plays that define the order in which Ansible performs operations, from top to bottom, to achieve an overall goal.</p> </dd> <dt>Play</dt>
<dd>
<p>An ordered list of tasks that maps to managed nodes in an inventory.</p> </dd> <dt>Task</dt>
<dd>
<p>A list of one or more modules that defines the operations that Ansible performs.</p> </dd> <dt>Module</dt>
<dd>
<p>A unit of code or binary that Ansible runs on managed nodes. Ansible modules are grouped in collections with a <a class="reference internal" href="https://docs.ansible.com/ansible/latest/reference_appendices/glossary.html#term-Fully-Qualified-Collection-Name-FQCN"><span class="xref std std-term">Fully Qualified Collection Name (FQCN)</span></a> for each module.</p> </dd> </dl> <p>In the previous section, you used the <code>ansible</code> command to ping hosts in your inventory. Now let’s create a playbook that pings your hosts and also prints a “Hello world” message.</p> <p>Complete the following steps:</p> <ol class="arabic"> <li>Open a terminal window on your control node.</li> <li>Create a new playbook file named <code>playbook.yaml</code> in any directory and open it for editing.</li> <li>
<p>Add the following content to <code>playbook.yaml</code>:</p> <pre data-language="yaml">- name: My first play
  hosts: virtualmachines
  tasks:
   - name: Ping my hosts
     ansible.builtin.ping:
   - name: Print message
     ansible.builtin.debug:
       msg: Hello world
</pre> </li> <li>
<p>Run your playbook.</p> <pre data-language="bash">ansible-playbook -i inventory.yaml playbook.yaml
</pre> </li> </ol> <p>Ansible returns the following output:</p> <pre data-language="text">PLAY [My first play] **********************************************************************

TASK [Gathering Facts] ********************************************************************
ok: [vm01]
ok: [vm02]
ok: [vm03]

TASK [Ping my hosts] **********************************************************************
ok: [vm01]
ok: [vm02]
ok: [vm03]

TASK [Print message] **********************************************************************
ok: [vm01] =&gt; {
    "msg": "Hello world"
}
ok: [vm02] =&gt; {
    "msg": "Hello world"
}
ok: [vm03] =&gt; {
    "msg": "Hello world"
}

PLAY RECAP ********************************************************************************
vm01: ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
vm02: ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
vm03: ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
</pre> <p>In this output you can see:</p> <ul class="simple"> <li>The names that you give the play and each task. You should always use descriptive names that make it easy to verify and troubleshoot playbooks.</li> <li>The <code>Gather Facts</code> task runs implicitly. By default Ansible gathers information about your inventory that it can use in the playbook.</li> <li>The status of each task. Each task has a status of <code>ok</code> which means it ran successfully.</li> <li>The play recap that summarizes results of all tasks in the playbook per host. In this example, there are three tasks so <code>ok=3</code> indicates that each task ran successfully.</li> </ul> <p>Congratulations! You have just created your first Ansible playbook.</p> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="../user_guide/playbooks_intro#playbooks-intro"><span class="std std-ref">Intro to playbooks</span></a></dt>
<dd>
<p>Start building playbooks for real world scenarios.</p> </dd> <dt><a class="reference internal" href="../user_guide/playbooks#working-with-playbooks"><span class="std std-ref">Working with playbooks</span></a></dt>
<dd>
<p>Go into more detail with Ansible playbooks.</p> </dd> <dt><a class="reference internal" href="../user_guide/playbooks_best_practices#playbooks-best-practices"><span class="std std-ref">Tips and tricks</span></a></dt>
<dd>
<p>Get tips and tricks for using playbooks.</p> </dd> <dt><a class="reference internal" href="../user_guide/playbooks_vars_facts#vars-and-facts"><span class="std std-ref">Discovering variables: facts and magic variables</span></a></dt>
<dd>
<p>Learn more about the <code>gather_facts</code> keyword in playbooks.</p> </dd> </dl> </div> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/getting_started/get_started_playbook.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/getting_started/get_started_playbook.html</a>
  </p>
</div>
