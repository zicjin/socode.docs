<h1 id="ansible-builtin-service-manage-services">ansible.builtin.service – Manage services</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of <code>ansible-core</code> and included in all Ansible installations. In most cases, you can use the short module name <code>service</code> even without specifying the <code>collections:</code> keyword. However, we recommend you use the FQCN for easy linking to the module documentation and to avoid conflicting with other collections that may have the same module name.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.1: </span>of ansible.builtin</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id3">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Controls services on remote hosts. Supported init systems include BSD init, OpenRC, SysV, Solaris SMF, systemd, upstart.</li> <li>This module acts as a proxy to the underlying service manager module. While all arguments will be passed to the underlying module, not all modules support the same arguments. This documentation only covers the minimum intersection of module arguments that all service manager modules support.</li> <li>This module is a proxy for multiple more specific service manager modules (such as <a class="reference internal" href="systemd_module#ansible-collections-ansible-builtin-systemd-module"><span class="std std-ref">ansible.builtin.systemd</span></a> and <a class="reference internal" href="sysvinit_module#ansible-collections-ansible-builtin-sysvinit-module"><span class="std std-ref">ansible.builtin.sysvinit</span></a>). This allows management of a heterogeneous environment of machines without creating a specific task for each service manager. The module to be executed is determined by the <em>use</em> option, which defaults to the service manager discovered by <a class="reference internal" href="setup_module#ansible-collections-ansible-builtin-setup-module"><span class="std std-ref">ansible.builtin.setup</span></a>. If <code>setup</code> was not yet run, this module may run it.</li> <li>For Windows targets, use the <a class="reference internal" href="../windows/win_service_module#ansible-collections-ansible-windows-win-service-module"><span class="std std-ref">ansible.windows.win_service</span></a> module instead.</li> </ul> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module has a corresponding <a class="reference internal" href="../../../plugins/action#action-plugins"><span class="std std-ref">action plugin</span></a>.</p> </div>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>arguments</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Additional arguments provided on the command line.</div> <div>While using remote hosts with systemd this setting will be ignored.</div> <div>
<br>aliases: args</div> </td> </tr> <tr> <td colspan="1">  <b>enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Whether the service should start on boot.</div> <div><b>At least one of state and enabled are required.</b></div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Name of the service.</div> </td> </tr> <tr> <td colspan="1">  <b>pattern</b>  <div> <span>string</span> </div> <div> added in 0.7 of ansible.builtin </div> </td> <td> </td> <td> <div>If the service does not respond to the status command, name a substring to look for as would be found in the output of the <em>ps</em> command as a stand-in for a status result.</div> <div>If the string is found, the service will be assumed to be started.</div> <div>While using remote hosts with systemd this setting will be ignored.</div> </td> </tr> <tr> <td colspan="1">  <b>runlevel</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"default"</div> </td> <td> <div>For OpenRC init scripts (e.g. Gentoo) only.</div> <div>The runlevel that this service belongs to.</div> <div>While using remote hosts with systemd this setting will be ignored.</div> </td> </tr> <tr> <td colspan="1">  <b>sleep</b>  <div> <span>integer</span> </div> <div> added in 1.3 of ansible.builtin </div> </td> <td> </td> <td> <div>If the service is being <code>restarted</code> then sleep this many seconds between the stop and start command.</div> <div>This helps to work around badly-behaving init scripts that exit immediately after signaling a process to stop.</div> <div>Not all service managers support sleep, i.e when using systemd this setting will be ignored.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>reloaded</li> <li>restarted</li> <li>started</li> <li>stopped</li> </ul> </td> <td> <div>
<code>started</code>/<code>stopped</code> are idempotent actions that will not run commands unless necessary.</div> <div>
<code>restarted</code> will always bounce the service.</div> <div>
<code>reloaded</code> will always reload.</div> <div><b>At least one of state and enabled are required.</b></div> <div>Note that reloaded will start the service if it is not already started, even if your chosen init system wouldn't normally.</div> </td> </tr> <tr> <td colspan="1">  <b>use</b>  <div> <span>string</span> </div> <div> added in 2.2 of ansible.builtin </div> </td> <td> <b>Default:</b><br><div>"auto"</div> </td> <td> <div>The service module actually uses system specific modules, normally through auto detection, this setting can force a specific module.</div> <div>Normally it uses the value of the 'ansible_service_mgr' fact and falls back to the old 'service' module when none matching is found.</div> </td> </tr> </table> <br>  <h2 id="attributes">Attributes</h2> <dl class="ansible-attributes field-list"> <dt class="field-odd">Attribute</dt> <dd class="field-odd">
<p class="ansible-attribute-support">Support</p> <p class="ansible-attribute-desc">Description</p> </dd> <dt class="field-even">action</dt> <dd class="field-even">
<div class="ansible-attribute-support">
<p><span class="ansible-attribute-support-label">Support:</span> <span class="ansible-attribute-support-full">full</span></p> </div>
<div class="ansible-attribute-desc">
<p>Indicates this has a corresponding action plugin so some parts of the options can be executed on the controller</p> </div>
</dd> <dt class="field-odd">async</dt> <dd class="field-odd">
<div class="ansible-attribute-support">
<p><span class="ansible-attribute-support-label">Support:</span> <span class="ansible-attribute-support-full">full</span></p> </div>
<div class="ansible-attribute-desc">
<p>Supports being used with the <code>async</code> keyword</p> </div>
</dd> <dt class="field-even">bypass_host_loop</dt> <dd class="field-even">
<div class="ansible-attribute-support">
<p><span class="ansible-attribute-support-label">Support:</span> <span class="ansible-attribute-support-none">none</span></p> </div>
<div class="ansible-attribute-desc">
<p>Forces a ‘global’ task that does not execute per host, this bypasses per host templating and serial, throttle and other loop considerations</p> <p>Conditionals will work as if <code>run_once</code> is being used, variables used will be from the first available host</p> <p>This action will not work normally outside of lockstep strategies</p> </div>
</dd> <dt class="field-odd">check_mode</dt> <dd class="field-odd">
<div class="ansible-attribute-support">
<p><span class="ansible-attribute-support-label">Support:</span> <span class="ansible-attribute-support-na">N/A</span></p> <p class="ansible-attribute-details">support depends on the underlying plugin invoked</p> </div>
<div class="ansible-attribute-desc">
<p>Can run in check_mode and return changed status prediction withought modifying target</p> </div>
</dd> <dt class="field-even">diff_mode</dt> <dd class="field-even">
<div class="ansible-attribute-support">
<p><span class="ansible-attribute-support-label">Support:</span> <span class="ansible-attribute-support-na">N/A</span></p> <p class="ansible-attribute-details">support depends on the underlying plugin invoked</p> </div>
<div class="ansible-attribute-desc">
<p>Will return details on what has changed (or possibly needs changing in check_mode), when in diff mode</p> </div>
</dd> <dt class="field-odd">platform</dt> <dd class="field-odd">
<div class="ansible-attribute-support">
<p><span class="ansible-attribute-support-property">Platforms:</span> <span class="ansible-attribute-support-full">all</span></p> <p class="ansible-attribute-details">The support depends on the availability for the specific plugin for each platform and if fact gathering is able to detect it</p> </div>
<div class="ansible-attribute-desc">
<p>Target OS/families that can be operated against</p> </div>
</dd> </dl>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For AIX, group subsystem names can be used.</li> </ul> </div>   <h2 id="see-also">See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="../windows/win_service_module#ansible-collections-ansible-windows-win-service-module"><span class="std std-ref">ansible.windows.win_service</span></a></dt>
<dd>
<p>The official documentation on the <strong>ansible.windows.win_service</strong> module.</p> </dd> </dl> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Start service httpd, if not started
  ansible.builtin.service:
    name: httpd
    state: started

- name: Stop service httpd, if started
  ansible.builtin.service:
    name: httpd
    state: stopped

- name: Restart service httpd, in all cases
  ansible.builtin.service:
    name: httpd
    state: restarted

- name: Reload service httpd, in all cases
  ansible.builtin.service:
    name: httpd
    state: reloaded

- name: Enable service httpd, and not touch the state
  ansible.builtin.service:
    name: httpd
    enabled: yes

- name: Start service foo, based on running process /usr/bin/foo
  ansible.builtin.service:
    name: foo
    pattern: /usr/bin/foo
    state: started

- name: Restart network service for interface eth0
  ansible.builtin.service:
    name: network
    state: restarted
    args: eth0
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Ansible Core Team</li> <li>Michael DeHaan</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</a>
  </p>
</div>
