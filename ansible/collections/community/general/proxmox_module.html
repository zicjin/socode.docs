<section id="community-general-proxmox-module-management-of-instances-in-proxmox-ve-cluster"> <h1>community.general.proxmox module – management of instances in Proxmox VE cluster</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 5.4.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.proxmox</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>allows you to create/delete/stop instances in Proxmox VE cluster</li> <li>Starting in Ansible 2.1, it automatically detects containerization type (lxc for PVE 4, openvz for older)</li> <li>Since community.general 4.0.0 on, there are no more default values, see <em>proxmox_default_behavior</em>.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>proxmoxer</li> <li>requests</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-api-host"><strong>api_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the target host of the Proxmox VE cluster.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-api-password"><strong>api_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the password to authenticate with.</p> <p>You can use <code>PROXMOX_PASSWORD</code> environment variable.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-api-token-id"><strong>api_token_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 1.3.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the token ID.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-api-token-secret"><strong>api_token_secret</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 1.3.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the token secret.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-api-user"><strong>api_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the user to authenticate with.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-clone"><strong>clone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><span class="ansible-option-versionadded">added in 4.3.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>ID of the container to be cloned.</p> <p><em>description</em>, <em>hostname</em>, and <em>pool</em> will be copied from the cloned container if not specified.</p> <p>The type of clone created is defined by the <em>clone_type</em> parameter.</p> <p>This operator is only supported for Proxmox clusters that use LXC containerization (PVE version &gt;= 4).</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-clone-type"><strong>clone_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 4.3.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Type of the clone created.</p> <p><code>full</code> creates a full clone, and <em>storage</em> must be specified.</p> <p><code>linked</code> creates a linked clone, and the cloned container must be a template container.</p> <p><code>opportunistic</code> creates a linked clone if the cloned container is a template container, and a full clone if not. <em>storage</em> may be specified, if not it will fall back to the default.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">full</span></li> <li><span class="ansible-option-choices-entry">linked</span></li> <li>
<span class="ansible-option-default-bold">opportunistic</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-cores"><strong>cores</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify number of cores per socket.</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>1</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-cpus"><strong>cpus</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>numbers of allocated cpus for instance</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>1</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-cpuunits"><strong>cpuunits</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>CPU weight for a VM</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>1000</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 0.2.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the description for the container. Only used on the configuration web interface.</p> <p>This is saved as a comment inside the configuration file.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-disk"><strong>disk</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option was previously described as “hard disk size in GB for instance” however several formats describing a lxc mount are permitted.</p> <p>Older versions of Proxmox will accept a numeric value for size using the <em>storage</em> parameter to automatically choose which storage to allocate from, however new versions enforce the <code>&lt;STORAGE&gt;:&lt;SIZE&gt;</code> syntax.</p> <p>Additional options are available by using some combination of the following key-value pairs as a comma-delimited list <code>[volume=]&lt;volume&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,quota=&lt;1|0&gt;] [,replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;]</code>.</p> <p>See <a class="reference external" href="https://pve.proxmox.com/wiki/Linux_Container">https://pve.proxmox.com/wiki/Linux_Container</a> for a full description.</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>3</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-features"><strong>features</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><span class="ansible-option-versionadded">added in 2.0.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies a list of features to be enabled. For valid options, see <a class="reference external" href="https://pve.proxmox.com/wiki/Linux_Container#pct_options">https://pve.proxmox.com/wiki/Linux_Container#pct_options</a>.</p> <p>Some features require the use of a privileged container.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>forcing operations</p> <p>can be used only with states <code>present</code>, <code>stopped</code>, <code>restarted</code></p> <p>with <code>state=present</code> force option allow to overwrite existing container</p> <p>with states <code>stopped</code> , <code>restarted</code> allow to force stop instance</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-hookscript"><strong>hookscript</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 0.2.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Script that will be executed during various steps in the containers lifetime.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>the instance hostname</p> <p>required only for <code>state=present</code></p> <p>must be unique if vmid is not passed</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-ip-address"><strong>ip_address</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>specifies the address the container will be assigned</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-memory"><strong>memory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>memory size in MB for instance</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>512</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-mounts"><strong>mounts</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>specifies additional mounts (separate disks) for the container. As a hash/dictionary defining mount points</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-nameserver"><strong>nameserver</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>sets DNS server IP address for a container</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-netif"><strong>netif</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>specifies network interfaces for the container. As a hash/dictionary defining interfaces.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-node"><strong>node</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Proxmox VE node on which to operate.</p> <p>Only required for <em>state=present</em>.</p> <p>For every other states it will be autodiscovered.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-onboot"><strong>onboot</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>specifies whether a VM will be started during system bootup</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>no</code>.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-ostemplate"><strong>ostemplate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>the template for VM creating</p> <p>required only for <code>state=present</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>the instance root password</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-pool"><strong>pool</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add the new VM to the specified pool.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-proxmox-default-behavior"><strong>proxmox_default_behavior</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 1.3.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>As of community.general 4.0.0, various options no longer have default values. These default values caused problems when users expected different behavior from Proxmox by default or filled options which caused problems when set.</p> <p>The value <code>compatibility</code> (default before community.general 4.0.0) will ensure that the default values are used when the values are not explicitly specified by the user. The new default is <code>no_defaults</code>, which makes sure these options have no defaults.</p> <p>This affects the <em>disk</em>, <em>cores</em>, <em>cpus</em>, <em>memory</em>, <em>onboot</em>, <em>swap</em>, <em>cpuunits</em> options.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">compatibility</span></li> <li>
<span class="ansible-option-default-bold">no_defaults</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-pubkey"><strong>pubkey</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Public key to add to /root/.ssh/authorized_keys. This was added on Proxmox 4.2, it is ignored for earlier versions</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-purge"><strong>purge</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 2.3.0 of community.general</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Remove container from all related configurations.</p> <p>For example backup jobs, replication jobs, or HA.</p> <p>Related ACLs and Firewall entries will always be removed.</p> <p>Used with state <code>absent</code>.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-searchdomain"><strong>searchdomain</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>sets DNS search domain for a container</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicate desired state of the instance</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">present</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">started</span></li> <li><span class="ansible-option-choices-entry">absent</span></li> <li><span class="ansible-option-choices-entry">stopped</span></li> <li><span class="ansible-option-choices-entry">restarted</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>target storage</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“local”</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-swap"><strong>swap</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>swap memory size in MB for instance</p> <p>This option has no default unless <em>proxmox_default_behavior</em> is set to <code>compatiblity</code>; then the default is <code>0</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>timeout for operations</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">30</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-unprivileged"><strong>unprivileged</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicate if the container should be unprivileged</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>no</code>, SSL certificates will not be validated.</p> <p>This should only be used on personally controlled sites using self-signed certificates.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-module-parameter-vmid"><strong>vmid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the instance ID.</p> <p>If not set the next available ID will be fetched from ProxmoxAPI.</p> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create new container with minimal options
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: Create new container with hookscript and description
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    hookscript: 'local:snippets/vm_hook.sh'
    description: created with ansible

- name: Create new container automatically selecting the next available vmid.
  community.general.proxmox:
    node: 'uk-mc02'
    api_user: 'root@pam'
    api_password: '1q2w3e'
    api_host: 'node1'
    password: '123456'
    hostname: 'example.org'
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: Create new container with minimal options with force(it will rewrite existing container)
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    force: yes

- name: Create new container with minimal options use environment PROXMOX_PASSWORD variable(you should export it before)
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'

- name: Create new container with minimal options defining network interface with dhcp
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    netif: '{"net0":"name=eth0,ip=dhcp,ip6=dhcp,bridge=vmbr0"}'

- name: Create new container with minimal options defining network interface with static ip
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: 'local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    netif: '{"net0":"name=eth0,gw=192.168.0.1,ip=192.168.0.2/24,bridge=vmbr0"}'

- name: Create new container with minimal options defining a mount with 8GB
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    mounts: '{"mp0":"local:8,mp=/mnt/test/"}'

- name: Create new container with minimal options defining a cpu core limit
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    cores: 2

- name: Create a new container with nesting enabled and allows the use of CIFS/NFS inside the container.
  community.general.proxmox:
    vmid: 100
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    password: 123456
    hostname: example.org
    ostemplate: local:vztmpl/ubuntu-14.04-x86_64.tar.gz'
    features:
     - nesting=1
     - mount=cifs,nfs

- name: &gt;
    Create a linked clone of the template container with id 100. The newly created container with be a
    linked clone, because no storage parameter is defined
  community.general.proxmox:
    vmid: 201
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    clone: 100
    hostname: clone.example.org

- name: Create a full clone of the container with id 100
  community.general.proxmox:
    vmid: 201
    node: uk-mc02
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    clone: 100
    hostname: clone.example.org
    storage: local

- name: Start container
  community.general.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: started

- name: &gt;
    Start container with mount. You should enter a 90-second timeout because servers
    with additional disks take longer to boot
  community.general.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: started
    timeout: 90

- name: Stop container
  community.general.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: stopped

- name: Stop container with force
  community.general.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    force: yes
    state: stopped

- name: Restart container(stopped or mounted container you can't restart)
  community.general.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: restarted

- name: Remove container
  community.general.proxmox:
    vmid: 100
    api_user: root@pam
    api_password: 1q2w3e
    api_host: node1
    state: absent
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Sergei Antipov (@UnderGreen)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/ansible-collections/community.general/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/ansible-collections/community.general" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> <a href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" aria-role="button" target="_blank" rel="noopener external">Submit a bug report</a> <a href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" aria-role="button" target="_blank" rel="noopener external">Request a feature</a> <a href="index#communication-for-community-general" aria-role="button" target="_blank">Communication</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/proxmox_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/community/general/proxmox_module.html</a>
  </p>
</div>
