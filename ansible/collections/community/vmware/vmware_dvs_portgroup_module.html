<section id="community-vmware-vmware-dvs-portgroup-module-create-or-remove-a-distributed-vswitch-portgroup"> <h1>community.vmware.vmware_dvs_portgroup module – Create or remove a Distributed vSwitch portgroup.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/community/vmware">community.vmware collection</a> (version 2.7.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.vmware</code>.</p> <p>To use it in a playbook, specify: <code>community.vmware.vmware_dvs_portgroup</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Create or remove a Distributed vSwitch portgroup.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>PyVmomi</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The hostname or IP address of the vSphere vCenter or ESXi server.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_HOST</code> will be used instead.</p> <p>Environment variable support added in Ansible 2.6.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-in-traffic-shaping"><strong>in_traffic_shaping</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><span class="ansible-option-versionadded">added in 2.3.0 of community.vmware</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which configures the ingress traffic shaping settings for the portgroup.</p> <p>If not set the values get inherit.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-in-traffic-shaping-average-bandwidth"><strong>average_bandwidth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Establishes the number of bits per second to allow across a port, averaged over time, that is, the allowed average load.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-in-traffic-shaping-burst-size"><strong>burst_size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The maximum number of bits per second to allow across a port when it is sending/sending or receiving a burst of traffic.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-in-traffic-shaping-enabled"><strong>enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates whether ingress traffic shaping is activated or not.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-in-traffic-shaping-peak-bandwidth"><strong>peak_bandwidth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The maximum number of bytes to allow in a burst.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-mac-learning"><strong>mac_learning</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><span class="ansible-option-versionadded">added in 1.10.0 of community.vmware</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which configures MAC learning for portgroup.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-mac-learning-allow-unicast-flooding"><strong>allow_unicast_flooding</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The flag to allow flooding of unlearned MAC for ingress traffic.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-mac-learning-enabled"><strong>enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The flag to indicate if source MAC address learning is allowed.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-mac-learning-limit"><strong>limit</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The maximum number of MAC addresses that can be learned.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-mac-learning-limit-policy"><strong>limit_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The default switching policy after MAC limit is exceeded.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">allow</span></li> <li><span class="ansible-option-choices-entry">drop</span></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-net-flow"><strong>net_flow</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 2.3.0 of community.vmware</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicate whether or not the virtual machine IP traffic that flows through a vds gets analyzed by sending reports to a NetFlow collector.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-network-policy"><strong>network_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which configures the different security values for portgroup.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">{“forged_transmits”: false, “mac_changes”: false, “promiscuous”: false}</span></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-network-policy-forged-transmits"><strong>forged_transmits</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates whether forged transmits are allowed.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-network-policy-mac-changes"><strong>mac_changes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates whether mac changes are allowed.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-network-policy-promiscuous"><strong>promiscuous</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates whether promiscuous mode is allowed.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-num-ports"><strong>num_ports</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The number of ports the portgroup should contain.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-out-traffic-shaping"><strong>out_traffic_shaping</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><span class="ansible-option-versionadded">added in 2.3.0 of community.vmware</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which configures the egress traffic shaping settings for the portgroup.</p> <p>If not set the values get inherit.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-out-traffic-shaping-average-bandwidth"><strong>average_bandwidth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Establishes the number of bits per second to allow across a port, averaged over time, that is, the allowed average load.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-out-traffic-shaping-burst-size"><strong>burst_size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The maximum number of bits per second to allow across a port when it is sending/sending or receiving a burst of traffic.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-out-traffic-shaping-enabled"><strong>enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates whether egress traffic shaping is activated or not.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-out-traffic-shaping-peak-bandwidth"><strong>peak_bandwidth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The maximum number of bytes to allow in a burst.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-pwd"><strong id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-password">password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: pass, pwd</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The password of the vSphere vCenter or ESXi server.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_PASSWORD</code> will be used instead.</p> <p>Environment variable support added in Ansible 2.6.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port"><strong>port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The port number of the vSphere vCenter or ESXi server.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_PORT</code> will be used instead.</p> <p>Environment variable support added in Ansible 2.6.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">443</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-allocation"><strong>port_allocation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 1.10.0 of community.vmware</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Elastic port groups automatically increase or decrease the number of ports as needed.</p> <p>Only valid if <em>port_binding</em> is set to <code>static</code>.</p> <p>Will be <code>elastic</code> if not specified and <em>port_binding</em> is set to <code>static</code>.</p> <p>Will be <code>fixed</code> if not specified and <em>port_binding</em> is set to <code>ephemeral</code>.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">elastic</span></li> <li><span class="ansible-option-choices-entry">fixed</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-binding"><strong>port_binding</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> <p><span class="ansible-option-versionadded">added in 1.10.0 of community.vmware</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type of port binding determines when ports in a port group are assigned to virtual machines.</p> <p>See VMware KB 1022312 <a class="reference external" href="https://kb.vmware.com/s/article/1022312">https://kb.vmware.com/s/article/1022312</a> for more details.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">static</span></li> <li><span class="ansible-option-choices-entry">ephemeral</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy"><strong>port_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which configures the advanced policy settings for the portgroup.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">{“block_override”: true, “ipfix_override”: false, “live_port_move”: false, “network_rp_override”: false, “port_config_reset_at_disconnect”: true, “security_override”: false, “shaping_override”: false, “traffic_filter_override”: false, “uplink_teaming_override”: false, “vendor_config_override”: false, “vlan_override”: false}</span></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-block-override"><strong>block_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the block policy can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-ipfix-override"><strong>ipfix_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the ipfix policy can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-live-port-move"><strong>live_port_move</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if a live port can be moved in or out of the portgroup.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-network-rp-override"><strong>network_rp_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the network resource pool can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-port-config-reset-at-disconnect"><strong>port_config_reset_at_disconnect</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the configuration of a port is reset automatically after disconnect.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-security-override"><strong>security_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the security policy can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-shaping-override"><strong>shaping_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the shaping policy can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-traffic-filter-override"><strong>traffic_filter_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the traffic filter can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-uplink-teaming-override"><strong>uplink_teaming_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the uplink teaming policy can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-vendor-config-override"><strong>vendor_config_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the vendor config can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-port-policy-vlan-override"><strong>vlan_override</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicates if the vlan can be changed per port.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-portgroup-name"><strong>portgroup_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the portgroup that is to be created or deleted.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-proxy-host"><strong>proxy_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Address of a proxy that will receive all HTTPS requests and relay them.</p> <p>The format is a hostname or a IP.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_PROXY_HOST</code> will be used instead.</p> <p>This feature depends on a version of pyvmomi greater than v6.7.1.2018.12</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-proxy-port"><strong>proxy_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Port of the HTTP proxy that will receive all HTTPS requests and relay them.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_PROXY_PORT</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Determines if the portgroup should be present or not.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">present</span></li> <li><span class="ansible-option-choices-entry">absent</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-switch-name"><strong>switch_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the distributed vSwitch the port group should be created on.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy"><strong>teaming_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which configures the different teaming values for portgroup.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">{“load_balance_policy”: “loadbalance_srcid”, “notify_switches”: true, “rolling_order”: false}</span></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy-active-uplinks"><strong>active_uplinks</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><span class="ansible-option-versionadded">added in 1.10.0 of community.vmware</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>List of active uplinks used for load balancing.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy-inbound-policy"><strong>inbound_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicate whether or not the teaming policy is applied to inbound frames as well.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy-load-balance-policy"><strong>load_balance_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Network adapter teaming policy.</p> <p><code>loadbalance_loadbased</code> is available from version 2.6 and onwards.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">loadbalance_ip</span></li> <li><span class="ansible-option-choices-entry">loadbalance_srcmac</span></li> <li>
<span class="ansible-option-default-bold">loadbalance_srcid</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">loadbalance_loadbased</span></li> <li><span class="ansible-option-choices-entry">failover_explicit</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy-notify-switches"><strong>notify_switches</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicate whether or not to notify the physical switch if a link fails.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy-rolling-order"><strong>rolling_order</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Indicate whether or not to use a rolling policy when restoring links.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-teaming-policy-standby-uplinks"><strong>standby_uplinks</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><span class="ansible-option-versionadded">added in 1.10.0 of community.vmware</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>List of standby uplinks used for failover.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-user"><strong id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-username">username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: admin, user</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The username of the vSphere vCenter or ESXi server.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_USER</code> will be used instead.</p> <p>Environment variable support added in Ansible 2.6.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allows connection when SSL certificates are not valid. Set to <code>false</code> when certificates are not trusted.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_VALIDATE_CERTS</code> will be used instead.</p> <p>Environment variable support added in Ansible 2.6.</p> <p>If set to <code>true</code>, please make sure Python &gt;= 2.7.9 is installed on the given machine.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-vlan-id"><strong>vlan_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The VLAN ID that should be configured with the portgroup, use 0 for no VLAN.</p> <p>If <code>vlan_trunk</code> is configured to be <em>true</em>, this can be a combination of multiple ranges and numbers, example: 1-200, 205, 400-4094.</p> <p>The valid <code>vlan_id</code> range is from 0 to 4094. Overlapping ranges are allowed.</p> <p>If <code>vlan_private</code> is configured to be <em>true</em>, the corresponding private VLAN should already be configured in the distributed vSwitch.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-vlan-private"><strong>vlan_private</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates whether this is for a private VLAN or not.</p> <p>Mutually exclusive with <code>vlan_trunk</code> parameter.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-dvs-portgroup-module-parameter-vlan-trunk"><strong>vlan_trunk</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates whether this is a VLAN trunk or not.</p> <p>Mutually exclusive with <code>vlan_private</code> parameter.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Tested on vSphere 7.0</li> <li>All modules requires API write access and hence is not supported on a free ESXi license.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create vlan portgroup
  community.vmware.vmware_dvs_portgroup:
    hostname: '{{ vcenter_hostname }}'
    username: '{{ vcenter_username }}'
    password: '{{ vcenter_password }}'
    portgroup_name: vlan-123-portrgoup
    switch_name: dvSwitch
    vlan_id: 123
    num_ports: 120
    port_binding: static
    state: present
  delegate_to: localhost

- name: Create vlan trunk portgroup
  community.vmware.vmware_dvs_portgroup:
    hostname: '{{ vcenter_hostname }}'
    username: '{{ vcenter_username }}'
    password: '{{ vcenter_password }}'
    portgroup_name: vlan-trunk-portrgoup
    switch_name: dvSwitch
    vlan_id: 1-1000, 1005, 1100-1200
    vlan_trunk: True
    num_ports: 120
    port_binding: static
    state: present
  delegate_to: localhost

- name: Create private vlan portgroup
  vmware_dvs_portgroup:
    hostname: '{{ vcenter_hostname }}'
    username: '{{ vcenter_username }}'
    password: '{{ vcenter_password }}'
    portgroup_name: private-vlan-portrgoup
    switch_name: dvSwitch
    vlan_id: 1001
    vlan_private: True
    num_ports: 120
    port_binding: static
    state: present
  delegate_to: localhost

- name: Create no-vlan portgroup
  community.vmware.vmware_dvs_portgroup:
    hostname: '{{ vcenter_hostname }}'
    username: '{{ vcenter_username }}'
    password: '{{ vcenter_password }}'
    portgroup_name: no-vlan-portrgoup
    switch_name: dvSwitch
    vlan_id: 0
    num_ports: 120
    port_binding: static
    state: present
  delegate_to: localhost

- name: Create vlan portgroup with all security and port policies
  community.vmware.vmware_dvs_portgroup:
    hostname: '{{ vcenter_hostname }}'
    username: '{{ vcenter_username }}'
    password: '{{ vcenter_password }}'
    portgroup_name: vlan-123-portrgoup
    switch_name: dvSwitch
    vlan_id: 123
    num_ports: 120
    port_binding: static
    state: present
    network_policy:
      promiscuous: true
      forged_transmits: true
      mac_changes: true
    port_policy:
      block_override: true
      ipfix_override: true
      live_port_move: true
      network_rp_override: true
      port_config_reset_at_disconnect: true
      security_override: true
      shaping_override: true
      traffic_filter_override: true
      uplink_teaming_override: true
      vendor_config_override: true
      vlan_override: true
  delegate_to: localhost
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Joseph Callen (@jcpowermac)</li> <li>Philippe Dellaert (@pdellaert)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/ansible-collections/community.vmware/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/ansible-collections/community.vmware" aria-role="button" target="_blank" rel="noopener external">Homepage</a> <a href="https://github.com/ansible-collections/community.vmware.git" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/community/vmware/vmware_dvs_portgroup_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/community/vmware/vmware_dvs_portgroup_module.html</a>
  </p>
</div>
