<section id="community-libvirt-libvirt-inventory-libvirt-inventory-source"> <h1>community.libvirt.libvirt inventory – Libvirt inventory source</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This inventory plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/libvirt">community.libvirt collection</a> (version 1.1.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.libvirt</code>.</p> <p>To use it in a playbook, specify: <code>community.libvirt.libvirt</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.10.0: </span>of community.libvirt</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Get libvirt guests in an inventory source.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the local controller node that executes this inventory.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>libvirt python bindings</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-compose"><strong>compose</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create vars from jinja2 expressions.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">{}</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-groups"><strong>groups</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add hosts to group based on Jinja2 conditionals.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">{}</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-inventory-hostname"><strong>inventory_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<dl class="simple"> <dt>What to register as the inventory hostname.</dt>
<dd>
<p>If set to ‘uuid’ the uuid of the server will be used and a group will be created for the server name. If set to ‘name’ the name of the server will be used unless there are more than one server with the same name in which case the ‘uuid’ logic will be used. Default is to do ‘name’.</p> </dd> </dl> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">name</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">uuid</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups"><strong>keyed_groups</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add hosts to group based on the values of a variable.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">[]</span></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups-default-value"><strong>default_value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 2.12 of ansible.builtin</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The default value when the host variable’s value is an empty string.</p> <p>This option is mutually exclusive with <code>trailing_separator</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups-key"><strong>key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The key from input dictionary used to generate groups</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups-parent-group"><strong>parent_group</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>parent group for keyed group</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups-prefix"><strong>prefix</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A keyed group name will start with this prefix</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“”</span></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups-separator"><strong>separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>separator used to build the keyed group name</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“_”</span></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-keyed-groups-trailing-separator"><strong>trailing_separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 2.12 of ansible.builtin</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Set this option to <em>False</em> to omit the <code>separator</code> after the host variable when the value is an empty string.</p> <p>This option is mutually exclusive with <code>default_value</code>.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-leading-separator"><strong>leading_separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 2.11 of ansible.builtin</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use in conjunction with keyed_groups.</p> <p>By default, a keyed group that does not have a prefix or a separator provided will have a name that starts with an underscore.</p> <p>This is because the default prefix is “” and the default separator is “_”.</p> <p>Set this option to False to omit the leading underscore (or other separator) if no prefix is given.</p> <p>If the group name is derived from a mapping the separator is still used to concatenate the items.</p> <p>To not use a separator in the group name at all, set the separator for the keyed group to an empty string instead.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-plugin"><strong>plugin</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Token that ensures this is a source file for the ‘libvirt’ plugin.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">libvirt</span></li> <li><span class="ansible-option-choices-entry">community.libvirt.libvirt</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-strict"><strong>strict</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>yes</code> make invalid entries a fatal error, otherwise skip and continue.</p> <p>Since it is possible to use facts in the expressions they might not always be available and we ignore those errors by default.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-uri"><strong>uri</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Libvirt Connection URI</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-libvirt-libvirt-inventory-parameter-use-extra-vars"><strong>use_extra_vars</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 2.11 of ansible.builtin</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Merge extra vars into the available variables for composition (highest precedence).</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> <p class="ansible-option-line"><span class="ansible-option-configuration">Configuration:</span></p> <ul> <li>
<p>INI entry:</p> <pre data-language="YAML+Jinja">[inventory_plugins]
use_extra_vars = no
</pre> </li> <li>Environment variable: ANSIBLE_INVENTORY_USE_EXTRA_VARS</li> </ul> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># Connect to lxc host
plugin: community.libvirt.libvirt
uri: 'lxc:///'

# Connect to qemu
plugin: community.libvirt.libvirt
uri: 'qemu:///system'
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Dave Olsthoorn (@daveol)</li> </ul> <div class="admonition hint"> <p class="admonition-title">Hint</p> <p>Configuration entries for each entry type have a low to high priority order. For example, a variable that is lower in the list will override a variable that is higher up.</p> </div> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/ansible-collections/community.libvirt/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/ansible-collections/community.libvirt" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/community/libvirt/libvirt_inventory.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/community/libvirt/libvirt_inventory.html</a>
  </p>
</div>
