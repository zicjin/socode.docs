<h1 id="community-libvirt-libvirt-libvirt-inventory-source">community.libvirt.libvirt – Libvirt inventory source</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/libvirt">community.libvirt collection</a> (version 1.0.2).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.libvirt</code>.</p> <p>To use it in a playbook, specify: <code>community.libvirt.libvirt</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.10: </span>of community.libvirt</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Get libvirt guests in an inventory source</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the local controller node that executes this inventory.</p> <ul class="simple"> <li>libvirt-python</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th>Configuration</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>compose</b>  <div> <span>dictionary</span> </div> </td> <td> <b>Default:</b><br><div>{}</div> </td> <td> </td> <td> <div>Create vars from jinja2 expressions.</div> </td> </tr> <tr> <td colspan="2">  <b>groups</b>  <div> <span>dictionary</span> </div> </td> <td> <b>Default:</b><br><div>{}</div> </td> <td> </td> <td> <div>Add hosts to group based on Jinja2 conditionals.</div> </td> </tr> <tr> <td colspan="2">  <b>inventory_hostname</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>name</b> ←</div></li> <li>uuid</li> </ul> </td> <td> </td> <td> <div>What to register as the inventory hostname. If set to 'uuid' the uuid of the server will be used and a group will be created for the server name. If set to 'name' the name of the server will be used unless there are more than one server with the same name in which case the 'uuid' logic will be used. Default is to do 'name'</div> </td> </tr> <tr> <td colspan="2">  <b>keyed_groups</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> </td> <td> <div>Add hosts to group based on the values of a variable.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>default_value</b>  <div> <span>string</span> </div> <div> added in 2.12 of ansible.builtin </div> </td> <td> </td> <td> </td> <td> <div>The default value when the host variable's value is an empty string.</div> <div>This option is mutually exclusive with <code>trailing_separator</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>key</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>The key from input dictionary used to generate groups</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>parent_group</b>  <div> <span>string</span> </div> </td> <td> </td> <td> </td> <td> <div>parent group for keyed group</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>prefix</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>""</div> </td> <td> </td> <td> <div>A keyed group name will start with this prefix</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>separator</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"_"</div> </td> <td> </td> <td> <div>separator used to build the keyed group name</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>trailing_separator</b>  <div> <span>boolean</span> </div> <div> added in 2.12 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> </td> <td> <div>Set this option to <em>False</em> to omit the <code>separator</code> after the host variable when the value is an empty string.</div> <div>This option is mutually exclusive with <code>default_value</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>leading_separator</b>  <div> <span>boolean</span> </div> <div> added in 2.11 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> </td> <td> <div>Use in conjunction with keyed_groups.</div> <div>By default, a keyed group that does not have a prefix or a separator provided will have a name that starts with an underscore.</div> <div>This is because the default prefix is "" and the default separator is "_".</div> <div>Set this option to False to omit the leading underscore (or other separator) if no prefix is given.</div> <div>If the group name is derived from a mapping the separator is still used to concatenate the items.</div> <div>To not use a separator in the group name at all, set the separator for the keyed group to an empty string instead.</div> </td> </tr> <tr> <td colspan="2">  <b>plugin</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>libvirt</li> <li>community.libvirt.libvirt</li> </ul> </td> <td> </td> <td> <div>Token that ensures this is a source file for the 'libvirt' plugin.</div> </td> </tr> <tr> <td colspan="2">  <b>strict</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> </td> <td> <div>If <code>yes</code> make invalid entries a fatal error, otherwise skip and continue.</div> <div>Since it is possible to use facts in the expressions they might not always be available and we ignore those errors by default.</div> </td> </tr> <tr> <td colspan="2">  <b>uri</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> </td> <td> <div>Libvirt Connection URI</div> </td> </tr> <tr> <td colspan="2">  <b>use_extra_vars</b>  <div> <span>boolean</span> </div> <div> added in 2.11 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div> ini entries: <p> [inventory_plugins]<br>use_extra_vars = no </p> </div> <div> env:ANSIBLE_INVENTORY_USE_EXTRA_VARS </div> </td> <td> <div>Merge extra vars into the available variables for composition (highest precedence).</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># Connect to lxc host
plugin: community.libvirt.libvirt
uri: 'lxc:///'

# Connect to qemu
plugin: community.libvirt.libvirt
uri: 'qemu:///system'
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Dave Olsthoorn &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#4723263122616474707c616472757c6164737f7c252230262635616473717c2a22">dave<span>@</span>bewaar<span>.</span>me</a>&gt;</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/community/libvirt/libvirt_inventory.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/community/libvirt/libvirt_inventory.html</a>
  </p>
</div>
