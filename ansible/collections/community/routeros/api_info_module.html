<section id="community-routeros-api-info-module-retrieve-information-from-api"> <h1>community.routeros.api_info module – Retrieve information from API</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/community/routeros">community.routeros collection</a> (version 2.2.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.routeros</code>.</p> <p>To use it in a playbook, specify: <code>community.routeros.api_info</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.2.0: </span>of community.routeros</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Allows to retrieve information for a path using the API.</li> <li>This can be used to backup a path to restore it with the <a class="reference internal" href="api_modify_module#ansible-collections-community-routeros-api-modify-module"><span class="std std-ref">community.routeros.api_modify</span></a> module.</li> <li>Entries are normalized, and dynamic entries are not returned. Use the <em>handle_disabled</em> and <em>hide_defaults</em> options to control normalization, the <em>include_dynamic</em> option to also return dynamic entries, and use <em>unfiltered</em> to return all fields including counters.</li> <li>
<strong>Note</strong> that this module is still heavily in development, and only supports <strong>some</strong> paths. If you want to support new paths, or think you found problems with existing paths, please first <a class="reference external" href="https://github.com/ansible-collections/community.routeros/issues/">create an issue in the community.routeros Issue Tracker</a>.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>librouteros</li> <li>Python &gt;= 3.6 (for librouteros)</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> <p><span class="ansible-option-versionadded">added in 1.2.0 of community.routeros</span></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted file that contains a CA certificate to be used for certificate validation.</p> <p>See also <em>validate_cert_hostname</em>. Only used when <em>tls=true</em> and <em>validate_certs=true</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-encoding"><strong>encoding</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 2.1.0 of community.routeros</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use the specified encoding when communicating with the RouterOS device.</p> <p>Default is <code>ASCII</code>. Note that <code>UTF-8</code> requires librouteros 3.2.1 or newer.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“ASCII”</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-handle-disabled"><strong>handle_disabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>How to handle unset values.</p> <p><code>exclamation</code> prepends the keys with <code>!</code> in the output with value <code>null</code>.</p> <p><code>null-value</code> uses the regular key with value <code>null</code>.</p> <p><code>omit</code> omits these values from the result.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">exclamation</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">null-value</span></li> <li><span class="ansible-option-choices-entry">omit</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-hide-defaults"><strong>hide_defaults</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to hide default values.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS hostname API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-include-dynamic"><strong>include_dynamic</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to include dynamic values.</p> <p>By default, they are not returned, and the <code>dynamic</code> keys are omitted.</p> <p>If set to <code>true</code>, they are returned as well, and the <code>dynamic</code> keys are returned as well.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS user password.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-path"><strong>path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to query.</p> <p>An example value is <code>ip address</code>. This is equivalent to running <code>/ip address print</code> in the RouterOS CLI.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">caps-man aaa</span></li> <li><span class="ansible-option-choices-entry">certificate settings</span></li> <li><span class="ansible-option-choices-entry">interface bridge port</span></li> <li><span class="ansible-option-choices-entry">interface bridge port-controller</span></li> <li><span class="ansible-option-choices-entry">interface bridge port-extender</span></li> <li><span class="ansible-option-choices-entry">interface bridge settings</span></li> <li><span class="ansible-option-choices-entry">interface detect-internet</span></li> <li><span class="ansible-option-choices-entry">interface ethernet</span></li> <li><span class="ansible-option-choices-entry">interface ethernet switch</span></li> <li><span class="ansible-option-choices-entry">interface ethernet switch port</span></li> <li><span class="ansible-option-choices-entry">interface l2tp-server server</span></li> <li><span class="ansible-option-choices-entry">interface ovpn-server server</span></li> <li><span class="ansible-option-choices-entry">interface pptp-server server</span></li> <li><span class="ansible-option-choices-entry">interface sstp-server server</span></li> <li><span class="ansible-option-choices-entry">interface wireless align</span></li> <li><span class="ansible-option-choices-entry">interface wireless cap</span></li> <li><span class="ansible-option-choices-entry">interface wireless sniffer</span></li> <li><span class="ansible-option-choices-entry">interface wireless snooper</span></li> <li><span class="ansible-option-choices-entry">ip accounting</span></li> <li><span class="ansible-option-choices-entry">ip accounting web-access</span></li> <li><span class="ansible-option-choices-entry">ip address</span></li> <li><span class="ansible-option-choices-entry">ip cloud</span></li> <li><span class="ansible-option-choices-entry">ip cloud advanced</span></li> <li><span class="ansible-option-choices-entry">ip dhcp-client</span></li> <li><span class="ansible-option-choices-entry">ip dhcp-client option</span></li> <li><span class="ansible-option-choices-entry">ip dhcp-server</span></li> <li><span class="ansible-option-choices-entry">ip dhcp-server config</span></li> <li><span class="ansible-option-choices-entry">ip dhcp-server lease</span></li> <li><span class="ansible-option-choices-entry">ip dhcp-server network</span></li> <li><span class="ansible-option-choices-entry">ip dns</span></li> <li><span class="ansible-option-choices-entry">ip dns static</span></li> <li><span class="ansible-option-choices-entry">ip firewall address-list</span></li> <li><span class="ansible-option-choices-entry">ip firewall connection tracking</span></li> <li><span class="ansible-option-choices-entry">ip firewall filter</span></li> <li><span class="ansible-option-choices-entry">ip firewall nat</span></li> <li><span class="ansible-option-choices-entry">ip firewall service-port</span></li> <li><span class="ansible-option-choices-entry">ip hotspot service-port</span></li> <li><span class="ansible-option-choices-entry">ip ipsec settings</span></li> <li><span class="ansible-option-choices-entry">ip neighbor discovery-settings</span></li> <li><span class="ansible-option-choices-entry">ip pool</span></li> <li><span class="ansible-option-choices-entry">ip proxy</span></li> <li><span class="ansible-option-choices-entry">ip service</span></li> <li><span class="ansible-option-choices-entry">ip settings</span></li> <li><span class="ansible-option-choices-entry">ip smb</span></li> <li><span class="ansible-option-choices-entry">ip socks</span></li> <li><span class="ansible-option-choices-entry">ip ssh</span></li> <li><span class="ansible-option-choices-entry">ip tftp settings</span></li> <li><span class="ansible-option-choices-entry">ip traffic-flow</span></li> <li><span class="ansible-option-choices-entry">ip traffic-flow ipfix</span></li> <li><span class="ansible-option-choices-entry">ip upnp</span></li> <li><span class="ansible-option-choices-entry">ipv6 dhcp-client</span></li> <li><span class="ansible-option-choices-entry">ipv6 firewall address-list</span></li> <li><span class="ansible-option-choices-entry">ipv6 firewall filter</span></li> <li><span class="ansible-option-choices-entry">ipv6 nd prefix default</span></li> <li><span class="ansible-option-choices-entry">ipv6 settings</span></li> <li><span class="ansible-option-choices-entry">mpls</span></li> <li><span class="ansible-option-choices-entry">mpls ldp</span></li> <li><span class="ansible-option-choices-entry">port firmware</span></li> <li><span class="ansible-option-choices-entry">ppp aaa</span></li> <li><span class="ansible-option-choices-entry">queue interface</span></li> <li><span class="ansible-option-choices-entry">radius incoming</span></li> <li><span class="ansible-option-choices-entry">routing bgp instance</span></li> <li><span class="ansible-option-choices-entry">routing mme</span></li> <li><span class="ansible-option-choices-entry">routing rip</span></li> <li><span class="ansible-option-choices-entry">routing ripng</span></li> <li><span class="ansible-option-choices-entry">snmp</span></li> <li><span class="ansible-option-choices-entry">system clock</span></li> <li><span class="ansible-option-choices-entry">system clock manual</span></li> <li><span class="ansible-option-choices-entry">system identity</span></li> <li><span class="ansible-option-choices-entry">system leds settings</span></li> <li><span class="ansible-option-choices-entry">system note</span></li> <li><span class="ansible-option-choices-entry">system ntp client</span></li> <li><span class="ansible-option-choices-entry">system package update</span></li> <li><span class="ansible-option-choices-entry">system routerboard settings</span></li> <li><span class="ansible-option-choices-entry">system upgrade mirror</span></li> <li><span class="ansible-option-choices-entry">system watchdog</span></li> <li><span class="ansible-option-choices-entry">tool bandwidth-server</span></li> <li><span class="ansible-option-choices-entry">tool e-mail</span></li> <li><span class="ansible-option-choices-entry">tool graphing</span></li> <li><span class="ansible-option-choices-entry">tool mac-server</span></li> <li><span class="ansible-option-choices-entry">tool mac-server mac-winbox</span></li> <li><span class="ansible-option-choices-entry">tool mac-server ping</span></li> <li><span class="ansible-option-choices-entry">tool romon</span></li> <li><span class="ansible-option-choices-entry">tool sms</span></li> <li><span class="ansible-option-choices-entry">tool sniffer</span></li> <li><span class="ansible-option-choices-entry">tool traffic-generator</span></li> <li><span class="ansible-option-choices-entry">user aaa</span></li> <li><span class="ansible-option-choices-entry">user group</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-port"><strong>port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS api port. If <em>tls</em> is set, port will apply to TLS/SSL connection.</p> <p>Defaults are <code>8728</code> for the HTTP API, and <code>8729</code> for the HTTPS API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-ssl"><strong id="ansible-collections-community-routeros-api-info-module-parameter-tls">tls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ssl</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If is set TLS will be used for RouterOS API connection.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-unfiltered"><strong>unfiltered</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to output all fields, and not just the ones supported as input for <a class="reference internal" href="api_modify_module#ansible-collections-community-routeros-api-modify-module"><span class="std std-ref">community.routeros.api_modify</span></a>.</p> <p>Unfiltered output can contain counters and other state information.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS login user.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-validate-cert-hostname"><strong>validate_cert_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 1.2.0 of community.routeros</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>true</code> to validate hostnames in certificates.</p> <p>See also <em>validate_certs</em>. Only used when <em>tls=true</em> and <em>validate_certs=true</em>.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">no</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 1.2.0 of community.routeros</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>false</code> to skip validation of TLS certificates.</p> <p>See also <em>validate_cert_hostname</em>. Only used when <em>tls=true</em>.</p> <p><strong>Note:</strong> instead of simply deactivating certificate validations to “make things work”, please consider creating your own CA certificate and using it to sign certificates used for your router. You can tell the module about your CA certificate with the <em>ca_path</em> option.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Supports <em>check_mode</em>.</li> </ul> </div> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="api_module#ansible-collections-community-routeros-api-module"><span class="std std-ref">community.routeros.api</span></a></dt>
<dd>
<p>The official documentation on the <strong>community.routeros.api</strong> module.</p> </dd> <dt><a class="reference internal" href="api_facts_module#ansible-collections-community-routeros-api-facts-module"><span class="std std-ref">community.routeros.api_facts</span></a></dt>
<dd>
<p>The official documentation on the <strong>community.routeros.api_facts</strong> module.</p> </dd> <dt><a class="reference internal" href="api_find_and_modify_module#ansible-collections-community-routeros-api-find-and-modify-module"><span class="std std-ref">community.routeros.api_find_and_modify</span></a></dt>
<dd>
<p>The official documentation on the <strong>community.routeros.api_find_and_modify</strong> module.</p> </dd> <dt><a class="reference internal" href="api_modify_module#ansible-collections-community-routeros-api-modify-module"><span class="std std-ref">community.routeros.api_modify</span></a></dt>
<dd>
<p>The official documentation on the <strong>community.routeros.api_modify</strong> module.</p> </dd> <dt><a class="reference internal" href="docsite/api-guide#ansible-collections-community-routeros-docsite-api-guide"><span class="std std-ref">How to connect to RouterOS devices with the RouterOS API</span></a></dt>
<dd>
<p>How to connect to RouterOS devices with the RouterOS API</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">---
- name: Get IP addresses
  community.routeros.api_info:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: ip address
  register: ip_addresses

- name: Print data for IP addresses
  ansible.builtin.debug:
    var: ip_addresses.result
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-info-module-return-result"><strong>result</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of all elements for the current path.</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> always</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> [{“.id”: “*1”, “actual-interface”: “bridge”, “address”: “192.168.88.1/24”, “comment”: “defconf”, “disabled”: false, “dynamic”: false, “interface”: “bridge”, “invalid”: false, “network”: “192.168.88.0”}]</p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Felix Fontein (@felixfontein)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/ansible-collections/community.routeros/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/ansible-collections/community.routeros" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> <a href="https://github.com/ansible-collections/community.routeros/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" aria-role="button" target="_blank" rel="noopener external">Submit a bug report</a> <a href="https://github.com/ansible-collections/community.routeros/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" aria-role="button" target="_blank" rel="noopener external">Request a feature</a> <a href="index#communication-for-community-routeros" aria-role="button" target="_blank">Communication</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/community/routeros/api_info_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/community/routeros/api_info_module.html</a>
  </p>
</div>
