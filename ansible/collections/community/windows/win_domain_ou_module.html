<h1 id="community-windows-win-domain-ou-manage-active-directory-organizational-units">community.windows.win_domain_ou – Manage Active Directory Organizational Units</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/windows">community.windows collection</a> (version 1.9.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.windows</code>.</p> <p>To use it in a playbook, specify: <code>community.windows.win_domain_ou</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.8.0: </span>of community.windows</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage Active Directory Organizational Units</li> <li>Adds, Removes and Modifies Active Directory Organizational Units</li> <li>Task should be delegated to a Windows Active Directory Domain Controller</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>This module requires Windows Server 2012 or Newer</li> <li>Powershell ActiveDirectory Module</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>domain_password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The password for the domain you are accessing</div> </td> </tr> <tr> <td colspan="1">  <b>domain_server</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the Active Directory Domain Services instance to connect to.</div> <div>Can be in the form of an FQDN or NetBIOS name.</div> <div>If not specified then the value is based on the domain of the computer running PowerShell.</div> </td> </tr> <tr> <td colspan="1">  <b>domain_username</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The username to use when interacting with AD.</div> <div>If this is not set then the user Ansible used to log in with will be used instead when using CredSSP or Kerberos with credential delegation.</div> </td> </tr> <tr> <td colspan="1">  <b>filter</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"*"</div> </td> <td> <div>filter for lookup of ou.</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name of the Organizational Unit</div> </td> </tr> <tr> <td colspan="1">  <b>path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the X.500 path of the OU or container where the new object is created.</div> <div>defaults to adding ou at base of domain connected to.</div> </td> </tr> <tr> <td colspan="1">  <b>properties</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Free form dict of properties for the organizational unit. Follows LDAP property names, like <code>StreetAddress</code> or <code>PostalCode</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>protected</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Indicates whether to prevent the object from being deleted. When this <em>protected=true</em>, you cannot delete the corresponding object without changing the value of the property.</div> </td> </tr> <tr> <td colspan="1">  <b>recursive</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Removes the OU and any child items it contains.</div> <div>You must specify this parameter to remove an OU that is not empty.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Specifies the desired state of the OU.</div> <div>When <em>state=present</em> the module will attempt to create the specified OU if it does not already exist.</div> <div>When <em>state=absent</em>, the module will remove the specified OU.</div> <div>When <em>state=absent</em> and <em>recursive=true</em>, the module will remove all the OU and all child OU's.</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">---
- name: Ensure OU is present &amp; protected
  community.windows.win_domain_ou:
    name: AnsibleFest
    state: present

- name: Ensure OU is present &amp; protected
  community.windows.win_domain_ou:
    name: EUC Users
    path: "DC=euc,DC=vmware,DC=lan"
    state: present
    protected: true
  delegate_to: win-ad1.euc.vmware.lab

- name: Ensure OU is absent
  community.windows.win_domain_ou:
    name: EUC Users
    path: "DC=euc,DC=vmware,DC=lan"
    state: absent
  delegate_to: win-ad1.euc.vmware.lab

- name: Ensure OU is present with specific properties
  community.windows.win_domain_ou:
    name: WS1Users
    path: "CN=EUC Users,DC=euc,DC=vmware,DC=lan"
    protected: true
    properties:
      city: Sandy Springs
      state: Georgia
      StreetAddress: 1155 Perimeter Center West
      country: US
      description: EUC Business Unit
      PostalCode: 30189
  delegate_to: win-ad1.euc.vmware.lab

- name: Ensure OU updated with new properties
  community.windows.win_domain_ou:
    name: WS1Users
    path: DC=euc,DC=vmware,DC=lan
    protected: false
    properties:
      city: Atlanta
      state: Georgia
      managedBy: jzollo@vmware.com
  delegate_to: win-ad1.euc.vmware.lab
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>ou</b>  <div> <span>dictionary</span> </div> </td> <td>When <em>state=present</em>
</td> <td> <div>New/Updated organizational unit parameters</div> <br> <div><b>Sample:</b></div> <div>{'AddedProperties': [], 'City': 'Sandy Springs', 'Country': None, 'DistinguishedName': 'OU=VMW Atlanta,DC=ansible,DC=test', 'LinkedGroupPolicyObjects': [], 'ManagedBy': None, 'ModifiedProperties': [], 'Name': 'VMW Atlanta', 'ObjectClass': 'organizationalUnit', 'ObjectGUID': '3e987e30-93ad-4229-8cd0-cff6a91275e4', 'PostalCode': None, 'PropertyCount': 11, 'PropertyNames': 'City Country DistinguishedName LinkedGroupPolicyObjects ManagedBy Name ObjectClass ObjectGUID PostalCode State StreetAddress', 'RemovedProperties': [], 'State': 'Georgia', 'StreetAddress': '1155 Perimeter Center West'}</div> </td> </tr> <tr> <td colspan="1">  <b>path</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>Base ou path used by module either when provided <em>path=DC=Ansible,DC=Test</em> or derived by module.</div> <br> <div><b>Sample:</b></div> <div>{'path': 'DC=ansible,DC=test'}</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Joe Zollo (@joezollo)</li> <li>Larry Lane (@gamethis)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/community/windows/win_domain_ou_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/community/windows/win_domain_ou_module.html</a>
  </p>
</div>
