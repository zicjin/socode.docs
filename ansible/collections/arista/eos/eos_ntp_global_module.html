<h1 id="arista-eos-eos-ntp-global-manages-ntp-resource-module">arista.eos.eos_ntp_global – Manages ntp resource module</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/arista/eos">arista.eos collection</a> (version 3.1.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install arista.eos</code>.</p> <p>To use it in a playbook, specify: <code>arista.eos.eos_ntp_global</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.1.0: </span>of arista.eos</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module configures and manages the attributes of ntp on Arista EOS platforms.</li> </ul> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module has a corresponding <a class="reference internal" href="../../../plugins/action#action-plugins"><span class="std std-ref">action plugin</span></a>.</p> </div>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="5">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="5">  <b>config</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>A dictionary of ntp options</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>authenticate</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Require authentication for NTP synchronization.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>enable</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Enable authentication for NTP synchronization.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>servers</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Authentication required only for incoming NTP server responses.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>authentication_keys</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Define a key to use for authentication.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>algorithm</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>md5</li> <li>sha1</li> </ul> </td> <td> <div>hash algorithm,</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>encryption</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>7</li> </ul> </td> <td> <div>key type</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>id</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>key identifier.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>key</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Unobfuscated key string.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>local_interface</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configure the interface from which the IP source address is taken.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>qos_dscp</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Set DSCP value in IP header</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>serve</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Configure the switch as an NTP server.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>access_lists</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Configure access control list.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="2">  <b>acls</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Access lists to be configured under the afi</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="1">  <b>acl_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of the access list.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="1">  <b>direction</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>in</li> <li>out</li> </ul> </td> <td> <div>direction for the packets.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="1">  <b>vrf</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>VRF in which to apply the access control list.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="2">  <b>afi</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>ip/ipv6 config commands.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>all</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Service NTP requests received on any interface.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>servers</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Configure NTP server to synchronize to.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>burst</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Send a burst of packets instead of the usual one.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>iburst</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Send bursts of packets until the server is reached</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>key_id</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Set a key to use for authentication.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>local_interface</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configure the interface from which the IP source address is taken.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>maxpoll</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Maximum poll interval.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>minpoll</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Minimum poll interval.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>prefer</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Mark this server as preferred.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Hostname or A.B.C.D or A:B:C:D:E:F:G:H.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>source</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configure the interface from which the IP source address is taken.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>version</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>NTP version.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="3">  <b>vrf</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>vrf name.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="4">  <b>trusted_key</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configure the set of keys that are accepted for incoming messages</div> </td> </tr> <tr> <td colspan="5">  <b>running_config</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This option is used only with state <em>parsed</em>.</div> <div>The value of this option should be the output received from the EOS device by executing the command <b>show running-config | section ntp</b>.</div> <div>The state <em>parsed</em> reads the configuration from <code>running_config</code> option and transforms it into Ansible structured data as per the resource module's argspec and the value is then returned in the <em>parsed</em> key within the result.</div> </td> </tr> <tr> <td colspan="5">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>deleted</li> <li><div>
<b>merged</b> ←</div></li> <li>overridden</li> <li>replaced</li> <li>gathered</li> <li>rendered</li> <li>parsed</li> </ul> </td> <td> <div>The state the configuration should be left in.</div> <div>The states <em>replaced</em> and <em>overridden</em> have identical behaviour for this module.</div> <div>Please refer to examples for more details.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Tested against Arista EOS 4.24.60M</li> <li>This module works with connection <code>network_cli</code>. See the <a class="reference external" href="../../../network/user_guide/platform_eos">https://docs.ansible.com/ansible/latest/network/user_guide/platform_eos.html</a>.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># Using merged

# Before state

# localhost(config)#show running-config | section ntp
# localhost(config)#

  - name: Merge provided configuration with device configuration
    arista.eos.eos_ntp_global:
      config:
        authenticate:
          enable: true
        authentication_keys:
          - id: 2
            algorithm: "sha1"
            encryption: 7
            key: "123456"
          - id: 23
            algorithm: "md5"
            encryption: 7
            key: "123456"
        local_interface: "Ethernet1"
        qos_dscp: 10
        trusted_key: 23
        servers:
          - server: "10.1.1.1"
            vrf: "vrf01"
            burst: True
            prefer: True
          - server: "25.1.1.1"
            vrf: "vrf01"
            maxpoll: 15
            key_id: 2
        serve:
          access_lists:
            - afi: "ip"
              acls:
                - acl_name: "acl01"
                  direction: "in"
            - afi: "ipv6"
              acls:
                 - acl_name: "acl02"
                   direction: "in"

# After State

# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 sha1 7 123456
# ntp authentication-key 23 md5 7 123456
# ntp trusted-key 23
# ntp authenticate
# ntp local-interface Ethernet1
# ntp qos dscp 10
# ntp server vrf vrf01 10.1.1.1 prefer burst
# ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2
# ntp serve ip access-group acl01 in
# ntp serve ipv6 access-group acl02 in
# localhost(config)#
#
#
# Module Execution:
# "after": {
#         "authenticate": {
#             "enable": true
#         },
#         "authentication_keys": [
#             {
#                 "algorithm": "sha1",
#                 "encryption": 7,
#                 "id": 2,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             },
#             {
#                 "algorithm": "md5",
#                 "encryption": 7,
#                 "id": 23,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             }
#         ],
#         "local_interface": "Ethernet1",
#         "qos_dscp": 10,
#         "serve": {
#             "access_lists": [
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl01",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ip"
#                 },
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl02",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ipv6"
#                 }
#             ]
#         },
#         "servers": [
#             {
#                 "burst": true,
#                 "prefer": true,
#                 "server": "10.1.1.1",
#                 "vrf": "vrf01"
#             },
#             {
#                 "key_id": 2,
#                 "maxpoll": 15,
#                 "server": "25.1.1.1",
#                 "vrf": "vrf01"
#             }
#         ],
#         "trusted_key": "23"
#     },
#     "before": {},
#     "changed": true,
#     "commands": [
#         "ntp serve ip access-group acl01 in",
#         "ntp serve ipv6 access-group acl02 in",
#         "ntp authentication-key 2 sha1 7 ********",
#         "ntp authentication-key 23 md5 7 ********",
#         "ntp server vrf vrf01 10.1.1.1 burst prefer",
#         "ntp server vrf vrf01 25.1.1.1 key 2 maxpoll 15",
#         "ntp authenticate",
#         "ntp local-interface Ethernet1",
#         "ntp qos dscp 10",
#         "ntp trusted-key 23"
#     ],

# Using Replaced

# Before State

# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 sha1 7 123456
# ntp authentication-key 23 md5 7 123456
# ntp trusted-key 23
# ntp authenticate
# ntp local-interface Ethernet1
# ntp qos dscp 10
# ntp server vrf vrf01 10.1.1.1 prefer burst
# ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2
# ntp serve ip access-group acl01 in
# ntp serve ipv6 access-group acl02 in
# localhost(config)#

  - name: Replace
    arista.eos.eos_ntp_global:
      config:
        qos_dscp: 15
        authentication_keys:
          - id: 2
            algorithm: "md5"
            encryption: 7
            key: "123456"
        servers:
          - server: "11.21.1.1"
            vrf: "vrf01"
            burst: True
            prefer: True
            minpoll: 13
        serve:
          access_lists:
            - afi: "ip"
              acls:
                - acl_name: "acl03"
                  direction: "in"
      state: replaced
# After State:
# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 md5 7 123456
# ntp qos dscp 15
# ntp server vrf vrf01 11.21.1.1 prefer burst minpoll 13
# ntp serve ip access-group acl03 in
# localhost(config)#
#
#
# Module Execution:
# "after": {
#        "authentication_keys": [
#            {
#                "algorithm": "md5",
#                "encryption": 7,
#                "id": 2,
#                "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#            }
#        ],
#        "qos_dscp": 15,
#        "serve": {
#            "access_lists": [
#                {
#                    "acls": [
#                        {
#                            "acl_name": "acl03",
#                            "direction": "in"
#                        }
#                    ],
#                    "afi": "ip"
#                }
#            ]
#        },
#        "servers": [
#            {
#                "burst": true,
#                "minpoll": 13,
#                "prefer": true,
#                "server": "11.21.1.1",
#                "vrf": "vrf01"
#            }
#        ]
#    },
#    "before": {
#        "authenticate": {
#            "enable": true
#        },
#        "authentication_keys": [
#            {
#                "algorithm": "sha1",
#                "encryption": 7,
#                "id": 2,
#                "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#            },
#            {
#                "algorithm": "md5",
#                "encryption": 7,
#                "id": 23,
#                "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#            }
#        ],
#        "local_interface": "Ethernet1",
#        "qos_dscp": 10,
#        "serve": {
#            "access_lists": [
#                {
#                    "acls": [
#                        {
#                            "acl_name": "acl01",
#                            "direction": "in"
#                        }
#                    ],
#                    "afi": "ip"
#                },
#                {
#                    "acls": [
#                        {
#                            "acl_name": "acl02",
#                            "direction": "in"
#                        }
#                    ],
#                    "afi": "ipv6"
#                }
#            ]
#        },
#        "servers": [
#            {
#                "burst": true,
#                "prefer": true,
#                "server": "10.1.1.1",
#                "vrf": "vrf01"
#            },
#            {
#                "key_id": 2,
#                "maxpoll": 15,
#                "server": "25.1.1.1",
#                "vrf": "vrf01"
#            }
#        ],
#        "trusted_key": "23"
#    },
#    "changed": true,
#    "commands": [
#        "no ntp serve ip access-group acl01 in",
#        "no ntp serve ipv6 access-group acl02 in",
#        "no ntp authentication-key 23 md5 7 ********",
#        "no ntp server vrf vrf01 10.1.1.1 burst prefer",
#        "no ntp server vrf vrf01 25.1.1.1 key 2 maxpoll 15",
#        "no ntp authenticate",
#        "no ntp local-interface Ethernet1",
#        "no ntp trusted-key 23",
#        "ntp serve ip access-group acl03 in",
#        "ntp authentication-key 2 md5 7 ********",
#        "ntp server vrf vrf01 11.21.1.1 burst minpoll 13 prefer",
#        "ntp qos dscp 15"
#    ],
#
# Using Overridden

# Before State

# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 sha1 7 123456
# ntp authentication-key 23 md5 7 123456
# ntp trusted-key 23
# ntp authenticate
# ntp local-interface Ethernet1
# ntp qos dscp 10
# ntp server vrf vrf01 10.1.1.1 prefer burst
# ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2
# ntp serve ip access-group acl01 in
# ntp serve ipv6 access-group acl02 in
# localhost(config)#

  - name: Replace
    arista.eos.eos_ntp_global:
      config:
        qos_dscp: 15
        authentication_keys:
          - id: 2
            algorithm: "md5"
            encryption: 7
            key: "123456"
        servers:
          - server: "11.21.1.1"
            vrf: "vrf01"
            burst: True
            prefer: True
            minpoll: 13
        serve:
          access_lists:
            - afi: "ip"
              acls:
                - acl_name: "acl03"
                  direction: "in"
      state: overridden
# After State:
# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 md5 7 123456
# ntp qos dscp 15
# ntp server vrf vrf01 11.21.1.1 prefer burst minpoll 13
# ntp serve ip access-group acl03 in
# localhost(config)#
#
#
# Module Execution:
# "after": {
#        "authentication_keys": [
#            {
#                "algorithm": "md5",
#                "encryption": 7,
#                "id": 2,
#                "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#            }
#        ],
#        "qos_dscp": 15,
#        "serve": {
#            "access_lists": [
#                {
#                    "acls": [
#                        {
#                            "acl_name": "acl03",
#                            "direction": "in"
#                        }
#                    ],
#                    "afi": "ip"
#                }
#            ]
#        },
#        "servers": [
#            {
#                "burst": true,
#                "minpoll": 13,
#                "prefer": true,
#                "server": "11.21.1.1",
#                "vrf": "vrf01"
#            }
#        ]
#    },
#    "before": {
#        "authenticate": {
#            "enable": true
#        },
#        "authentication_keys": [
#            {
#                "algorithm": "sha1",
#                "encryption": 7,
#                "id": 2,
#                "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#            },
#            {
#                "algorithm": "md5",
#                "encryption": 7,
#                "id": 23,
#                "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#            }
#        ],
#        "local_interface": "Ethernet1",
#        "qos_dscp": 10,
#        "serve": {
#            "access_lists": [
#                {
#                    "acls": [
#                        {
#                            "acl_name": "acl01",
#                            "direction": "in"
#                        }
#                    ],
#                    "afi": "ip"
#                },
#                {
#                    "acls": [
#                        {
#                            "acl_name": "acl02",
#                            "direction": "in"
#                        }
#                    ],
#                    "afi": "ipv6"
#                }
#            ]
#        },
#        "servers": [
#            {
#                "burst": true,
#                "prefer": true,
#                "server": "10.1.1.1",
#                "vrf": "vrf01"
#            },
#            {
#                "key_id": 2,
#                "maxpoll": 15,
#                "server": "25.1.1.1",
#                "vrf": "vrf01"
#            }
#        ],
#        "trusted_key": "23"
#    },
#    "changed": true,
#    "commands": [
#        "no ntp serve ip access-group acl01 in",
#        "no ntp serve ipv6 access-group acl02 in",
#        "no ntp authentication-key 23 md5 7 ********",
#        "no ntp server vrf vrf01 10.1.1.1 burst prefer",
#        "no ntp server vrf vrf01 25.1.1.1 key 2 maxpoll 15",
#        "no ntp authenticate",
#        "no ntp local-interface Ethernet1",
#        "no ntp trusted-key 23",
#        "ntp serve ip access-group acl03 in",
#        "ntp authentication-key 2 md5 7 ********",
#        "ntp server vrf vrf01 11.21.1.1 burst minpoll 13 prefer",
#        "ntp qos dscp 15"
#    ],
#

# using deleted:
# Before State

# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 sha1 7 123456
# ntp authentication-key 23 md5 7 123456
# ntp trusted-key 23
# ntp authenticate
# ntp local-interface Ethernet1
# ntp qos dscp 10
# ntp server vrf vrf01 10.1.1.1 prefer burst
# ntp server vrf vrf01 11.21.1.1 prefer burst minpoll 13
# ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2
# ntp serve ip access-group acl01 in
# ntp serve ipv6 access-group acl02 in
# localhost(config)#

  - name: Delete  ntp-global
    arista.eos.eos_ntp_global:
      state: deleted

# After State:
#  localhost(config)#show running-config | section ntp
# localhost(config)#
#
#
# # Module Execution
# "after": {},
#     "before": {
#         "authenticate": {
#             "enable": true
#         },
#         "authentication_keys": [
#             {
#                 "algorithm": "sha1",
#                 "encryption": 7,
#                 "id": 2,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             },
#             {
#                 "algorithm": "md5",
#                 "encryption": 7,
#                 "id": 23,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             }
#         ],
#         "local_interface": "Ethernet1",
#         "qos_dscp": 10,
#         "serve": {
#             "access_lists": [
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl01",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ip"
#                 },
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl02",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ipv6"
#                 }
#             ]
#         },
#         "servers": [
#             {
#                 "burst": true,
#                 "prefer": true,
#                 "server": "10.1.1.1",
#                 "vrf": "vrf01"
#             },
#             {
#                 "burst": true,
#                 "minpoll": 13,
#                 "prefer": true,
#                 "server": "11.21.1.1",
#                 "vrf": "vrf01"
#             },
#             {
#                 "key": 2,
#                 "maxpoll": 15,
#                 "server": "25.1.1.1",
#                 "vrf": "vrf01"
#             }
#         ],
#         "trusted_key": "23"
#     },
#     "changed": true,
#     "commands": [
#         "no ntp serve ip access-group acl01 in",
#         "no ntp serve ipv6 access-group acl02 in",
#         "no ntp authentication-key 2 sha1 7 ********",
#         "no ntp authentication-key 23 md5 7 ********",
#         "no ntp server vrf vrf01 10.1.1.1 burst prefer",
#         "no ntp server vrf vrf01 11.21.1.1 burst minpoll 13 prefer",
#         "no ntp server vrf vrf01 25.1.1.1 key 2 maxpoll 15",
#         "no ntp authenticate",
#         "no ntp local-interface Ethernet1",
#         "no ntp qos dscp 10",
#         "no ntp trusted-key 23"
#     ],
#

# Using parsed:
# parsed.cfg
# ntp authentication-key 2 sha1 7 123456
# ntp authentication-key 23 md5 7 123456
# ntp trusted-key 23
# ntp authenticate
# ntp local-interface Ethernet1
# ntp qos dscp 10
# ntp server vrf vrf01 10.1.1.1 prefer burst
# ntp server vrf vrf01 11.21.1.1 prefer burst minpoll 13
# ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2
# ntp serve ip access-group acl01 in
# ntp serve ipv6 access-group acl02 in

  - name: parse configs
    arista.eos.eos_ntp_global:
      running_config: "{{ lookup('file', './parsed_ntp_global.cfg') }}"
      state: parsed
    tags:
      - parsed
# Module Execution
# "parsed": {
#         "authenticate": {
#             "enable": true
#         },
#         "authentication_keys": [
#             {
#                 "algorithm": "sha1",
#                 "encryption": 7,
#                 "id": 2,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             },
#             {
#                 "algorithm": "md5",
#                 "encryption": 7,
#                 "id": 23,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             }
#         ],
#         "local_interface": "Ethernet1",
#         "qos_dscp": 10,
#         "serve": {
#             "access_lists": [
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl01",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ip"
#                 },
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl02",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ipv6"
#                 }
#             ]
#         },
#         "servers": [
#             {
#                 "burst": true,
#                 "prefer": true,
#                 "server": "10.1.1.1",
#                 "vrf": "vrf01"
#             },
#             {
#                 "burst": true,
#                 "minpoll": 13,
#                 "prefer": true,
#                 "server": "11.21.1.1",
#                 "vrf": "vrf01"
#             },
#             {
#                 "key": 2,
#                 "maxpoll": 15,
#                 "server": "25.1.1.1",
#                 "vrf": "vrf01"
#             }
#         ],
#         "trusted_key": "23"
#     }
# }

# using Gathered
# Device config:
# localhost(config)#show running-config | section ntp
# ntp authentication-key 2 sha1 7 123456
# ntp authentication-key 23 md5 7 123456
# ntp trusted-key 23
# ntp authenticate
# ntp local-interface Ethernet1
# ntp qos dscp 10
# ntp server vrf vrf01 10.1.1.1 prefer burst
# ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2
# ntp serve ip access-group acl01 in
# ntp serve ipv6 access-group acl02 in
# localhost(config)#


  - name: gather configs
    arista.eos.eos_ntp_global:
      state: gathered
    tags:
      - gathered
# Module Execution
#   "gathered": {
#         "authenticate": {
#             "enable": true
#         },
#         "authentication_keys": [
#             {
#                 "algorithm": "sha1",
#                 "encryption": 7,
#                 "id": 2,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             },
#             {
#                 "algorithm": "md5",
#                 "encryption": 7,
#                 "id": 23,
#                 "key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER"
#             }
#         ],
#         "local_interface": "Ethernet1",
#         "qos_dscp": 10,
#         "serve": {
#             "access_lists": [
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl01",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ip"
#                 },
#                 {
#                     "acls": [
#                         {
#                             "acl_name": "acl02",
#                             "direction": "in"
#                         }
#                     ],
#                     "afi": "ipv6"
#                 }
#             ]
#         },
#         "servers": [
#             {
#                 "burst": true,
#                 "prefer": true,
#                 "server": "10.1.1.1",
#                 "vrf": "vrf01"
#             },
#             {
#                 "key_id": 2,
#                 "maxpoll": 15,
#                 "server": "25.1.1.1",
#                 "vrf": "vrf01"
#             }
#         ],
#         "trusted_key": "23"
#     },
#     "invocation": {
#         "module_args": {
#             "config": null,
#             "running_config": null,
#             "state": "gathered"
#         }
#     }
# }


# using rendered:

  - name: Render provided configuration
    arista.eos.eos_ntp_global:
      config:
        authenticate:
          enable: true
        authentication_keys:
          - id: 2
            algorithm: "sha1"
            encryption: 7
            key: "123456"
          - id: 23
            algorithm: "md5"
            encryption: 7
            key: "123456"
        local_interface: "Ethernet1"
        qos_dscp: 10
        trusted_key: 23
        servers:
          - server: "10.1.1.1"
            vrf: "vrf01"
            burst: True
            prefer: True
          - server: "25.1.1.1"
            vrf: "vrf01"
            maxpoll: 15
            key_id: 2
        serve:
          access_lists:
            - afi: "ip"
              acls:
                - acl_name: "acl01"
                  direction: "in"
            - afi: "ipv6"
              acls:
                 - acl_name: "acl02"
                   direction: "in"
      state: rendered
    become: yes

# Module Execution:
# "rendered": [
#         "ntp serve ip access-group acl01 in",
#         "ntp serve ipv6 access-group acl02 in",
#         "ntp authentication-key 2 sha1 7 ********",
#         "ntp authentication-key 23 md5 7 ********",
#         "ntp server vrf vrf01 10.1.1.1 burst prefer",
#         "ntp server vrf vrf01 25.1.1.1 key 2 maxpoll 15",
#         "ntp authenticate",
#         "ntp local-interface Ethernet1",
#         "ntp qos dscp 10",
#         "ntp trusted-key 23"
#     ]
#
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>after</b>  <div> <span>dictionary</span> </div> </td> <td>when changed</td> <td> <div>The resulting configuration after module execution.</div> <br> <div><b>Sample:</b></div> <div>This output will always be in the same format as the module argspec.</div> </td> </tr> <tr> <td colspan="1">  <b>before</b>  <div> <span>dictionary</span> </div> </td> <td>when <em>state</em> is <code>merged</code>, <code>replaced</code>, <code>overridden</code>, <code>deleted</code> or <code>purged</code>
</td> <td> <div>The configuration prior to the module execution.</div> <br> <div><b>Sample:</b></div> <div>This output will always be in the same format as the module argspec.</div> </td> </tr> <tr> <td colspan="1">  <b>commands</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>when <em>state</em> is <code>merged</code>, <code>replaced</code>, <code>overridden</code>, <code>deleted</code> or <code>purged</code>
</td> <td> <div>The set of commands pushed to the remote device.</div> <br> <div><b>Sample:</b></div> <div>['ntp master stratum 2', 'ntp peer 198.51.100.1 use-vrf test maxpoll 7', 'ntp authentication-key 10 md5 wawyhanx2 7', 'ntp access-group peer PeerAcl1', 'ntp access-group peer PeerAcl2', 'ntp access-group query-only QueryAcl1']</div> </td> </tr> <tr> <td colspan="1">  <b>gathered</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>when <em>state</em> is <code>gathered</code>
</td> <td> <div>Facts about the network resource gathered from the remote device as structured data.</div> <br> <div><b>Sample:</b></div> <div>This output will always be in the same format as the module argspec.</div> </td> </tr> <tr> <td colspan="1">  <b>parsed</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>when <em>state</em> is <code>parsed</code>
</td> <td> <div>The device native config provided in <em>running_config</em> option parsed into structured data as per module argspec.</div> <br> <div><b>Sample:</b></div> <div>This output will always be in the same format as the module argspec.</div> </td> </tr> <tr> <td colspan="1">  <b>rendered</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>when <em>state</em> is <code>rendered</code>
</td> <td> <div>The provided configuration in the task rendered in device-native format (offline).</div> <br> <div><b>Sample:</b></div> <div>['ntp authentication-key 2 sha1 7 123456', 'ntp authentication-key 23 md5 7 123456', 'ntp trusted-key 23', 'ntp authenticate', 'ntp local-interface Ethernet1', 'ntp qos dscp 10', 'ntp server vrf vrf01 10.1.1.1 prefer burst', 'ntp server vrf vrf01 25.1.1.1 maxpoll 15 key 2', 'ntp serve ip access-group acl01 in', 'ntp serve ipv6 access-group acl02 in']</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Gomathi Selvi Srinivasan (@GomathiselviS)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/arista/eos/eos_ntp_global_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/arista/eos/eos_ntp_global_module.html</a>
  </p>
</div>
