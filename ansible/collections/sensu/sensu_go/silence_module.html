<section id="sensu-sensu-go-silence-module-manage-sensu-silences"> <h1>sensu.sensu_go.silence module – Manage Sensu silences</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/sensu/sensu_go">sensu.sensu_go collection</a> (version 1.13.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install sensu.sensu_go</code>.</p> <p>To use it in a playbook, specify: <code>sensu.sensu_go.silence</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of sensu.sensu_go</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#see-also" id="id4">See Also</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Create, update or delete Sensu silence.</li> <li>For more information, refer to the Sensu documentation at <a class="reference external" href="https://docs.sensu.io/sensu-go/latest/reference/silencing/">https://docs.sensu.io/sensu-go/latest/reference/silencing/</a>.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-annotations"><strong>annotations</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Custom metadata fields with fewer restrictions, as key/value pairs.</p> <p>These are preserved by Sensu but not accessible as tokens or identifiers, and are mainly intended for use with external tools.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth"><strong>auth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Authentication parameters. Can define each of them with ENV as well.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth-api-key"><strong>api_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><span class="ansible-option-versionadded">added in 1.3.0 of sensu.sensu_go</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The API key that should be used when authenticating. If this is not set, the value of the SENSU_API_KEY environment variable will be checked.</p> <p>This replaces <em>auth.user</em> and <em>auth.password</em> parameters.</p> <p>For more information about the API key, refer to the official Sensu documentation at <a class="reference external" href="https://docs.sensu.io/sensu-go/latest/guides/use-apikey-feature/">https://docs.sensu.io/sensu-go/latest/guides/use-apikey-feature/</a>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> <p><span class="ansible-option-versionadded">added in 1.5.0 of sensu.sensu_go</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Path to the CA bundle that should be used to validate the backend certificate.</p> <p>If this parameter is not set, module will use the CA bundle that python is using.</p> <p>It is also possible to set this parameter via the <em>SENSU_CA_PATH</em> environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The Sensu user’s password. If this is not set the value of the SENSU_PASSWORD environment variable will be checked.</p> <p>This parameter is ignored if the <em>auth.api_key</em> parameter is set.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“P@ssw0rd!”</span></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth-url"><strong>url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Location of the Sensu backend API. If this is not set the value of the SENSU_URL environment variable will be checked.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“http://localhost:8080”</span></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth-user"><strong>user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The username to use for connecting to the Sensu API. If this is not set the value of the SENSU_USER environment variable will be checked.</p> <p>This parameter is ignored if the <em>auth.api_key</em> parameter is set.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“admin”</span></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-auth-verify"><strong>verify</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><span class="ansible-option-versionadded">added in 1.5.0 of sensu.sensu_go</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Flag that controls the certificate validation.</p> <p>If you are using self-signed certificates, you can set this parameter to <code>false</code>.</p> <p>ONLY USE THIS PARAMETER IN DEVELOPMENT SCENARIOS! In you use self-signed certificates in production, see the <em>auth.ca_path</em> parameter.</p> <p>It is also possible to set this parameter via the <em>SENSU_VERIFY</em> environment variable.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-begin"><strong>begin</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>UNIX time at which silence entry goes into effect.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-check"><strong>check</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the check the entry should match.</p> <p>If left empty a silencing entry will contain an asterisk in the check position. This indicates that any event where the originating entities subscriptions match the subscription specified in the entry will be marked as silenced, regardless of the check name.</p> <p>This parameter is required if the <em>subscription</em> parameter is absent.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-expire"><strong>expire</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of seconds until the silence expires.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-expire-on-resolve"><strong>expire_on_resolve</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If the entry should be deleted when a check begins return OK status (resolves).</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-labels"><strong>labels</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Custom metadata fields that can be accessed within Sensu, as key/value pairs.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-namespace"><strong>namespace</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RBAC namespace to operate in. If this is not set the value of the SENSU_NAMESPACE environment variable will be used.</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">“default”</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-reason"><strong>reason</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Reason for silencing.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Target state of the Sensu object.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">present</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">absent</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-parameter-subscription"><strong>subscription</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the subscription the entry should match.</p> <p>If left empty a silencing entry will contain an asterisk in the subscription position. This indicates that any event with a matching check name will be marked as silenced, regardless of the originating entities subscriptions.</p> <p>Specific entity can also be targeted by taking advantage of per-entity subscription (entity:&lt;entity_name&gt;).</p> <p>This parameter is required if the <em>check</em> parameter is absent.</p> </div></td> </tr>  </table> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="silence_info_module#ansible-collections-sensu-sensu-go-silence-info-module"><span class="std std-ref">sensu.sensu_go.silence_info</span></a></dt>
<dd>
<p>The official documentation on the <strong>sensu.sensu_go.silence_info</strong> module.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Silence a specific check
  sensu.sensu_go.silence:
    subscription: proxy
    check: check-disk

- name: Silence specific check regardless of the originating entities subscription
  sensu.sensu_go.silence:
    check: check-cpu

- name: Silence all checks on a specific entity
  sensu.sensu_go.silence:
    subscription: entity:important-entity
    expire: 120
    reason: rebooting the world

- name: Delete a silencing entry
  sensu.sensu_go.silence:
    subscription: entity:important-entity
    state: absent
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-sensu-sensu-go-silence-module-return-object"><strong>object</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Object representing Sensu silence.</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> success</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> {“begin”: 1542671205, “check”: null, “creator”: “admin”, “expire”: -1, “expire_on_resolve”: false, “metadata”: {“annotations”: null, “labels”: null, “name”: “entity:i-424242:*”, “namespace”: “default”}, “reason”: null, “subscription”: “entity:i-424242”}</p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Paul Arthur (@flowerysong)</li> <li>Aljaz Kosir (@aljazkosir)</li> <li>Manca Bizjak (@mancabizjak)</li> <li>Tadej Borovsak (@tadeboro)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/sensu/sensu-go-ansible/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/sensu/sensu-go-ansible" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/sensu/sensu_go/silence_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/sensu/sensu_go/silence_module.html</a>
  </p>
</div>
