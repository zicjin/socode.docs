<section id="cisco-nxos-nxos-lacp-interfaces-module-lacp-interfaces-resource-module"> <h1>cisco.nxos.nxos_lacp_interfaces module – LACP interfaces resource module</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/cisco/nxos">cisco.nxos collection</a> (version 3.1.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install cisco.nxos</code>.</p> <p>To use it in a playbook, specify: <code>cisco.nxos.nxos_lacp_interfaces</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of cisco.nxos</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>This module manages Link Aggregation Control Protocol (LACP) attributes of NX-OS Interfaces.</li> </ul> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module has a corresponding <a class="reference internal" href="../../../plugins/action#action-plugins"><span class="std std-ref">action plugin</span></a>.</p> </div> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config"><strong>config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A dictionary of LACP interfaces options.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-convergence"><strong>convergence</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>This dict contains configurable options related to convergence. Applicable only for Port-channel.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-convergence-graceful"><strong>graceful</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>port-channel lacp graceful convergence. Disable this only with lacp ports connected to Non-Nexus peer. Disabling this with Nexus peer can lead to port suspension.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-convergence-vpc"><strong>vpc</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Enable lacp convergence for vPC port channels.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-links"><strong>links</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>This dict contains configurable options related to max and min port-channel links. Applicable only for Port-channel.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-links-max"><strong>max</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Port-channel max bundle.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-links-min"><strong>min</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Port-channel min links.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>LACP mode. Applicable only for Port-channel.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">delay</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Name of the interface.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-port-priority"><strong>port_priority</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>LACP port priority for the interface. Range 1-65535. Applicable only for Ethernet.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-rate"><strong>rate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Rate at which PDUs are sent by LACP. Applicable only for Ethernet. At fast rate LACP is transmitted once every 1 second. At normal rate LACP is transmitted every 30 seconds after the link is bundled.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">fast</span></li> <li><span class="ansible-option-choices-entry">normal</span></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-config-suspend-individual"><strong>suspend_individual</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>port-channel lacp state. Disabling this will cause lacp to put the port to individual state and not suspend the port in case it does not get LACP BPDU from the peer ports in the port-channel.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li><span class="ansible-option-choices-entry">yes</span></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-running-config"><strong>running_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option is used only with state <em>parsed</em>.</p> <p>The value of this option should be the output received from the NX-OS device by executing the command <strong>show running-config | section ^interface</strong>.</p> <p>The state <em>parsed</em> reads the configuration from <code>running_config</code> option and transforms it into Ansible structured data as per the resource module’s argspec and the value is then returned in the <em>parsed</em> key within the result.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The state of the configuration after module completion.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li>
<span class="ansible-option-default-bold">merged</span> <span class="ansible-option-default">← (default)</span>
</li> <li><span class="ansible-option-choices-entry">replaced</span></li> <li><span class="ansible-option-choices-entry">overridden</span></li> <li><span class="ansible-option-choices-entry">deleted</span></li> <li><span class="ansible-option-choices-entry">gathered</span></li> <li><span class="ansible-option-choices-entry">rendered</span></li> <li><span class="ansible-option-choices-entry">parsed</span></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Tested against NXOS 7.3.(0)D1(1) on VIRL</li> <li>Unsupported for Cisco MDS</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># Using merged

# Before state:
# -------------
#

- name: Merge provided configuration with device configuration.
  cisco.nxos.nxos_lacp_interfaces:
    config:
    - name: Ethernet1/3
      port_priority: 5
      rate: fast
    state: merged

# After state:
# ------------
#
# interface Ethernet1/3
# lacp port-priority 5
# lacp rate fast


# Using replaced

# Before state:
# -------------
#
# interface Ethernet1/3
#   lacp port-priority 5
# interface port-channel11
#   lacp mode delay

- name: Replace device lacp interfaces configuration with the given configuration.
  cisco.nxos.nxos_lacp_interfaces:
    config:
    - name: port-channel11
      links:
        min: 4
    state: replaced

# After state:
# ------------
#
# interface Ethernet1/3
#   lacp port-priority 5
# interface port-channel11
#   lacp min-links 4


# Using overridden

# Before state:
# -------------
#
# interface Ethernet1/3
#   lacp port-priority 5
# interface port-channel11
#   lacp mode delay

- name: Override device configuration of all LACP interfaces attributes of given interfaces
    on device with provided configuration.
  cisco.nxos.nxos_lacp_interfaces:
    config:
    - name: port-channel11
      links:
        min: 4
    state: overridden

# After state:
# ------------
#
# interface port-channel11
# lacp min-links 4


# Using deleted

# Before state:
# -------------
#
# interface Ethernet1/3
#   lacp port-priority 5
# interface port-channel11
#   lacp mode delay

- name: Delete LACP interfaces configurations.
  cisco.nxos.nxos_lacp_interfaces:
    state: deleted

# After state:
# ------------
#

# Using rendered

- name: Use rendered state to convert task input to device specific commands
  cisco.nxos.nxos_lacp_interfaces:
    config:
    - name: Ethernet1/800
      rate: fast
    - name: Ethernet1/801
      rate: fast
      port_priority: 32
    - name: port-channel10
      links:
        max: 15
        min: 2
      convergence:
        graceful: true
    state: rendered

# Task Output (redacted)
# -----------------------

# rendered:
#  - "interface Ethernet1/800"
#  - "lacp rate fast"
#  - "interface Ethernet1/801"
#  - "lacp port-priority 32"
#  - "lacp rate fast"
#  - "interface port-channel10"
#  - "lacp min-links 2"
#  - "lacp max-bundle 15"
#  - "lacp graceful-convergence"

# Using parsed

# parsed.cfg
# ------------

# interface port-channel10
#   lacp min-links 10
#   lacp max-bundle 15
# interface Ethernet1/800
#   lacp port-priority 100
#   lacp rate fast

- name: Use parsed state to convert externally supplied config to structured format
  cisco.nxos.nxos_lacp_interfaces:
    running_config: "{{ lookup('file', 'parsed.cfg') }}"
    state: parsed

# Task output (redacted)
# -----------------------

# parsed:
#   - name: port-channel10
#     links:
#       max: 15
#       min: 10
#   - name: Ethernet1/800
#     port_priority: 100
#     rate: fast

# Using gathered

# Existing device config state
# -------------------------------
# interface Ethernet1/1
#   lacp port-priority 5
#   lacp rate fast
# interface port-channel10
#   lacp mode delay
# interface port-channel11
#   lacp max-bundle 10
#   lacp min-links 5

- name: Gather lacp_interfaces facts from the device using nxos_lacp_interfaces
  cisco.nxos.nxos_lacp_interfaces:
    state: gathered

# Task output (redacted)
# -----------------------
# gathered:
#  - name: Ethernet1/1
#    port_priority: 5
#    rate: fast
#  - name: port-channel10
#    mode: delay
#  - name: port-channel11
#    links:
#      max: 10
#      min: 5
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-return-after"><strong>after</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The configuration as structured data after module completion.</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> when changed</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> “The configuration returned will always be in the same format\n of the parameters above.\n”</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-return-before"><strong>before</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The configuration as structured data prior to module invocation.</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> always</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> “The configuration returned will always be in the same format\n of the parameters above.\n”</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-cisco-nxos-nxos-lacp-interfaces-module-return-commands"><strong>commands</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The set of commands pushed to the remote device.</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> always</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> [“interface port-channel10”, “lacp min-links 5”, “lacp mode delay”]</p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Trishna Guha (@trishnaguha)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/ansible-collections/cisco.nxos/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/ansible-collections/cisco.nxos" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/cisco/nxos/nxos_lacp_interfaces_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/cisco/nxos/nxos_lacp_interfaces_module.html</a>
  </p>
</div>
