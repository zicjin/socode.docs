<section id="purestorage-flasharray-purefa-host-module-manage-hosts-on-pure-storage-flasharrays"> <h1>purestorage.flasharray.purefa_host module – Manage hosts on Pure Storage FlashArrays</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/purestorage/flasharray">purestorage.flasharray collection</a> (version 1.13.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install purestorage.flasharray</code>.</p> <p>To use it in a playbook, specify: <code>purestorage.flasharray.purefa_host</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of purestorage.flasharray</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Create, delete or modify hosts on Pure Storage FlashArrays.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 3.3</li> <li>purestorage &gt;= 1.19</li> <li>py-pure-client &gt;= 1.22.0</li> <li>netaddr</li> <li>requests</li> <li>pycountry</li> <li>packaging</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-api-token"><strong>api_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>FlashArray API token for admin privileged user.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-count"><strong>count</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of hosts to be created in a multiple host creation</p> <p>Only supported from Purity//FA v6.0.0 and higher</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-digits"><strong>digits</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of digits to use for multiple host count. This will pad the index number with zeros where necessary</p> <p>Only supported from Purity//FA v6.0.0 and higher</p> <p>Range is between 1 and 10</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">1</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-fa-url"><strong>fa_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>FlashArray management IPv4 address or Hostname.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-host-password"><strong>host_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the host password for CHAP authentication</p> <p>Password length between 12 and 255 characters</p> <p>To clear the username/password pair use <em>clear</em> as the password</p> <p>SETTING A PASSWORD IS NON-IDEMPOTENT</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-host-user"><strong>host_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the host user name for CHAP authentication</p> <p>Required with <em>host_password</em></p> <p>To clear the username/password pair use <em>clear</em> as the password</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-iqn"><strong>iqn</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of IQNs of the host.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-lun"><strong>lun</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>LUN ID to assign to volume for host. Must be unique.</p> <p>If not provided the ID will be automatically assigned.</p> <p>Range for LUN ID is 1 to 4095.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-host"><strong id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-name">name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: host</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the host.</p> <p>Note that hostnames are case-sensitive however FlashArray hostnames are unique and ignore case - you cannot have <em>hosta</em> and <em>hostA</em></p> <p>Multi-host support available from Purity//FA 6.0.0 <strong>***NOTE***</strong> Manual deletion of individual hosts created using multi-host will cause idempotency to fail</p> <p>Multi-host support only exists for host creation</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-nqn"><strong>nqn</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of NQNs of the host.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-personality"><strong>personality</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Define which operating system the host is. Recommended for ActiveCluster integration.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">hpux</span></li> <li><span class="ansible-option-choices-entry">vms</span></li> <li><span class="ansible-option-choices-entry">aix</span></li> <li><span class="ansible-option-choices-entry">esxi</span></li> <li><span class="ansible-option-choices-entry">solaris</span></li> <li><span class="ansible-option-choices-entry">hitachi-vsp</span></li> <li><span class="ansible-option-choices-entry">oracle-vm-server</span></li> <li><span class="ansible-option-choices-entry">delete</span></li> <li>:ansible-option-default-bold:`` <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-preferred-array"><strong>preferred_array</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of preferred arrays in an ActiveCluster environment.</p> <p>To remove existing preferred arrays from the host, specify <em>delete</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-protocol"><strong>protocol</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Defines the host connection protocol for volumes.</p> <p>DEPRECATED No longer a necessary parameter</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">fc</span></li> <li><span class="ansible-option-choices-entry">iscsi</span></li> <li><span class="ansible-option-choices-entry">nvme</span></li> <li><span class="ansible-option-choices-entry">mixed</span></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-rename"><strong>rename</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name to rename to.</p> <p>Note that hostnames are case-sensitive however FlashArray hostnames are unique and ignore case - you cannot have <em>hosta</em> and <em>hostA</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-start"><strong>start</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number at which to start the multiple host creation index</p> <p>Only supported from Purity//FA v6.0.0 and higher</p> <p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <span class="ansible-option-default">0</span></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Define whether the host should exist or not.</p> <p>When removing host all connected volumes will be disconnected.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">absent</span></li> <li>
<span class="ansible-option-default-bold">present</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-suffix"><strong>suffix</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Suffix string, if required, for multiple host create</p> <p>Host names will be formed as <em>&lt;name&gt;#&lt;suffix&gt;</em>, where <em>#</em> is a placeholder for the host index See associated descriptions</p> <p>Suffix string is optional</p> <p>Only supported from Purity//FA v6.0.0 and higher</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-target-password"><strong>target_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the target password for CHAP authentication</p> <p>Password length between 12 and 255 characters</p> <p>To clear the username/password pair use <em>clear</em> as the password</p> <p>SETTING A PASSWORD IS NON-IDEMPOTENT</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-target-user"><strong>target_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the target user name for CHAP authentication</p> <p>Required with <em>target_password</em></p> <p>To clear the username/password pair use <em>clear</em> as the password</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-volume"><strong>volume</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Volume name to map to the host.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flasharray-purefa-host-module-parameter-wwns"><strong>wwns</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of wwns of the host.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>If specifying <code>lun</code> option ensure host support requested value</li> <li>This module requires the <code>purestorage</code> and <code>py-pure-client</code> Python libraries</li> <li>Additional Python librarues may be required for specific modules.</li> <li>You must set <code>PUREFA_URL</code> and <code>PUREFA_API</code> environment variables if <em>fa_url</em> and <em>api_token</em> arguments are not passed to the module directly</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create new AIX host
  purestorage.flasharray.purefa_host:
    name: foo
    personality: aix
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Create 10 hosts with index starting at 10 but padded with 3 digits
  purestorage.flasharray.purefa_host:
    name: foo
    personality: vms
    suffix: bar
    count: 10
    start: 10
    digits: 3
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592
    state: present

- name: Rename host foo to bar
  purestorage.flasharray.purefa_host:
    name: foo
    rename: bar
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete host
  purestorage.flasharray.purefa_host:
    name: foo
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592
    state: absent

- name: Make host bar with wwn ports
  purestorage.flasharray.purefa_host:
    name: bar
    wwns:
    - 00:00:00:00:00:00:00
    - 11:11:11:11:11:11:11
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Make host bar with iSCSI ports
  purestorage.flasharray.purefa_host:
    name: bar
    iqn:
    - iqn.1994-05.com.redhat:7d366003913
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Make host bar with NVMe ports
  purestorage.flasharray.purefa_host:
    name: bar
    nqn:
    - nqn.2014-08.com.vendor:nvme:nvm-subsystem-sn-d78432
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Make mixed protocol host
  purestorage.flasharray.purefa_host:
    name: bar
    nqn:
    - nqn.2014-08.com.vendor:nvme:nvm-subsystem-sn-d78432
    iqn:
    - iqn.1994-05.com.redhat:7d366003914
    wwns:
    - 00:00:00:00:00:00:01
    - 11:11:11:11:11:11:12
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Map host foo to volume bar as LUN ID 12
  purestorage.flasharray.purefa_host:
    name: foo
    volume: bar
    lun: 12
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Disconnect volume bar from host foo
  purestorage.flasharray.purefa_host:
    name: foo
    volume: bar
    state: absent
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Add preferred arrays to host foo
  purestorage.flasharray.purefa_host:
    name: foo
    preferred_array:
    - array1
    - array2
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete preferred arrays from host foo
  purestorage.flasharray.purefa_host:
    name: foo
    preferred_array: delete
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete exisitng WWNs from host foo (does not delete host object)
  purestorage.flasharray.purefa_host:
    name: foo
    wwns: ""
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Set CHAP target and host username/password pairs
  purestorage.flasharray.purefa_host:
    name: foo
    target_user: user1
    target_password: passwrodpassword
    host_user: user2
    host_password: passwrodpassword
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete CHAP target and host username/password pairs
  purestorage.flasharray.purefa_host:
    name: foo
    target_user: user
    target_password: clear
    host_user: user
    host_password: clear
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Pure Storage Ansible Team (@sdodsley)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/Pure-Storage-Ansible/FlashArray-Collection/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/Pure-Storage-Ansible/FlashArray-Collection" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> <a href="https://github.com/Pure-Storage-Ansible/FlashArray-Collection/issues/new?assignees=sdodsley&amp;labels=bug&amp;template=bug_report_template.md" aria-role="button" target="_blank" rel="noopener external">Submit a bug report</a> <a href="https://github.com/Pure-Storage-Ansible/FlashArray-Collection/issues/new?assignees=sdodsley&amp;labels=enhancement&amp;template=feature_request_template.md" aria-role="button" target="_blank" rel="noopener external">Request a feature</a> <a href="index#communication-for-purestorage-flasharray" aria-role="button" target="_blank">Communication</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/purestorage/flasharray/purefa_host_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/purestorage/flasharray/purefa_host_module.html</a>
  </p>
</div>
