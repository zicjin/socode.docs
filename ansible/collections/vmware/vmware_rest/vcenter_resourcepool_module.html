<section id="vmware-vmware-rest-vcenter-resourcepool-module-creates-a-resource-pool"> <h1>vmware.vmware_rest.vcenter_resourcepool module – Creates a resource pool.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/vmware/vmware_rest">vmware.vmware_rest collection</a> (version 2.2.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install vmware.vmware_rest</code>.</p> <p>To use it in a playbook, specify: <code>vmware.vmware_rest.vcenter_resourcepool</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.3.0: </span>of vmware.vmware_rest</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Creates a resource pool.</li> </ul> </section> <section id="requirements"> <h2>Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>vSphere 7.0.2 or greater</li> <li>python &gt;= 3.6</li> <li>aiohttp</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-cpu-allocation"><strong>cpu_allocation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Resource allocation for CPU.</p> <p>Valid attributes are:</p>  <ul class="simple"> <li>
<code>reservation</code> (int): Amount of resource that is guaranteed available to a resource pool. Reserved resources are not wasted if they are not used. If the utilization is less than the reservation, the resources can be utilized by other running virtual machines. Units are MB fo memory, and MHz for CPU. ([‘present’])</li> <li>
<code>expandable_reservation</code> (bool): In a resource pool with an expandable reservation, the reservation can grow beyond the specified value, if the parent resource pool has unreserved resources. A non-expandable reservation is called a fixed reservation. ([‘present’])</li> <li>
<code>limit</code> (int): The utilization of a resource pool will not exceed this limit, even if there are available resources. This is typically used to ensure a consistent performance of resource pools independent of available resources. If set to -1, then there is no fixed limit on resource usage (only bounded by available resources and shares). Units are MB for memory, and MHz for CPU. ([‘present’])</li> <li>
<p><code>shares</code> (dict): Shares are used in case of resource contention. ([‘present’])</p> <ul> <li>
<p>Accepted keys:</p> <ul> <li>level (string): The <code>level</code> defines the possible values for the allocation level.</li> </ul> </li> </ul> </li> </ul>  <p>Accepted value for this field:</p>   <ul class="simple"> <li><code>CUSTOM</code></li> <li><code>HIGH</code></li> <li><code>LOW</code></li> <li><code>NORMAL</code></li> </ul>  <ul class="simple"> <li>shares (integer): When <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#403b666373777b666375727b666374787b2c292e2b">{<span>@</span>link</a> #level} is set to CUSTOM, it is the number of shares allocated. Otherwise, this value is ignored. There is no unit for this value. It is a relative measure based on the settings for other resource pools.</li> </ul>  </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-memory-allocation"><strong>memory_allocation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Resource allocation for CPU.</p> <p>Valid attributes are:</p>  <ul class="simple"> <li>
<code>reservation</code> (int): Amount of resource that is guaranteed available to a resource pool. Reserved resources are not wasted if they are not used. If the utilization is less than the reservation, the resources can be utilized by other running virtual machines. Units are MB fo memory, and MHz for CPU. ([‘present’])</li> <li>
<code>expandable_reservation</code> (bool): In a resource pool with an expandable reservation, the reservation can grow beyond the specified value, if the parent resource pool has unreserved resources. A non-expandable reservation is called a fixed reservation. ([‘present’])</li> <li>
<code>limit</code> (int): The utilization of a resource pool will not exceed this limit, even if there are available resources. This is typically used to ensure a consistent performance of resource pools independent of available resources. If set to -1, then there is no fixed limit on resource usage (only bounded by available resources and shares). Units are MB for memory, and MHz for CPU. ([‘present’])</li> <li>
<p><code>shares</code> (dict): Shares are used in case of resource contention. ([‘present’])</p> <ul> <li>
<p>Accepted keys:</p> <ul> <li>level (string): The <code>level</code> defines the possible values for the allocation level.</li> </ul> </li> </ul> </li> </ul>  <p>Accepted value for this field:</p>   <ul class="simple"> <li><code>CUSTOM</code></li> <li><code>HIGH</code></li> <li><code>LOW</code></li> <li><code>NORMAL</code></li> </ul>  <ul class="simple"> <li>shares (integer): When <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#8bf0ada8b8bcb0ada8beb9b0ada8bfb3b0e7e2e5e0">{<span>@</span>link</a> #level} is set to CUSTOM, it is the number of shares allocated. Otherwise, this value is ignored. There is no unit for this value. It is a relative measure based on the settings for other resource pools.</li> </ul>  </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the resource pool. Required with <em>state=[‘present’]</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-parent"><strong>parent</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Parent of the created resource pool. Required with <em>state=[‘present’]</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-resource-pool"><strong>resource_pool</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Identifier of the resource pool to be deleted. Required with <em>state=[‘absent’, ‘present’]</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-session-timeout"><strong>session_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> <p><span class="ansible-option-versionadded">added in 2.1.0 of vmware.vmware_rest</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Timeout settings for client session.</p> <p>The maximal number of seconds for the whole operation including connection establishment, request sending and response.</p> <p>The default value is 300s.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">absent</span></li> <li>
<span class="ansible-option-default-bold">present</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-vcenter-hostname"><strong>vcenter_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The hostname or IP address of the vSphere vCenter</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_HOST</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-vcenter-password"><strong>vcenter_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The vSphere vCenter password</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_PASSWORD</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-vcenter-rest-log-file"><strong>vcenter_rest_log_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>You can use this optional parameter to set the location of a log file.</p> <p>This file will be used to record the HTTP REST interaction.</p> <p>The file will be stored on the host that run the module.</p> <p>If the value is not specified in the task, the value of</p> <p>environment variable <code>VMWARE_REST_LOG_FILE</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-vcenter-username"><strong>vcenter_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The vSphere vCenter username</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_USER</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-parameter-vcenter-validate-certs"><strong>vcenter_validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allows connection when SSL certificates are not valid. Set to <code>false</code> when certificates are not trusted.</p> <p>If the value is not specified in the task, the value of environment variable <code>VMWARE_VALIDATE_CERTS</code> will be used instead.</p> <p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p> <ul class="simple"> <li><span class="ansible-option-choices-entry">no</span></li> <li>
<span class="ansible-option-default-bold">yes</span> <span class="ansible-option-default">← (default)</span>
</li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Tested on vSphere 7.0.2</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Get the existing resource pools
  vmware.vmware_rest.vcenter_resourcepool_info:
  register: resource_pools

- name: Create an Ad hoc resource pool
  vmware.vmware_rest.vcenter_resourcepool:
    name: my_resource_pool
    parent: '{{ resource_pools.value[0].resource_pool }}'
    cpu_allocation:
      expandable_reservation: true
      limit: 40
      reservation: 0
      shares:
        level: NORMAL
    memory_allocation:
      expandable_reservation: false
      limit: 2000
      reservation: 0
      shares:
        level: NORMAL
  register: my_resource_pool

- name: Remove a resource pool
  vmware.vmware_rest.vcenter_resourcepool:
    resource_pool: '{{ my_resource_pool.id }}'
    state: absent

- name: Create a generic resource pool
  vmware.vmware_rest.vcenter_resourcepool:
    name: my_resource_pool
    parent: '{{ resource_pools.value[0].resource_pool }}'
  register: my_resource_pool

- name: Modify a resource pool
  vmware.vmware_rest.vcenter_resourcepool:
    resource_pool: '{{ my_resource_pool.id }}'
    cpu_allocation:
      expandable_reservation: true
      limit: -1
      reservation: 0
      shares:
        level: NORMAL
    memory_allocation:
      expandable_reservation: false
      limit: 1000
      reservation: 0
      shares:
        level: NORMAL
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-return-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>moid of the resource</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> On success</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> “resgroup-1143”</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-vmware-vmware-rest-vcenter-resourcepool-module-return-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create a generic resource pool</p> <p class="ansible-option-line"><span class="ansible-option-returned-bold">Returned:</span> On success</p> <p class="ansible-option-line ansible-option-sample"><span class="ansible-option-sample-bold">Sample:</span> {“cpu_allocation”: {“expandable_reservation”: 1, “limit”: -1, “reservation”: 0, “shares”: {“level”: “NORMAL”}}, “memory_allocation”: {“expandable_reservation”: 1, “limit”: -1, “reservation”: 0, “shares”: {“level”: “NORMAL”}}, “name”: “my_resource_pool”, “resource_pools”: []}</p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Ansible Cloud Team (@ansible-collections)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <p class="ansible-links"> <a href="https://github.com/ansible-collections/vmware.vmware_rest/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a> <a href="https://github.com/ansible-collections/vmware.vmware_rest" aria-role="button" target="_blank" rel="noopener external">Homepage</a> <a href="https://github.com/ansible-collections/vmware.vmware_rest.git" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a> </p></section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/latest/collections/vmware/vmware_rest/vcenter_resourcepool_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/collections/vmware/vmware_rest/vcenter_resourcepool_module.html</a>
  </p>
</div>
