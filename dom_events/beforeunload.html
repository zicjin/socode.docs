<h1>beforeunload</h1> <p>The <code>beforeunload</code> event is fired when the window, the document and its resources are about to be unloaded. The document is still visible and the event is still cancelable at this point.</p> <p>If a string is assigned to the <code>returnValue</code> Event property, a dialog appears asking the user for confirmation to leave the page (see example below). Some browsers display the returned string in the dialog box, but others display their own message. If no value is provided, the event is processed silently.</p> <div class="note"> <p><strong>Note:</strong> To combat unwanted pop-ups, browsers may not display prompts created in <code>beforeunload</code> event handlers unless the page has been interacted with, or may even not display them at all.</p> </div> <div class="warning"> <p>Attaching an event handler/listener to <code>window</code> or <code>document</code>'s <code>beforeunload</code> event prevents browsers from using in-memory page navigation caches, like <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/1.5/Using_Firefox_1.5_caching">Firefox's Back-Forward cache</a> or <a href="https://webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/">WebKit's Page Cache</a>.</p> </div> <div class="_table"><table class="properties"> <tbody> <tr> <td>Bubbles</td> <td>No</td> </tr> <tr> <td>Cancelable</td> <td>Yes</td> </tr> <tr> <td>Target objects</td> <td>defaultView</td> </tr> <tr> <td>Interface</td> <td><a href="https://developer.mozilla.org/en-US/docs/Web/API/Event"><code>Event</code></a></td> </tr> </tbody> </table></div> <h2 id="Properties">Properties</h2> <div class="_table"><table class="standard-table"> <thead> <tr> <th scope="col">Property</th> <th scope="col">Type</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td>
<code>target</code> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget"><code>EventTarget</code></a></td> <td>The event target (the topmost target in the DOM tree).</td> </tr> <tr> <td>
<code>type</code> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString"><code>DOMString</code></a></td> <td>The type of event.</td> </tr> <tr> <td>
<code>bubbles</code> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean"><code>Boolean</code></a></td> <td>Does the event normally bubble?</td> </tr> <tr> <td>
<code>cancelable</code> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</td> <td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean"><code>Boolean</code></a></td> <td>Is it possible to cancel the event?</td> </tr> <tr> <td><code>returnValue</code></td> <td><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString"><code>DOMString</code></a></td> <td>The current return value of the event (the message to show the user).</td> </tr> </tbody> </table></div> <h2 id="Example">Example</h2> <p>The HTML specification states that authors should use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault"><code>Event.preventDefault()</code></a> method instead of using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/returnValue"><code>Event.returnValue</code></a>. However, this is not yet supported by all browsers.</p> <pre data-language="js">window.addEventListener("beforeunload", function (event) {
  // Cancel the event as stated by the standard.
  event.preventDefault();
  // Chrome requires returnValue to be set.
  event.returnValue = '';
});

</pre> <h2 id="Notes">Notes</h2> <p>The HTML specification states that calls to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/alert"><code>window.alert()</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm"><code>window.confirm()</code></a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt"><code>window.prompt()</code></a> methods may be ignored during this event. See the <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#user-prompts">HTML specification</a> for more details.</p> <p>Various browsers ignore the result of the event and do not ask the user for confirmation at all. The document will always be unloaded automatically. Firefox has a switch named <code>dom.disable_beforeunload</code> in <a>about:config</a> to enable this behaviour.</p> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a href="https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload" hreflang="en">HTML Living Standard<br><small>The definition of 'beforeunload' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> <tr> <td><a href="https://www.w3.org/TR/html50/browsers.html#unloading-documents" hreflang="en">HTML5<br><small>The definition of 'beforeunload' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Initial definition</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility</h2> <div class="blockIndicator warning">
<strong><a href="https://github.com/mdn/browser-compat-data">We're converting our compatibility data into a machine-readable JSON format</a></strong>. This compatibility table still uses the old format, because we haven't yet converted the data it contains. <strong><a href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Structures/Compatibility_tables">Find out how you can help!</a></strong>
</div>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Activation using <code>return "string";</code>
</td> <td>1.0</td> <td><span style="color: #888;">(Yes)</span></td> <td>1</td> <td>4</td> <td>12</td> <td>3</td> </tr> <tr> <td>Activation using <code>event.returnValue = "string";</code>
</td> <td>30.0</td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #888;">(Yes)</span></td> <td> </td> <td> </td> </tr> <tr> <td>Activation using <code>event.preventDefault()</code>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #888;">(Yes)</span></td> <td>9</td> <td> </td> <td>11</td> </tr> <tr> <td>Custom text support removed</td> <td>51.0</td> <td><span style="color: #f00;">No support</span></td> <td>44.0 (44.0)</td> <td><span style="color: #f00;">No support</span></td> <td>38</td> <td><a href="https://developer.apple.com/library/mac/releasenotes/General/WhatsNewInSafari/Articles/Safari_9_1.html">9.1</a></td> </tr> </tbody> </table></div>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>(no) <a href="https://bugs.webkit.org/show_bug.cgi?id=19324">defect</a>
</td> <td><span style="color: #888;">(Yes)</span></td> </tr> <tr> <td>Custom text support removed</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>51.0</td> <td><span style="color: #f00;">No support</span></td> <td>44.0 (44.0)</td> <td> </td> <td> </td> <td> </td> <td>51.0</td> </tr> </tbody> </table></div>  <h2 id="See_also">See also</h2> <ul> <li><code><a href="domcontentloaded">DOMContentLoaded</a></code></li> <li><code><a href="readystatechange">readystatechange</a></code></li> <li><code><a href="load">load</a></code></li> <li><code><a href="unload">unload</a></code></li> <li><a href="https://html.spec.whatwg.org/#prompt-to-unload-a-document">Unloading Documents — Prompt to unload a document</a></li> <li><a href="https://developers.google.com/web/updates/2016/04/chrome-51-deprecations?hl=en#remove_custom_messages_in_onbeforeunload_dialogs">Remove Custom Messages in onbeforeload Dialogs after Chrome 51</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload$edit" class="_attribution-link">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload</a>
  </p>
</div>
