<h1 id="worker">Worker</h1>
<div class="api-docs-breadcrumbs">
<a href="../../../../../../index">kotlin-stdlib</a> / <a href="../index">kotlin.native.concurrent</a> / <a href="index">Worker</a>
</div> <div class="node-page-main" data-kotlin-version="1.3" data-platform="Native">
<div data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) </div>
<div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class Worker</pre> </div>

</div> <h2 id="properties">Properties</h2> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="id">id</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">val id: Int</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="name">name</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Name of the worker, as specified in <a href="start">Worker.start</a> or "worker $id" by default,</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">val name: String</pre> </div>
</div> </div> </div> <h2 id="functions">Functions</h2> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="as-c-pointer">asCPointer</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Convert worker to a COpaquePointer value that could be passed via native void* pointer. Can be used as an argument of <a href="from-c-pointer">Worker.fromCPointer</a>.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun asCPointer(): COpaquePointer?</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="execute">execute</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Plan job for further execution in the worker. Execute is a two-phase operation:</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T1, T2&gt; execute(
    mode: TransferMode, 
    producer: () -&gt; T1, 
    job: (T1) -&gt; T2
): Future&lt;T2&gt;</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="execute-after">executeAfter</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Plan job for further execution in the worker. <a href="execute-after#kotlin.native.concurrent.Worker%24executeAfter(kotlin.Long,%20kotlin.Function0((kotlin.Unit)))/operation">operation</a> parameter must be either frozen, or execution to be planned on the current worker. Otherwise <a href="../../kotlin/-illegal-state-exception/index#kotlin.IllegalStateException">IllegalStateException</a> will be thrown. With -Xworker-exception-handling=use-hook, if the worker was created with <code>errorReporting</code> set to true, any exception escaping from <a href="execute-after#kotlin.native.concurrent.Worker%24executeAfter(kotlin.Long,%20kotlin.Function0((kotlin.Unit)))/operation">operation</a> will be handled by <a href="../../kotlin.native/process-unhandled-exception">processUnhandledException</a>.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun executeAfter(
    afterMicroseconds: Long = 0, 
    operation: () -&gt; Unit)</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="park">park</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Park execution of the current worker until a new request arrives or timeout specified in <a href="park#kotlin.native.concurrent.Worker%24park(kotlin.Long,%20kotlin.Boolean)/timeoutMicroseconds">timeoutMicroseconds</a> elapsed. If <a href="park#kotlin.native.concurrent.Worker%24park(kotlin.Long,%20kotlin.Boolean)/process">process</a> is true, pending queue elements are processed, including delayed requests. Note that multiple requests could be processed this way.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun park(
    timeoutMicroseconds: Long, 
    process: Boolean = false
): Boolean</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="process-queue">processQueue</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Process pending job(s) on the queue of this worker. Note that jobs scheduled with <a href="execute-after">executeAfter</a> using non-zero timeout are not processed this way. If termination request arrives while processing the queue via this API, worker is marked as terminated and will exit once the current request is done with.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun processQueue(): Boolean</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="request-termination">requestTermination</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Requests termination of the worker.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun requestTermination(
    processScheduledJobs: Boolean = true
): Future&lt;Unit&gt;</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="to-string">toString</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>String representation of the worker.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun toString(): String</pre> </div>
</div> </div> </div> <h2 id="companion-object-properties">Companion Object Properties</h2> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="current">current</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Return the current worker. Worker context is accessible to any valid Kotlin context, but only actual active worker produced with <a href="start">Worker.start</a> automatically processes execution requests. For other situations <a href="process-queue">processQueue</a> must be called explicitly to process request queue.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">val current: Worker</pre> </div>
</div> </div> </div> <h2 id="companion-object-functions">Companion Object Functions</h2> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="from-c-pointer">fromCPointer</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Create worker object from a C pointer.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun fromCPointer(pointer: COpaquePointer?): Worker</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="start">start</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Start new scheduling primitive, such as thread, to accept new tasks via <code>execute</code> interface. Typically new worker may be needed for computations offload to another core, for IO it may be better to use non-blocking IO combined with more lightweight coroutines.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun start(
    errorReporting: Boolean = true, 
    name: String? = null
): Worker</pre> </div>
</div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/-worker/index.html" class="_attribution-link" target="_blank">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/-worker/index.html</a>
  </p>
</div>
