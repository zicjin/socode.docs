<h1 id="package-kotlinnativeconcurrent">Package kotlin.native.concurrent</h1>
<div class="api-docs-breadcrumbs">
<a href="../../../../../index">kotlin-stdlib</a> / <a href="index">kotlin.native.concurrent</a>
</div> <h3 id="types">Types</h3> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-atomic-int/index">AtomicInt</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Atomic values and freezing: atomics <a href="-atomic-int/index">AtomicInt</a>, <a href="-atomic-long/index">AtomicLong</a>, <a href="-atomic-native-ptr/index">AtomicNativePtr</a> and <a href="-atomic-reference/index">AtomicReference</a> are unique types with regard to freezing. Namely, they provide mutating operations, while can participate in frozen subgraphs. So shared frozen objects can have fields of atomic types.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class AtomicInt</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-atomic-long/index">AtomicLong</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class AtomicLong</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-atomic-native-ptr/index">AtomicNativePtr</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class AtomicNativePtr</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-atomic-reference/index">AtomicReference</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>An atomic reference to a frozen Kotlin object. Can be used in concurrent scenarious but frequently shall be of nullable type and be zeroed out once no longer needed. Otherwise memory leak could happen. To detect such leaks kotlin.native.internal.GC.detectCycles in debug mode could be helpful.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class AtomicReference&lt;T&gt;</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-continuation0/index">Continuation0</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class Continuation0 : () -&gt; Unit</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-continuation1/index">Continuation1</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class Continuation1&lt;T1&gt; : (T1) -&gt; Unit</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-continuation2/index">Continuation2</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class Continuation2&lt;T1, T2&gt; : (T1, T2) -&gt; Unit</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-detached-object-graph/index">DetachedObjectGraph</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Detached object graph encapsulates transferrable detached subgraph which cannot be accessed externally, until it is attached with the <a href="attach">attach</a> extension function.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class DetachedObjectGraph&lt;T&gt;</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-freezable-atomic-reference/index">FreezableAtomicReference</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>An atomic reference to a Kotlin object. Can be used in concurrent scenarious, but must be frozen first, otherwise behaves as regular box for the value. If frozen, shall be zeroed out once no longer needed. Otherwise memory leak could happen. To detect such leaks kotlin.native.internal.GC.detectCycles in debug mode could be helpful.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class FreezableAtomicReference&lt;T&gt;</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-freezing-exception/index">FreezingException</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Exception thrown whenever freezing is not possible.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class FreezingException : RuntimeException</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-future/index">Future</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class Future&lt;T&gt;</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-future-state/index">FutureState</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>State of the future object.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">enum class FutureState</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-invalid-mutability-exception/index">InvalidMutabilityException</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Exception thrown whenever we attempt to mutate frozen objects.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class InvalidMutabilityException : RuntimeException</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-mutable-data/index">MutableData</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Mutable concurrently accessible data buffer. Could be accessed from several workers simulteniously.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class MutableData</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-transfer-mode/index">TransferMode</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <h2 id="object-transfer-basics">Object Transfer Basics.</h2> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">enum class TransferMode</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-worker/index">Worker</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class Worker</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="-worker-bound-reference/index">WorkerBoundReference</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>A shared reference to a Kotlin object that doesn't freeze the referred object when it gets frozen itself.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">class WorkerBoundReference&lt;out T : Any&gt;</pre> </div>
</div> </div> </div> <h3 id="annotations">Annotations</h3> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.0, 1.0" data-platform="Common, Native">
<b>Platform and version requirements:</b> Native (1.0) <h4><a href="-shared-immutable/index">SharedImmutable</a></h4> <div class="summary-group" data-kotlin-version="1.0, 1.3" data-platform="Common, Native"> <p>Marks a top level property with a backing field as immutable. It is possible to share the value of such property between multiple threads, but it becomes deeply frozen, so no changes can be made to its state or the state of objects it refers to.</p> <div data-kotlin-version="1.0, 1.3" data-platform="Common, Native">
<pre class="signature" data-language="kotlin">annotation class SharedImmutable</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.0, 1.0" data-platform="Common, Native">
<b>Platform and version requirements:</b> Native (1.0) <h4><a href="-thread-local/index">ThreadLocal</a></h4> <div class="summary-group" data-kotlin-version="1.0, 1.3" data-platform="Common, Native"> <p>Marks a top level property with a backing field or an object as thread local. The object remains mutable and it is possible to change its state, but every thread will have a distinct copy of this object, so changes in one thread are not reflected in another.</p> <div data-kotlin-version="1.0, 1.3" data-platform="Common, Native">
<pre class="signature" data-language="kotlin">annotation class ThreadLocal</pre> </div>
</div> </div> </div> <h3 id="properties">Properties</h3> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="is-frozen">isFrozen</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Checks if given object is null or frozen or permanent (i.e. instantiated at compile-time).</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">val Any?.isFrozen: Boolean</pre> </div>
</div> </div> </div> <h3 id="functions">Functions</h3> <div class="api-declarations-list">
<div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="atomic-lazy">atomicLazy</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Atomic lazy initializer, could be used in frozen objects, freezes initializing lambda, so use very carefully. Also, as with other uses of an <a href="-atomic-reference/index">AtomicReference</a> may potentially leak memory, so it is recommended to use <code>atomicLazy</code> in cases of objects living forever, such as object signletons, or in cases where it's guaranteed not to have cyclical garbage.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T&gt; atomicLazy(initializer: () -&gt; T): Lazy&lt;T&gt;</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="attach">attach</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Attaches previously detached object subgraph created by <a href="-detached-object-graph/index">DetachedObjectGraph</a>. Please note, that once object graph is attached, the DetachedObjectGraph.stable pointer does not make sense anymore, and shall be discarded, so attach of one DetachedObjectGraph object can only happen once.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T&gt; DetachedObjectGraph&lt;T&gt;.attach(): T</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="call-continuation0">callContinuation0</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun COpaquePointer.callContinuation0()</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="call-continuation1">callContinuation1</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T1&gt; COpaquePointer.callContinuation1()</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="call-continuation2">callContinuation2</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T1, T2&gt; COpaquePointer.callContinuation2()</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="ensure-never-frozen">ensureNeverFrozen</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>This function ensures that if we see such an object during freezing attempt - freeze fails and <a href="-freezing-exception/index">FreezingException</a> is thrown.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun Any.ensureNeverFrozen()</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="freeze">freeze</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Freezes object subgraph reachable from this object. Frozen objects can be freely shared between threads/workers.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T&gt; T.freeze(): T</pre> </div>
</div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="wait-for-multiple-futures">waitForMultipleFutures</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;T&gt; Collection&lt;Future&lt;T&gt;&gt;.waitForMultipleFutures(
    millis: Int
): Set&lt;Future&lt;T&gt;&gt;</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="wait-worker-termination">waitWorkerTermination</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"><div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun waitWorkerTermination(worker: Worker)</pre> </div></div> </div> <div class="declarations" data-kotlin-version="1.3" data-platform="Native">
<b>Platform and version requirements:</b> Native (1.3) <h4><a href="with-worker">withWorker</a></h4> <div class="summary-group" data-kotlin-version="1.3" data-platform="Native"> <p>Executes <a href="with-worker#kotlin.native.concurrent%24withWorker(kotlin.String?,%20kotlin.Boolean,%20kotlin.Function1((kotlin.native.concurrent.Worker,%20kotlin.native.concurrent.withWorker.R)))/block">block</a> with new <a href="-worker/index">Worker</a> as resource, by starting the new worker, calling provided <a href="with-worker#kotlin.native.concurrent%24withWorker(kotlin.String?,%20kotlin.Boolean,%20kotlin.Function1((kotlin.native.concurrent.Worker,%20kotlin.native.concurrent.withWorker.R)))/block">block</a> (in current context) with newly started worker as this and terminating worker after the block completes. Note that this operation is pretty heavyweight, use preconfigured worker or worker pool if need to execute it frequently.</p> <div data-kotlin-version="1.3" data-platform="Native">
<pre class="signature" data-language="kotlin">fun &lt;R&gt; withWorker(
    name: String? = null, 
    errorReporting: Boolean = true, 
    block: Worker.() -&gt; R
): R</pre> </div>
</div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/index.html" class="_attribution-link" target="_blank">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/index.html</a>
  </p>
</div>
