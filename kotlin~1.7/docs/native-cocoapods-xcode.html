<h1 data-toc="native-cocoapods-xcode" id="native-cocoapods-xcode.md">Use a Kotlin Gradle project as a CocoaPods dependency</h1>
<p id="457ed369">You can use a Kotlin Multiplatform project with native targets as a CocoaPods dependency. You can include such a dependency in the Podfile of the Xcode project by its name and path to the project directory containing the generated Podspec.</p>
<p id="dade709">This dependency will be automatically built (and rebuilt) along with this project. Such an approach simplifies importing to Xcode by removing a need to write the corresponding Gradle tasks and Xcode build steps manually.</p>
<p id="3d04bfa7">You can add dependencies between a Kotlin Gradle project and an Xcode project with one or several targets. It's also possible to add dependencies between a Gradle project and multiple Xcode projects. However, in this case, you need to add a dependency by calling <code class="code ">pod install</code> manually for each Xcode project. In other cases, it's done automatically.</p>
<aside data-type="note" class="prompt" data-title="" id="3740a39e"><ul class="list _ul" id="6de6a1da">
<li class="list__item" id="7a5863b5"><p>To correctly import the dependencies into the Kotlin/Native module, the <code class="code ">Podfile</code> must contain either <a href="https://guides.cocoapods.org/syntax/podfile.html#use_modular_headers_bang" id="f96a7ea2" data-external="true" rel="noopener noreferrer"><code class="code ">use_modular_headers!</code></a> or <a href="https://guides.cocoapods.org/syntax/podfile.html#use_frameworks_bang" id="368bb7ee" data-external="true" rel="noopener noreferrer"><code class="code ">use_frameworks!</code></a> directive.</p></li>
<li class="list__item" id="f7e15588"><p>If you don't specify the minimum deployment target version and a dependency Pod requires a higher deployment target, you will get an error.</p></li>
</ul></aside><section class="chapter"><h2 id="xcode-project-with-one-target" data-toc="native-cocoapods-xcode#xcode-project-with-one-target">Xcode project with one target</h2>
<ol class="list _decimal" id="e551d564">
<li class="list__item" id="355acf68"><p id="78dd8799">Create an Xcode project with a <code class="code ">Podfile</code> if you haven’t done so yet.</p></li>
<li class="list__item" id="eae06da1"><p id="38022fca">Add the path to your Xcode project <code class="code ">Podfile</code> with <code class="code ">podfile = project.file(..)</code> to <code class="code ">build.gradle.kts</code> (<code class="code ">build.gradle</code>) of your Kotlin project. This step helps synchronize your Xcode project with Gradle project dependencies by calling <code class="code ">pod install</code> for your <code class="code ">Podfile</code>.</p></li>
<li class="list__item" id="835aab46">
<p id="b999454a">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"
        ios.deploymentTarget = "13.5"
        pod("AFNetworking") {
            version = "~&gt; 4.0.0"
        }
        podfile = project.file("../ios-app/Podfile")
    }
}
</pre>
</li>
<li class="list__item" id="d47848a9">
<p id="a2e17af7">Add the name and path of the Gradle project you want to include in the Xcode project to <code class="code ">Podfile</code>.</p>
<pre class="code" data-language="ruby">use_frameworks!

platform :ios, '13.5'

target 'ios-app' do
        pod 'kotlin_library', :path =&gt; '../kotlin-library'
end
</pre>
</li>
<li class="list__item" id="363aed4f"><p id="d27b818e">Re-import the project.</p></li>
</ol></section><section class="chapter"><h2 id="xcode-project-with-several-targets" data-toc="native-cocoapods-xcode#xcode-project-with-several-targets">Xcode project with several targets</h2>
<ol class="list _decimal" id="c244f106">
<li class="list__item" id="a7479449"><p id="b214f339">Create an Xcode project with a <code class="code ">Podfile</code> if you haven’t done so yet.</p></li>
<li class="list__item" id="f17defb0"><p id="7aac8dec">Add the path to your Xcode project <code class="code ">Podfile</code> with <code class="code ">podfile = project.file(..)</code> to <code class="code ">build.gradle.kts</code> (<code class="code ">build.gradle</code>) of your Kotlin project. This step helps synchronize your Xcode project with Gradle project dependencies by calling <code class="code ">pod install</code> for your <code class="code ">Podfile</code>.</p></li>
<li class="list__item" id="15add99a"><p id="44c47542">Add dependencies to the Pod libraries you want to use in your project with <code class="code ">pod()</code>.</p></li>
<li class="list__item" id="829619ff">
<p id="50550d98">For each target, specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()
    tvos()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"
        ios.deploymentTarget = "13.5"
        tvos.deploymentTarget = "13.4"

        pod("AFNetworking") {
            version = "~&gt; 4.0.0"
        }
        podfile = project.file("../severalTargetsXcodeProject/Podfile") // specify the path to the Podfile
    }
}
</pre>
</li>
<li class="list__item" id="c4cfb8fa">
<p id="79ba41b2">Add the name and path of the Gradle project you want to include in the Xcode project to the <code class="code ">Podfile</code>.</p>
<pre class="code" data-language="ruby">target 'iosApp' do
  use_frameworks!
  platform :ios, '13.5'
  # Pods for iosApp
  pod 'kotlin_library', :path =&gt; '../kotlin-library'
end

target 'TVosApp' do
  use_frameworks!
  platform :tvos, '13.4'

  # Pods for TVosApp
  pod 'kotlin_library', :path =&gt; '../kotlin-library'
end
</pre>
</li>
<li class="list__item" id="2b9bbe65"><p id="4b6a5d1c">Re-import the project.</p></li>
</ol>
<p id="cb96b4e5">You can find a sample project <a href="https://github.com/Kotlin/kmm-with-cocoapods-multitarget-xcode-sample" id="f6ac8876" data-external="true" rel="noopener noreferrer">here</a>.</p></section><div class="last-modified"> Last modified: 08 August 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="native-cocoapods-libraries">Add dependencies on a Pod library</a> <a class="navigation-links__next" href="native-cocoapods-dsl-reference">CocoaPods Gradle plugin DSL reference</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/native-cocoapods-xcode.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/native-cocoapods-xcode.html</a>
  </p>
</div>
