<h1 data-toc="multiplatform-add-dependencies" id="multiplatform-add-dependencies.md">Adding dependencies on multiplatform libraries</h1>
<p id="ea245a04">Every program requires a set of libraries to operate successfully. A Kotlin Multiplatform project can depend on multiplatform libraries that work for all target platforms, platform-specific libraries, and other multiplatform projects.</p>
<p id="1810dedd">To add a dependency on a library, update your <code class="code ">build.gradle(.kts)</code> file in the <code class="code ">shared</code> directory of your project. Set a dependency of the required <a href="gradle#dependency-types" id="9ccc9d87">type</a> (for example, <code class="code ">implementation</code>) in the <a href="multiplatform-dsl-reference#dependencies" id="b856c00e"><code class="code ">dependencies</code></a> block:</p>
<div class="tabs" id="a72ca286" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="9d9d1981" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation("com.example:my-library:1.0") // library shared for all source sets
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="1252ede0" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    sourceSets {
        commonMain {
            dependencies {
                implementation 'com.example:my-library:1.0'
            }
        }
    }
}
</pre></div>
</div>
<p id="b0854dea">Alternatively, you can <a href="gradle#set-dependencies-at-the-top-level" id="483c6e2b">set dependencies at the top level</a>.</p>
<section class="chapter"><h2 id="dependency-on-a-kotlin-library" data-toc="multiplatform-add-dependencies#dependency-on-a-kotlin-library">Dependency on a Kotlin library</h2>
<section class="chapter"><h3 id="standard-library" data-toc="multiplatform-add-dependencies#standard-library">Standard library</h3>
<p id="5a5eedaa">A dependency on a standard library (<code class="code ">stdlib</code>) in each source set is added automatically. The version of the standard library is the same as the version of the <code class="code ">kotlin-multiplatform</code> plugin.</p>
<p id="360866ad">For platform-specific source sets, the corresponding platform-specific variant of the library is used, while a common standard library is added to the rest. The Kotlin Gradle plugin will select the appropriate JVM standard library depending on the <code class="code ">kotlinOptions.jvmTarget</code> <a href="gradle#compiler-options" id="20dca00d">compiler option</a> of your Gradle build script</p>
<p id="739d7bc7">Learn how to <a href="gradle#dependency-on-the-standard-library" id="c24846e">change the default behavior</a>.</p></section><section class="chapter"><h3 id="test-libraries" data-toc="multiplatform-add-dependencies#test-libraries">Test libraries</h3>
<p id="16525d87">The <a href="https://kotlinlang.org/api/latest/kotlin.test/" id="654465cb" data-external="true" rel="noopener noreferrer"><code class="code ">kotlin.test</code> API</a> is available for multiplatform tests. When you <a href="multiplatform-library" id="e0b56b64">create a multiplatform project</a>, the Project Wizard automatically adds test dependencies to common and platform-specific source sets.</p>
<p id="75aff909">If you didn't use the Project Wizard to create your project, you can <a href="gradle#set-dependencies-on-test-libraries" id="ec9046bd">add the dependencies manually</a>.</p></section><section class="chapter"><h3 id="kotlinx-libraries" data-toc="multiplatform-add-dependencies#kotlinx-libraries">kotlinx libraries</h3>
<p id="31e8a6ba">If you use a multiplatform library and need to <a href="#library-shared-for-all-source-sets" id="474fb067">depend on the shared code</a>, set the dependency only once in the shared source set. Use the library base artifact name, such as <code class="code ">kotlinx-coroutines-core</code>.</p>
<div class="tabs" id="6a213346" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="2774175e" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.0")
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="d293f867" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    sourceSets {
        commonMain {
            dependencies {
                implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.0'
            }
        }
    }
}
</pre></div>
</div>
<p id="f257c1e7">If you use a kotlinx library and need a <a href="#library-used-in-specific-source-sets" id="a2a7b6c1">platform-specific dependency</a>, you can use platform-specific variants of libraries with suffixes such as <code class="code ">-jvm</code> or <code class="code ">-js</code>, for example, <code class="code ">kotlinx-coroutines-core-jvm</code>.</p>
<div class="tabs" id="2c7422d4" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="479b699d" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    sourceSets {
        val jvmMain by getting {
            dependencies {
                implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:1.6.0")
            }
        }
    }
}

</pre></div>
<div class="tabs__content" data-gtm="tab" id="aa2d4fbf" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    sourceSets {
        jvmMain {
            dependencies {
                implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:1.6.0'
            }
        }
    }
}
</pre></div>
</div></section></section><section class="chapter"><h2 id="dependency-on-kotlin-multiplatform-libraries" data-toc="multiplatform-add-dependencies#dependency-on-kotlin-multiplatform-libraries">Dependency on Kotlin Multiplatform libraries</h2>
<p id="ad9cf107">You can add dependencies on libraries that have adopted Kotlin Multiplatform technology, such as <a href="https://github.com/cashapp/sqldelight" id="e44b65c9" data-external="true" rel="noopener noreferrer">SQLDelight</a>. The authors of these libraries usually provide guides for adding their dependencies to your project.</p>
<p id="ea81a192">Check out this <a href="https://libs.kmp.icerock.dev/" id="eaab597c" data-external="true" rel="noopener noreferrer">community-maintained list of Kotlin Multiplatform libraries</a>.</p>
<section class="chapter"><h3 id="library-shared-for-all-source-sets" data-toc="multiplatform-add-dependencies#library-shared-for-all-source-sets">Library shared for all source sets</h3>
<p id="cc162731">If you want to use a library from all source sets, you can add it only to the common source set. The Kotlin Multiplatform Mobile plugin will automatically add the corresponding parts to any other source sets.</p>
<aside data-type="warning" class="prompt" data-title="" id="38b185dd"><p id="5cfac089">You cannot set dependencies on platform-specific libraries in the common source set.</p></aside><div class="tabs" id="cc7fe5fe" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="25fa2d9" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation("io.ktor:ktor-client-core:2.0.2")
            }
        }
        val androidMain by getting {
            dependencies {
                // dependency to a platform part of ktor-client will be added automatically
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="d38a5ecb" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    sourceSets {
        commonMain {
            dependencies {
                implementation 'io.ktor:ktor-client-core:2.0.2'
            }
        }
        androidMain {
            dependencies {
                // dependency to platform part of ktor-client will be added automatically
            }
        }
    }
}
</pre></div>
</div></section><section class="chapter"><h3 id="library-used-in-specific-source-sets" data-toc="multiplatform-add-dependencies#library-used-in-specific-source-sets">Library used in specific source sets</h3>
<p id="823271e2">If you want to use a multiplatform library just for specific source sets, you can add it exclusively to them. The specified library declarations will then be available only in those source sets.</p>
<aside data-type="note" class="prompt" data-title="" id="7e64ed48"><p id="c7d76013">Don't use a platform-specific name in such cases, like SQLDelight <code class="code ">native-driver</code> in the example below. Find the exact name in the library's documentation.</p></aside><div class="tabs" id="ed8d3e6e" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="eefc94a5" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                // kotlinx.coroutines will be available in all source sets
                implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.0")
            }
        }
        val androidMain by getting {
            dependencies {}
        }
        val iosMain by getting {
            dependencies {
                // SQLDelight will be available only in the iOS source set, but not in Android or common
                implementation("com.squareup.sqldelight:native-driver:1.4.1")
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="cb501dbb" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    sourceSets {
        commonMain {
            dependencies {
                // kotlinx.coroutines will be available in all source sets
                implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.0'
            }
        }
        androidMain {
            dependencies {}
        }
        iosMain {
            dependencies {
                // SQLDelight will be available only in the iOS source set, but not in Android or common
                implementation 'com.squareup.sqldelight:native-driver:1.4.1'
            }
        }
    }
}
</pre></div>
</div>
<aside data-type="note" class="prompt" data-title="" id="8ac855ee"><p id="b46cf6a3">When using a multiplatform library that does not have <a href="multiplatform-share-on-platforms#share-code-on-similar-platforms" id="5131ecb3">hierarchical structure support</a> in a multiplatform project that does, you won't be able to use IDE features, such as code completion and highlighting, for the shared iOS source set.</p>
<p id="36ecc6dd">This is a <a href="https://youtrack.jetbrains.com/issue/KT-40975" id="52842fb7" data-external="true" rel="noopener noreferrer">known issue</a>, and we are working on resolving it. In the meantime, you can use <a href="multiplatform-mobile-ios-dependencies#workaround-to-enable-ide-support-for-the-shared-ios-source-set" id="32c63893">this workaround</a>.</p></aside></section></section><section class="chapter"><h2 id="dependency-on-another-multiplatform-project" data-toc="multiplatform-add-dependencies#dependency-on-another-multiplatform-project">Dependency on another multiplatform project</h2>
<p id="42917f33">You can connect one multiplatform project to another as a dependency. To do this, simply add a project dependency to the source set that needs it. If you want to use a dependency in all source sets, add it to the common one. In this case, other source sets will get their versions automatically.</p>
<div class="tabs" id="9c89a2a6" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="25c6d394" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation(project(":some-other-multiplatform-module"))
            }
        }
        val androidMain by getting {
            dependencies {
                // platform part of :some-other-multiplatform-module will be added automatically
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="4c34a23c" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    sourceSets {
        commonMain {
            dependencies {
                implementation project(':some-other-multiplatform-module')
            }
        }
        androidMain {
            dependencies {
                // platform part of :some-other-multiplatform-module will be added automatically
            }
        }
    }
}
</pre></div>
</div></section><section class="chapter"><h2 id="what-s-next" data-toc="multiplatform-add-dependencies#what-s-next">What's next?</h2>
<p id="11ba6bd1">Check out other resources on adding dependencies in multiplatform projects and learn more about:</p>
<ul class="list _ul" id="eb053139">
<li class="list__item" id="4b311f59"><p><a href="multiplatform-mobile-android-dependencies" id="381a8228">Adding Android dependencies</a></p></li>
<li class="list__item" id="bc40a029"><p><a href="multiplatform-mobile-ios-dependencies" id="8b84fd55">Adding iOS dependencies</a></p></li>
</ul></section><div class="last-modified"> Last modified: 08 August 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="multiplatform-hierarchy">Hierarchical project structure</a> <a class="navigation-links__next" href="multiplatform-mobile-android-dependencies">Adding Android dependencies</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/multiplatform-add-dependencies.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/multiplatform-add-dependencies.html</a>
  </p>
</div>
