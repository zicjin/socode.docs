<h1 data-toc="native-cocoapods-libraries" id="native-cocoapods-libraries.md">Add dependencies on a Pod library</h1>
<p id="7a467b01">To add dependencies between a Kotlin project and a Pod library, you should <a href="native-cocoapods#set-up-the-environment-to-work-with-cocoapods" id="37e9da09">complete the initial configuration</a>. This allows you to add dependencies on different types of Pod libraries.</p>
<p id="3864a1a0">When you add a new dependency and re-import the project in IntelliJ IDEA, the new dependency will be added automatically. No additional steps are required.</p>
<p id="7ea3c83c">To use your Kotlin project with Xcode, you should <a href="native-cocoapods#update-podfile-for-xcode" id="d8fbe1b3">make changes in your project Podfile</a>.</p>
<p id="441a4b82">A Kotlin project requires the <code class="code ">pod()</code> function call in <code class="code ">build.gradle.kts</code> (<code class="code ">build.gradle</code>) for adding a Pod dependency. Each dependency requires its separate function call. You can specify the parameters for the dependency in the configuration block of the function.</p>
<aside data-type="note" class="prompt" data-title="" id="be08f68e"><p id="7614d02f">If you don't specify the minimum deployment target version and a dependency Pod requires a higher deployment target, you will get an error.</p></aside><p id="4848cf73">You can find a sample project <a href="https://github.com/Kotlin/kmm-with-cocoapods-sample" id="540c2be4" data-external="true" rel="noopener noreferrer">here</a>.</p>
<section class="chapter"><h2 id="from-the-cocoapods-repository" data-toc="native-cocoapods-libraries#from-the-cocoapods-repository">From the CocoaPods repository</h2>
<ol class="list _decimal" id="b67569a2">
<li class="list__item" id="cc428729">
<p id="9d732dde">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="3f593768">In the configuration block, you can specify the version of the library using the <code class="code ">version</code> parameter. To use the latest version of the library, you can just omit this parameter altogether.</p>
<aside data-type="note" class="prompt" data-title="" id="63d8633a"><p id="6663bb8f">You can add dependencies on subspecs.</p></aside>
</li>
<li class="list__item" id="6754f9af">
<p id="180b2e4">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        ios.deploymentTarget = "13.5"

        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        pod("AFNetworking") {
            version = "~&gt; 4.0.1"
        }
    }
}
</pre>
</li>
<li class="list__item" id="e680223d"><p id="d4965b6d">Re-import the project.</p></li>
</ol>
<p id="6d5ae5a8">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.AFNetworking.*
</pre></section><section class="chapter"><h2 id="on-a-locally-stored-library" data-toc="native-cocoapods-libraries#on-a-locally-stored-library">On a locally stored library</h2>
<ol class="list _decimal" id="45c2e034">
<li class="list__item" id="b8f9abb5">
<p id="ed1a09ab">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="b3b0b464">In the configuration block, specify the path to the local Pod library: use the <code class="code ">path()</code> function in the <code class="code ">source</code> parameter value.</p>
<aside data-type="note" class="prompt" data-title="" id="9bab1db5"><p id="c249ecdc">You can add local dependencies on subspecs as well. The <code class="code ">cocoapods</code> block can include dependencies to Pods stored locally and Pods from the CocoaPods repository at the same time.</p></aside>
</li>
<li class="list__item" id="140d5551">
<p id="3ddc6b3f">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        ios.deploymentTarget = "13.5"

        pod("pod_dependency") {
            version = "1.0"
            source = path(project.file("../pod_dependency"))
        }
        pod("subspec_dependency/Core") {
            version = "1.0"
            source = path(project.file("../subspec_dependency"))
        }
        pod("AFNetworking") {
            version = "~&gt; 4.0.1"
        }
    }
}
</pre>
<aside data-type="note" class="prompt" data-title="" id="99fe7422"><p id="c6525b9f">You can also specify the version of the library using <code class="code ">version</code> parameter in the configuration block. To use the latest version of the library, omit the parameter.</p></aside>
</li>
<li class="list__item" id="2a8c926c"><p id="1a499c0e">Re-import the project.</p></li>
</ol>
<p id="5ff72c79">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.pod_dependency.*
import cocoapods.subspec_dependency.*
import cocoapods.AFNetworking.*
</pre></section><section class="chapter"><h2 id="from-a-custom-git-repository" data-toc="native-cocoapods-libraries#from-a-custom-git-repository">From a custom Git repository</h2>
<ol class="list _decimal" id="9fbb204f">
<li class="list__item" id="d3b561c9">
<p id="3e9a8c24">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="f2a4550c">In the configuration block, specify the path to the git repository: use the <code class="code ">git()</code> function in the <code class="code ">source</code> parameter value.</p>
<p id="27558537">Additionally, you can specify the following parameters in the block after <code class="code ">git()</code>:</p>
<ul class="list _ul" id="1ddca3b9">
<li class="list__item" id="34f1a99a"><p><code class="code ">commit</code> – to use a specific commit from the repository</p></li>
<li class="list__item" id="bce3f2c2"><p><code class="code ">tag</code> – to use a specific tag from the repository</p></li>
<li class="list__item" id="3799e691"><p><code class="code ">branch</code> – to use a specific branch from the repository</p></li>
</ul>
<p id="b28618ac">The <code class="code ">git()</code> function prioritizes passed parameters in the following order: <code class="code ">commit</code>, <code class="code ">tag</code>, <code class="code ">branch</code>. If you don't specify a parameter, the Kotlin plugin uses <code class="code ">HEAD</code> from the <code class="code ">master</code> branch.</p>
<aside data-type="note" class="prompt" data-title="" id="1e893274"><p id="3a5aa5fd">You can combine <code class="code ">branch</code>, <code class="code ">commit</code>, and <code class="code ">tag</code> parameters to get the specific version of a Pod.</p></aside>
</li>
<li class="list__item" id="75daaa80">
<p id="c4f2a2eb">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        ios.deploymentTarget = "13.5"

        pod("AFNetworking") {
            source = git("https://github.com/AFNetworking/AFNetworking") {
                tag = "4.0.0"
            }
        }

        pod("JSONModel") {
            source = git("https://github.com/jsonmodel/jsonmodel.git") {
                branch = "key-mapper-class"
            }
        }

        pod("CocoaLumberjack") {
            source = git("https://github.com/CocoaLumberjack/CocoaLumberjack.git") {
                commit = "3e7f595e3a459c39b917aacf9856cd2a48c4dbf3"
            }
        }
    }
}
</pre>
</li>
<li class="list__item" id="e946214b"><p id="b4560aaf">Re-import the project.</p></li>
</ol>
<aside data-type="note" class="prompt" data-title="" id="7eeb6a38"><p id="a4ebcb52">To work correctly with Xcode, you should specify the path to the Podspec in your Podfile. For example:</p>
<pre class="code" data-language="ruby">target 'ios-app' do
    # ... other pod depedencies ...
   pod 'JSONModel', :path =&gt; '../cocoapods/kmm-with-cocoapods-sample/kotlin-library/build/cocoapods/externalSources/git/JSONModel'
end
</pre></aside><p id="1aa50727">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.AFNetworking.*
import cocoapods.JSONModel.*
import cocoapods.CocoaLumberjack.*
</pre></section><section class="chapter"><h2 id="from-a-zip-tar-or-jar-archive" data-toc="native-cocoapods-libraries#from-a-zip-tar-or-jar-archive">From a zip, tar, or jar archive</h2>
<ol class="list _decimal" id="2aa31685">
<li class="list__item" id="9318a50e">
<p id="9b64795b">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="6ac4e382">In the configuration block, specify the path to the archive: use the <code class="code ">url()</code> function with an arbitrary HTTP address in the <code class="code ">source</code> parameter value.</p>
<p id="f258ed">Additionally, you can specify the boolean <code class="code ">flatten</code> parameter as a second argument for the <code class="code ">url()</code> function. This parameter indicates that all the Pod files are located in the root directory of the archive.</p>
</li>
<li class="list__item" id="ba98e67b">
<p id="e82e7e5">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        ios.deploymentTarget = "13.5"

        pod("pod_dependency") {
            source = url("https://github.com/Kotlin/kmm-with-cocoapods-sample/raw/cocoapods-zip/cocoapodSourcesZip.zip", flatten = true)
        }
    }
}
</pre>
</li>
<li class="list__item" id="435339d6"><p id="69b1eeae">Re-import the project.</p></li>
</ol>
<aside data-type="note" class="prompt" data-title="" id="e45d6771"><p id="1feb7bf5">To work correctly with Xcode, you should specify the path to the Podspec in your Podfile. For example:</p>
<pre class="code" data-language="ruby">target 'ios-app' do
    # ... other pod depedencies ...
   pod 'podspecWithFilesExample', :path =&gt; '../cocoapods/kmm-with-cocoapods-sample/pod_dependency'
end
</pre></aside><p id="d101266d">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.pod_dependency.*
</pre></section><section class="chapter"><h2 id="from-a-custom-podspec-repository" data-toc="native-cocoapods-libraries#from-a-custom-podspec-repository">From a custom Podspec repository</h2>
<ol class="list _decimal" id="17f31c2c">
<li class="list__item" id="b78422e3"><p id="aef812c9">Specify the HTTP address to the custom Podspec repository using the <code class="code ">url()</code> inside the <code class="code ">specRepos</code> block.</p></li>
<li class="list__item" id="ad5473ba"><p id="eb3fc5b5">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p></li>
<li class="list__item" id="de6d206e">
<p id="2fec275d">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        ios.deploymentTarget = "13.5"

        specRepos {
            url("https://github.com/Kotlin/kotlin-cocoapods-spec.git")
        }
        pod("example")
    }
}
</pre>
</li>
<li class="list__item" id="fda8e305"><p id="12df060a">Re-import the project.</p></li>
</ol>
<aside data-type="note" class="prompt" data-title="" id="48f7c8df"><p id="24bdef7">To work correctly with Xcode, you should specify the location of specs at the beginning of your Podfile. For example,</p>
<pre class="code" data-language="ruby">source 'https://github.com/Kotlin/kotlin-cocoapods-spec.git'`
</pre>
<p id="356a9685">You should also specify the path to the Podspec in your Podfile. For example:</p>
<pre class="code" data-language="ruby">target 'ios-app' do
    # ... other pod depedencies ...
   pod 'podspecWithFilesExample', :path =&gt; '../cocoapods/kmm-with-cocoapods-sample/pod_dependency'
end
</pre></aside><p id="f92b14f">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.example.*
</pre></section><section class="chapter"><h2 id="with-custom-cinterop-options" data-toc="native-cocoapods-libraries#with-custom-cinterop-options">With custom cinterop options</h2>
<ol class="list _decimal" id="43a7cb18">
<li class="list__item" id="655779b7">
<p id="939ad383">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="b4f47130">In the configuration block, specify the cinterop options:</p>
<ul class="list _ul" id="5036c368">
<li class="list__item" id="5cd5aa10"><p><code class="code ">extraOpts</code> – to specify the list of options for a Pod library. For example, specific flags: <code class="code ">extraOpts = listOf("-compiler-option")</code></p></li>
<li class="list__item" id="6ef6639"><p><code class="code ">packageName</code> – to specify the package name. If you specify this, you can import the library using the package name: <code class="code ">import &lt;packageName&gt;</code>.</p></li>
</ul>
</li>
<li class="list__item" id="e1ce3fa2">
<p id="9f49cf16">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        ios.deploymentTarget = "13.5"

        useLibraries()

        pod("YandexMapKit") {
            packageName = "YandexMK"
        }
    }
}
</pre>
</li>
<li class="list__item" id="db8f9770"><p id="f88a54ab">Re-import the project.</p></li>
</ol>
<p id="cf84e4a5">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.YandexMapKit.*
</pre>
<p id="97c2f05">If you use the <code class="code ">packageName</code> parameter, you can import the library using the package name <code class="code ">import &lt;packageName&gt;</code>:</p>
<pre class="code" data-language="kotlin">import YandexMK.YMKPoint
import YandexMK.YMKDistance
</pre></section><section class="chapter"><h2 id="on-a-static-pod-library" data-toc="native-cocoapods-libraries#on-a-static-pod-library">On a static Pod library</h2>
<ol class="list _decimal" id="519b7ded">
<li class="list__item" id="7bafce7b"><p id="1d2fb1f6">Specify the name of the library using the <code class="code ">pod()</code> function.</p></li>
<li class="list__item" id="25e21931"><p id="b32d8ce7">Call the <code class="code ">useLibraries()</code> function – it enables a special flag for static libraries.</p></li>
<li class="list__item" id="fd7fe5a3">
<p id="840e827b">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code" data-language="kotlin">kotlin {
    ios()

    cocoapods {
        summary = "CocoaPods test library"
        homepage = "https://github.com/JetBrains/kotlin"

        ios.deploymentTarget = "13.5"

        pod("YandexMapKit") {
            version = "~&gt; 3.2"
        }
        useLibraries()
    }
}
</pre>
</li>
<li class="list__item" id="4dbdb2e0"><p id="9424a33a">Re-import the project.</p></li>
</ol>
<p id="d05b036c">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code" data-language="kotlin">import cocoapods.YandexMapKit.*
</pre></section><div class="last-modified"> Last modified: 08 August 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="native-cocoapods">CocoaPods overview and setup</a> <a class="navigation-links__next" href="native-cocoapods-xcode">Use a Kotlin Gradle project as a CocoaPods dependency</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/native-cocoapods-libraries.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/native-cocoapods-libraries.html</a>
  </p>
</div>
