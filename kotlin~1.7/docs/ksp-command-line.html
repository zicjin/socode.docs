<h1 data-toc="ksp-command-line" id="ksp-command-line.md">Running KSP from command line</h1>
<p id="c7c0b4e1">KSP is a Kotlin compiler plugin and needs to run with Kotlin compiler. Download and extract them.</p>
<pre class="code" data-language="bash">#!/bin/bash

# Kotlin compiler
wget https://github.com/JetBrains/kotlin/releases/download/v1.6.10/kotlin-compiler-1.6.10.zip
unzip kotlin-compiler-1.6.10.zip

# KSP
wget https://github.com/google/ksp/releases/download/1.6.10-1.0.6/artifacts.zip
unzip artifacts.zip
</pre>
<p id="ea30c856">To run KSP with <code class="code ">kotlinc</code>, pass the <code class="code ">-Xplugin</code> option to <code class="code ">kotlinc</code>.</p>
<p> <code class="code ">-Xplugin=/path/to/symbol-processing-cmdline-1.6.10-1.0.6.jar</code></p>
<p id="44e69a18">This is different from the <code class="code ">symbol-processing-1.6.10-1.0.6.jar</code>, which is designed to be used with <code class="code ">kotlin-compiler-embeddable</code> when running with Gradle. The command line <code class="code ">kotlinc</code> needs <code class="code ">symbol-processing-cmdline-1.6.10-1.0.6.jar</code>.</p>
<p id="fe746e29">You'll also need the API jar.</p>
<p> <code class="code ">-Xplugin=/path/to/symbol-processing-api-1.6.10-1.0.6.jar</code></p>
<p id="6a5a0769">See the complete example:</p>
<pre class="code" data-language="bash">#!/bin/bash

KSP_PLUGIN_ID=com.google.devtools.ksp.symbol-processing
KSP_PLUGIN_OPT=plugin:$KSP_PLUGIN_ID

KSP_PLUGIN_JAR=./com/google/devtools/ksp/symbol-processing-cmdline/1.6.10-1.0.6/symbol-processing-cmdline-1.6.10-1.0.6.jar
KSP_API_JAR=./com/google/devtools/ksp/symbol-processing-api/1.6.10-1.0.6/symbol-processing-api-1.6.10-1.0.6.jar
KOTLINC=./kotlinc/bin/kotlinc

AP=/path/to/your-processor.jar

mkdir out
$KOTLINC \
        -Xplugin=$KSP_PLUGIN_JAR \
        -Xplugin=$KSP_API_JAR \
        -Xallow-no-source-files \
        -P $KSP_PLUGIN_OPT:apclasspath=$AP \
        -P $KSP_PLUGIN_OPT:projectBaseDir=. \
        -P $KSP_PLUGIN_OPT:classOutputDir=./out \
        -P $KSP_PLUGIN_OPT:javaOutputDir=./out \
        -P $KSP_PLUGIN_OPT:kotlinOutputDir=./out \
        -P $KSP_PLUGIN_OPT:resourceOutputDir=./out \
        -P $KSP_PLUGIN_OPT:kspOutputDir=./out \
        -P $KSP_PLUGIN_OPT:cachesDir=./out \
        -P $KSP_PLUGIN_OPT:incremental=false \
        -P $KSP_PLUGIN_OPT:apoption=key1=value1 \
        -P $KSP_PLUGIN_OPT:apoption=key2=value2 \
        $*
</pre>
<div class="last-modified"> Last modified: 08 August 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="ksp-multiplatform">KSP with Kotlin Multiplatform</a> <a class="navigation-links__next" href="ksp-faq">FAQ</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/ksp-command-line.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/ksp-command-line.html</a>
  </p>
</div>
