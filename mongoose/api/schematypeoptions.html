<a class="edit-docs-link" href="https://github.com/Automattic/mongoose/blob/master/lib/options/SchemaTypeOptions.js" target="_blank"> <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMDAgMTAwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz48ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDQ4MCkiPjxwYXRoIHN0cm9rZT0iIzA5NzFCMiIgZmlsbD0iIzA5NzFCMiIgZD0iTTkzMC45LDQyMC41Yy0zMy4xLDMxLjgtNjkuMyw0Ny43LTEwOC43LDQ3LjdjLTQ0LjUsMC04My45LTE3LjItMTE4LjItNTEuNUw5OS40LTE4NS45Yy0zLjgtMy44LTYuNC04LjktNy42LTE1LjNjLTIuNS04LjktMjkuMi05Ny45LTgwLjEtMjY3Yy0zLjgtMTIuNy0xLjMtMjMuNSw3LjYtMzIuNGM2LjQtNS4xLDE0LTcuNiwyMi45LTcuNmg5LjVjMTMyLjIsNDQuNSwyMTkuOSw3My4xLDI2My4yLDg1LjhjMy44LDEuMyw3LjYsMy44LDExLjQsNy42YzM3NSwzNzAsNTc3LjIsNTcwLjIsNjA2LjQsNjAwLjdjMzguMSwzOS40LDU3LjIsNzkuNSw1Ny4yLDEyMC4xQzk4OC43LDM0Ni44LDk2OSwzODQuOSw5MzAuOSw0MjAuNXogTTY5NC40LDMxOS40YzMxLjgtNy42LDYxLjctMjUuNCw4OS42LTUzLjRjMjYuNy0yNi43LDQzLjItNTcuMiw0OS42LTkxLjVDNzQ3LjIsODguMSw1NzguNy03OS4xLDMyOC4zLTMyN2MtMTIuNywzMC41LTI5LjksNTYuNi01MS41LDc4LjJjLTI2LjcsMjYuNy01Ni42LDQ3LTg5LjYsNjFMMzMyLjEtNDIuOWwyMTAuNywyMTAuN0w2OTQuNCwzMTkuNHogTTE0NS4yLTIzOS4zYzMxLjgtNy42LDYxLTI1LjQsODcuNy01My40YzIxLjYtMjEuNiwzNi45LTQ3LDQ1LjgtNzYuM2MtMTIuNy0zLjgtNDIuOS0xNC05MC42LTMwLjVjLTQ3LjctMTYuNS04Mi4zLTI4LTEwMy45LTM0LjNjNi40LDE5LjEsMTYuOCw1Mi4xLDMxLjUsOTkuMkMxMzAuMy0yODcuNiwxNDAuMS0yNTUuOCwxNDUuMi0yMzkuM3ogTTg4OC45LDIyOS44bC01LjctNS43Yy0xMi43LDMzLjEtMzEuMSw2MS43LTU1LjMsODUuOEM4MDIuNSwzMzUuMyw3NzQuNSwzNTUsNzQ0LDM2OWwxLjksMS45bDEuOSwxLjljMjIuOSwyMi45LDQ3LjcsMzQuMyw3NC40LDM0LjNjMjIuOSwwLDQ1LjEtMTAuOCw2Ni43LTMyLjRjMjUuNC0yNC4yLDM4LjEtNDcuNywzOC4xLTcwLjZTOTE0LjQsMjU2LjUsODg4LjksMjI5Ljh6Ii8+PC9nPjwvZz4NCjwvc3ZnPg=="> </a><h1>SchemaTypeOptions</h1>

<div class="api-content">
<h3 id="schematypeoptions_SchemaTypeOptions">SchemaTypeOptions()</h3>
<div>
<p>The options defined on a schematype.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({ <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span> });
schema.path(<span class="hljs-string">'name'</span>).options <span class="hljs-keyword">instanceof</span> mongoose.SchemaTypeOptions; <span class="hljs-comment">// true</span></pre> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-cast">SchemaTypeOptions.prototype.cast</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«String»</span></li></ul>
<div>
<p>Allows overriding casting logic for this individual path. If a string, the given string overwrites Mongoose's default cast error message.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = <span class="hljs-keyword">new</span> Schema({
  <span class="hljs-attr">num</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,
    <span class="hljs-attr">cast</span>: <span class="hljs-string">'{VALUE} is not a valid number'</span>
  }
});

<span class="hljs-comment">// Throws 'CastError: "bad" is not a valid number'</span>
schema.path(<span class="hljs-string">'num'</span>).cast(<span class="hljs-string">'bad'</span>);

<span class="hljs-keyword">const</span> Model = mongoose.model(<span class="hljs-string">'Test'</span>, schema);
<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">new</span> Model({ <span class="hljs-attr">num</span>: <span class="hljs-string">'fail'</span> });
<span class="hljs-keyword">const</span> err = doc.validateSync();

err.errors[<span class="hljs-string">'num'</span>]; <span class="hljs-comment">// 'CastError: "fail" is not a valid number'</span></pre> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-default">SchemaTypeOptions.prototype.default</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function|Any»</span></li></ul>
<div>
<p>The default value for this path. If a function, Mongoose executes the function and uses the return value as the default.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-immutable">SchemaTypeOptions.prototype.immutable</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function|Boolean»</span></li></ul>
<div>
<p>If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, Mongoose will disallow changes to this path once the document is saved to the database for the first time. Read more about <a href="http://thecodebarbarian.com/whats-new-in-mongoose-5-6-immutable-properties.html">immutability in Mongoose here</a>.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-index">SchemaTypeOptions.prototype.index</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Boolean|Number|Object»</span></li></ul>
<div>
<p>If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, Mongoose will build an index on this path when the model is compiled.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-ref">SchemaTypeOptions.prototype.ref</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function|String»</span></li></ul>
<div>
<p>The model that <code>populate()</code> should use if populating this path.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-required">SchemaTypeOptions.prototype.required</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function|Boolean»</span></li></ul>
<div>
<p>If true, attach a required validator to this path, which ensures this path cannot be set to a nullish value. If a function, Mongoose calls the function and only checks for nullish values if the function returns a truthy value.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-select">SchemaTypeOptions.prototype.select</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Boolean|Number»</span></li></ul>
<div>
<p>Whether to include or exclude this path by default when loading documents using <code>find()</code>, <code>findOne()</code>, etc.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-sparse">SchemaTypeOptions.prototype.sparse</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Boolean|Number»</span></li></ul>
<div>
<p>If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, Mongoose will build a sparse index on this path.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-text">SchemaTypeOptions.prototype.text</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Boolean|Number|Object»</span></li></ul>
<div>
<p>If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, Mongoose will build a text index on this path.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-transform">SchemaTypeOptions.prototype.transform</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function»</span></li></ul>
<div>
<p>Define a transform function for this individual schema type. Only called when calling <code>toJSON()</code> or <code>toObject()</code>.</p> <h4>Example:</h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> schema = Schema({
  <span class="hljs-attr">myDate</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>,
    <span class="hljs-attr">transform</span>: <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v.getFullYear()
  }
});
<span class="hljs-keyword">const</span> Model = mongoose.model(<span class="hljs-string">'Test'</span>, schema);

<span class="hljs-keyword">const</span> doc = <span class="hljs-keyword">new</span> Model({ <span class="hljs-attr">myDate</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2019/06/01'</span>) });
doc.myDate <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>; <span class="hljs-comment">// true</span>

<span class="hljs-keyword">const</span> res = doc.toObject({ <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span> });
res.myDate; <span class="hljs-comment">// 2019</span></pre> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-type">SchemaTypeOptions.prototype.type</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function|String|Object»</span></li></ul>
<div>
<p>The type to cast this path to.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-unique">SchemaTypeOptions.prototype.unique</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Boolean|Number»</span></li></ul>
<div>
<p>If <a href="https://masteringjs.io/tutorials/fundamentals/truthy">truthy</a>, Mongoose will build a unique index on this path when the model is compiled. <a href="../validation#the-unique-option-is-not-a-validator">The <code>unique</code> option is <strong>not</strong> a validator</a>.</p> </div>
<h3 id="schematypeoptions_SchemaTypeOptions-validate">SchemaTypeOptions.prototype.validate</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«Function|Object»</span></li></ul>
<div>
<p>Function or object describing how to validate this schematype.</p> </div>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mongoosejs.com/docs/api/schematypeoptions.html" class="_attribution-link" target="_blank">https://mongoosejs.com/docs/api/schematypeoptions.html</a>
  </p>
</div>
