<a class="edit-docs-link" href="https://github.com/Automattic/mongoose/blob/master/lib/types/map.js" target="_blank"> <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMDAgMTAwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz48ZyB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAwIDQ4MCkiPjxwYXRoIHN0cm9rZT0iIzA5NzFCMiIgZmlsbD0iIzA5NzFCMiIgZD0iTTkzMC45LDQyMC41Yy0zMy4xLDMxLjgtNjkuMyw0Ny43LTEwOC43LDQ3LjdjLTQ0LjUsMC04My45LTE3LjItMTE4LjItNTEuNUw5OS40LTE4NS45Yy0zLjgtMy44LTYuNC04LjktNy42LTE1LjNjLTIuNS04LjktMjkuMi05Ny45LTgwLjEtMjY3Yy0zLjgtMTIuNy0xLjMtMjMuNSw3LjYtMzIuNGM2LjQtNS4xLDE0LTcuNiwyMi45LTcuNmg5LjVjMTMyLjIsNDQuNSwyMTkuOSw3My4xLDI2My4yLDg1LjhjMy44LDEuMyw3LjYsMy44LDExLjQsNy42YzM3NSwzNzAsNTc3LjIsNTcwLjIsNjA2LjQsNjAwLjdjMzguMSwzOS40LDU3LjIsNzkuNSw1Ny4yLDEyMC4xQzk4OC43LDM0Ni44LDk2OSwzODQuOSw5MzAuOSw0MjAuNXogTTY5NC40LDMxOS40YzMxLjgtNy42LDYxLjctMjUuNCw4OS42LTUzLjRjMjYuNy0yNi43LDQzLjItNTcuMiw0OS42LTkxLjVDNzQ3LjIsODguMSw1NzguNy03OS4xLDMyOC4zLTMyN2MtMTIuNywzMC41LTI5LjksNTYuNi01MS41LDc4LjJjLTI2LjcsMjYuNy01Ni42LDQ3LTg5LjYsNjFMMzMyLjEtNDIuOWwyMTAuNywyMTAuN0w2OTQuNCwzMTkuNHogTTE0NS4yLTIzOS4zYzMxLjgtNy42LDYxLTI1LjQsODcuNy01My40YzIxLjYtMjEuNiwzNi45LTQ3LDQ1LjgtNzYuM2MtMTIuNy0zLjgtNDIuOS0xNC05MC42LTMwLjVjLTQ3LjctMTYuNS04Mi4zLTI4LTEwMy45LTM0LjNjNi40LDE5LjEsMTYuOCw1Mi4xLDMxLjUsOTkuMkMxMzAuMy0yODcuNiwxNDAuMS0yNTUuOCwxNDUuMi0yMzkuM3ogTTg4OC45LDIyOS44bC01LjctNS43Yy0xMi43LDMzLjEtMzEuMSw2MS43LTU1LjMsODUuOEM4MDIuNSwzMzUuMyw3NzQuNSwzNTUsNzQ0LDM2OWwxLjksMS45bDEuOSwxLjljMjIuOSwyMi45LDQ3LjcsMzQuMyw3NC40LDM0LjNjMjIuOSwwLDQ1LjEtMTAuOCw2Ni43LTMyLjRjMjUuNC0yNC4yLDM4LjEtNDcuNywzOC4xLTcwLjZTOTE0LjQsMjU2LjUsODg4LjksMjI5Ljh6Ii8+PC9nPjwvZz4NCjwvc3ZnPg=="> </a><h1>Map</h1>

<div class="api-content">
<h3 id="mongoosemap_MongooseMap-$isMongooseMap">MongooseMap.prototype.$isMongooseMap</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>Set to <code>true</code> for all Mongoose map instances</p> </div>
<h3 id="map_Map-clear">MongooseMap.prototype.clear()</h3>
<div>
<p>Overwrites native Map's <code>clear()</code> function to support change tracking.</p> </div>
<h3 id="map_Map-delete">MongooseMap.prototype.delete()</h3>
<div>
<p>Overwrites native Map's <code>delete()</code> function to support change tracking.</p> </div>
<h3 id="map_Map-get">MongooseMap.prototype.get()</h3>
<div>
<p>Overwrites native Map's <code>get()</code> function to support Mongoose getters.</p> </div>
<h3 id="map_Map-set">MongooseMap.prototype.set()</h3>
<div>
<p>Overwrites native Map's <code>set()</code> function to support setters, <code>populate()</code>, and change tracking. Note that Mongoose maps <em>only</em> support strings and ObjectIds as keys.</p> <h4 id="example"> <a href="#example"> Example: </a> </h4> <pre data-language="javascript">doc.<span class="hljs-property">myMap</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'test'</span>, <span class="hljs-number">42</span>); <span class="hljs-comment">// works</span>
doc.<span class="hljs-property">myMap</span>.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">obj</span>: <span class="hljs-number">42</span> }, <span class="hljs-number">42</span>); <span class="hljs-comment">// Throws "Mongoose maps only support string keys"</span>
</pre> </div>
<h3 id="map_Map-toBSON">MongooseMap.prototype.toBSON()</h3>
<div>
<p>Converts this map to a native JavaScript Map so the MongoDB driver can serialize it.</p> </div>
<h3 id="map_Map-toJSON">MongooseMap.prototype.toJSON()</h3>
<h5>Parameters:</h5>
<ul class="params">
<li class="param">
<code>[options]</code> <span class="method-type">«Object»</span> </li>
<ul style="margin-top: 0.5em"><li>
<code>[options.flattenMaps=false]</code> <span class="method-type">«Boolean»</span> set to <code>true</code> to convert the map to a POJO rather than a native JavaScript map </li></ul>
</ul>
<div>
<p>Converts this map to a native JavaScript Map for <code>JSON.stringify()</code>. Set the <code>flattenMaps</code> option to convert this map to a POJO instead.</p> <h4 id="example"> <a href="#example"> Example: </a> </h4> <pre data-language="javascript">doc.<span class="hljs-property">myMap</span>.<span class="hljs-title function_">toJSON</span>() <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>; <span class="hljs-comment">// true</span>
doc.<span class="hljs-property">myMap</span>.<span class="hljs-title function_">toJSON</span>({ <span class="hljs-attr">flattenMaps</span>: <span class="hljs-literal">true</span> }) <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>; <span class="hljs-comment">// false</span>
</pre> </div>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mongoosejs.com/docs/api/map.html" class="_attribution-link" target="_blank">https://mongoosejs.com/docs/api/map.html</a>
  </p>
</div>
