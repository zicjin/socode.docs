<h1 id="troubleshooting" tabindex="-1">Troubleshooting </h1>
<p>See <a href="https://rollupjs.org/guide/en/#troubleshooting" target="_blank" rel="noopener noreferrer">Rollup's troubleshooting guide</a> for more information too.</p>
<p>If the suggestions here don't work, please try posting questions on <a href="https://github.com/vitejs/vite/discussions" target="_blank" rel="noopener noreferrer">GitHub Discussions</a> or in the <code>#help</code> channel of <a href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer">Vite Land Discord</a>.</p>
<h2 id="cli" tabindex="-1">CLI </h2>
<h3 id="error-cannot-find-module-c-foo-bar-baz-vite-bin-vite-js" tabindex="-1">
<code>Error: Cannot find module 'C:\foo\bar&amp;baz\vite\bin\vite.js'</code> </h3>
<p>The path to your project folder may include <code>?</code>, which doesn't work with <code>npm</code> on Windows (<a href="https://github.com/npm/cmd-shim/issues/45" target="_blank" rel="noopener noreferrer">npm/cmd-shim#45</a>).</p>
<p>You will need to either:</p>
<ul>
<li>Switch to another package manager (e.g. <code>pnpm</code>, <code>yarn</code>)</li>
<li>Remove <code>?</code> from the path to your project</li>
</ul>
<h2 id="dev-server" tabindex="-1">Dev Server </h2>
<h3 id="requests-are-stalled-forever" tabindex="-1">Requests are stalled forever </h3>
<p>If you are using Linux, file descriptor limits and inotify limits may be causing the issue. As Vite does not bundle most of the files, browsers may request many files which require many file descriptors, going over the limit.</p>
<p>To solve this:</p>
<ul>
<li>
<p>Increase file descriptor limit by <code>ulimit</code></p>
<div class="language-shell">
<pre data-language="javascript"># Check current limit
$ ulimit -Sn
# Change limit (temporary)
$ ulimit -Sn 10000 # You might need to change the hard limit too
# Restart your browser</pre>
</div>
</li>
<li>
<p>Increase the following inotify related limits by <code>sysctl</code></p>
<div class="language-shell">
<pre data-language="javascript"># Check current limits
$ sysctl fs.inotify
# Change limits (temporary)
$ sudo sysctl fs.inotify.max_queued_events=16384
$ sudo sysctl fs.inotify.max_user_instances=8192
$ sudo sysctl fs.inotify.max_user_watches=524288</pre>
</div>
</li>
</ul>
<h2 id="hmr" tabindex="-1">HMR </h2>
<h3 id="vite-detects-a-file-change-but-the-hmr-is-not-working" tabindex="-1">Vite detects a file change but the HMR is not working </h3>
<p>You may be importing a file with a different case. For example, <code>src/foo.js</code> exists and <code>src/bar.js</code> contains:</p>
<div class="language-js">
<pre data-language="javascript">import './Foo.js' // should be './foo.js'</pre>
</div>
<p>Related issue: <a href="https://github.com/vitejs/vite/issues/964" target="_blank" rel="noopener noreferrer">#964</a></p>
<h3 id="vite-does-not-detect-a-file-change" tabindex="-1">Vite does not detect a file change </h3>
<p>If you are running Vite with WSL2, Vite cannot watch file changes in some conditions. See <a href="../config/server-options#server-watch"><code>server.watch</code> option</a>.</p>
<h3 id="a-full-reload-happens-instead-of-hmr" tabindex="-1">A full reload happens instead of HMR </h3>
<p>If HMR is not handled by Vite or a plugin, a full reload will happen.</p>
<p>Also if there is a dependency loop, a full reload will happen. To solve this, try removing the loop.</p>
<h2 id="others" tabindex="-1">Others </h2>
<h3 id="syntax-error-type-error-happens" tabindex="-1">Syntax Error / Type Error happens </h3>
<p>Vite cannot handle and does not support code that only runs on non-strict mode (sloppy mode). This is because Vite uses ESM and it is always <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noopener noreferrer">strict mode</a> inside ESM.</p>
<p>For example, you might see these errors.</p>
<blockquote><p>[ERROR] With statements cannot be used with the "esm" output format due to strict mode</p></blockquote>
<blockquote><p>TypeError: Cannot create property 'foo' on boolean 'false'</p></blockquote>
<p>If these code are used inside dependecies, you could use <a href="https://github.com/ds300/patch-package" target="_blank" rel="noopener noreferrer"><code>patch-package</code></a> (or <a href="https://yarnpkg.com/cli/patch" target="_blank" rel="noopener noreferrer"><code>yarn patch</code></a> or <a href="https://pnpm.io/cli/patch" target="_blank" rel="noopener noreferrer"><code>pnpm patch</code></a>) for an escape hatch.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://vitejs.dev/guide/troubleshooting.html" class="_attribution-link" target="_blank">https://vitejs.dev/guide/troubleshooting.html</a>
  </p>
</div>
