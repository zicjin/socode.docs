<h1 id="server-options" tabindex="-1">Server Options </h1>
<h2 id="server-host" tabindex="-1">server.host </h2>
<ul>
<li>
<strong>Type:</strong> <code>string | boolean</code>
</li>
<li>
<strong>Default:</strong> <code>'localhost'</code>
</li>
</ul>
<p>Specify which IP addresses the server should listen on. Set this to <code>0.0.0.0</code> or <code>true</code> to listen on all addresses, including LAN and public addresses.</p>
<p>This can be set via the CLI using <code>--host 0.0.0.0</code> or <code>--host</code>.</p>
<div class="tip custom-block">
<strong class="custom-block-title">NOTE</strong><p>There are cases when other servers might respond instead of Vite.</p>
<p>The first case is when <code>localhost</code> is used. Node.js under v17 reorders the result of DNS-resolved address by default. When accessing <code>localhost</code>, browsers use DNS to resolve the address and that address might differ from the address which Vite is listening. Vite prints the resolved address when it differs.</p>
<p>You can set <a href="https://nodejs.org/api/dns.html#dns_dns_setdefaultresultorder_order" target="_blank" rel="noopener noreferrer"><code>dns.setDefaultResultOrder('verbatim')</code></a> to disable the reordering behavior. Vite will then print the address as <code>localhost</code>.</p>
<div class="language-js">
<pre data-language="javascript">// vite.config.js
import { defineConfig } from 'vite'
import dns from 'dns'

dns.setDefaultResultOrder('verbatim')

export default defineConfig({
  // omit
})</pre>
</div>
<p>The second case is when wildcard hosts (e.g. <code>0.0.0.0</code>) is used. This is because servers listening on non-wildcard hosts take priority over those listening on wildcard hosts.</p>
</div>
<h2 id="server-port" tabindex="-1">server.port </h2>
<ul>
<li>
<strong>Type:</strong> <code>number</code>
</li>
<li>
<strong>Default:</strong> <code>5173</code>
</li>
</ul>
<p>Specify server port. Note if the port is already being used, Vite will automatically try the next available port so this may not be the actual port the server ends up listening on.</p>
<h2 id="server-strictport" tabindex="-1">server.strictPort </h2>
<ul><li>
<strong>Type:</strong> <code>boolean</code>
</li></ul>
<p>Set to <code>true</code> to exit if port is already in use, instead of automatically trying the next available port.</p>
<h2 id="server-https" tabindex="-1">server.https </h2>
<ul><li>
<strong>Type:</strong> <code>boolean | https.ServerOptions</code>
</li></ul>
<p>Enable TLS + HTTP/2. Note this downgrades to TLS only when the <a href="#server-proxy"><code>server.proxy</code> option</a> is also used.</p>
<p>The value can also be an <a href="https://nodejs.org/api/https.html#https_https_createserver_options_requestlistener" target="_blank" rel="noopener noreferrer">options object</a> passed to <code>https.createServer()</code>.</p>
<p>A valid certificate is needed. For a basic setup, you can add <a href="https://github.com/vitejs/vite-plugin-basic-ssl" target="_blank" rel="noopener noreferrer">@vitejs/plugin-basic-ssl</a> to the project plugins, which will automatically create and cache a self-signed certificate. But we recommend creating your own certificates.</p>
<h2 id="server-open" tabindex="-1">server.open </h2>
<ul><li>
<strong>Type:</strong> <code>boolean | string</code>
</li></ul>
<p>Automatically open the app in the browser on server start. When the value is a string, it will be used as the URL's pathname. If you want to open the server in a specific browser you like, you can set the env <code>process.<wbr>env.BROWSER</wbr></code> (e.g. <code>firefox</code>). See <a href="https://github.com/sindresorhus/open#app" target="_blank" rel="noopener noreferrer">the <code>open</code> package</a> for more details.</p>
<p><strong>Example:</strong></p>
<div class="language-js">
<pre data-language="javascript">export default defineConfig({
  server: {
    open: '/docs/index.html'
  }
})</pre>
</div>
<h2 id="server-proxy" tabindex="-1">server.proxy </h2>
<ul><li>
<strong>Type:</strong> <code>Record&lt;string, string | ProxyOptions&gt;</code>
</li></ul>
<p>Configure custom proxy rules for the dev server. Expects an object of <code>{ key: options }</code> pairs. If the key starts with <code>^</code>, it will be interpreted as a <code>RegExp</code>. The <code>configure</code> option can be used to access the proxy instance.</p>
<p>Uses <a href="https://github.com/http-party/node-http-proxy" target="_blank" rel="noopener noreferrer"><code>http-proxy</code></a>. Full options <a href="https://github.com/http-party/node-http-proxy#options" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>In some cases, you might also want to configure the underlying dev server (e.g. to add custom middlewares to the internal <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">connect</a> app). In order to do that, you need to write your own <a href="../guide/using-plugins">plugin</a> and use <a href="../guide/api-plugin#configureserver">configureServer</a> function.</p>
<p><strong>Example:</strong></p>
<div class="language-js">
<pre data-language="javascript">export default defineConfig({
  server: {
    proxy: {
      // string shorthand
      '/foo': 'http://localhost:4567',
      // with options
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) =&gt; path.replace(/^\/api/, '')
      },
      // with RegEx
      '^/fallback/.*': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) =&gt; path.replace(/^\/fallback/, '')
      },
      // Using the proxy instance
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        configure: (proxy, options) =&gt; {
          // proxy will be an instance of 'http-proxy'
        }
      },
      // Proxying websockets or socket.io
      '/socket.io': {
        target: 'ws://localhost:5173',
        ws: true
      }
    }
  }
})</pre>
</div>
<h2 id="server-cors" tabindex="-1">server.cors </h2>
<ul><li>
<strong>Type:</strong> <code>boolean | CorsOptions</code>
</li></ul>
<p>Configure CORS for the dev server. This is enabled by default and allows any origin. Pass an <a href="https://github.com/expressjs/cors" target="_blank" rel="noopener noreferrer">options object</a> to fine tune the behavior or <code>false</code> to disable.</p>
<h2 id="server-headers" tabindex="-1">server.headers </h2>
<ul><li>
<strong>Type:</strong> <code>OutgoingHttpHeaders</code>
</li></ul>
<p>Specify server response headers.</p>
<h2 id="server-hmr" tabindex="-1">server.hmr </h2>
<ul><li>
<strong>Type:</strong> <code>boolean | { protocol?: string, host?: string, port?: number, path?: string, timeout?: number, overlay?: boolean, clientPort?: number, server?: Server }</code>
</li></ul>
<p>Disable or configure HMR connection (in cases where the HMR websocket must use a different address from the http server).</p>
<p>Set <code>server.hmr.overlay</code> to <code>false</code> to disable the server error overlay.</p>
<p><code>clientPort</code> is an advanced option that overrides the port only on the client side, allowing you to serve the websocket on a different port than the client code looks for it on.</p>
<p>When <code>server.hmr.server</code> is defined, Vite will process the HMR connection requests through the provided server. If not in middleware mode, Vite will attempt to process HMR connection requests through the existing server. This can be helpful when using self-signed certificates or when you want to expose Vite over a network on a single port.</p>
<p>Check out <a href="https://github.com/sapphi-red/vite-setup-catalogue" target="_blank" rel="noopener noreferrer"><code>vite-setup-catalogue</code></a> for some examples.</p>
<div class="tip custom-block">
<strong class="custom-block-title">NOTE</strong><p>With the default configuration, reverse proxies in front of Vite are expected to support proxying WebSocket. If the Vite HMR client fails to connect WebSocket, the client will fallback to connecting the WebSocket directly to the Vite HMR server bypassing the reverse proxies:</p>
<div class="language-">
<pre data-language="javascript">Direct websocket connection fallback. Check out https://vitejs.dev/config/server-options.html#server-hmr to remove the previous connection error.</pre>
</div>
<p>The error that appears in the Browser when the fallback happens can be ignored. To avoid the error by directly bypassing reverse proxies, you could either:</p>
<ul>
<li>configure the reverse proxy to proxy WebSocket too</li>
<li>set <a href="#server-strictport"><code>server.strictPort = true</code></a> and set <code>server.hmr.clientPort</code> to the same value with <code>server.port</code>
</li>
<li>set <code>server.hmr.port</code> to a different value from <a href="#server-port"><code>server.port</code></a>
</li>
</ul>
</div>
<h2 id="server-watch" tabindex="-1">server.watch </h2>
<ul><li>
<strong>Type:</strong> <code>object</code>
</li></ul>
<p>File system watcher options to pass on to <a href="https://github.com/paulmillr/chokidar#api" target="_blank" rel="noopener noreferrer">chokidar</a>.</p>
<p>When running Vite on Windows Subsystem for Linux (WSL) 2, if the project folder resides in a Windows filesystem, you'll need to set this option to <code>{ usePolling: true }</code>. This is due to <a href="https://github.com/microsoft/WSL/issues/4739" target="_blank" rel="noopener noreferrer">a WSL2 limitation</a> with the Windows filesystem.</p>
<p>The Vite server watcher skips <code>.git/</code> and <code>node_modules/</code> directories by default. If you want to watch a package inside <code>node_modules/</code>, you can pass a negated glob pattern to <code>server.watch.ignored</code>. That is:</p>
<div class="language-js">
<pre data-language="javascript">export default defineConfig({
  server: {
    watch: {
      ignored: ['!**/node_modules/your-package-name/**']
    }
  },
  // The watched package must be excluded from optimization,
  // so that it can appear in the dependency graph and trigger hot reload.
  optimizeDeps: {
    exclude: ['your-package-name']
  }
})</pre>
</div>
<h2 id="server-middlewaremode" tabindex="-1">server.middlewareMode </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>false</code>
</li>
</ul>
<p>Create Vite server in middleware mode.</p>
<ul>
<li><p><strong>Related:</strong> <a href="shared-options#apptype">appType</a>, <a href="../guide/ssr#setting-up-the-dev-server">SSR - Setting Up the Dev Server</a></p></li>
<li><p><strong>Example:</strong></p></li>
</ul>
<div class="language-js">
<pre data-language="javascript">import express from 'express'
import { createServer as createViteServer } from 'vite'

async function createServer() {
  const app = express()

  // Create Vite server in middleware mode
  const vite = await createViteServer({
    server: { middlewareMode: true },
    appType: 'custom' // don't include Vite's default HTML handling middlewares
  })
  // Use vite's connect instance as middleware
  app.use(vite.middlewares)

  app.use('*', async (req, res) =&gt; {
    // Since `appType` is `'custom'`, should serve response here.
    // Note: if `appType` is `'spa'` or `'mpa'`, Vite includes middlewares to handle
    // HTML requests and 404s so user middlewares should be added
    // before Vite's middlewares to take effect instead
  })
}

createServer()</pre>
</div>
<h2 id="server-base" tabindex="-1">server.base </h2>
<ul><li>
<strong>Type:</strong> <code>string | undefined</code>
</li></ul>
<p>Prepend this folder to http requests, for use when proxying vite as a subfolder. Should start and end with the <code>/</code> character.</p>
<h2 id="server-fs-strict" tabindex="-1">server.fs.strict </h2>
<ul>
<li>
<strong>Type:</strong> <code>boolean</code>
</li>
<li>
<strong>Default:</strong> <code>true</code> (enabled by default since Vite 2.7)</li>
</ul>
<p>Restrict serving files outside of workspace root.</p>
<h2 id="server-fs-allow" tabindex="-1">server.fs.allow </h2>
<ul><li>
<strong>Type:</strong> <code>string[]</code>
</li></ul>
<p>Restrict files that could be served via <code>/@fs/</code>. When <code>server.fs.strict</code> is set to <code>true</code>, accessing files outside this directory list that aren't imported from an allowed file will result in a 403.</p>
<p>Vite will search for the root of the potential workspace and use it as default. A valid workspace met the following conditions, otherwise will fallback to the <a href="../guide/index#index-html-and-project-root">project root</a>.</p>
<ul>
<li>contains <code>workspaces</code> field in <code>package.json</code>
</li>
<li>contains one of the following file <ul>
<li><code>lerna.json</code></li>
<li><code>pnpm-workspace.yaml</code></li>
</ul>
</li>
</ul>
<p>Accepts a path to specify the custom workspace root. Could be a absolute path or a path relative to <a href="../guide/index#index-html-and-project-root">project root</a>. For example:</p>
<div class="language-js">
<pre data-language="javascript">export default defineConfig({
  server: {
    fs: {
      // Allow serving files from one level up to the project root
      allow: ['..']
    }
  }
})</pre>
</div>
<p>When <code>server.fs.allow</code> is specified, the auto workspace root detection will be disabled. To extend the original behavior, a utility <code>searchForWorkspaceRoot</code> is exposed:</p>
<div class="language-js">
<pre data-language="javascript">import { defineConfig, searchForWorkspaceRoot } from 'vite'

export default defineConfig({
  server: {
    fs: {
      allow: [
        // search up for workspace root
        searchForWorkspaceRoot(process.cwd()),
        // your custom rules
        '/path/to/custom/allow'
      ]
    }
  }
})</pre>
</div>
<h2 id="server-fs-deny" tabindex="-1">server.fs.deny </h2>
<ul><li>
<strong>Type:</strong> <code>string[]</code>
</li></ul>
<p>Blocklist for sensitive files being restricted to be served by Vite dev server.</p>
<p>Default to <code>['.env', '.env.*', '*.{pem,crt}']</code>.</p>
<h2 id="server-origin" tabindex="-1">server.origin </h2>
<ul><li>
<strong>Type:</strong> <code>string</code>
</li></ul>
<p>Defines the origin of the generated asset URLs during development.</p>
<div class="language-js">
<pre data-language="javascript">export default defineConfig({
  server: {
    origin: 'http://127.0.0.1:8080'
  }
})</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://vitejs.dev/config/server-options.html" class="_attribution-link" target="_blank">https://vitejs.dev/config/server-options.html</a>
  </p>
</div>
