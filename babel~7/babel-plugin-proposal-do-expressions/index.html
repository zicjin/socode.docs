<div class="navPusher"><div class="docMainWrapper wrapper">

<div class="container mainContainer docsContainer"><div class="wrapper"><div class="post">
<header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">@babel/plugin-proposal-do-expressions</h1></header><article><div><span><h2>
Detail</h2> <blockquote> <p>The <code>do { .. }</code> expression executes a block (with one or many statements in it), and the final statement completion value inside the block becomes the completion value of the do expression.</p> </blockquote> <p>from <a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20%26%20grammar/ch5.md#statement-completion-values">You Don't Know JS</a>, Types &amp; Grammar -&gt; Chapter 5 -&gt; Section Statement Completion Values</p> <p>It can be seen as a complex version of the <a href="http://mdn.io/ternary">ternary operator</a>:</p> <pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> a = <span class="hljs-keyword">do</span> {
  <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">10</span>) {
    (<span class="hljs-string">"big"</span>);
  } <span class="hljs-keyword">else</span> {
    (<span class="hljs-string">"small"</span>);
  }
};
<span class="hljs-comment">// is equivalent to:</span>
<span class="hljs-keyword">let</span> a = x &gt; <span class="hljs-number">10</span> ? <span class="hljs-string">"big"</span> : <span class="hljs-string">"small"</span>;
</code></pre> <p>This example is not the best usage because it is too simple and using a ternary operator is a better option but you can have a much more complex condition in the <code>do { ... }</code> expression with several <code>if ... else</code> chains:</p> <pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> x = <span class="hljs-number">100</span>;
<span class="hljs-keyword">let</span> y = <span class="hljs-number">20</span>;

<span class="hljs-keyword">let</span> a = <span class="hljs-keyword">do</span> {
  <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">10</span>) {
    <span class="hljs-keyword">if</span> (y &gt; <span class="hljs-number">20</span>) {
      (<span class="hljs-string">"big x, big y"</span>);
    } <span class="hljs-keyword">else</span> {
      (<span class="hljs-string">"big x, small y"</span>);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (y &gt; <span class="hljs-number">10</span>) {
      (<span class="hljs-string">"small x, big y"</span>);
    } <span class="hljs-keyword">else</span> {
      (<span class="hljs-string">"small x, small y"</span>);
    }
  }
};
</code></pre> <h2>
Example</h2> <h3>
In JSX</h3> <p>One of the most useful usage of the <code>do</code> expression is inside JSX. If we want to conditionally display a component we usually have to call another function which would implement the condition and return the correct value, for example:</p> <pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> getColoredComponent = <span class="hljs-function"><span class="hljs-params">color</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (color === <span class="hljs-string">"blue"</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BlueComponent</span> /&gt;</span></span>;
  }
  <span class="hljs-keyword">if</span> (color === <span class="hljs-string">"red"</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RedComponent</span> /&gt;</span></span>;
  }
  <span class="hljs-keyword">if</span> (color === <span class="hljs-string">"green"</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">GreenComponent</span> /&gt;</span></span>;
  }
};

<span class="hljs-keyword">const</span> Component = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"myComponent"</span>&gt;</span>{getColoredComponent()}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre> <p>Using a do expression you can add logic inside JSX:</p> <pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> Component = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"myComponent"</span>&gt;</span>
    {do {
      if (color === "blue") {
        <span class="hljs-tag">&lt;<span class="hljs-name">BlueComponent</span> /&gt;</span>;
      } else if (color === "red") {
        <span class="hljs-tag">&lt;<span class="hljs-name">RedComponent</span> /&gt;</span>;
      } else if (color === "green") {
        <span class="hljs-tag">&lt;<span class="hljs-name">GreenComponent</span> /&gt;</span>;
      }
    }}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre> <h2>
Installation</h2> <pre><code class="hljs css language-sh">npm install --save-dev @babel/plugin-proposal-do-expressions
</code></pre> <h2>
Usage</h2> <h3>
With a configuration file (Recommended)</h3> <pre><code class="hljs css language-json">{
  <span class="hljs-attr">"plugins"</span>: [<span class="hljs-string">"@babel/plugin-proposal-do-expressions"</span>]
}
</code></pre> <h3>
Via CLI</h3> <pre><code class="hljs css language-sh">babel --plugins @babel/plugin-proposal-do-expressions script.js
</code></pre> <h3>
Via Node API</h3> <pre><code class="hljs css language-javascript"><span class="hljs-built_in">require</span>(<span class="hljs-string">"@babel/core"</span>).transformSync(<span class="hljs-string">"code"</span>, {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">"@babel/plugin-proposal-do-expressions"</span>],
});
</code></pre> <h2>
References</h2> <ul> <li><a href="https://github.com/tc39/proposal-do-expressions">Proposal</a></li> <li><a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20%26%20grammar/ch5.md#statement-completion-values">You Don't Know JS</a></li> <li>Very handy for conditions inside JSX: <a href="https://github.com/reactjs/react-future/issues/35#issuecomment-120009203">reactjs/react-future#35</a>
</li> </ul> </span></div></article>
</div></div></div>

</div></div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://babeljs.io/docs/en/babel-plugin-proposal-do-expressions/" class="_attribution-link" target="_blank">https://babeljs.io/docs/en/babel-plugin-proposal-do-expressions/</a>
  </p>
</div>
