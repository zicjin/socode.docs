<div class="navPusher"><div class="docMainWrapper wrapper">

<div class="container mainContainer docsContainer"><div class="wrapper"><div class="post">
<header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">@babel/plugin-proposal-do-expressions</h1></header><article><div><span><h2>
Detail</h2> <blockquote> <p>The <code>do { .. }</code> expression executes a block (with one or many statements in it), and the final statement completion value inside the block becomes the completion value of the do expression.</p> </blockquote> <p>from <a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20%26%20grammar/ch5.md#statement-completion-values">You Don't Know JS</a>, Types &amp; Grammar -&gt; Chapter 5 -&gt; Section Statement Completion Values</p> <p>It can be seen as a complex version of the <a href="http://mdn.io/ternary">ternary operator</a>:</p> <pre data-language="js">let a = do {
  if (x &gt; 10) {
    ("big");
  } else {
    ("small");
  }
};
// is equivalent to:
let a = x &gt; 10 ? "big" : "small";
</pre> <p>This example is not the best usage because it is too simple and using a ternary operator is a better option but you can have a much more complex condition in the <code>do { ... }</code> expression with several <code>if ... else</code> chains:</p> <pre data-language="js">let x = 100;
let y = 20;

let a = do {
  if (x &gt; 10) {
    if (y &gt; 20) {
      ("big x, big y");
    } else {
      ("big x, small y");
    }
  } else {
    if (y &gt; 10) {
      ("small x, big y");
    } else {
      ("small x, small y");
    }
  }
};
</pre> <h2>
Example</h2> <h3>
In JSX</h3> <p>One of the most useful usage of the <code>do</code> expression is inside JSX. If we want to conditionally display a component we usually have to call another function which would implement the condition and return the correct value, for example:</p> <pre data-language="js">const getColoredComponent = color =&gt; {
  if (color === "blue") {
    return &lt;BlueComponent /&gt;;
  }
  if (color === "red") {
    return &lt;RedComponent /&gt;;
  }
  if (color === "green") {
    return &lt;GreenComponent /&gt;;
  }
};

const Component = props =&gt; (
  &lt;div className="myComponent"&gt;{getColoredComponent()}&lt;/div&gt;
);
</pre> <p>Using a do expression you can add logic inside JSX:</p> <pre data-language="js">const Component = props =&gt; (
  &lt;div className="myComponent"&gt;
    {do {
      if (color === "blue") {
        &lt;BlueComponent /&gt;;
      } else if (color === "red") {
        &lt;RedComponent /&gt;;
      } else if (color === "green") {
        &lt;GreenComponent /&gt;;
      }
    }}
  &lt;/div&gt;
);
</pre> <h2>
Installation</h2> <pre data-language="sh">npm install --save-dev @babel/plugin-proposal-do-expressions
</pre> <h2>
Usage</h2> <h3>
With a configuration file (Recommended)</h3> <pre data-language="json">{
  "plugins": ["@babel/plugin-proposal-do-expressions"]
}
</pre> <h3>
Via CLI</h3> <pre data-language="sh">babel --plugins @babel/plugin-proposal-do-expressions script.js
</pre> <h3>
Via Node API</h3> <pre data-language="javascript">require("@babel/core").transformSync("code", {
  plugins: ["@babel/plugin-proposal-do-expressions"],
});
</pre> <h2>
References</h2> <ul> <li><a href="https://github.com/tc39/proposal-do-expressions">Proposal</a></li> <li><a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20%26%20grammar/ch5.md#statement-completion-values">You Don't Know JS</a></li> <li>Very handy for conditions inside JSX: <a href="https://github.com/reactjs/react-future/issues/35#issuecomment-120009203">reactjs/react-future#35</a>
</li> </ul> </span></div></article>
</div></div></div>

</div></div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://babeljs.io/docs/en/babel-plugin-proposal-do-expressions/" class="_attribution-link" target="_blank">https://babeljs.io/docs/en/babel-plugin-proposal-do-expressions/</a>
  </p>
</div>
