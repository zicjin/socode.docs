<h1 id="class-Net::POP3" class="class"> class Net::POP3 </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent">Protocol</dd>
</dl> <section class="description"> <h2 id="class-Net::POP3-label-What+is+This+Library-3F">What is This Library?</h2> <p>This library provides functionality for retrieving email via <a href="pop3"><code>POP3</code></a>, the Post Office Protocol version 3. For details of <a href="pop3"><code>POP3</code></a>, see [RFC1939] (<a href="http://www.ietf.org/rfc/rfc1939.txt">www.ietf.org/rfc/rfc1939.txt</a>).</p> <h2 id="class-Net::POP3-label-Examples">Examples</h2> <h3 id="class-Net::POP3-label-Retrieving+Messages">Retrieving Messages</h3> <p>This example retrieves messages from the server and deletes them on the server.</p> <p>Messages are written to files named 'inbox/1', 'inbox/2', .… Replace 'pop.example.com' with your <a href="pop3"><code>POP3</code></a> server address, and 'YourAccount' and 'YourPassword' with the appropriate account details.</p> <pre class="ruby" data-language="ruby">require 'net/pop'

pop = Net::POP3.new('pop.example.com')
pop.start('YourAccount', 'YourPassword')             # (1)
if pop.mails.empty?
  puts 'No mail.'
else
  i = 0
  pop.each_mail do |m|   # or "pop.mails.each ..."   # (2)
    File.open("inbox/#{i}", 'w') do |f|
      f.write m.pop
    end
    m.delete
    i += 1
  end
  puts "#{pop.mails.size} mails popped."
end
pop.finish                                           # (3)
</pre> <ol>
<li> <p>Call <a href="pop3#method-i-start"><code>Net::POP3#start</code></a> and start POP session.</p> </li>
<li> <p>Access messages by using <a href="pop3#method-i-each_mail"><code>POP3#each_mail</code></a> and/or <a href="pop3#method-i-mails"><code>POP3#mails</code></a>.</p> </li>
<li> <p>Close POP session by calling <a href="pop3#method-i-finish"><code>POP3#finish</code></a> or use the block form of <a href="pop3#method-i-start"><code>start</code></a>.</p> </li>
</ol> <h3 id="class-Net::POP3-label-Shortened+Code">Shortened Code</h3> <p>The example above is very verbose. You can shorten the code by using some utility methods. First, the block form of <a href="pop3#method-c-start"><code>Net::POP3.start</code></a> can be used instead of <a href="pop3#method-c-new"><code>POP3.new</code></a>, <a href="pop3#method-i-start"><code>POP3#start</code></a> and <a href="pop3#method-i-finish"><code>POP3#finish</code></a>.</p> <pre class="ruby" data-language="ruby">require 'net/pop'

Net::POP3.start('pop.example.com', 110,
                'YourAccount', 'YourPassword') do |pop|
  if pop.mails.empty?
    puts 'No mail.'
  else
    i = 0
    pop.each_mail do |m|   # or "pop.mails.each ..."
      File.open("inbox/#{i}", 'w') do |f|
        f.write m.pop
      end
      m.delete
      i += 1
    end
    puts "#{pop.mails.size} mails popped."
  end
end
</pre> <p><a href="pop3#method-i-delete_all"><code>POP3#delete_all</code></a> is an alternative for <a href="pop3#method-i-each_mail"><code>each_mail</code></a> and delete.</p> <pre class="ruby" data-language="ruby">require 'net/pop'

Net::POP3.start('pop.example.com', 110,
                'YourAccount', 'YourPassword') do |pop|
  if pop.mails.empty?
    puts 'No mail.'
  else
    i = 1
    pop.delete_all do |m|
      File.open("inbox/#{i}", 'w') do |f|
        f.write m.pop
      end
      i += 1
    end
  end
end
</pre> <p>And here is an even shorter example.</p> <pre class="ruby" data-language="ruby">require 'net/pop'

i = 0
Net::POP3.delete_all('pop.example.com', 110,
                     'YourAccount', 'YourPassword') do |m|
  File.open("inbox/#{i}", 'w') do |f|
    f.write m.pop
  end
  i += 1
end
</pre> <h3 id="class-Net::POP3-label-Memory+Space+Issues">Memory Space Issues</h3> <p>All the examples above get each message as one big string. This example avoids this.</p> <pre class="ruby" data-language="ruby">require 'net/pop'

i = 1
Net::POP3.delete_all('pop.example.com', 110,
                     'YourAccount', 'YourPassword') do |m|
  File.open("inbox/#{i}", 'w') do |f|
    m.pop do |chunk|    # get a message little by little.
      f.write chunk
    end
    i += 1
  end
end
</pre> <h3 id="class-Net::POP3-label-Using+APOP">Using <a href="apop"><code>APOP</code></a>
</h3> <p>The net/pop library supports <a href="apop"><code>APOP</code></a> authentication. To use <a href="apop"><code>APOP</code></a>, use the <a href="apop"><code>Net::APOP</code></a> class instead of the <a href="pop3"><code>Net::POP3</code></a> class. You can use the utility method, <a href="pop3"><code>Net::POP3</code></a>.APOP(). For example:</p> <pre class="ruby" data-language="ruby">require 'net/pop'

# Use APOP authentication if $isapop == true
pop = Net::POP3.APOP($isapop).new('apop.example.com', 110)
pop.start('YourAccount', 'YourPassword') do |pop|
  # Rest of the code is the same.
end
</pre> <h3 id="class-Net::POP3-label-Fetch+Only+Selected+Mail+Using+-27UIDL-27+POP+Command">Fetch Only Selected Mail Using 'UIDL' POP Command</h3> <p>If your POP server provides UIDL functionality, you can grab only selected mails from the POP server. e.g.</p> <pre class="ruby" data-language="ruby">def need_pop?( id )
  # determine if we need pop this mail...
end

Net::POP3.start('pop.example.com', 110,
                'Your account', 'Your password') do |pop|
  pop.mails.select { |m| need_pop?(m.unique_id) }.each do |m|
    do_something(m.pop)
  end
end
</pre> <p>The <a href="popmail#method-i-unique_id"><code>POPMail#unique_id()</code></a> method returns the unique-id of the message as a <a href="../string"><code>String</code></a>. Normally the unique-id is a hash of the message.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="VERSION">VERSION </dt>
<dd>
<p>version of this library</p> </dd>
</dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-address"> <span class="method-name">address</span><span class="attribute-access-type">[R]</span> </div> <div class="method-description"> <p>The address to connect to.</p> </div> </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-open_timeout"> <span class="method-name">open_timeout</span><span class="attribute-access-type">[RW]</span> </div> <div class="method-description"> <p>Seconds to wait until a connection is opened. If the <a href="pop3"><code>POP3</code></a> object cannot open a connection within this time, it raises a <a href="opentimeout"><code>Net::OpenTimeout</code></a> exception. The default value is 30 seconds.</p> </div> </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-read_timeout"> <span class="method-name">read_timeout</span><span class="attribute-access-type">[R]</span> </div> <div class="method-description"> <p>Seconds to wait until reading one block (by one read(1) call). If the <a href="pop3"><code>POP3</code></a> object cannot complete a read() within this time, it raises a <a href="readtimeout"><code>Net::ReadTimeout</code></a> exception. The default value is 60 seconds.</p> </div> </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-APOP"> <span class="method-name">APOP</span><span class="method-args">(isapop)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="APOP-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 238
def POP3.APOP(isapop)
  isapop ? APOP : POP3
end</pre> </div> <p>Returns the <a href="apop"><code>APOP</code></a> class if <code>isapop</code> is true; otherwise, returns the POP class. For example:</p> <pre># Example 1
pop = Net::POP3::APOP($is_apop).new(addr, port)

# Example 2
Net::POP3::APOP($is_apop).start(addr, port) do |pop|
  ....
end</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-auth_only"> <span class="method-name">auth_only</span><span class="method-args">(address, port = nil, account = nil, password = nil, isapop = false)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="auth_only-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 305
def POP3.auth_only(address, port = nil,
                   account = nil, password = nil,
                   isapop = false)
  new(address, port, isapop).auth_only account, password
end</pre> </div> <p>Opens a <a href="pop3"><code>POP3</code></a> session, attempts authentication, and quits.</p> <p>This method raises <a href="popauthenticationerror"><code>POPAuthenticationError</code></a> if authentication fails.</p> <h3 id="method-c-auth_only-label-Example-3A+normal+POP3">Example: normal <a href="pop3"><code>POP3</code></a>
</h3> <pre class="ruby" data-language="ruby">Net::POP3.auth_only('pop.example.com', 110,
                    'YourAccount', 'YourPassword')
</pre> <h3 id="method-c-auth_only-label-Example-3A+APOP">Example: <a href="apop"><code>APOP</code></a>
</h3> <pre class="ruby" data-language="ruby">Net::POP3.auth_only('pop.example.com', 110,
                    'YourAccount', 'YourPassword', true)
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-certs"> <span class="method-name">certs</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="certs-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 377
def POP3.certs
  return @ssl_params[:ca_file] || @ssl_params[:ca_path]
end</pre> </div> <p>returns the :ca_file or :ca_path from <a href="pop3#method-c-ssl_params"><code>POP3.ssl_params</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-create_ssl_params"> <span class="method-name">create_ssl_params</span><span class="method-args">(verify_or_params = {}, certs = nil)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="create_ssl_params-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 337
def POP3.create_ssl_params(verify_or_params = {}, certs = nil)
  begin
    params = verify_or_params.to_hash
  rescue NoMethodError
    params = {}
    params[:verify_mode] = verify_or_params
    if certs
      if File.file?(certs)
        params[:ca_file] = certs
      elsif File.directory?(certs)
        params[:ca_path] = certs
      end
    end
  end
  return params
end</pre> </div> <p>Constructs proper parameters from arguments</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-default_pop3_port"> <span class="method-name">default_pop3_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="default_pop3_port-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 210
def POP3.default_pop3_port
  110
end</pre> </div> <p>The default port for <a href="pop3"><code>POP3</code></a> connections, port 110</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-default_pop3s_port"> <span class="method-name">default_pop3s_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="default_pop3s_port-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 215
def POP3.default_pop3s_port
  995
end</pre> </div> <p>The default port for POP3S connections, port 995</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-default_port"> <span class="method-name">default_port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="default_port-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 205
def POP3.default_port
  default_pop3_port()
end</pre> </div> <p>returns the port for <a href="pop3"><code>POP3</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-delete_all"> <span class="method-name">delete_all</span><span class="method-args">(address, port = nil, account = nil, password = nil, isapop = false, &amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="delete_all-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 283
def POP3.delete_all(address, port = nil,
                    account = nil, password = nil,
                    isapop = false, &amp;block)
  start(address, port, account, password, isapop) {|pop|
    pop.delete_all(&amp;block)
  }
end</pre> </div> <p>Starts a <a href="pop3"><code>POP3</code></a> session and deletes all messages on the server. If a block is given, each <a href="popmail"><code>POPMail</code></a> object is yielded to it before being deleted.</p> <p>This method raises a <a href="popauthenticationerror"><code>POPAuthenticationError</code></a> if authentication fails.</p> <h3 id="method-c-delete_all-label-Example">Example</h3> <pre class="ruby" data-language="ruby">Net::POP3.delete_all('pop.example.com', 110,
                     'YourAccount', 'YourPassword') do |m|
  file.write m.pop
end
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-disable_ssl"> <span class="method-name">disable_ssl</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="disable_ssl-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 355
def POP3.disable_ssl
  @ssl_params = nil
end</pre> </div> <p>Disable SSL for all new instances.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-enable_ssl"> <span class="method-callseq"> Net::POP.enable_ssl(params = {}) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="enable_ssl-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 332
def POP3.enable_ssl(*args)
  @ssl_params = create_ssl_params(*args)
end</pre> </div> <p>Enable SSL for all new instances. <code>params</code> is passed to OpenSSL::SSLContext#set_params.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-foreach"> <span class="method-name">foreach</span><span class="method-args">(address, port = nil, account = nil, password = nil, isapop = false) { |message| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="foreach-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 262
def POP3.foreach(address, port = nil,
                 account = nil, password = nil,
                 isapop = false, &amp;block)  # :yields: message
  start(address, port, account, password, isapop) {|pop|
    pop.each_mail(&amp;block)
  }
end</pre> </div> <p>Starts a <a href="pop3"><code>POP3</code></a> session and iterates over each <a href="popmail"><code>POPMail</code></a> object, yielding it to the <code>block</code>. This method is equivalent to:</p> <pre class="ruby" data-language="ruby">Net::POP3.start(address, port, account, password) do |pop|
  pop.each_mail do |m|
    yield m
  end
end
</pre> <p>This method raises a <a href="popauthenticationerror"><code>POPAuthenticationError</code></a> if authentication fails.</p> <h3 id="method-c-foreach-label-Example">Example</h3> <pre class="ruby" data-language="ruby">Net::POP3.foreach('pop.example.com', 110,
                  'YourAccount', 'YourPassword') do |m|
  file.write m.pop
  m.delete if $DELETE
end
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(addr, port = nil, isapop = false)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 417
def initialize(addr, port = nil, isapop = false)
  @address = addr
  @ssl_params = POP3.ssl_params
  @port = port
  @apop = isapop

  @command = nil
  @socket = nil
  @started = false
  @open_timeout = 30
  @read_timeout = 60
  @debug_output = nil

  @mails = nil
  @n_mails = nil
  @n_bytes = nil
end</pre> </div> <p>Creates a new <a href="pop3"><code>POP3</code></a> object.</p> <p><code>address</code> is the hostname or ip address of your <a href="pop3"><code>POP3</code></a> server.</p> <p>The optional <code>port</code> is the port to connect to.</p> <p>The optional <code>isapop</code> specifies whether this connection is going to use <a href="apop"><code>APOP</code></a> authentication; it defaults to <code>false</code>.</p> <p>This method does <strong>not</strong> open the TCP connection.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-ssl_params"> <span class="method-name">ssl_params</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="ssl_params-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 362
def POP3.ssl_params
  return @ssl_params
end</pre> </div> <p>returns the SSL Parameters</p> <p>see also <a href="pop3#method-c-enable_ssl"><code>POP3.enable_ssl</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-start"> <span class="method-name">start</span><span class="method-args">(address, port = nil, account = nil, password = nil, isapop = false) { |pop| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="start-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 401
def POP3.start(address, port = nil,
               account = nil, password = nil,
               isapop = false, &amp;block)   # :yield: pop
  new(address, port, isapop).start(account, password, &amp;block)
end</pre> </div> <p>Creates a new <a href="pop3"><code>POP3</code></a> object and open the connection. Equivalent to</p> <pre class="ruby" data-language="ruby">Net::POP3.new(address, port, isapop).start(account, password)
</pre> <p>If <code>block</code> is provided, yields the newly-opened <a href="pop3"><code>POP3</code></a> object to it, and automatically closes it at the end of the session.</p> <h3 id="method-c-start-label-Example">Example</h3> <pre class="ruby" data-language="ruby">Net::POP3.start(addr, port, account, password) do |pop|
  pop.each_mail do |m|
    file.write m.pop
    m.delete
  end
end
</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-use_ssl-3F"> <span class="method-name">use_ssl?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="use_ssl-3F-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 367
def POP3.use_ssl?
  return !@ssl_params.nil?
end</pre> </div> <p>returns <code>true</code> if <a href="pop3#method-c-ssl_params"><code>POP3.ssl_params</code></a> is set</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-verify"> <span class="method-name">verify</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="verify-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 372
def POP3.verify
  return @ssl_params[:verify_mode]
end</pre> </div> <p>returns whether verify_mode is enable from <a href="pop3#method-c-ssl_params"><code>POP3.ssl_params</code></a></p>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-active-3F"> <span class="method-name">active?</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="pop3#method-i-started-3F">started?</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-apop-3F"> <span class="method-name">apop?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="apop-3F-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 436
def apop?
  @apop
end</pre> </div> <p>Does this instance use <a href="apop"><code>APOP</code></a> authentication?</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-auth_only"> <span class="method-name">auth_only</span><span class="method-args">(account, password)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="auth_only-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 314
def auth_only(account, password)
  raise IOError, 'opening previously opened POP session' if started?
  start(account, password) {
    ;
  }
end</pre> </div> <p>Starts a pop3 session, attempts authentication, and quits. This method must not be called while <a href="pop3"><code>POP3</code></a> session is opened. This method raises <a href="popauthenticationerror"><code>POPAuthenticationError</code></a> if authentication fails.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-delete_all"> <span class="method-name">delete_all</span><span class="method-args">() { |message| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="delete_all-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 687
def delete_all # :yield: message
  mails().each do |m|
    yield m if block_given?
    m.delete unless m.deleted?
  end
end</pre> </div> <p>Deletes all messages on the server.</p> <p>If called with a block, yields each message in turn before deleting it.</p> <h3 id="method-i-delete_all-label-Example">Example</h3> <pre class="ruby" data-language="ruby">n = 1
pop.delete_all do |m|
  File.open("inbox/#{n}") do |f|
    f.write m.pop
  end
  n += 1
end
</pre> <p>This method raises a <a href="poperror"><code>POPError</code></a> if an error occurs.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-disable_ssl"> <span class="method-name">disable_ssl</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="disable_ssl-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 463
def disable_ssl
  @ssl_params = nil
end</pre> </div> <p>Disable SSL for all new instances.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-each"> <span class="method-name">each</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="pop3#method-i-each_mail">each_mail</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-each_mail"> <span class="method-name">each_mail</span><span class="method-args">() { |message| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="each_mail-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 665
def each_mail(&amp;block)  # :yield: message
  mails().each(&amp;block)
end</pre> </div> <p>Yields each message to the passed-in block in turn. Equivalent to:</p> <pre>pop3.mails.each do |popmail|
  ....
end</pre> <p>This method raises a <a href="poperror"><code>POPError</code></a> if an error occurs.</p>  </div> <div class="aliases"> Also aliased as: <a href="pop3#method-i-each">each</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-enable_ssl"> <span class="method-callseq"> Net::POP#enable_ssl(params = {}) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="enable_ssl-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 452
def enable_ssl(verify_or_params = {}, certs = nil, port = nil)
  begin
    @ssl_params = verify_or_params.to_hash.dup
    @port = @ssl_params.delete(:port) || @port
  rescue NoMethodError
    @ssl_params = POP3.create_ssl_params(verify_or_params, certs)
    @port = port || @port
  end
end</pre> </div> <p>Enables SSL for this instance. Must be called before the connection is established to have any effect. +<a href="#">params</a>+ is port to establish the SSL connection on; Defaults to 995. <code>params</code> (except :port) is passed to OpenSSL::SSLContext#set_params.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-finish"> <span class="method-name">finish</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="finish-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 586
def finish
  raise IOError, 'POP session not yet started' unless started?
  do_finish
end</pre> </div> <p>Finishes a <a href="pop3"><code>POP3</code></a> session and closes TCP connection.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inspect"> <span class="method-name">inspect</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 468
def inspect
  +"#&lt;#{self.class} #{@address}:#{@port} open=#{@started}&gt;"
end</pre> </div> <p>Provide human-readable stringification of class state.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-logging"> <span class="method-name">logging</span><span class="method-args">(msg)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="logging-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 712
def logging(msg)
  @debug_output &lt;&lt; msg + "\n" if @debug_output
end</pre> </div> <p>debugging output for <code>msg</code></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-mails"> <span class="method-name">mails</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="mails-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 643
def mails
  return @mails.dup if @mails
  if n_mails() == 0
    # some popd raises error for LIST on the empty mailbox.
    @mails = []
    return []
  end

  @mails = command().list.map {|num, size|
    POPMail.new(num, size, self, command())
  }
  @mails.dup
end</pre> </div> <p>Returns an array of <a href="popmail"><code>Net::POPMail</code></a> objects, representing all the messages on the server. This array is renewed when the session restarts; otherwise, it is fetched from the server the first time this method is called (directly or indirectly) and cached.</p> <p>This method raises a <a href="poperror"><code>POPError</code></a> if an error occurs.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-n_bytes"> <span class="method-name">n_bytes</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="n_bytes-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 631
def n_bytes
  return @n_bytes if @n_bytes
  @n_mails, @n_bytes = command().stat
  @n_bytes
end</pre> </div> <p>Returns the total size in bytes of all the messages on the POP server.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-n_mails"> <span class="method-name">n_mails</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="n_mails-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 624
def n_mails
  return @n_mails if @n_mails
  @n_mails, @n_bytes = command().stat
  @n_mails
end</pre> </div> <p>Returns the number of messages on the POP server.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-port"> <span class="method-name">port</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="port-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 493
def port
  return @port || (use_ssl? ? POP3.default_pop3s_port : POP3.default_pop3_port)
end</pre> </div> <p>The port number to connect to.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-read_timeout-3D"> <span class="method-name">read_timeout=</span><span class="method-args">(sec)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="read_timeout-3D-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 508
def read_timeout=(sec)
  @command.socket.read_timeout = sec if @command
  @read_timeout = sec
end</pre> </div> <p><a href="../set"><code>Set</code></a> the read timeout.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-reset"> <span class="method-name">reset</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="reset-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 697
def reset
  command().rset
  mails().each do |m|
    m.instance_eval {
      @deleted = false
    }
  end
end</pre> </div> <p>Resets the session. This clears all “deleted” marks from messages.</p> <p>This method raises a <a href="poperror"><code>POPError</code></a> if an error occurs.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_debug_output"> <span class="method-name">set_debug_output</span><span class="method-args">(arg)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="set_debug_output-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 485
def set_debug_output(arg)
  @debug_output = arg
end</pre> </div> <p><strong>WARNING</strong>: This method causes a serious security hole. Use this method only for debugging.</p> <p><a href="../set"><code>Set</code></a> an output stream for debugging.</p> <h3 id="method-i-set_debug_output-label-Example">Example</h3> <pre>pop = Net::POP.new(addr, port)
pop.set_debug_output $stderr
pop.start(account, passwd) do |pop|
  ....
end</pre>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-start"> <span class="method-name">start</span><span class="method-args">(account, password) { |pop| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="start-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 526
def start(account, password) # :yield: pop
  raise IOError, 'POP session already started' if @started
  if block_given?
    begin
      do_start account, password
      return yield(self)
    ensure
      do_finish
    end
  else
    do_start account, password
    return self
  end
end</pre> </div> <p>Starts a <a href="pop3"><code>POP3</code></a> session.</p> <p>When called with block, gives a <a href="pop3"><code>POP3</code></a> object to the block and closes the session after block call finishes.</p> <p>This method raises a <a href="popauthenticationerror"><code>POPAuthenticationError</code></a> if authentication fails.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-started-3F"> <span class="method-name">started?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="started-3F-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 514
def started?
  @started
end</pre> </div> <p><code>true</code> if the <a href="pop3"><code>POP3</code></a> session has started.</p>  </div> <div class="aliases"> Also aliased as: <a href="pop3#method-i-active-3F">active?</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-use_ssl-3F"> <span class="method-name">use_ssl?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="use_ssl-3F-source"> <pre class="ruby" data-language="ruby"># File lib/net/pop.rb, line 441
def use_ssl?
  return !@ssl_params.nil?
end</pre> </div> <p>does this instance use SSL?</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2020 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
