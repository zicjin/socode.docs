<h1>docker buildx create</h1>
   <p><br></p> <p>Create a new builder instance</p> <h2 id="usage">Usage</h2> <div class="highlight"><pre class="highlight" data-language="">$ docker buildx create [OPTIONS] [CONTEXT|ENDPOINT]
</pre></div> <p>Refer to the <a href="#options">options section</a> for an overview of available <a href="#options"><code class="language-plaintext highlighter-rouge">OPTIONS</code></a> for this command.</p> <h2 id="description">Description</h2> <p name="extended-description">Create makes a new builder instance pointing to a docker context or endpoint, where context is the name of a context from <code class="language-plaintext highlighter-rouge">docker context ls</code> and endpoint is the address for docker socket (eg. <code class="language-plaintext highlighter-rouge">DOCKER_HOST</code> value).</p> <p>By default, the current Docker configuration is used for determining the context/endpoint value.</p> <p>Builder instances are isolated environments where builds can be invoked. All Docker contexts also get the default builder instance.</p> <p>For example uses of this command, refer to the <a href="#examples">examples section</a> below.</p> <h2 id="options">Options</h2> <table> <thead> <tr> <td>Name, shorthand</td> <td>Default</td> <td>Description</td> </tr> </thead> <tbody> <tr> <td><a href="#append"><code class="language-plaintext highlighter-rouge">--append</code></a></td> <td></td> <td>Append a node to builder instead of changing it</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--bootstrap</code></td> <td></td> <td>Boot builder after creation</td> </tr> <tr> <td><a href="#buildkitd-flags"><code class="language-plaintext highlighter-rouge">--buildkitd-flags</code></a></td> <td></td> <td>Flags for buildkitd daemon</td> </tr> <tr> <td><a href="#config"><code class="language-plaintext highlighter-rouge">--config</code></a></td> <td></td> <td>BuildKit config file</td> </tr> <tr> <td><a href="#driver"><code class="language-plaintext highlighter-rouge">--driver</code></a></td> <td></td> <td>Driver to use (available: <code class="language-plaintext highlighter-rouge">docker</code>, <code class="language-plaintext highlighter-rouge">docker-container</code>, <code class="language-plaintext highlighter-rouge">kubernetes</code>)</td> </tr> <tr> <td><a href="#driver-opt"><code class="language-plaintext highlighter-rouge">--driver-opt</code></a></td> <td></td> <td>Options for the driver</td> </tr> <tr> <td><a href="#leave"><code class="language-plaintext highlighter-rouge">--leave</code></a></td> <td></td> <td>Remove a node from builder instead of changing it</td> </tr> <tr> <td><a href="#name"><code class="language-plaintext highlighter-rouge">--name</code></a></td> <td></td> <td>Builder instance name</td> </tr> <tr> <td><a href="#node"><code class="language-plaintext highlighter-rouge">--node</code></a></td> <td></td> <td>Create/modify node with given name</td> </tr> <tr> <td><a href="#platform"><code class="language-plaintext highlighter-rouge">--platform</code></a></td> <td></td> <td>Fixed platforms for current node</td> </tr> <tr> <td><a href="#use"><code class="language-plaintext highlighter-rouge">--use</code></a></td> <td></td> <td>Set the current builder instance</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--builder</code></td> <td></td> <td>Override the configured builder instance</td> </tr>  </tbody> </table>  <h2 id="examples">Examples</h2> <h3 id="append">Append a new node to an existing builder (--append)</h3> <p>The <code class="language-plaintext highlighter-rouge">--append</code> flag changes the action of the command to append a new node to an existing builder specified by <code class="language-plaintext highlighter-rouge">--name</code>. Buildx will choose an appropriate node for a build based on the platforms it supports.</p> <div class="highlight"><pre class="highlight" data-language="">$ docker buildx create mycontext1
eager_beaver

$ docker buildx create --name eager_beaver --append mycontext2
eager_beaver
</pre></div> <h3 id="buildkitd-flags">Specify options for the buildkitd daemon (--buildkitd-flags)</h3> <div class="highlight"><pre class="highlight" data-language="">--buildkitd-flags FLAGS
</pre></div> <p>Adds flags when starting the buildkitd daemon. They take precedence over the configuration file specified by <a href="#config"><code class="language-plaintext highlighter-rouge">--config</code></a>. See <code class="language-plaintext highlighter-rouge">buildkitd --help</code> for the available flags.</p> <div class="highlight"><pre class="highlight" data-language="">--buildkitd-flags '--debug --debugaddr 0.0.0.0:6666'
</pre></div> <h3 id="config">Specify a configuration file for the buildkitd daemon (--config)</h3> <div class="highlight"><pre class="highlight" data-language="">--config FILE
</pre></div> <p>Specifies the configuration file for the buildkitd daemon to use. The configuration can be overridden by <a href="#buildkitd-flags"><code class="language-plaintext highlighter-rouge">--buildkitd-flags</code></a>. See an <a href="https://github.com/moby/buildkit/blob/master/docs/buildkitd.toml/">example buildkitd configuration file</a>.</p> <p>Note that if you create a <code class="language-plaintext highlighter-rouge">docker-container</code> builder and have specified certificates for registries in the <code class="language-plaintext highlighter-rouge">buildkitd.toml</code> configuration, the files will be copied into the container under <code class="language-plaintext highlighter-rouge">/etc/buildkit/certs</code> and configuration will be updated to reflect that.</p> <h3 id="driver">Set the builder driver to use (--driver)</h3> <div class="highlight"><pre class="highlight" data-language="">--driver DRIVER
</pre></div> <p>Sets the builder driver to be used. There are two available drivers, each have their own specificities.</p> <h4 id="docker-driver">
<code class="language-plaintext highlighter-rouge">docker</code> driver</h4> <p>Uses the builder that is built into the docker daemon. With this driver, the <a href="../buildx_build/index#load"><code class="language-plaintext highlighter-rouge">--load</code></a> flag is implied by default on <code class="language-plaintext highlighter-rouge">buildx build</code>. However, building multi-platform images or exporting cache is not currently supported.</p> <h4 id="docker-container-driver">
<code class="language-plaintext highlighter-rouge">docker-container</code> driver</h4> <p>Uses a BuildKit container that will be spawned via docker. With this driver, both building multi-platform images and exporting cache are supported.</p> <p>Unlike <code class="language-plaintext highlighter-rouge">docker</code> driver, built images will not automatically appear in <code class="language-plaintext highlighter-rouge">docker images</code> and <a href="../buildx_build/index#load"><code class="language-plaintext highlighter-rouge">build --load</code></a> needs to be used to achieve that.</p> <h4 id="kubernetes-driver">
<code class="language-plaintext highlighter-rouge">kubernetes</code> driver</h4> <p>Uses a kubernetes pods. With this driver, you can spin up pods with defined BuildKit container image to build your images.</p> <p>Unlike <code class="language-plaintext highlighter-rouge">docker</code> driver, built images will not automatically appear in <code class="language-plaintext highlighter-rouge">docker images</code> and <a href="../buildx_build/index#load"><code class="language-plaintext highlighter-rouge">build --load</code></a> needs to be used to achieve that.</p> <h3 id="driver-opt">Set additional driver-specific options (--driver-opt)</h3> <div class="highlight"><pre class="highlight" data-language="">--driver-opt OPTIONS
</pre></div> <p>Passes additional driver-specific options. Details for each driver:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">docker</code> - No driver options</li> <li>
<code class="language-plaintext highlighter-rouge">docker-container</code> <ul> <li>
<code class="language-plaintext highlighter-rouge">image=IMAGE</code> - Sets the container image to be used for running buildkit.</li> <li>
<code class="language-plaintext highlighter-rouge">network=NETMODE</code> - Sets the network mode for running the buildkit container.</li> <li>
<code class="language-plaintext highlighter-rouge">cgroup-parent=CGROUP</code> - Sets the cgroup parent of the buildkit container if docker is using the “cgroupfs” driver. Defaults to <code class="language-plaintext highlighter-rouge">/docker/buildx</code>.</li> </ul> </li> <li>
<code class="language-plaintext highlighter-rouge">kubernetes</code> <ul> <li>
<code class="language-plaintext highlighter-rouge">image=IMAGE</code> - Sets the container image to be used for running buildkit.</li> <li>
<code class="language-plaintext highlighter-rouge">namespace=NS</code> - Sets the Kubernetes namespace. Defaults to the current namespace.</li> <li>
<code class="language-plaintext highlighter-rouge">replicas=N</code> - Sets the number of <code class="language-plaintext highlighter-rouge">Pod</code> replicas. Defaults to 1.</li> <li>
<code class="language-plaintext highlighter-rouge">requests.cpu</code> - Sets the request CPU value specified in units of Kubernetes CPU. Example <code class="language-plaintext highlighter-rouge">requests.cpu=100m</code>, <code class="language-plaintext highlighter-rouge">requests.cpu=2</code>
</li> <li>
<code class="language-plaintext highlighter-rouge">requests.memory</code> - Sets the request memory value specified in bytes or with a valid suffix. Example <code class="language-plaintext highlighter-rouge">requests.memory=500Mi</code>, <code class="language-plaintext highlighter-rouge">requests.memory=4G</code>
</li> <li>
<code class="language-plaintext highlighter-rouge">limits.cpu</code> - Sets the limit CPU value specified in units of Kubernetes CPU. Example <code class="language-plaintext highlighter-rouge">limits.cpu=100m</code>, <code class="language-plaintext highlighter-rouge">limits.cpu=2</code>
</li> <li>
<code class="language-plaintext highlighter-rouge">limits.memory</code> - Sets the limit memory value specified in bytes or with a valid suffix. Example <code class="language-plaintext highlighter-rouge">limits.memory=500Mi</code>, <code class="language-plaintext highlighter-rouge">limits.memory=4G</code>
</li> <li>
<code class="language-plaintext highlighter-rouge">nodeselector="label1=value1,label2=value2"</code> - Sets the kv of <code class="language-plaintext highlighter-rouge">Pod</code> nodeSelector. No Defaults. Example <code class="language-plaintext highlighter-rouge">nodeselector=kubernetes.io/arch=arm64</code>
</li> <li>
<code class="language-plaintext highlighter-rouge">rootless=(true|false)</code> - Run the container as a non-root user without <code class="language-plaintext highlighter-rouge">securityContext.privileged</code>. <a href="https://github.com/moby/buildkit/blob/master/docs/rootless/">Using Ubuntu host kernel is recommended</a>. Defaults to false.</li> <li>
<code class="language-plaintext highlighter-rouge">loadbalance=(sticky|random)</code> - Load-balancing strategy. If set to “sticky”, the pod is chosen using the hash of the context path. Defaults to “sticky”</li> <li>
<code class="language-plaintext highlighter-rouge">qemu.install=(true|false)</code> - Install QEMU emulation for multi platforms support.</li> <li>
<code class="language-plaintext highlighter-rouge">qemu.image=IMAGE</code> - Sets the QEMU emulation image. Defaults to <code class="language-plaintext highlighter-rouge">tonistiigi/binfmt:latest</code>
</li> </ul> </li> </ul> <h3 id="leave">Remove a node from a builder (--leave)</h3> <p>The <code class="language-plaintext highlighter-rouge">--leave</code> flag changes the action of the command to remove a node from a builder. The builder needs to be specified with <code class="language-plaintext highlighter-rouge">--name</code> and node that is removed is set with <code class="language-plaintext highlighter-rouge">--node</code>.</p> <div class="highlight"><pre class="highlight" data-language="">$ docker buildx create --name mybuilder --node mybuilder0 --leave
</pre></div> <h3 id="name">Specify the name of the builder (--name)</h3> <div class="highlight"><pre class="highlight" data-language="">--name NAME
</pre></div> <p>The <code class="language-plaintext highlighter-rouge">--name</code> flag specifies the name of the builder to be created or modified. If none is specified, one will be automatically generated.</p> <h3 id="node">Specify the name of the node (--node)</h3> <div class="highlight"><pre class="highlight" data-language="">--node NODE
</pre></div> <p>The <code class="language-plaintext highlighter-rouge">--node</code> flag specifies the name of the node to be created or modified. If none is specified, it is the name of the builder it belongs to, with an index number suffix.</p> <h3 id="platform">Set the platforms supported by the node (--platform)</h3> <div class="highlight"><pre class="highlight" data-language="">--platform PLATFORMS
</pre></div> <p>The <code class="language-plaintext highlighter-rouge">--platform</code> flag sets the platforms supported by the node. It expects a comma-separated list of platforms of the form OS/architecture/variant. The node will also automatically detect the platforms it supports, but manual values take priority over the detected ones and can be used when multiple nodes support building for the same platform.</p> <div class="highlight"><pre class="highlight" data-language="">$ docker buildx create --platform linux/amd64
$ docker buildx create --platform linux/arm64,linux/arm/v8
</pre></div> <h3 id="use">Automatically switch to the newly created builder (--use)</h3> <p>The <code class="language-plaintext highlighter-rouge">--use</code> flag automatically switches the current builder to the newly created one. Equivalent to running <code class="language-plaintext highlighter-rouge">docker buildx use $(docker buildx create ...)</code>.</p> <h2 id="parent-command">Parent command</h2> <table> <thead> <tr> <th style="text-align: left">Command</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="../buildx/index">docker buildx</a></td> <td style="text-align: left">Docker Buildx</td> </tr> </tbody> </table> <h2 id="related-commands">Related commands</h2> <table> <thead> <tr> <td>Command</td> <td>Description</td> </tr> </thead> <tbody> <tr> <td><a href="../buildx_bake/index">docker buildx bake</a></td> <td>Build from a file</td> </tr> <tr> <td><a href="../buildx_build/index">docker buildx build</a></td> <td>Start a build</td> </tr> <tr> <td><a href="index">docker buildx create</a></td> <td>Create a new builder instance</td> </tr> <tr> <td><a href="../buildx_du/index">docker buildx du</a></td> <td>Disk usage</td> </tr> <tr> <td><a href="../buildx_imagetools/index">docker buildx imagetools</a></td> <td>Commands to work on images in registry</td> </tr> <tr> <td><a href="../buildx_inspect/index">docker buildx inspect</a></td> <td>Inspect current builder instance</td> </tr> <tr> <td><a href="../buildx_ls/index">docker buildx ls</a></td> <td>List builder instances</td> </tr> <tr> <td><a href="../buildx_prune/index">docker buildx prune</a></td> <td>Remove build cache</td> </tr> <tr> <td><a href="../buildx_rm/index">docker buildx rm</a></td> <td>Remove a builder instance</td> </tr> <tr> <td><a href="../buildx_stop/index">docker buildx stop</a></td> <td>Stop builder instance</td> </tr> <tr> <td><a href="../buildx_use/index">docker buildx use</a></td> <td>Set the current builder instance</td> </tr> <tr> <td><a href="../buildx_version/index">docker buildx version</a></td> <td>Show buildx version information</td> </tr> </tbody> </table> <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.docker.com/engine/reference/commandline/buildx_create/" class="_attribution-link" target="_blank">https://docs.docker.com/engine/reference/commandline/buildx_create/</a>
  </p>
</div>
