<h1>docker compose run</h1>
   <p><br></p> <p>Run a one-off command on a service.</p> <h2 id="usage">Usage</h2> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run [options] [-v VOLUME...] [-p PORT...] [-e KEY=VAL...] [-l KEY=VALUE...] SERVICE [COMMAND] [ARGS...]
</pre></div> <p>Refer to the <a href="#options">options section</a> for an overview of available <a href="#options"><code class="language-plaintext highlighter-rouge">OPTIONS</code></a> for this command.</p> <h2 id="description">Description</h2> <p name="extended-description">Runs a one-time command against a service.</p> <p>the following command starts the <code class="language-plaintext highlighter-rouge">web</code> service and runs <code class="language-plaintext highlighter-rouge">bash</code> as its command:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run web bash
</pre></div> <p>Commands you use with run start in new containers with configuration defined by that of the service, including volumes, links, and other details. However, there are two important differences:</p> <p>First, the command passed by <code class="language-plaintext highlighter-rouge">run</code> overrides the command defined in the service configuration. For example, if the <code class="language-plaintext highlighter-rouge">web</code> service configuration is started with <code class="language-plaintext highlighter-rouge">bash</code>, then <code class="language-plaintext highlighter-rouge">docker compose run web python app.py</code> overrides it with <code class="language-plaintext highlighter-rouge">python app.py</code>.</p> <p>The second difference is that the <code class="language-plaintext highlighter-rouge">docker compose run</code> command does not create any of the ports specified in the service configuration. This prevents port collisions with already-open ports. If you do want the service’s ports to be created and mapped to the host, specify the <code class="language-plaintext highlighter-rouge">--service-ports</code></p> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run --service-ports web python manage.py shell
</pre></div> <p>Alternatively, manual port mapping can be specified with the <code class="language-plaintext highlighter-rouge">--publish</code> or <code class="language-plaintext highlighter-rouge">-p</code> options, just as when using docker run:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run --publish 8080:80 -p 2022:22 -p 127.0.0.1:2021:21 web python manage.py shell
</pre></div> <p>If you start a service configured with links, the run command first checks to see if the linked service is running and starts the service if it is stopped. Once all the linked services are running, the run executes the command you passed it. For example, you could run:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run db psql -h db -U docker
</pre></div> <p>This opens an interactive PostgreSQL shell for the linked <code class="language-plaintext highlighter-rouge">db</code> container.</p> <p>If you do not want the run command to start linked containers, use the <code class="language-plaintext highlighter-rouge">--no-deps</code> flag:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run --no-deps web python manage.py shell
</pre></div> <p>If you want to remove the container after running while overriding the container’s restart policy, use the <code class="language-plaintext highlighter-rouge">--rm</code> flag:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker compose run --rm web python manage.py db upgrade
</pre></div> <p>This runs a database upgrade script, and removes the container when finished running, even if a restart policy is specified in the service configuration.</p> <h2 id="options">Options</h2> <table> <thead> <tr> <td>Name, shorthand</td> <td>Default</td> <td>Description</td> </tr> </thead> <tbody> <tr> <td>
<code class="language-plaintext highlighter-rouge">--detach</code> , <code class="language-plaintext highlighter-rouge">-d</code>
</td> <td></td> <td>Run container in background and print container ID</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--entrypoint</code></td> <td></td> <td>Override the entrypoint of the image</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--env</code> , <code class="language-plaintext highlighter-rouge">-e</code>
</td> <td></td> <td>Set environment variables</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--interactive</code> , <code class="language-plaintext highlighter-rouge">-i</code>
</td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td>Keep STDIN open even if not attached.</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--label</code> , <code class="language-plaintext highlighter-rouge">-l</code>
</td> <td></td> <td>Add or override a label</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--name</code></td> <td></td> <td>Assign a name to the container</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--no-TTY</code> , <code class="language-plaintext highlighter-rouge">-T</code>
</td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td>Disable pseudo-TTY allocation (default: auto-detected).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--no-deps</code></td> <td></td> <td>Don't start linked services.</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--publish</code> , <code class="language-plaintext highlighter-rouge">-p</code>
</td> <td></td> <td>Publish a container's port(s) to the host.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--quiet-pull</code></td> <td></td> <td>Pull without printing progress information.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--rm</code></td> <td></td> <td>Automatically remove the container when it exits</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--service-ports</code></td> <td></td> <td>Run command with the service's ports enabled and mapped to the host.</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--tty</code> , <code class="language-plaintext highlighter-rouge">-t</code>
</td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td>Allocate a pseudo-TTY.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">--use-aliases</code></td> <td></td> <td>Use the service's network useAliases in the network(s) the container connects to.</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--user</code> , <code class="language-plaintext highlighter-rouge">-u</code>
</td> <td></td> <td>Run as specified username or uid</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--volume</code> , <code class="language-plaintext highlighter-rouge">-v</code>
</td> <td></td> <td>Bind mount a volume.</td> </tr> <tr> <td>
<code class="language-plaintext highlighter-rouge">--workdir</code> , <code class="language-plaintext highlighter-rouge">-w</code>
</td> <td></td> <td>Working directory inside the container</td> </tr>  </tbody> </table>  <h2 id="parent-command">Parent command</h2> <table> <thead> <tr> <th style="text-align: left">Command</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="../compose/index">docker compose</a></td> <td style="text-align: left">Docker Compose</td> </tr> </tbody> </table> <h2 id="related-commands">Related commands</h2> <table> <thead> <tr> <td>Command</td> <td>Description</td> </tr> </thead> <tbody> <tr> <td><a href="../compose_build/index">docker compose build</a></td> <td>Build or rebuild services</td> </tr> <tr> <td><a href="../compose_convert/index">docker compose convert</a></td> <td>Converts the compose file to platform’s canonical format</td> </tr> <tr> <td><a href="../compose_cp/index">docker compose cp</a></td> <td>Copy files/folders between a service container and the local filesystem</td> </tr> <tr> <td><a href="../compose_create/index">docker compose create</a></td> <td>Creates containers for a service.</td> </tr> <tr> <td><a href="../compose_down/index">docker compose down</a></td> <td>Stop and remove containers, networks</td> </tr> <tr> <td><a href="../compose_events/index">docker compose events</a></td> <td>Receive real time events from containers.</td> </tr> <tr> <td><a href="../compose_exec/index">docker compose exec</a></td> <td>Execute a command in a running container.</td> </tr> <tr> <td><a href="../compose_images/index">docker compose images</a></td> <td>List images used by the created containers</td> </tr> <tr> <td><a href="../compose_kill/index">docker compose kill</a></td> <td>Force stop service containers.</td> </tr> <tr> <td><a href="../compose_logs/index">docker compose logs</a></td> <td>View output from containers</td> </tr> <tr> <td><a href="../compose_ls/index">docker compose ls</a></td> <td>List running compose projects</td> </tr> <tr> <td><a href="../compose_pause/index">docker compose pause</a></td> <td>Pause services</td> </tr> <tr> <td><a href="../compose_port/index">docker compose port</a></td> <td>Print the public port for a port binding.</td> </tr> <tr> <td><a href="../compose_ps/index">docker compose ps</a></td> <td>List containers</td> </tr> <tr> <td><a href="../compose_pull/index">docker compose pull</a></td> <td>Pull service images</td> </tr> <tr> <td><a href="../compose_push/index">docker compose push</a></td> <td>Push service images</td> </tr> <tr> <td><a href="../compose_restart/index">docker compose restart</a></td> <td>Restart containers</td> </tr> <tr> <td><a href="../compose_rm/index">docker compose rm</a></td> <td>Removes stopped service containers</td> </tr> <tr> <td><a href="index">docker compose run</a></td> <td>Run a one-off command on a service.</td> </tr> <tr> <td><a href="../compose_start/index">docker compose start</a></td> <td>Start services</td> </tr> <tr> <td><a href="../compose_stop/index">docker compose stop</a></td> <td>Stop services</td> </tr> <tr> <td><a href="../compose_top/index">docker compose top</a></td> <td>Display the running processes</td> </tr> <tr> <td><a href="../compose_unpause/index">docker compose unpause</a></td> <td>Unpause services</td> </tr> <tr> <td><a href="../compose_up/index">docker compose up</a></td> <td>Create and start containers</td> </tr> <tr> <td><a href="../compose_version/index">docker compose version</a></td> <td>Show the Docker Compose version information</td> </tr> </tbody> </table> <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.docker.com/engine/reference/commandline/compose_run/" class="_attribution-link" target="_blank">https://docs.docker.com/engine/reference/commandline/compose_run/</a>
  </p>
</div>
