<h1 id="configure-python"> Configure Python</h1>  <h2 id="id1">
<span class="section-number">3.1. </span>Configure Options</h2> <p id="configure-options">List all <code>./configure</code> script options using:</p> <pre data-language="python">./configure --help
</pre> <p>See also the <code>Misc/SpecialBuilds.txt</code> in the Python source distribution.</p>  <h3 id="general-options">
<span class="section-number">3.1.1. </span>General Options</h3> <dl class="std cmdoption"> <dt id="cmdoption-enable-loadable-sqlite-extensions">
<code>--enable-loadable-sqlite-extensions</code> </dt> <dd>
<p>Support loadable extensions in the <code>_sqlite</code> extension module (default is no).</p> <p>See the <a class="reference internal" href="../library/sqlite3#sqlite3.Connection.enable_load_extension" title="sqlite3.Connection.enable_load_extension"><code>sqlite3.Connection.enable_load_extension()</code></a> method of the <a class="reference internal" href="../library/sqlite3#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code>sqlite3</code></a> module.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-disable-ipv6">
<code>--disable-ipv6</code> </dt> <dd>
<p>Disable IPv6 support (enabled by default if supported), see the <a class="reference internal" href="../library/socket#module-socket" title="socket: Low-level networking interface."><code>socket</code></a> module.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-enable-big-digits">
<code>--enable-big-digits=[15|30]</code> </dt> <dd>
<p>Define the size in bits of Python <a class="reference internal" href="../library/functions#int" title="int"><code>int</code></a> digits: 15 or 30 bits.</p> <p>By default, the number of bits is selected depending on <code>sizeof(void*)</code>: 30 bits if <code>void*</code> size is 64-bit or larger, 15 bits otherwise.</p> <p>Define the <code>PYLONG_BITS_IN_DIGIT</code> to <code>15</code> or <code>30</code>.</p> <p>See <a class="reference internal" href="../library/sys#sys.int_info" title="sys.int_info"><code>sys.int_info.bits_per_digit</code></a>.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-cxx-main">
<code>--with-cxx-main</code> </dt> 
</dl> <dl class="std cmdoption"> <dt id="cmdoption-0">
<code>--with-cxx-main=COMPILER</code> </dt> <dd>
<p>Compile the Python <code>main()</code> function and link Python executable with C++ compiler: <code>$CXX</code>, or <em>COMPILER</em> if specified.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-suffix">
<code>--with-suffix=SUFFIX</code> </dt> <dd>
<p>Set the Python executable suffix to <em>SUFFIX</em>.</p> <p>The default suffix is <code>.exe</code> on Windows and macOS (<code>python.exe</code> executable), and an empty string on other platforms (<code>python</code> executable).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-tzpath">
<code>--with-tzpath=&lt;list of absolute paths separated by pathsep&gt;</code> </dt> <dd>
<p>Select the default time zone search path for <a class="reference internal" href="../library/zoneinfo#zoneinfo.TZPATH" title="zoneinfo.TZPATH"><code>zoneinfo.TZPATH</code></a>. See the <a class="reference internal" href="../library/zoneinfo#zoneinfo-data-compile-time-config"><span class="std std-ref">Compile-time configuration</span></a> of the <a class="reference internal" href="../library/zoneinfo#module-zoneinfo" title="zoneinfo: IANA time zone support"><code>zoneinfo</code></a> module.</p> <p>Default: <code>/usr/share/zoneinfo:/usr/lib/zoneinfo:/usr/share/lib/zoneinfo:/etc/zoneinfo</code>.</p> <p>See <a class="reference internal" href="../library/os#os.pathsep" title="os.pathsep"><code>os.pathsep</code></a> path separator.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-without-decimal-contextvar">
<code>--without-decimal-contextvar</code> </dt> <dd>
<p>Build the <code>_decimal</code> extension module using a thread-local context rather than a coroutine-local context (default), see the <a class="reference internal" href="../library/decimal#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code>decimal</code></a> module.</p> <p>See <a class="reference internal" href="../library/decimal#decimal.HAVE_CONTEXTVAR" title="decimal.HAVE_CONTEXTVAR"><code>decimal.HAVE_CONTEXTVAR</code></a> and the <a class="reference internal" href="../library/contextvars#module-contextvars" title="contextvars: Context Variables"><code>contextvars</code></a> module.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-dbmliborder">
<code>--with-dbmliborder=db1:db2:...</code> </dt> <dd>
<p>Override order to check db backends for the <a class="reference internal" href="../library/dbm#module-dbm" title='dbm: Interfaces to various Unix "database" formats.'><code>dbm</code></a> module</p> <p>A valid value is a colon (<code>:</code>) separated string with the backend names:</p> <ul class="simple"> <li>
<code>ndbm</code>;</li> <li>
<code>gdbm</code>;</li> <li>
<code>bdb</code>.</li> </ul> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-without-c-locale-coercion">
<code>--without-c-locale-coercion</code> </dt> <dd>
<p>Disable C locale coercion to a UTF-8 based locale (enabled by default).</p> <p>Don’t define the <code>PY_COERCE_C_LOCALE</code> macro.</p> <p>See <a class="reference internal" href="cmdline#envvar-PYTHONCOERCECLOCALE" id="index-0"><code>PYTHONCOERCECLOCALE</code></a> and the <a class="pep reference external" href="https://www.python.org/dev/peps/pep-0538" id="index-1"><strong>PEP 538</strong></a>.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-platlibdir">
<code>--with-platlibdir=DIRNAME</code> </dt> <dd>
<p>Python library directory name (default is <code>lib</code>).</p> <p>Fedora and SuSE use <code>lib64</code> on 64-bit platforms.</p> <p>See <a class="reference internal" href="../library/sys#sys.platlibdir" title="sys.platlibdir"><code>sys.platlibdir</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-wheel-pkg-dir">
<code>--with-wheel-pkg-dir=PATH</code> </dt> <dd>
<p>Directory of wheel packages used by the <a class="reference internal" href="../library/ensurepip#module-ensurepip" title='ensurepip: Bootstrapping the "pip" installer into an existing Python installation or virtual environment.'><code>ensurepip</code></a> module (none by default).</p> <p>Some Linux distribution packaging policies recommend against bundling dependencies. For example, Fedora installs wheel packages in the <code>/usr/share/python-wheels/</code> directory and don’t install the <code>ensurepip._bundled</code> package.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.10.</span></p> </div> </dd>
</dl>   <h3 id="install-options">
<span class="section-number">3.1.2. </span>Install Options</h3> <dl class="std cmdoption"> <dt id="cmdoption-disable-test-modules">
<code>--disable-test-modules</code> </dt> <dd>
<p>Don’t build nor install test modules, like the <a class="reference internal" href="../library/test#module-test" title="test: Regression tests package containing the testing suite for Python."><code>test</code></a> package or the <code>_testcapi</code> extension module (built and installed by default).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.10.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-ensurepip">
<code>--with-ensurepip=[upgrade|install|no]</code> </dt> <dd>
<p>Select the <a class="reference internal" href="../library/ensurepip#module-ensurepip" title='ensurepip: Bootstrapping the "pip" installer into an existing Python installation or virtual environment.'><code>ensurepip</code></a> command run on Python installation:</p> <ul class="simple"> <li>
<code>upgrade</code> (default): run <code>python -m ensurepip --altinstall --upgrade</code> command.</li> <li>
<code>install</code>: run <code>python -m ensurepip --altinstall</code> command;</li> <li>
<code>no</code>: don’t run ensurepip;</li> </ul> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl>   <h3 id="performance-options">
<span class="section-number">3.1.3. </span>Performance options</h3> <p>Configuring Python using <code>--enable-optimizations --with-lto</code> (PGO + LTO) is recommended for best performance.</p> <dl class="std cmdoption"> <dt id="cmdoption-enable-optimizations">
<code>--enable-optimizations</code> </dt> <dd>
<p>Enable Profile Guided Optimization (PGO) using <a class="reference internal" href="#envvar-PROFILE_TASK" id="index-2"><code>PROFILE_TASK</code></a> (disabled by default).</p> <p>The C compiler Clang requires <code>llvm-profdata</code> program for PGO. On macOS, GCC also requires it: GCC is just an alias to Clang on macOS.</p> <p>Disable also semantic interposition in libpython if <code>--enable-shared</code> and GCC is used: add <code>-fno-semantic-interposition</code> to the compiler and linker flags.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.10: </span>Use <code>-fno-semantic-interposition</code> on GCC.</p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PROFILE_TASK">
<code>PROFILE_TASK</code> </dt> <dd>
<p>Environment variable used in the Makefile: Python command line arguments for the PGO generation task.</p> <p>Default: <code>-m test --pgo --timeout=$(TESTTIMEOUT)</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-lto">
<code>--with-lto</code> </dt> <dd>
<p>Enable Link Time Optimization (LTO) in any build (disabled by default).</p> <p>The C compiler Clang requires <code>llvm-ar</code> for LTO (<code>ar</code> on macOS), as well as an LTO-aware linker (<code>ld.gold</code> or <code>lld</code>).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-computed-gotos">
<code>--with-computed-gotos</code> </dt> <dd>
<p>Enable computed gotos in evaluation loop (enabled by default on supported compilers).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-without-pymalloc">
<code>--without-pymalloc</code> </dt> <dd>
<p>Disable the specialized Python memory allocator <a class="reference internal" href="https://docs.python.org/3.10/c-api/memory.html#pymalloc"><span class="std std-ref">pymalloc</span></a> (enabled by default).</p> <p>See also <a class="reference internal" href="cmdline#envvar-PYTHONMALLOC" id="index-3"><code>PYTHONMALLOC</code></a> environment variable.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-without-doc-strings">
<code>--without-doc-strings</code> </dt> <dd>
<p>Disable static documentation strings to reduce the memory footprint (enabled by default). Documentation strings defined in Python are not affected.</p> <p>Don’t define the <code>WITH_DOC_STRINGS</code> macro.</p> <p>See the <code>PyDoc_STRVAR()</code> macro.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-enable-profiling">
<code>--enable-profiling</code> </dt> <dd>
<p>Enable C-level code profiling with <code>gprof</code> (disabled by default).</p> </dd>
</dl>   <h3 id="debug-build">
<span class="section-number">3.1.4. </span>Python Debug Build</h3> <p id="python-debug-build">A debug build is Python built with the <a class="reference internal" href="#cmdoption-with-pydebug"><code>--with-pydebug</code></a> configure option.</p> <p>Effects of a debug build:</p> <ul class="simple"> <li>Display all warnings by default: the list of default warning filters is empty in the <a class="reference internal" href="../library/warnings#module-warnings" title="warnings: Issue warning messages and control their disposition."><code>warnings</code></a> module.</li> <li>Add <code>d</code> to <a class="reference internal" href="../library/sys#sys.abiflags" title="sys.abiflags"><code>sys.abiflags</code></a>.</li> <li>Add <code>sys.gettotalrefcount()</code> function.</li> <li>Add <a class="reference internal" href="cmdline#cmdoption-X"><code>-X showrefcount</code></a> command line option.</li> <li>Add <a class="reference internal" href="cmdline#envvar-PYTHONTHREADDEBUG" id="index-4"><code>PYTHONTHREADDEBUG</code></a> environment variable.</li> <li>Add support for the <code>__ltrace__</code> variable: enable low-level tracing in the bytecode evaluation loop if the variable is defined.</li> <li>Install <a class="reference internal" href="https://docs.python.org/3.10/c-api/memory.html#default-memory-allocators"><span class="std std-ref">debug hooks on memory allocators</span></a> to detect buffer overflow and other memory errors.</li> <li>Define <code>Py_DEBUG</code> and <code>Py_REF_DEBUG</code> macros.</li> <li>
<p>Add runtime checks: code surroundeded by <code>#ifdef Py_DEBUG</code> and <code>#endif</code>. Enable <code>assert(...)</code> and <code>_PyObject_ASSERT(...)</code> assertions: don’t set the <code>NDEBUG</code> macro (see also the <a class="reference internal" href="#cmdoption-with-assertions"><code>--with-assertions</code></a> configure option). Main runtime checks:</p> <ul> <li>Add sanity checks on the function arguments.</li> <li>Unicode and int objects are created with their memory filled with a pattern to detect usage of uninitialized objects.</li> <li>Ensure that functions which can clear or replace the current exception are not called with an exception raised.</li> <li>The garbage collector (<a class="reference internal" href="../library/gc#gc.collect" title="gc.collect"><code>gc.collect()</code></a> function) runs some basic checks on objects consistency.</li> <li>The <code>Py_SAFE_DOWNCAST()</code> macro checks for integer underflow and overflow when downcasting from wide types to narrow types.</li> </ul> </li> </ul> <p>See also the <a class="reference internal" href="../library/devmode#devmode"><span class="std std-ref">Python Development Mode</span></a> and the <a class="reference internal" href="#cmdoption-with-trace-refs"><code>--with-trace-refs</code></a> configure option.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.8: </span>Release builds and debug builds are now ABI compatible: defining the <code>Py_DEBUG</code> macro no longer implies the <code>Py_TRACE_REFS</code> macro (see the <a class="reference internal" href="#cmdoption-with-trace-refs"><code>--with-trace-refs</code></a> option), which introduces the only ABI incompatibility.</p> </div>   <h3 id="debug-options">
<span class="section-number">3.1.5. </span>Debug options</h3> <dl class="std cmdoption"> <dt id="cmdoption-with-pydebug">
<code>--with-pydebug</code> </dt> <dd>
<p><a class="reference internal" href="#debug-build"><span class="std std-ref">Build Python in debug mode</span></a>: define the <code>Py_DEBUG</code> macro (disabled by default).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-trace-refs">
<code>--with-trace-refs</code> </dt> <dd>
<p>Enable tracing references for debugging purpose (disabled by default).</p> <p>Effects:</p> <ul class="simple"> <li>Define the <code>Py_TRACE_REFS</code> macro.</li> <li>Add <code>sys.getobjects()</code> function.</li> <li>Add <a class="reference internal" href="cmdline#envvar-PYTHONDUMPREFS" id="index-5"><code>PYTHONDUMPREFS</code></a> environment variable.</li> </ul> <p>This build is not ABI compatible with release build (default build) or debug build (<code>Py_DEBUG</code> and <code>Py_REF_DEBUG</code> macros).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-assertions">
<code>--with-assertions</code> </dt> <dd>
<p>Build with C assertions enabled (default is no): <code>assert(...);</code> and <code>_PyObject_ASSERT(...);</code>.</p> <p>If set, the <code>NDEBUG</code> macro is not defined in the <a class="reference internal" href="#envvar-OPT" id="index-6"><code>OPT</code></a> compiler variable.</p> <p>See also the <a class="reference internal" href="#cmdoption-with-pydebug"><code>--with-pydebug</code></a> option (<a class="reference internal" href="#debug-build"><span class="std std-ref">debug build</span></a>) which also enables assertions.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-valgrind">
<code>--with-valgrind</code> </dt> <dd>
<p>Enable Valgrind support (default is no).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-dtrace">
<code>--with-dtrace</code> </dt> <dd>
<p>Enable DTrace support (default is no).</p> <p>See <a class="reference internal" href="../howto/instrumentation#instrumentation"><span class="std std-ref">Instrumenting CPython with DTrace and SystemTap</span></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-address-sanitizer">
<code>--with-address-sanitizer</code> </dt> <dd>
<p>Enable AddressSanitizer memory error detector, <code>asan</code> (default is no).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-memory-sanitizer">
<code>--with-memory-sanitizer</code> </dt> <dd>
<p>Enable MemorySanitizer allocation error detector, <code>msan</code> (default is no).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-undefined-behavior-sanitizer">
<code>--with-undefined-behavior-sanitizer</code> </dt> <dd>
<p>Enable UndefinedBehaviorSanitizer undefined behaviour detector, <code>ubsan</code> (default is no).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl>   <h3 id="linker-options">
<span class="section-number">3.1.6. </span>Linker options</h3> <dl class="std cmdoption"> <dt id="cmdoption-enable-shared">
<code>--enable-shared</code> </dt> <dd>
<p>Enable building a shared Python library: <code>libpython</code> (default is no).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-without-static-libpython">
<code>--without-static-libpython</code> </dt> <dd>
<p>Do not build <code>libpythonMAJOR.MINOR.a</code> and do not install <code>python.o</code> (built and enabled by default).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.10.</span></p> </div> </dd>
</dl>   <h3 id="libraries-options">
<span class="section-number">3.1.7. </span>Libraries options</h3> <dl class="std cmdoption"> <dt id="cmdoption-with-libs">
<code>--with-libs='lib1 ...'</code> </dt> <dd>
<p>Link against additional libraries (default is no).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-system-expat">
<code>--with-system-expat</code> </dt> <dd>
<p>Build the <code>pyexpat</code> module using an installed <code>expat</code> library (default is no).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-system-ffi">
<code>--with-system-ffi</code> </dt> <dd>
<p>Build the <code>_ctypes</code> extension module using an installed <code>ffi</code> library, see the <a class="reference internal" href="../library/ctypes#module-ctypes" title="ctypes: A foreign function library for Python."><code>ctypes</code></a> module (default is system-dependent).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-system-libmpdec">
<code>--with-system-libmpdec</code> </dt> <dd>
<p>Build the <code>_decimal</code> extension module using an installed <code>mpdec</code> library, see the <a class="reference internal" href="../library/decimal#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code>decimal</code></a> module (default is no).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-readline">
<code>--with-readline=editline</code> </dt> <dd>
<p>Use <code>editline</code> library for backend of the <a class="reference internal" href="../library/readline#module-readline" title="readline: GNU readline support for Python. (Unix)"><code>readline</code></a> module.</p> <p>Define the <code>WITH_EDITLINE</code> macro.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.10.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-without-readline">
<code>--without-readline</code> </dt> <dd>
<p>Don’t build the <a class="reference internal" href="../library/readline#module-readline" title="readline: GNU readline support for Python. (Unix)"><code>readline</code></a> module (built by default).</p> <p>Don’t define the <code>HAVE_LIBREADLINE</code> macro.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.10.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-tcltk-includes">
<code>--with-tcltk-includes='-I...'</code> </dt> <dd>
<p>Override search for Tcl and Tk include files.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-tcltk-libs">
<code>--with-tcltk-libs='-L...'</code> </dt> <dd>
<p>Override search for Tcl and Tk libraries.</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-libm">
<code>--with-libm=STRING</code> </dt> <dd>
<p>Override <code>libm</code> math library to <em>STRING</em> (default is system-dependent).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-libc">
<code>--with-libc=STRING</code> </dt> <dd>
<p>Override <code>libc</code> C library to <em>STRING</em> (default is system-dependent).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-openssl">
<code>--with-openssl=DIR</code> </dt> <dd>
<p>Root of the OpenSSL directory.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-openssl-rpath">
<code>--with-openssl-rpath=[no|auto|DIR]</code> </dt> <dd>
<p>Set runtime library directory (rpath) for OpenSSL libraries:</p> <ul class="simple"> <li>
<code>no</code> (default): don’t set rpath;</li> <li>
<code>auto</code>: auto-detect rpath from <a class="reference internal" href="#cmdoption-with-openssl"><code>--with-openssl</code></a> and <code>pkg-config</code>;</li> <li>
<em>DIR</em>: set an explicit rpath.</li> </ul> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.10.</span></p> </div> </dd>
</dl>   <h3 id="security-options">
<span class="section-number">3.1.8. </span>Security Options</h3> <dl class="std cmdoption"> <dt id="cmdoption-with-hash-algorithm">
<code>--with-hash-algorithm=[fnv|siphash24]</code> </dt> <dd>
<p>Select hash algorithm for use in <code>Python/pyhash.c</code>:</p> <ul class="simple"> <li>
<code>siphash24</code> (default).</li> <li>
<code>fnv</code>;</li> </ul> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.4.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-builtin-hashlib-hashes">
<code>--with-builtin-hashlib-hashes=md5,sha1,sha256,sha512,sha3,blake2</code> </dt> <dd>
<p>Built-in hash modules:</p> <ul class="simple"> <li>
<code>md5</code>;</li> <li>
<code>sha1</code>;</li> <li>
<code>sha256</code>;</li> <li>
<code>sha512</code>;</li> <li>
<code>sha3</code> (with shake);</li> <li>
<code>blake2</code>.</li> </ul> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-ssl-default-suites">
<code>--with-ssl-default-suites=[python|openssl|STRING]</code> </dt> <dd>
<p>Override the OpenSSL default cipher suites string:</p> <ul class="simple"> <li>
<code>python</code> (default): use Python’s preferred selection;</li> <li>
<code>openssl</code>: leave OpenSSL’s defaults untouched;</li> <li>
<em>STRING</em>: use a custom string</li> </ul> <p>See the <a class="reference internal" href="../library/ssl#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code>ssl</code></a> module.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.10: </span>The settings <code>python</code> and <em>STRING</em> also set TLS 1.2 as minimum protocol version.</p> </div> </dd>
</dl>   <h3 id="macos-options">
<span class="section-number">3.1.9. </span>macOS Options</h3> <p>See <code>Mac/README.rst</code>.</p> <dl class="std cmdoption"> <dt id="cmdoption-enable-universalsdk">
<code>--enable-universalsdk</code> </dt> 
</dl> <dl class="std cmdoption"> <dt id="cmdoption-1">
<code>--enable-universalsdk=SDKDIR</code> </dt> <dd>
<p>Create a universal binary build. <em>SDKDIR</em> specifies which macOS SDK should be used to perform the build (default is no).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-enable-framework">
<code>--enable-framework</code> </dt> 
</dl> <dl class="std cmdoption"> <dt id="cmdoption-2">
<code>--enable-framework=INSTALLDIR</code> </dt> <dd>
<p>Create a Python.framework rather than a traditional Unix install. Optional <em>INSTALLDIR</em> specifies the installation path (default is no).</p> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-universal-archs">
<code>--with-universal-archs=ARCH</code> </dt> <dd>
<p>Specify the kind of universal binary that should be created. This option is only valid when <a class="reference internal" href="#cmdoption-1"><code>--enable-universalsdk</code></a> is set.</p> <p>Options:</p> <ul class="simple"> <li>
<code>universal2</code>;</li> <li>
<code>32-bit</code>;</li> <li>
<code>64-bit</code>;</li> <li>
<code>3-way</code>;</li> <li>
<code>intel</code>;</li> <li>
<code>intel-32</code>;</li> <li>
<code>intel-64</code>;</li> <li>
<code>all</code>.</li> </ul> </dd>
</dl> <dl class="std cmdoption"> <dt id="cmdoption-with-framework-name">
<code>--with-framework-name=FRAMEWORK</code> </dt> <dd>
<p>Specify the name for the python framework on macOS only valid when <a class="reference internal" href="#cmdoption-2"><code>--enable-framework</code></a> is set (default: <code>Python</code>).</p> </dd>
</dl>    <h2 id="python-build-system">
<span class="section-number">3.2. </span>Python Build System</h2>  <h3 id="main-files-of-the-build-system">
<span class="section-number">3.2.1. </span>Main files of the build system</h3> <ul class="simple"> <li>
<code>configure.ac</code> =&gt; <code>configure</code>;</li> <li>
<code>Makefile.pre.in</code> =&gt; <code>Makefile</code> (created by <code>configure</code>);</li> <li>
<code>pyconfig.h</code> (created by <code>configure</code>);</li> <li>
<code>Modules/Setup</code>: C extensions built by the Makefile using <code>Module/makesetup</code> shell script;</li> <li>
<code>setup.py</code>: C extensions built using the <a class="reference internal" href="../library/distutils#module-distutils" title="distutils: Support for building and installing Python modules into an existing Python installation."><code>distutils</code></a> module.</li> </ul>   <h3 id="main-build-steps">
<span class="section-number">3.2.2. </span>Main build steps</h3> <ul class="simple"> <li>C files (<code>.c</code>) are built as object files (<code>.o</code>).</li> <li>A static <code>libpython</code> library (<code>.a</code>) is created from objects files.</li> <li>
<code>python.o</code> and the static <code>libpython</code> library are linked into the final <code>python</code> program.</li> <li>C extensions are built by the Makefile (see <code>Modules/Setup</code>) and <code>python setup.py build</code>.</li> </ul>   <h3 id="main-makefile-targets">
<span class="section-number">3.2.3. </span>Main Makefile targets</h3> <ul class="simple"> <li>
<code>make</code>: Build Python with the standard library.</li> <li>
<code>make platform:</code>: build the <code>python</code> program, but don’t build the standard library extension modules.</li> <li>
<code>make profile-opt</code>: build Python using Profile Guided Optimization (PGO). You can use the configure <a class="reference internal" href="#cmdoption-enable-optimizations"><code>--enable-optimizations</code></a> option to make this the default target of the <code>make</code> command (<code>make all</code> or just <code>make</code>).</li> <li>
<code>make buildbottest</code>: Build Python and run the Python test suite, the same way than buildbots test Python. Set <code>TESTTIMEOUT</code> variable (in seconds) to change the test timeout (1200 by default: 20 minutes).</li> <li>
<code>make install</code>: Build and install Python.</li> <li>
<code>make regen-all</code>: Regenerate (almost) all generated files; <code>make regen-stdlib-module-names</code> and <code>autoconf</code> must be run separately for the remaining generated files.</li> <li>
<code>make clean</code>: Remove built files.</li> <li>
<code>make distclean</code>: Same than <code>make clean</code>, but remove also files created by the configure script.</li> </ul>   <h3 id="c-extensions">
<span class="section-number">3.2.4. </span>C extensions</h3> <p>Some C extensions are built as built-in modules, like the <code>sys</code> module. They are built with the <code>Py_BUILD_CORE_BUILTIN</code> macro defined. Built-in modules have no <code>__file__</code> attribute:</p> <pre data-language="python">&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys
&lt;module 'sys' (built-in)&gt;
&gt;&gt;&gt; sys.__file__
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: module 'sys' has no attribute '__file__'
</pre> <p>Other C extensins are built as dynamic libraries, like the <code>_asyncio</code> module. They are built with the <code>Py_BUILD_CORE_MODULE</code> macro defined. Example on Linux x86-64:</p> <pre data-language="python">&gt;&gt;&gt; import _asyncio
&gt;&gt;&gt; _asyncio
&lt;module '_asyncio' from '/usr/lib64/python3.9/lib-dynload/_asyncio.cpython-39-x86_64-linux-gnu.so'&gt;
&gt;&gt;&gt; _asyncio.__file__
'/usr/lib64/python3.9/lib-dynload/_asyncio.cpython-39-x86_64-linux-gnu.so'
</pre> <p><code>Modules/Setup</code> is used to generate Makefile targets to build C extensions. At the beginning of the files, C extensions are built as built-in modules. Extensions defined after the <code>*shared*</code> marker are built as dynamic libraries.</p> <p>The <code>setup.py</code> script only builds C extensions as shared libraries using the <a class="reference internal" href="../library/distutils#module-distutils" title="distutils: Support for building and installing Python modules into an existing Python installation."><code>distutils</code></a> module.</p> <p>The <code>PyAPI_FUNC()</code>, <code>PyAPI_API()</code> and <code>PyMODINIT_FUNC()</code> macros of <code>Include/pyport.h</code> are defined differently depending if the <code>Py_BUILD_CORE_MODULE</code> macro is defined:</p> <ul class="simple"> <li>Use <code>Py_EXPORTED_SYMBOL</code> if the <code>Py_BUILD_CORE_MODULE</code> is defined</li> <li>Use <code>Py_IMPORTED_SYMBOL</code> otherwise.</li> </ul> <p>If the <code>Py_BUILD_CORE_BUILTIN</code> macro is used by mistake on a C extension built as a shared library, its <code>PyInit_xxx()</code> function is not exported, causing an <a class="reference internal" href="../library/exceptions#ImportError" title="ImportError"><code>ImportError</code></a> on import.</p>    <h2 id="compiler-and-linker-flags">
<span class="section-number">3.3. </span>Compiler and linker flags</h2> <p>Options set by the <code>./configure</code> script and environment variables and used by <code>Makefile</code>.</p>  <h3 id="preprocessor-flags">
<span class="section-number">3.3.1. </span>Preprocessor flags</h3> <dl class="std envvar"> <dt id="envvar-CONFIGURE_CPPFLAGS">
<code>CONFIGURE_CPPFLAGS</code> </dt> <dd>
<p>Value of <a class="reference internal" href="#envvar-CPPFLAGS" id="index-7"><code>CPPFLAGS</code></a> variable passed to the <code>./configure</code> script.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CPPFLAGS">
<code>CPPFLAGS</code> </dt> <dd>
<p>(Objective) C/C++ preprocessor flags, e.g. <code>-I&lt;include dir&gt;</code> if you have headers in a nonstandard directory <code>&lt;include dir&gt;</code>.</p> <p>Both <a class="reference internal" href="#envvar-CPPFLAGS" id="index-8"><code>CPPFLAGS</code></a> and <a class="reference internal" href="#envvar-LDFLAGS" id="index-9"><code>LDFLAGS</code></a> need to contain the shell’s value for setup.py to be able to build extension modules using the directories specified in the environment variables.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-BASECPPFLAGS">
<code>BASECPPFLAGS</code> </dt> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.4.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_CPPFLAGS">
<code>PY_CPPFLAGS</code> </dt> <dd>
<p>Extra preprocessor flags added for building the interpreter object files.</p> <p>Default: <code>$(BASECPPFLAGS) -I. -I$(srcdir)/Include $(CONFIGURE_CPPFLAGS) $(CPPFLAGS)</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> </dd>
</dl>   <h3 id="compiler-flags">
<span class="section-number">3.3.2. </span>Compiler flags</h3> <dl class="std envvar"> <dt id="envvar-CC">
<code>CC</code> </dt> <dd>
<p>C compiler command.</p> <p>Example: <code>gcc -pthread</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-MAINCC">
<code>MAINCC</code> </dt> <dd>
<p>C compiler command used to build the <code>main()</code> function of programs like <code>python</code>.</p> <p>Variable set by the <a class="reference internal" href="#cmdoption-0"><code>--with-cxx-main</code></a> option of the configure script.</p> <p>Default: <code>$(CC)</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CXX">
<code>CXX</code> </dt> <dd>
<p>C++ compiler command.</p> <p>Used if the <a class="reference internal" href="#cmdoption-0"><code>--with-cxx-main</code></a> option is used.</p> <p>Example: <code>g++ -pthread</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CFLAGS">
<code>CFLAGS</code> </dt> <dd>
<p>C compiler flags.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CFLAGS_NODIST">
<code>CFLAGS_NODIST</code> </dt> <dd>
<p><a class="reference internal" href="#envvar-CFLAGS_NODIST" id="index-10"><code>CFLAGS_NODIST</code></a> is used for building the interpreter and stdlib C extensions. Use it when a compiler flag should <em>not</em> be part of the distutils <a class="reference internal" href="#envvar-CFLAGS" id="index-11"><code>CFLAGS</code></a> once Python is installed (<a class="reference external" href="https://bugs.python.org/issue21121">bpo-21121</a>).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.5.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-EXTRA_CFLAGS">
<code>EXTRA_CFLAGS</code> </dt> <dd>
<p>Extra C compiler flags.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CONFIGURE_CFLAGS">
<code>CONFIGURE_CFLAGS</code> </dt> <dd>
<p>Value of <a class="reference internal" href="#envvar-CFLAGS" id="index-12"><code>CFLAGS</code></a> variable passed to the <code>./configure</code> script.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CONFIGURE_CFLAGS_NODIST">
<code>CONFIGURE_CFLAGS_NODIST</code> </dt> <dd>
<p>Value of <a class="reference internal" href="#envvar-CFLAGS_NODIST" id="index-13"><code>CFLAGS_NODIST</code></a> variable passed to the <code>./configure</code> script.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.5.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-BASECFLAGS">
<code>BASECFLAGS</code> </dt> <dd>
<p>Base compiler flags.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-OPT">
<code>OPT</code> </dt> <dd>
<p>Optimization flags.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CFLAGS_ALIASING">
<code>CFLAGS_ALIASING</code> </dt> <dd>
<p>Strict or non-strict aliasing flags used to compile <code>Python/dtoa.c</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CCSHARED">
<code>CCSHARED</code> </dt> <dd>
<p>Compiler flags used to build a shared library.</p> <p>For example, <code>-fPIC</code> is used on Linux and on BSD.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CFLAGSFORSHARED">
<code>CFLAGSFORSHARED</code> </dt> <dd>
<p>Extra C flags added for building the interpreter object files.</p> <p>Default: <code>$(CCSHARED)</code> when <a class="reference internal" href="#cmdoption-enable-shared"><code>--enable-shared</code></a> is used, or an empty string otherwise.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_CFLAGS">
<code>PY_CFLAGS</code> </dt> <dd>
<p>Default: <code>$(BASECFLAGS) $(OPT) $(CONFIGURE_CFLAGS) $(CFLAGS) $(EXTRA_CFLAGS)</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_CFLAGS_NODIST">
<code>PY_CFLAGS_NODIST</code> </dt> <dd>
<p>Default: <code>$(CONFIGURE_CFLAGS_NODIST) $(CFLAGS_NODIST) -I$(srcdir)/Include/internal</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.5.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_STDMODULE_CFLAGS">
<code>PY_STDMODULE_CFLAGS</code> </dt> <dd>
<p>C flags used for building the interpreter object files.</p> <p>Default: <code>$(PY_CFLAGS) $(PY_CFLAGS_NODIST) $(PY_CPPFLAGS) $(CFLAGSFORSHARED)</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_CORE_CFLAGS">
<code>PY_CORE_CFLAGS</code> </dt> <dd>
<p>Default: <code>$(PY_STDMODULE_CFLAGS) -DPy_BUILD_CORE</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_BUILTIN_MODULE_CFLAGS">
<code>PY_BUILTIN_MODULE_CFLAGS</code> </dt> <dd>
<p>Compiler flags to build a standard library extension module as a built-in module, like the <a class="reference internal" href="../library/posix#module-posix" title="posix: The most common POSIX system calls (normally used via module os). (Unix)"><code>posix</code></a> module.</p> <p>Default: <code>$(PY_STDMODULE_CFLAGS) -DPy_BUILD_CORE_BUILTIN</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PURIFY">
<code>PURIFY</code> </dt> <dd>
<p>Purify command. Purify is a memory debugger program.</p> <p>Default: empty string (not used).</p> </dd>
</dl>   <h3 id="linker-flags">
<span class="section-number">3.3.3. </span>Linker flags</h3> <dl class="std envvar"> <dt id="envvar-LINKCC">
<code>LINKCC</code> </dt> <dd>
<p>Linker command used to build programs like <code>python</code> and <code>_testembed</code>.</p> <p>Default: <code>$(PURIFY) $(MAINCC)</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CONFIGURE_LDFLAGS">
<code>CONFIGURE_LDFLAGS</code> </dt> <dd>
<p>Value of <a class="reference internal" href="#envvar-LDFLAGS" id="index-14"><code>LDFLAGS</code></a> variable passed to the <code>./configure</code> script.</p> <p>Avoid assigning <a class="reference internal" href="#envvar-CFLAGS" id="index-15"><code>CFLAGS</code></a>, <a class="reference internal" href="#envvar-LDFLAGS" id="index-16"><code>LDFLAGS</code></a>, etc. so users can use them on the command line to append to these values without stomping the pre-set values.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-LDFLAGS_NODIST">
<code>LDFLAGS_NODIST</code> </dt> <dd>
<p><a class="reference internal" href="#envvar-LDFLAGS_NODIST" id="index-17"><code>LDFLAGS_NODIST</code></a> is used in the same manner as <a class="reference internal" href="#envvar-CFLAGS_NODIST" id="index-18"><code>CFLAGS_NODIST</code></a>. Use it when a linker flag should <em>not</em> be part of the distutils <a class="reference internal" href="#envvar-LDFLAGS" id="index-19"><code>LDFLAGS</code></a> once Python is installed (<a class="reference external" href="https://bugs.python.org/issue35257">bpo-35257</a>).</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-CONFIGURE_LDFLAGS_NODIST">
<code>CONFIGURE_LDFLAGS_NODIST</code> </dt> <dd>
<p>Value of <a class="reference internal" href="#envvar-LDFLAGS_NODIST" id="index-20"><code>LDFLAGS_NODIST</code></a> variable passed to the <code>./configure</code> script.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-LDFLAGS">
<code>LDFLAGS</code> </dt> <dd>
<p>Linker flags, e.g. <code>-L&lt;lib dir&gt;</code> if you have libraries in a nonstandard directory <code>&lt;lib dir&gt;</code>.</p> <p>Both <a class="reference internal" href="#envvar-CPPFLAGS" id="index-21"><code>CPPFLAGS</code></a> and <a class="reference internal" href="#envvar-LDFLAGS" id="index-22"><code>LDFLAGS</code></a> need to contain the shell’s value for setup.py to be able to build extension modules using the directories specified in the environment variables.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-LIBS">
<code>LIBS</code> </dt> <dd>
<p>Linker flags to pass libraries to the linker when linking the Python executable.</p> <p>Example: <code>-lrt</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-LDSHARED">
<code>LDSHARED</code> </dt> <dd>
<p>Command to build a shared library.</p> <p>Default: <code>@LDSHARED@ $(PY_LDFLAGS)</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-BLDSHARED">
<code>BLDSHARED</code> </dt> <dd>
<p>Command to build <code>libpython</code> shared library.</p> <p>Default: <code>@BLDSHARED@ $(PY_CORE_LDFLAGS)</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_LDFLAGS">
<code>PY_LDFLAGS</code> </dt> <dd>
<p>Default: <code>$(CONFIGURE_LDFLAGS) $(LDFLAGS)</code>.</p> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_LDFLAGS_NODIST">
<code>PY_LDFLAGS_NODIST</code> </dt> <dd>
<p>Default: <code>$(CONFIGURE_LDFLAGS_NODIST) $(LDFLAGS_NODIST)</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> </dd>
</dl> <dl class="std envvar"> <dt id="envvar-PY_CORE_LDFLAGS">
<code>PY_CORE_LDFLAGS</code> </dt> <dd>
<p>Linker flags used for building the interpreter object files.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> </dd>
</dl>    <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2022 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/3.10/using/configure.html" class="_attribution-link">https://docs.python.org/3.10/using/configure.html</a>
  </p>
</div>
