<h1> Phoenix.Template   </h1> <section id="moduledoc"> <p>Templates are used by Phoenix when rendering responses.</p>
<p>Since many views render significant content, for example a whole HTML file, it is common to put these files into a particular directory, typically "APP_web/templates".</p>
<p>This module provides conveniences for reading all files from a particular directory and embedding them into a single module. Imagine you have a directory with templates:</p>
<pre data-language="elixir"># templates/foo.html.eex
Hello &lt;%= @name %&gt;

# templates.ex
defmodule Templates do
  use Phoenix.Template, root: "templates"

  def render(template, assigns) do
    render_template(template, assigns)
  end
end</pre>
<p><a href="phoenix.template#content"><code class="inline">Phoenix.Template</code></a> will define a private function named <code class="inline">render_template/2</code> with one clause per file system template. We expose this private function via <code class="inline">render/2</code>, which can be invoked as:</p>
<pre data-language="elixir">Templates.render("foo.html", %{name: "John Doe"})</pre>
<p>In practice, developers rarely use <a href="phoenix.template#content"><code class="inline">Phoenix.Template</code></a> directly. Instead they use <a href="phoenix.view"><code class="inline">Phoenix.View</code></a> which wraps the template functionality and adds some extra conveniences.</p>
<h2 id="module-options" class="section-heading">  Options </h2> <ul>
<li>
<code class="inline">:root</code> - the root template path to find templates</li>
<li>
<code class="inline">:pattern</code> - the wildcard pattern to apply to the root when finding templates. Default <code class="inline">"*"</code>
</li>
<li>
<code class="inline">:template_engines</code> - a map of template engines extensions to template engine handlers</li>
</ul>
<h2 id="module-terminology" class="section-heading">  Terminology </h2> <p>Here is a quick introduction into Phoenix templates terms:</p>
<ul>
<li><p>template name - is the name of the template as given by the user, without the template engine extension, for example: "users.html"</p></li>
<li><p>template path - is the complete path of the template in the filesystem, for example, "path/to/users.html.eex"</p></li>
<li><p>template root - the directory where templates are defined</p></li>
<li><p>template engine - a module that receives a template path and transforms its source code into Elixir quoted expressions</p></li>
</ul>
<h2 id="module-custom-template-engines" class="section-heading">  Custom Template Engines </h2> <p>Phoenix supports custom template engines. Engines tell Phoenix how to convert a template path into quoted expressions. See <a href="phoenix.template.engine"><code class="inline">Phoenix.Template.Engine</code></a> for more information on the API required to be implemented by custom engines.</p>
<p>Once a template engine is defined, you can tell Phoenix about it via the template engines option:</p>
<pre data-language="elixir">config :phoenix, :template_engines,
  eex: Phoenix.Template.EExEngine,
  exs: Phoenix.Template.ExsEngine</pre>
<p>If you want to support a given engine only on a certain template, you can pass it as an option on <code class="inline">use Phoenix.Template</code>:</p>
<pre data-language="elixir">use Phoenix.Template, template_engines: %{
  foo: Phoenix.Template.FooEngine
}</pre>
<h2 id="module-format-encoders" class="section-heading">  Format encoders </h2> <p>Besides template engines, Phoenix has the concept of format encoders. Format encoders work per format and are responsible for encoding a given format to string once the view layer finishes processing.</p>
<p>A format encoder must export a function called <code class="inline">encode_to_iodata!/1</code> which receives the rendering artifact and returns iodata.</p>
<p>New encoders can be added via the format encoder option:</p>
<pre data-language="elixir">config :phoenix, :format_encoders,
  html: Phoenix.HTML.Engine</pre> </section> <section id="summary" class="details-list"> <h1 class="section-heading">  Summary </h1> <h2> Types </h2>
<dl class="summary-types summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#t:name/0">name()</a> </dt> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#t:path/0">path()</a> </dt> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#t:root/0">root()</a> </dt> </div> </dl> <h2> Functions </h2>
<dl class="summary-functions summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#engines/0">engines()</a> </dt> <dd class="summary-synopsis"><p>Returns a keyword list with all template engines extensions followed by their modules.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#find_all/3">find_all(root, pattern \\ "*", engines \\ engines())</a> </dt> <dd class="summary-synopsis"><p>Returns all template paths in a given template root.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#format_encoder/1">format_encoder(template_name)</a> </dt> <dd class="summary-synopsis"><p>Returns the format encoder for the given template name.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#hash/3">hash(root, pattern \\ "*", engines \\ engines())</a> </dt> <dd class="summary-synopsis"><p>Returns the hash of all template paths in the given root.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#module_to_template_root/3">module_to_template_root(module, base, suffix)</a> </dt> <dd class="summary-synopsis"><p>Converts a module, without the suffix, to a template root.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#template_path_to_name/2">template_path_to_name(path, root)</a> </dt> <dd class="summary-synopsis"><p>Converts the template path into the template name.</p></dd> </div> </dl> </section> <section id="types" class="details-list"> <h1 class="section-heading">  Types </h1> <div class="types-list"> <section class="detail"> <h3 class="detail-header" id="t:name/0">name()<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L96" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">name() :: binary()</pre> </div> </section> </section> <section class="detail"> <h3 class="detail-header" id="t:path/0">path()<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L97" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">path() :: binary()</pre> </div> </section> </section> <section class="detail"> <h3 class="detail-header" id="t:root/0">root()<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L98" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">root() :: binary()</pre> </div> </section> </section> </div> </section> <section id="functions" class="details-list"> <h1 class="section-heading">  Functions </h1> <div class="functions-list"> <section class="detail"> <h3 class="detail-header" id="engines/0">engines()<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L233" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">engines() :: %{required(atom()) =&gt; module()}</pre> </div> <p>Returns a keyword list with all template engines extensions followed by their modules.</p> </section> </section> <section class="detail">   <h3 class="detail-header" id="find_all/3">find_all(root, pattern \\ "*", engines \\ engines())<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L315" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">find_all(root(), pattern :: String.t(), %{required(atom()) =&gt; module()}) :: [
  path()
]</pre> </div> <p>Returns all template paths in a given template root.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="format_encoder/1">format_encoder(template_name)<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L205" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">format_encoder(name()) :: module() | nil</pre> </div> <p>Returns the format encoder for the given template name.</p> </section> </section> <section class="detail">   <h3 class="detail-header" id="hash/3">hash(root, pattern \\ "*", engines \\ engines())<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L329" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">hash(root(), pattern :: String.t(), %{required(atom()) =&gt; module()}) :: binary()</pre> </div> <p>Returns the hash of all template paths in the given root.</p>
<p>Used by Phoenix to check if a given root path requires recompilation.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="module_to_template_root/3">module_to_template_root(module, base, suffix)<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L299" class="source">Source</a>
</h3> <section class="docstring"> <p>Converts a module, without the suffix, to a template root.</p>
<h4 id="module_to_template_root/3-examples" class="section-heading">  Examples </h4> <pre data-language="elixir">iex&gt; Phoenix.Template.module_to_template_root(MyApp.UserView, MyApp, "View")
"user"

iex&gt; Phoenix.Template.module_to_template_root(MyApp.Admin.User, MyApp, "View")
"admin/user"

iex&gt; Phoenix.Template.module_to_template_root(MyApp.Admin.User, MyApp.Admin, "View")
"user"

iex&gt; Phoenix.Template.module_to_template_root(MyApp.View, MyApp, "View")
""

iex&gt; Phoenix.Template.module_to_template_root(MyApp.View, MyApp.View, "View")
""</pre> </section> </section> <section class="detail"> <h3 class="detail-header" id="template_path_to_name/2">template_path_to_name(path, root)<a href="https://github.com/phoenixframework/phoenix/blob/v1.5.10/lib/phoenix/template.ex#L272" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">template_path_to_name(path(), root()) :: name()</pre> </div> <p>Converts the template path into the template name.</p>
<h4 id="template_path_to_name/2-examples" class="section-heading">  Examples </h4> <pre data-language="elixir">iex&gt; Phoenix.Template.template_path_to_name(
...&gt;   "lib/templates/admin/users/show.html.eex",
...&gt;   "lib/templates")
"admin/users/show.html"</pre> </section> </section> </div> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://hexdocs.pm/phoenix/Phoenix.Template.html" class="_attribution-link" target="_blank">https://hexdocs.pm/phoenix/Phoenix.Template.html</a>
  </p>
</div>
