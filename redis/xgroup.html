<h1 class="command">XGROUP</h1>
<pre>XGROUP [CREATE key groupname ID|$ [MKSTREAM]] [SETID key groupname ID|$] [DESTROY key groupname] [CREATECONSUMER key groupname consumername] [DELCONSUMER key groupname consumername]</pre>   <div class="metadata"> <p><strong>Available since 5.0.0.</strong></p> <p><strong>Time complexity:</strong> O(1) for all the subcommands, with the exception of the DESTROY subcommand which takes an additional O(M) time in order to delete the M entries inside the consumer group pending entries list (PEL).</p> </div> <p>This command is used in order to manage the consumer groups associated with a stream data structure. Using <a href="xgroup">XGROUP</a> you can:</p> <ul> <li>Create a new consumer group associated with a stream.</li> <li>Destroy a consumer group.</li> <li>Remove a specific consumer from a consumer group.</li> <li>Set the consumer group <em>last delivered ID</em> to something else.</li> </ul> <p>To create a new consumer group, use the following form:</p> <pre>XGROUP CREATE mystream consumer-group-name $
</pre> <p>The last argument is the ID of the last item in the stream to consider already delivered. In the above case we used the special ID '$' (that means: the ID of the last item in the stream). In this case the consumers fetching data from that consumer group will only see new elements arriving in the stream.</p> <p>If instead you want consumers to fetch the whole stream history, use zero as the starting ID for the consumer group:</p> <pre>XGROUP CREATE mystream consumer-group-name 0
</pre> <p>Of course it is also possible to use any other valid ID. If the specified consumer group already exists, the command returns a <code>-BUSYGROUP</code> error. Otherwise, the operation is performed and a <a href="https://redis.io/topics/protocol#simple-string-reply">Simple string reply</a> <code>OK</code> is returned. There are no hard limits to the number of consumer groups you can associate with a given stream.</p> <p>If the specified stream doesn't exist when creating a group, an error will be returned. You can use the optional <code>MKSTREAM</code> subcommand as the last argument after the <code>ID</code> to automatically create the stream, if it doesn't exist. Note that if the stream is created in this way it will have a length of 0:</p> <pre>XGROUP CREATE mystream consumer-group-name $ MKSTREAM
</pre> <p>A consumer group can be destroyed completely by using the following form:</p> <pre>XGROUP DESTROY mystream consumer-group-name
</pre> <p>The consumer group will be destroyed even if there are active consumers and pending messages, so make sure to call this command only when really needed. This form returns an <a href="https://redis.io/topics/protocol#integer-reply">Integer reply</a> with the number of destroyed consumer groups (0 or 1).</p> <p>Consumers in a consumer group are auto-created every time a new consumer name is mentioned by some command. They can also be explicitly created by using the following form:</p> <pre>XGROUP CREATECONSUMER mystream consumer-group-name myconsumer123
</pre> <p>This form returns an <a href="https://redis.io/topics/protocol#integer-reply">Integer reply</a> with the number of created consumers (0 or 1).</p> <p>To just remove a given consumer from a consumer group, the following form is used:</p> <pre>XGROUP DELCONSUMER mystream consumer-group-name myconsumer123
</pre> <p>Sometimes it may be useful to remove old consumers since they are no longer used. This form returns an <a href="https://redis.io/topics/protocol#integer-reply">Integer reply</a> with the number of pending messages that the consumer had before it was deleted.</p> <p>Finally it possible to set the next message to deliver using the <code>SETID</code> subcommand. Normally the next ID is set when the consumer is created, as the last argument of <code>XGROUP CREATE</code>. However using this form the next ID can be modified later without deleting and creating the consumer group again. For instance if you want the consumers in a consumer group to re-process all the messages in a stream, you may want to set its next ID to 0:</p> <pre>XGROUP SETID mystream consumer-group-name 0
</pre> <p>This form returns a <a href="https://redis.io/topics/protocol#simple-string-reply">Simple string reply</a> <code>OK</code> or an error.</p> <p>Finally to get some help if you don't remember the syntax, use the HELP subcommand:</p> <pre>XGROUP HELP
</pre> <h2>History</h2> <ul> <li>
<code>&gt;= 6.2.0</code>: Supports the <code>CREATECONSUMER</code> subcommand.</li> </ul>  <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://redis.io/commands/xgroup" class="_attribution-link" target="_blank">https://redis.io/commands/xgroup</a>
  </p>
</div>
