<h1 class="command">CLUSTER</h1>
<pre>CLUSTER RESET [HARD|SOFT]</pre>   <div class="metadata"> <p><strong>Available since 3.0.0.</strong></p> <p><strong>Time complexity:</strong> O(N) where N is the number of known nodes. The command may execute a FLUSHALL as a side effect.</p> </div> <p>Reset a Redis Cluster node, in a more or less drastic way depending on the reset type, that can be <strong>hard</strong> or <strong>soft</strong>. Note that this command <strong>does not work for masters if they hold one or more keys</strong>, in that case to completely reset a master node keys must be removed first, e.g. by using <a href="flushall">FLUSHALL</a> first, and then <a href="cluster-reset">CLUSTER RESET</a>.</p> <p>Effects on the node:</p> <ol> <li>All the other nodes in the cluster are forgotten.</li> <li>All the assigned / open slots are reset, so the slots-to-nodes mapping is totally cleared.</li> <li>If the node is a replica it is turned into an (empty) master. Its dataset is flushed, so at the end the node will be an empty master.</li> <li>
<strong>Hard reset only</strong>: a new Node ID is generated.</li> <li>
<strong>Hard reset only</strong>: <code>currentEpoch</code> and <code>configEpoch</code> vars are set to 0.</li> <li>The new configuration is persisted on disk in the node cluster configuration file.</li> </ol> <p>This command is mainly useful to re-provision a Redis Cluster node in order to be used in the context of a new, different cluster. The command is also extensively used by the Redis Cluster testing framework in order to reset the state of the cluster every time a new test unit is executed.</p> <p>If no reset type is specified, the default is <strong>soft</strong>.</p> <h2>Return value</h2> <p><a href="https://redis.io/topics/protocol#simple-string-reply">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p>  <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://redis.io/commands/cluster-reset" class="_attribution-link" target="_blank">https://redis.io/commands/cluster-reset</a>
  </p>
</div>
