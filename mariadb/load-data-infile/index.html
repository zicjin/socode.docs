<h1>LOAD DATA INFILE</h1> <div> <div class="node creole"> <div class="answer formatted"> <h2 class="anchored_heading" id="syntax">Syntax</h2> <pre class="fixed" data-language="sql">LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE 'file_name'
    [REPLACE | IGNORE]
    INTO TABLE tbl_name
    [CHARACTER SET charset_name]
    [{FIELDS | COLUMNS}
        [TERMINATED BY 'string']
        [[OPTIONALLY] ENCLOSED BY 'char']
        [ESCAPED BY 'char']
    ]
    [LINES
        [STARTING BY 'string']
        [TERMINATED BY 'string']
    ]
    [IGNORE number LINES]
    [(col_name_or_user_var,...)]
    [SET col_name = expr,...]
</pre> <h2 class="anchored_heading" id="description">Description</h2> <p>Reads rows from a text file into the designated table on the database at a very high speed. The file name must be given as a literal string. </p> <p>Files are written to disk using the <code><a href="../select-into-outfile/index">SELECT INTO OUTFILE</a></code> statement. You can then read the files back into a table using the <code>LOAD DATA INFILE</code> statement. The <code>FIELDS</code> and <code>LINES</code> clauses are the same in both statements. These clauses are optional, but if both are specified then the <code>FIELDS</code> clause must precede <code>LINES</code>.</p> <div class="cstm-style redbox">
<p>In releases after <a href="../what-is-mariadb-55/index">MariaDB 5.5</a>, <code>LOAD DATA INFILE</code> is <a href="../unsafe-statements-for-replication/index">unsafe</a> for statement-based replication.</p> </div>
<p>Executing this statement activates <code>INSERT</code> <a href="../triggers/index">triggers</a>.</p> <h3 class="anchored_heading" id="load-data-local-infile"><code>LOAD DATA LOCAL INFILE</code></h3> <p>When you execute the <code>LOAD DATA INFILE</code> statement, MariaDB Server attempts to read the input file from its own file system. In contrast, when you execute the <code>LOAD DATA LOCAL INFILE</code> statement, the client attempts to read the input file from its file system, and it sends the contents of the input file to the MariaDB Server. This allows you to load files from the client's local file system into the database.</p> <p>In the event that you don't want to permit this operation (such as for security reasons), you can disable the <code>LOAD DATA LOCAL INFILE</code> statement on either the server or the client.</p> <ul start="1">
<li>The <code>LOAD DATA LOCAL INFILE</code> statement can be disabled on the server by setting the <code><a href="../server-system-variables/index#local_infile">local_infile</a></code> system variable to <code>0</code>. </li>
<li>The <code>LOAD DATA LOCAL INFILE</code> statement can be disabled on the client. If you are using <a href="../about-mariadb-connector-c/index">MariaDB Connector/C</a>, this can be done by unsetting the <code>CLIENT_LOCAL_FILES</code> capability flag with the <code><a href="../mysql_real_connect/index">mysql_real_connect</a></code> function or by unsetting the <code>MYSQL_OPT_LOCAL_INFILE</code> option with <code><a href="../mysql_optionsv/index">mysql_optionsv</a></code> function. If you are using a different client or client library, then see the documentation for your specific client or client library to determine how it handles the <code>LOAD DATA LOCAL INFILE</code> statement. </li>
</ul> <p>If the <code>LOAD DATA LOCAL INFILE</code> statement is disabled by either the server or the client and if the user attempts to execute it, then the server will cause the statement to fail with the following error message:</p> <pre class="fixed" data-language="sql">The used command is not allowed with this MariaDB version
</pre>
<p>Note that it is not entirely accurate to say that the MariaDB version does not support the command. It would be more accurate to say that the MariaDB configuration does not support the command. See <a href="https://jira.mariadb.org/browse/MDEV-20500">MDEV-20500</a> for more information.</p> <h3 class="anchored_heading" id="replace-and-ignore">
<code>REPLACE</code> and <code>IGNORE</code>
</h3> <p>In cases where you load data from a file into a table that already contains data and has a Primary Key, you may encounter issues where the statement attempts to insert a row with a Primary Key that already exists. When this happens, the statement fails with Error 1064, protecting the data already on the table. In cases where you want MariaDB to overwrite duplicates, use the <code>REPLACE</code> keyword.</p> <p>The <code>REPLACE</code> keyword works like the <code><a href="../replace/index">REPLACE</a></code> statement. Here, the statement attempts to load the data from the file. If the row does not exist, it adds it to the table. If the row contains an existing Primary Key, it replaces the table data. That is, in the event of a conflict, it assumes the file contains the desired row. </p> <p>This operation can cause a degradation in load speed by a factor of 20 or more if the part that has already been loaded is larger than the capacity of the InnoDB Buffer Pool. This happens because it causes a lot of turnaround in the Buffer Pool.</p> <p>Use the <code>IGNORE</code> keyword when you want to skip any rows that contain a conflicting Primary Key. Here, the statement attempts to load the data from the file. If the row does not exist, it adds it to the table. If the row contains an existing Primary Key, it ignores the addition request and moves on to the next. That is, in the event of a conflict, it assumes the table contains the desired row.</p> <h3 class="anchored_heading" id="character-sets">Character-sets</h3> <p>When the statement opens the file, it attempts to read the contents using the default character-set, as defined by the <code><a href="../server-system-variables/index#character_set_database">character_set_database</a></code> system variable. </p> <p>In the cases where the file was written using a character-set other than the default, you can specify the character-set to use with the <code>CHARACTER SET</code> clause in the statement. It ignores character-sets specified by the <code><a href="../set-names/index">SET NAMES</a></code> statement and by the <code><a href="../server-system-variables/index#character_set_client">character_set_client</a></code> system variable. Setting the <code>CHARACTER SET</code> clause to a value of <code>binary</code> indicates "no conversion."</p> <p>The statement interprets all fields in the file as having the same character-set, regardless of the column data type. To properly interpret file contents, you must ensure that it was written with the correct character-set. If you write a data file with <code><a href="../mysqldump/index">mysqldump -T</a></code> or with the <code><a href="../select-into-outfile/index">SELECT INTO OUTFILE</a></code> statement with the <code><a href="../mysql-command-line-client/index">mysql</a></code> client, be sure to use the <code>--default-character-set</code> option, so that the output is written with the desired character-set.</p> <p>When using mixed character sets, use the <code>CHARACTER SET</code> clause in both <code><a href="../select-into-outfile/index">SELECT INTO OUTFILE</a></code> and <code>LOAD DATA INFILE</code> to ensure that MariaDB correctly interprets the escape sequences.</p> <div class="cstm-style greenbox">
<p>The <a href="../server-system-variables/index#character_set_filesystem">character_set_filesystem</a> system variable controls the interpretation of the filename.</p> <p>It is currently not possible to load data files that use the <code>ucs2</code> character set.</p> </div>
<h3 class="anchored_heading" id="priority-and-concurrency">Priority and Concurrency</h3> <p>In loading data from a file, there's a risk that the statement will attempt insertions concurrent with reads from another client, which can result in the read serving a result-set that contains only part of the update from the <code>LOAD DATA INFILE</code> statement.</p> <p>Using the <code><a href="../high_priority-and-low_priority-clauses/index">LOW_PRIORITY</a></code> keyword, MariaDB delays insertions until no other clients are reading from the table. Alternatively, you can use the <code><a href="../concurrent-inserts/index">CONCURRENT</a></code> keyword to perform concurrent insertion.</p> <div class="cstm-style greenbox">
<p>The <code>LOW_PRIORITY</code> and <code>CONCURRENT</code> keywords are mutually exclusive. They cannot be used in the same statement.</p> </div>
<h3 class="anchored_heading" id="progress-reporting">Progress Reporting</h3> <p>Since <a href="../what-is-mariadb-53/index">MariaDB 5.3</a>, the <code>LOAD DATA INFILE</code> statement supports <a href="../progress-reporting/index">progress reporting</a>. You may find this useful when dealing with long-running operations. Using another client you can issue a <code><a href="../show-processlist/index">SHOW PROCESSLIST</a></code> query to check the progress of the data load.</p> <h3 class="anchored_heading" id="using-mysqlimport">Using <code>mysqlimport</code>
</h3> <p>MariaDB ships with a separate utility for loading data from files: <code><a href="../mysqlimport/index">mysqlimport</a></code>. It operates by sending <code>LOAD DATA INFILE</code> statements to the server.</p> <p>Using <code><a href="../mysqlimport/index">mysqlimport</a></code> you can compress the file using the <code>--compress</code> option, to get better performance over slow networks, providing both the client and server support the compressed protocol. Use the <code>--local</code> option to load from the local file system.</p> <h3 class="anchored_heading" id="indexing">Indexing</h3> <p>In cases where the storage engine supports <code><a href="../alter-table/index">ALTER TABLE... DISABLE KEYS</a></code> statements, the <code>LOAD DATA INFILE</code> statement automatically disables indexes during the execution.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../how-to-quickly-insert-data-into-mariadb/index">How to quickly insert data into MariaDB</a> </li>
<li>
<a href="../character-sets-and-collations/index">Character Sets and Collations</a> </li>
<li>
<a href="../select-into-outfile/index">SELECT ... INTO OUTFILE</a> </li>
<li><a href="../mysqlimport/index">mysqlimport</a></li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/load-data-infile/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/load-data-infile/</a>
  </p>
</div>
