<h1>MEMORY Storage Engine</h1> <div> <div class="node creole"> <div class="answer formatted"> <p> Contents of the MEMORY storage engine (previously known as HEAP) are stored in memory rather than on disk.</p> <p>It is best-used for read-only caches of data from other tables, or for temporary work areas.</p> <p>Since the data is stored in memory, it is highly vulnerable to power outages or hardware failure, and is unsuitable for permanent data storage. In fact, after a server restart, <code>MEMORY</code> tables will be recreated (because the definition file is stored on disk), but they will be empty. It is possible to re-populate them with a query using the <code>--init-file</code> server startup option.</p> <p>Variable-length types like <code><a href="../varchar/index">VARCHAR</a></code> can be used in MEMORY tables. <code><a href="../blob/index">BLOB</a></code> or <code><a href="../text/index">TEXT</a></code> columns are not supported for MEMORY tables.</p> <p>The maximum total size of MEMORY tables cannot exceed the <code><a href="../server-system-variables/index#max_heap_table_size">max_heap_table_size</a></code> system server variable. When a table is created this value applies to that table, and when the server is restarted this value applies to existing tables. Changing this value has no effect on existing tables. However, executing a <code>ALTER TABLE ... ENGINE=MEMORY</code> statement applies the current value of <code>max_heap_table_size</code> to the table. Also, it is possible to change the session value of <code>max_heap_table_size</code> before creating a table, to make sure that tables created by other sessions are not affected.</p> <p>The <code>MAX_ROWS</code> table option provides a hint about the number of rows you plan to store in them. This is not a hard limit that cannot be exceeded, and does not allow to exceed <code>max_heap_table_size</code>. The storage engine uses max_heap_table_size and MAX_ROWS to calculate the maximum memory that could be allocated for the table.</p> <p>When rows are deleted, space is not automatically freed. The only way to free space without dropping the table is using <code>ALTER TABLE tbl_name ENGINE = MEMORY</code>. <code><a href="../truncate-table/index">TRUNCATE TABLE</a></code> frees the memory too.</p> <h2 class="anchored_heading" id="index-type">Index Type</h2> <p>The MEMORY storage engine permits indexes to be either B-tree or Hash. Hash is the default type for MEMORY. See <a href="../storage-engine-index-types/index">Storage Engine index types</a> for more on their characteristics.</p> <p>A MEMORY table can have up to 64 indexes, 16 columns for each index and a maximum key length of 3072 bytes.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1"><li>
<a href="../performance-of-memory-tables/index">Performance of MEMORY tables</a> </li></ul> <h2 class="anchored_heading" id="example">Example</h2> <p>The following example shows how to create a <code>MEMORY</code> table with a given maximum size, as described above.</p> <pre class="fixed" data-language="sql">SET max_heap_table_size = 1024*516;

CREATE TABLE t (a VARCHAR(10), b INT) ENGINE = MEMORY;

SET max_heap_table_size = @@max_heap_table_size;
</pre> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/memory-storage-engine/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/memory-storage-engine/</a>
  </p>
</div>
