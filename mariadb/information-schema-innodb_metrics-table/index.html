<h1>Information Schema INNODB_METRICS Table</h1> <div> <div class="node creole"> <div class="answer formatted"> <div class="mariadb_from_10_0_0 mariadb from_10_0_0 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1000-release-notes/">10.0.0</a></strong><p>The <code>INNODB_METRICS</code> table was added in <a href="https://mariadb.com/kb/en/mariadb-1000-release-notes/">MariaDB 10.0.0</a></p> </div>
<p> The <a href="../information_schema/index">Information Schema</a> <code>INNODB_METRICS</code> table contains a list of useful InnoDB performance metrics. Each row in the table represents an instrumented counter that can be stopped, started and reset, and which can be grouped together by module.</p> <p>The <code>PROCESS</code> <a href="../grant/index">privilege</a> is required to view the table.</p> <p>It has the following columns:</p> <div class="cstm-style darkheader-nospace-borders">
<table>
<tr>
<th>Column</th>
<th>Description</th>
</tr> <tr>
<td><code>NAME</code></td>
<td>Unique counter name.</td>
</tr> <tr>
<td><code>SUBSYSTEM</code></td>
<td>InnoDB subsystem. See below for the matching module to use to enable/disable monitoring this subsytem with the <a href="../innodb-system-variables/index#innodb_monitor_enable">innodb_monitor_enable</a> and <a href="../innodb-system-variables/index#innodb_monitor_disable">innodb_monitor_disable</a> system variables.</td>
</tr> <tr>
<td><code>COUNT</code></td>
<td>Count since being enabled.</td>
</tr> <tr>
<td><code>MAX_COUNT</code></td>
<td>Maximum value since being enabled.</td>
</tr> <tr>
<td><code>MIN_COUNT</code></td>
<td>Minimum value since being enabled.</td>
</tr> <tr>
<td><code>AVG_COUNT</code></td>
<td>Average value since being enabled.</td>
</tr> <tr>
<td><code>COUNT_RESET</code></td>
<td>Count since last being reset.</td>
</tr> <tr>
<td><code>MAX_COUNT_RESET</code></td>
<td>Maximum value since last being reset.</td>
</tr> <tr>
<td><code>MIN_COUNT_RESET</code></td>
<td>Minimum value since last being reset.</td>
</tr> <tr>
<td><code>AVG_COUNT_RESET</code></td>
<td>Average value since last being reset.</td>
</tr> <tr>
<td><code>TIME_ENABLED</code></td>
<td>Time last enabled.</td>
</tr> <tr>
<td><code>TIME_DISABLED</code></td>
<td>Time last disabled</td>
</tr> <tr>
<td><code>TIME_ELAPSED</code></td>
<td>Time since enabled</td>
</tr> <tr>
<td><code>TIME_RESET</code></td>
<td>Time last reset.</td>
</tr> <tr>
<td><code>STATUS</code></td>
<td>Whether the counter is currently enabled to disabled.</td>
</tr> <tr>
<td><code>TYPE</code></td>
<td>Item type; one of <code>counter</code>, <code>value</code>, <code>status_counter</code>, <code>set_owner</code>, <code>set_member</code>.</td>
</tr> <tr>
<td><code>COMMENT</code></td>
<td>Counter description.</td>
</tr> </table> </div>
<h2 class="anchored_heading" id="enabling-and-disabling-counters">Enabling and disabling counters</h2> <p>Most of the counters are disabled by default. To enable them, use the <a href="../innodb-system-variables/index#innodb_monitor_enable">innodb_monitor_enable</a> system variable. You can either enable a variable by its name, for example:</p> <pre class="fixed" data-language="sql">SET GLOBAL innodb_monitor_enable = icp_match;
</pre>
<p>or enable a number of counters grouped by module. The <code>SUBSYSTEM</code> field indicates which counters are grouped together, but the following module names need to be used:</p> <div class="cstm-style darkheader-nospace-borders">
<table>
<tr>
<th>Module Name</th>
<th>Subsytem Field</th>
</tr> <tr>
<td><code>module_metadata</code></td>
<td><code>metadata</code></td>
</tr> <tr>
<td><code>module_lock</code></td>
<td><code>lock</code></td>
</tr> <tr>
<td><code>module_buffer</code></td>
<td><code>buffer</code></td>
</tr> <tr>
<td><code>module_buf_page</code></td>
<td><code>buffer_page_io</code></td>
</tr> <tr>
<td><code>module_os</code></td>
<td><code>os</code></td>
</tr> <tr>
<td><code>module_trx</code></td>
<td><code>transaction</code></td>
</tr> <tr>
<td><code>module_purge</code></td>
<td><code>purge</code></td>
</tr> <tr>
<td><code>module_compress</code></td>
<td><code>compression</code></td>
</tr> <tr>
<td><code>module_file</code></td>
<td><code>file_system</code></td>
</tr> <tr>
<td><code>module_index</code></td>
<td><code>index</code></td>
</tr> <tr>
<td><code>module_adaptive_hash</code></td>
<td><code>adaptive_hash_index</code></td>
</tr> <tr>
<td><code>module_ibuf_system</code></td>
<td><code>change_buffer</code></td>
</tr> <tr>
<td><code>module_srv</code></td>
<td><code>server</code></td>
</tr> <tr>
<td><code>module_ddl</code></td>
<td><code>ddl</code></td>
</tr> <tr>
<td><code>module_dml</code></td>
<td><code>dml</code></td>
</tr> <tr>
<td><code>module_log</code></td>
<td><code>recovery</code></td>
</tr> <tr>
<td><code>module_icp</code></td>
<td><code>icp</code></td>
</tr> </table> </div>
<p>There are four counters in the <code>icp</code> subsystem:</p> <pre class="fixed" data-language="sql">SELECT NAME, SUBSYSTEM FROM INNODB_METRICS WHERE SUBSYSTEM='icp';
+------------------+-----------+
| NAME             | SUBSYSTEM |
+------------------+-----------+
| icp_attempts     | icp       |
| icp_no_match     | icp       |
| icp_out_of_range | icp       |
| icp_match        | icp       |
+------------------+-----------+
</pre>
<p>To enable them all, use the associated module name from the table above, <code>module_icp</code>.</p> <pre class="fixed" data-language="sql">SET GLOBAL innodb_monitor_enable = module_icp;
</pre>
<p>The <code>%</code> wildcard, used to represent any number of characters, can also be used when naming counters, for example:</p> <pre class="fixed" data-language="sql">SET GLOBAL innodb_monitor_enable = 'buffer%'
</pre>
<p>To disable counters, use the <a href="../innodb-system-variables/index#innodb_monitor_disable">innodb_monitor_disable</a> system variable, using the same naming rules as described above for enabling.</p> <p>Counter status is not persistent, and will be reset when the server restarts. It is possible to use the options on the command line, or the <code>innodb_monitor_enable</code> option only in a configuration file.</p> <h2 class="anchored_heading" id="resetting-counters">Resetting counters</h2> <p>Counters can also be reset. Resetting sets all the <code>*_COUNT_RESET</code> values to zero, while leaving the <code>*_COUNT</code> values, which perform counts since the counter was enabled, untouched. Resetting is performed with the <a href="../innodb-system-variables/index#innodb_monitor_reset">innodb_monitor_reset</a> (for individual counters) and <a href="../innodb-system-variables/index#innodb_monitor_reset_all">innodb_monitor_reset_all</a> (for all counters) system variables.</p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/information-schema-innodb_metrics-table/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/information-schema-innodb_metrics-table/</a>
  </p>
</div>
