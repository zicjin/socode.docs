<h1>Configuring ColumnStore Cross-Engine Joins</h1> <div> <div class="node creole"> <div class="answer formatted"> <p>MariaDB ColumnStore allows columnstore tables to be joined with non-columnstore tables (e.g. <a href="../myisam/index">MyISAM</a> tables) within a query. The non-columnstore table may be on the MariaDB ColumnStore system OR on an external server that supports MariaDB client connections.</p> <p>To enable this process, the &lt;CrossEngineSupport&gt; section in Columnstore.xml is configured with connection information.</p> <p>The following is an example entry in the Columnstore.XML configuration file to gain access to joined tables Single Server MariaDB ColumnStore install. The Host needs to be either 127.0.0.1 or 'localhost':</p> <pre class="fixed" data-language="sql">&lt;CrossEngineSupport&gt;
       &lt;Host&gt;127.0.0.1&lt;/Host&gt;
       &lt;Port&gt;3306&lt;/Port&gt;
       &lt;User&gt;mydbuser&lt;/User&gt;
       &lt;Password&gt;pwd&lt;/Password&gt;
&lt;/CrossEngineSupport&gt;
</pre>
<p>For a Multi-Node MariaDB Columnstore Installation, the Host needs to be the IP Address of the User-Module #1 or the Combination User/Performance Module #1.</p> <p>If the MariaDB Client is is running on an external Server, then it would be the IP Address of that server.</p> <p>For version 1.2.0 onwards the additional options in the &lt;CrossEngineSupport&gt; section are supported to add SSL/TLS encryption to the connections:</p> <pre class="fixed" data-language="sql">       &lt;TLSCA&gt;&lt;/TLSCA&gt;
       &lt;TLSClientCert&gt;&lt;/TLSClientCert&gt;
       &lt;TLSClientKey&gt;&lt;/TLSClientKey&gt;
</pre>
<p>This change should be made while the ColumnStore server is down. In a multi node deployment, the change should be made on the PM1 node only as this will be replicated to other instances upon restart.</p> <p>Check here on how to make changes via the command line to Columnstore.xml:</p> <p><a href="../mariadb/columnstore-configuration-file-update-and-distribution">https://mariadb.com/kb/en/mariadb/columnstore-configuration-file-update-and-distribution</a></p> <h2 class="anchored_heading" id="troubleshooting">Troubleshooting</h2> <p><strong> ERROR 1815 (HY000): Internal error: IDB-8001: CrossEngineSupport section in Columnstore.xml is not properly configured </strong> <br></p> <ul start="1"><li>Confirm that Columnstore.xml was correctly updated on pm1 and the server restarted. </li></ul> <p><strong> ERROR 1815 (HY000): Internal error: fatal error in drizzle_con_connect()(23)(23) </strong></p> <ul start="1"><li>Confirm that the values specified for CrossEngineSupport in ColumnStore.xml are correct for the login to be used. </li></ul> <p><strong> ERROR 1815 (HY000): Internal error: fatal error executing query in crossengine client lib(17)(17) </strong></p> <ul start="1"><li>Confirm that the login used has create temporary tables permission on infinidb_vtable: </li></ul> <pre data-language="sql">
grant create temporary tables on infinidb_vtable.* to mydbuser@127.0.0.1;
</pre> <ul start="1"><li>Confirm that the login used has grant SELECT on the table referenced in the cross engine join. Verify by attempting to connect from each UM using mcsmysql and query the table you want to reference: </li></ul> <pre data-language="sql">
mcsmysql -u mydbuser -p -h 127.0.0.1 
&gt; use mydb;
&gt; select * from innodb_table limit 10;
</pre> <h2 class="anchored_heading" id="notes">Notes</h2> <ul start="1"><li>Cross engine will not work against a MyISAM/Aria table that has 0 or 1 rows in it. This is due to MariaDB's optimizer shortcut for this specific condition. We recommend using InnoDB instead of MyISAM/Aria for this case.</li></ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/configuring-columnstore-cross-engine-joins/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/configuring-columnstore-cross-engine-joins/</a>
  </p>
</div>
