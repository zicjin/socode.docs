<h1>SPATIAL INDEX</h1> <div> <div class="node creole"> <div class="answer formatted">  <h2 class="anchored_heading" id="description">Description</h2> <p>On <a href="../myisam/index">MyISAM</a> and <a href="../aria/index">Aria</a> tables, as well as on InnoDB tables from <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a>, MariaDB can create spatial indexes (an R-tree index) using syntax similar to that for creating regular indexes, but extended with the <code>SPATIAL</code> keyword. Currently, columns in spatial indexes must be declared <code>NOT NULL</code>.</p> <p>Spatial indexes can be created when the table is created, or added after the fact like so:</p> <ul start="1">
<li>with <a href="../create-table/index">CREATE TABLE</a>: <pre class="fixed" data-language="sql">CREATE TABLE geom (g GEOMETRY NOT NULL, SPATIAL INDEX(g));
</pre> </li>
<li>with <a href="../alter-table/index">ALTER TABLE</a>: <pre class="fixed" data-language="sql">ALTER TABLE geom ADD SPATIAL INDEX(g);
</pre> </li>
<li>with <a href="../create-index/index">CREATE INDEX</a>: <pre class="fixed" data-language="sql">CREATE SPATIAL INDEX sp_index ON geom (g);
</pre> </li>
</ul> <p><code>SPATIAL INDEX</code> creates an <code>R-tree</code> index. For storage engines that support non-spatial indexing of spatial columns, the engine creates a <code>B-tree</code> index. A <code>B-tree</code> index on spatial values is useful for exact-value lookups, but not for range scans.</p> <p>For more information on indexing spatial columns, see <a href="../create-index/index">CREATE INDEX</a>.</p> <p>To drop spatial indexes, use <a href="../alter-table/index">ALTER TABLE</a> or <a href="../drop-index/index">DROP INDEX</a>:</p> <ul start="1">
<li>with <a href="../alter-table/index">ALTER TABLE</a>: <pre class="fixed" data-language="sql">ALTER TABLE geom DROP INDEX g;
</pre> </li>
<li>with <a href="../drop-index/index">DROP INDEX</a>: <pre class="fixed" data-language="sql">DROP INDEX sp_index ON geom;
</pre> </li>
</ul> <h3 class="anchored_heading" id="data-at-rest-encyption">Data-at-Rest Encyption</h3> <p>Before <a href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">MariaDB 10.4.3</a>, InnoDB's spatial indexes could not be <a href="../encryption/index">encrypted</a>. If an InnoDB table was encrypted and if it contained spatial indexes, then those indexes would be unencrypted.</p> <p>In <a href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">MariaDB 10.4.3</a> and later, if <code><a href="../innodb-system-variables/index#innodb_checksum_algorithm">innodb_checksum_algorithm</a></code> is set to <code>full_crc32</code> or <code>strict_full_crc32</code>, and if the table does not use <code><a href="../xtradbinnodb-storage-formats/index">ROW_FORMAT=COMPRESSED</a></code>, then InnoDB spatial indexes will be encrypted if the table is encrypted.</p> <p>See <a href="https://jira.mariadb.org/browse/MDEV-12026">MDEV-12026</a> for more information.</p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/spatial/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/spatial/</a>
  </p>
</div>
