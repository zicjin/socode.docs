<h1>FirstMatch Strategy</h1> <div> <div class="node creole"> <div class="answer formatted">  <p><code>FirstMatch</code> is an execution strategy for <a href="../semi-join-subquery-optimizations/index">Semi-join subqueries</a>.</p> <h2 class="anchored_heading" id="the-idea">The idea</h2> <p>It is very similar to how <code>IN/EXISTS</code> subqueries were executed in MySQL 5.x. </p> <p>Let's take the usual example of a search for countries with big cities:</p> <pre class="fixed" data-language="sql">select * from Country 
where Country.code IN (select City.Country 
                       from City 
                       where City.Population &gt; 1*1000*1000)
      and Country.continent='Europe'
</pre>
<p>Suppose, our execution plan is to find countries in Europe, and then, for each found country, check if it has any big cities. Regular inner join execution will look as follows:</p> <p><img src="data:image/png;base64,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" alt="firstmatch-inner-join" title="firstmatch-inner-join"></p> <p>Since Germany has two big cities (in this diagram), it will be put into the query output twice. This is not correct, <code class="fixed" style="white-space:pre-wrap">SELECT ... FROM Country</code> should not produce the same country record twice. The <code>FirstMatch</code> strategy avoids the production of duplicates by short-cutting execution as soon as the first genuine match is found:</p> <p><img src="data:image/png;base64,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" alt="firstmatch-firstmatch" title="firstmatch-firstmatch"></p> <p>Note that the short-cutting has to take place after "Using where" has been applied. It would have been wrong to short-cut after we found Trier.</p> <h2 class="anchored_heading" id="firstmatch-in-action">FirstMatch in action</h2> <p>The <code>EXPLAIN</code> for the above query will look as follows:</p> <pre class="fixed" data-language="sql">MariaDB [world]&gt; explain select * from Country  where Country.code IN (select City.Country from City where City.Population &gt; 1*1000*1000) and Country.continent='Europe';
+----+-------------+---------+------+--------------------+-----------+---------+--------------------+------+----------------------------------+
| id | select_type | table   | type | possible_keys      | key       | key_len | ref                | rows | Extra                            |
+----+-------------+---------+------+--------------------+-----------+---------+--------------------+------+----------------------------------+
|  1 | PRIMARY     | Country | ref  | PRIMARY,continent  | continent | 17      | const              |   60 | Using index condition            |
|  1 | PRIMARY     | City    | ref  | Population,Country | Country   | 3       | world.Country.Code |   18 | Using where; FirstMatch(Country) |
+----+-------------+---------+------+--------------------+-----------+---------+--------------------+------+----------------------------------+
2 rows in set (0.00 sec)

</pre>
<p><code class="fixed" style="white-space:pre-wrap">FirstMatch(Country)</code> in the Extra column means that <em>as soon as we have produced one matching record combination, short-cut the execution and jump back to the Country</em> table.</p> <p><code>FirstMatch</code>'s query plan is very similar to one you would get in MySQL:</p> <pre class="fixed" data-language="sql">MySQL [world]&gt; explain select * from Country  where Country.code IN (select City.Country from City where City.Population &gt; 1*1000*1000) and Country.continent='Europe';
+----+--------------------+---------+----------------+--------------------+-----------+---------+-------+------+------------------------------------+
| id | select_type        | table   | type           | possible_keys      | key       | key_len | ref   | rows | Extra                              |
+----+--------------------+---------+----------------+--------------------+-----------+---------+-------+------+------------------------------------+
|  1 | PRIMARY            | Country | ref            | continent          | continent | 17      | const |   60 | Using index condition; Using where |
|  2 | DEPENDENT SUBQUERY | City    | index_subquery | Population,Country | Country   | 3       | func  |   18 | Using where                        |
+----+--------------------+---------+----------------+--------------------+-----------+---------+-------+------+------------------------------------+
2 rows in set (0.01 sec)
</pre>
<p>and these two particular query plans will execute in the same time. </p> <h2 class="anchored_heading" id="difference-between-firstmatch-and-in-exists">Difference between FirstMatch and IN-&gt;EXISTS</h2> <p>The general idea behind the <code>FirstMatch</code> strategy is the same as the one behind the <code>IN-&gt;EXISTS</code> transformation, however, <code>FirstMatch</code> has several advantages:</p> <ul start="1"><li>Equality propagation works across semi-join bounds, but not subquery bounds. Therefore, converting a subquery to semi-join and using <code>FirstMatch</code> can still give a better execution plan. (TODO example) </li></ul> <ul start="1"><li>There is only one way to apply the <code>IN-&gt;EXISTS</code> strategy and MySQL will do it unconditionally. With <code>FirstMatch</code>, the optimizer can make a choice between whether it should run the <code>FirstMatch</code> strategy as soon as all tables used in the subquery are in the join prefix, or at some later point in time. (TODO: example) </li></ul> <h2 class="anchored_heading" id="firstmatch-factsheet">FirstMatch factsheet</h2> <ul start="1">
<li>The <code>FirstMatch</code> strategy works by executing the subquery and short-cutting its execution as soon as the first match is found. </li>
<li>This means, subquery tables must be after all of the parent select's tables that are referred from the subquery predicate. </li>
<li>
<code>EXPLAIN</code> shows <code>FirstMatch</code> as "<code>FirstMatch(tableN)</code>". </li>
<li>The strategy can handle correlated subqueries. </li>
<li>But it cannot be applied if the subquery has meaningful <code>GROUP BY</code> and/or aggregate functions. </li>
<li>Use of the <code>FirstMatch</code> strategy is controlled with the <code class="fixed" style="white-space:pre-wrap">firstmatch=on|off</code> flag in the <a href="../server-system-variables/index#optimizer_switch">optimizer_switch</a> variable. </li>
</ul> <h2 class="anchored_heading" id="see-also">See also</h2> <ul start="1"><li>
<a href="../semi-join-subquery-optimizations/index">Semi-join subquery optimizations</a> </li></ul> <p>In-depth material:</p> <ul start="1"><li><a href="http://forge.mysql.com/worklog/task.php?id=3750">WL#3750: initial specification for FirstMatch</a></li></ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/firstmatch-strategy/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/firstmatch-strategy/</a>
  </p>
</div>
