<h1>Semi-join Subquery Optimizations</h1> <div> <div class="node creole"> <div class="answer formatted">  <p>MariaDB has a set of optimizations specifically targeted at <em>semi-join subqueries</em>.</p> <h2 class="anchored_heading" id="what-is-a-semi-join-subquery">What is a semi-join subquery</h2> <p>A semi-join subquery has a form of</p> <pre class="fixed" data-language="sql">SELECT ... FROM outer_tables WHERE expr IN (SELECT ... FROM inner_tables ...) AND ...
</pre>
<p>that is, the subquery is an IN-subquery and it is located in the WHERE clause. The most important part here is</p> <p><em>with semi-join subquery, we're only interested in records of outer_tables that have matches in the subquery</em></p> <p>Let's see why this is important. Consider a semi-join subquery:</p> <pre class="fixed" data-language="sql">select * from Country 
where 
  Continent='Europe' and 
  Country.Code in (select City.country 
                   from City 
                   where City.Population&gt;1*1000*1000);
</pre>
<p>One can execute it "naturally", by starting from countries in Europe and checking if they have populous Cities:</p> <p><img src="data:image/png;base64,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" alt="semi-join-outer-to-inner" title="semi-join-outer-to-inner"></p> <p>The semi-join property also allows "backwards" execution: we can start from big cities, and check which countries they are in:</p> <p><img src="data:image/png;base64,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" alt="semi-join-inner-to-outer" title="semi-join-inner-to-outer"></p> <p>To contrast, let's change the subquery to be non-semi-join:</p> <pre class="fixed" data-language="sql">select * from Country 
where 
   Country.Continent='Europe' and 
   (Country.Code in (select City.country 
                   from City where City.Population&gt;1*1000*1000) 
    or Country.SurfaceArea &gt; 100*1000  -- Added this part
   );
</pre>
<p>It is still possible to start from countries, and then check</p> <ul start="1">
<li>if a country has any big cities </li>
<li>if it has a large surface area: </li>
</ul> <p><img src="data:image/png;base64,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" alt="non-semi-join-subquery" title="non-semi-join-subquery"></p> <p>The opposite, city-to-country way is not possible. This is not a semi-join.</p> <h3 class="anchored_heading" id="difference-from-inner-joins">Difference from inner joins</h3> <p>Semi-join operations are similar to regular relational joins. There is a difference though: with semi-joins, you don't care how many matches an inner table has for an outer row. In the above countries-with-big-cities example, Germany will be returned once, even if it has three cities with populations of more than one million each.</p> <h2 class="anchored_heading" id="semi-join-optimizations-in-mariadb">Semi-join optimizations in MariaDB</h2> <p>MariaDB uses semi-join optimizations to run IN subqueries starting from <a href="../what-is-mariadb-53/index">MariaDB 5.3</a>. Starting in <a href="https://mariadb.com/kb/en/mariadb-533-release-notes/">MariaDB 5.3.3</a>, Semi-join subquery optimizations are enabled by default. You can disable them by turning off their <a href="../server-system-variables/index#optimizer_switch">optimizer_switch</a> like so:</p> <pre class="fixed" data-language="sql">SET optimizer_switch='semijoin=off'
</pre>
<p>MariaDB has five different semi-join execution strategies:</p> <ul start="1">
<li>
<a href="../table-pullout-optimization/index">Table pullout optimization</a> </li>
<li>
<a href="../firstmatch-strategy/index">FirstMatch execution strategy</a> </li>
<li>
<a href="../semi-join-materialization-strategy/index">Semi-join Materialization execution strategy</a> </li>
<li>
<a href="../loosescan-strategy/index">LooseScan execution strategy</a> </li>
<li>
<a href="../duplicateweedout-strategy/index">DuplicateWeedout execution strategy</a> </li>
</ul> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../what-is-mariadb-53/index">What is MariaDB 5.3</a> </li>
<li>
<a href="../subquery-optimizations-map/index">Subquery Optimizations Map</a> </li>
<li>
<a href="http://s.petrunia.net/blog/?p=35">"Observations about subquery use cases"</a> blog post </li>
<li>
<a href="http://en.wikipedia.org/wiki/Semijoin">http:<em>en.wikipedia.org/wiki/Semijoin</em></a> </li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/semi-join-subquery-optimizations/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/semi-join-subquery-optimizations/</a>
  </p>
</div>
