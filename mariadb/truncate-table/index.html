<h1>TRUNCATE TABLE</h1> <div> <div class="node creole"> <div class="answer formatted"> <h2 class="anchored_heading" id="syntax">Syntax</h2> <pre class="fixed" data-language="sql">TRUNCATE [TABLE] tbl_name
  [WAIT n | NOWAIT]
</pre> <h2 class="anchored_heading" id="description">Description</h2> <p><code>TRUNCATE TABLE</code> empties a table completely. It requires the <code>DROP</code> privilege. See <code><a href="../grant/index">GRANT</a></code>.</p> <p><code>tbl_name</code> can also be specified in the form <code>db_name</code>.<code>tbl_name</code> (see <a href="../identifier-qualifiers/index">Identifier Qualifiers</a>).</p> <p>Logically, <code>TRUNCATE TABLE</code> is equivalent to a <code><a href="../delete/index">DELETE</a></code> statement that deletes all rows, but there are practical differences under some circumstances.</p> <p><code>TRUNCATE TABLE</code> will fail for an <a href="../innodb/index">InnoDB table</a> if any FOREIGN KEY constraints from other tables reference the table, returning the error:</p> <pre class="fixed" data-language="sql">ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constraint
</pre>
<p>Foreign Key constraints between columns in the same table are permitted.</p> <p>For an InnoDB table, if there are no <code>FOREIGN KEY</code> constraints, InnoDB performs fast truncation by dropping the original table and creating an empty one with the same definition, which is much faster than deleting rows one by one. The <a href="../auto_increment/index">AUTO_INCREMENT</a> counter is reset by <code>TRUNCATE TABLE</code>, regardless of whether there is a <code>FOREIGN KEY</code> constraint.</p> <p>The count of rows affected by <code>TRUNCATE TABLE</code> is accurate only when it is mapped to a <code>DELETE</code> statement.</p> <p>For other storage engines, <code>TRUNCATE TABLE</code> differs from <code>DELETE</code> in the following ways:</p> <ul start="1">
<li>Truncate operations drop and re-create the table, which is much faster than deleting rows one by one, particularly for large tables. </li>
<li>Truncate operations cause an implicit commit. </li>
<li>Truncation operations cannot be performed if the session holds an active table lock. </li>
<li>Truncation operations do not return a meaningful value for the number of deleted rows. The usual result is "0 rows affected," which should be interpreted as "no information." </li>
<li>As long as the table format file <code>tbl_name.frm</code> is valid, the table can be re-created as an empty table with <code>TRUNCATE TABLE</code>, even if the data or index files have become corrupted. </li>
<li>The table handler does not remember the last used <code><a href="../auto_increment/index">AUTO_INCREMENT</a></code> value, but starts counting from the beginning. This is true even for MyISAM and InnoDB, which normally do not reuse sequence values. </li>
<li>When used with partitioned tables, <code>TRUNCATE TABLE</code> preserves the partitioning; that is, the data and index files are dropped and re-created, while the partition definitions (.par) file is unaffected. </li>
<li>Since truncation of a table does not make any use of <code>DELETE</code>, the <code>TRUNCATE</code> statement does not invoke <code>ON DELETE</code> triggers. </li>
<li>
<code>TRUNCATE TABLE</code> will only reset the values in the <a href="../list-of-performance-schema-tables/index">Performance Schema summary tables</a> to zero or null, and will not remove the rows. </li>
</ul> <p>For the purposes of binary logging and <a href="../replication/index">replication</a>, <code>TRUNCATE TABLE</code> is treated as <code>DROP TABLE</code> followed by <code>CREATE TABLE</code> (DDL rather than DML).</p> <p><code>TRUNCATE TABLE</code> does not work on <a href="../views/index">views</a>. Currently, <code>TRUNCATE TABLE</code> drops all historical records from a <a href="../system-versioned-tables/index">system-versioned table</a>.</p> <div class="mariadb_from_10_3_0 mariadb from_10_3_0 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1030-release-notes/">10.3.0</a></strong><h4 class="anchored_heading" id="waitnowait">WAIT/NOWAIT</h4> <p>Set the lock wait timeout. See <a href="../wait-and-nowait/index">WAIT and NOWAIT</a>.</p> <h3 class="anchored_heading" id="oracle-mode">Oracle-mode</h3> <p>Oracle-mode from <a href="../what-is-mariadb-103/index">MariaDB 10.3</a> permits the optional keywords REUSE STORAGE or DROP STORAGE to be used.</p> <pre class="fixed" data-language="sql">TRUNCATE [TABLE] tbl_name [{DROP | REUSE} STORAGE]
</pre>
<p>These have no effect on the operation.</p> </div>
<h3 class="anchored_heading" id="performance">Performance</h3> <p><code>TRUNCATE TABLE</code> is faster than <a href="delete-table">DELETE</a>, because it drops and re-creates a table.</p> <p>With <a href="../innodb/index">XtraDB/InnoDB</a>, <code>TRUNCATE TABLE</code> is slower if <a href="../xtradbinnodb-server-system-variables/index#innodb_file_per_table">innodb_file_per_table=ON</a> is set (the default since <a href="../what-is-mariadb-55/index">MariaDB 5.5</a>). This is because <code>TRUNCATE TABLE</code> unlinks the underlying tablespace file, which can be an expensive operation. See <a href="https://jira.mariadb.org/browse/MDEV-8069">MDEV-8069</a> for more details.</p> <p>The performance issues with <a href="../xtradbinnodb-server-system-variables/index#innodb_file_per_table">innodb_file_per_table=ON</a> can be exacerbated in cases where the <a href="../xtradbinnodb-buffer-pool/index">InnoDB buffer pool</a> is very large and <a href="../xtradbinnodb-server-system-variables/index#innodb_adaptive_hash_index">innodb_adaptive_hash_index=ON</a> is set. In that case, using <a href="../drop-table/index">DROP TABLE</a> followed by <a href="../create-table/index">CREATE TABLE</a> instead of <code>TRUNCATE TABLE</code> may perform better. Setting <a href="../xtradbinnodb-server-system-variables/index#innodb_adaptive_hash_index">innodb_adaptive_hash_index=OFF</a> (it defaults to ON before <a href="../what-is-mariadb-105/index">MariaDB 10.5</a>) can also help. In <a href="https://mariadb.com/kb/en/mariadb-10219-release-notes/">MariaDB 10.2.19</a> and later, this performance can also be improved by setting <a href="../xtradbinnodb-server-system-variables/index#innodb_safe_truncate">innodb_safe_truncate=OFF</a>. See <a href="https://jira.mariadb.org/browse/MDEV-9459">MDEV-9459</a> for more details.</p> <p>Setting <a href="../xtradbinnodb-server-system-variables/index#innodb_adaptive_hash_index">innodb_adaptive_hash_index=OFF</a> can also improve <code>TRUNCATE TABLE</code> performance in general. See <a href="https://jira.mariadb.org/browse/MDEV-16796">MDEV-16796</a> for more details.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../truncate/index">TRUNCATE function</a> </li>
<li>
<a href="../xtradbinnodb-server-system-variables/index#innodb_safe_truncate">innodb_safe_truncate</a> system variable </li>
<li><a href="../sql_modeoracle-from-mariadb-103/index#simple-syntax-compatibility">Oracle mode from MariaDB 10.3</a></li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/truncate-table/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/truncate-table/</a>
  </p>
</div>
