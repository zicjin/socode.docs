<h1>MariaDB ColumnStore System Usage</h1> <div> <div class="node creole"> <div class="answer formatted">  <p>Once the MariaDB ColumnStore system installation has been completed, these are some of the basic commands to access the MariaDB ColumnStore Admin and MySQL Console</p> <h2 class="anchored_heading" id="non-root-user-mariadb-columnstore-admin-console">Non-root user MariaDB ColumnStore Admin console</h2> <p>The MariaDB ColumnStore Admin console that is run from the command line console as root user can be setup to be run for a non-root user, if you choose to do so. </p> <p>This would require a change in the /etc/sudoers file.</p> <p>After this line:</p> <pre class="fixed" data-language="sql"># %wheel	ALL=(ALL)	NOPASSWD: ALL
</pre>
<p>Add, where 'user' is the non-root username:</p> <pre class="fixed" data-language="sql">user	  ALL=(ALL)       NOPASSWD: /usr/local/mariadb/columnstore/bin/mcsadmin
</pre>
<p>To run the command, you would need to enter the full path or you can setup the alias's by entering the following command:</p> <pre class="fixed" data-language="sql">.  /usr/local/mariadb/columnstore/bin/columnstoreAlias
</pre>
<p>Now you can run both console commands for a non-root user account: 'mcsmysql' and 'mcsadmin' </p> <p>NOTE: The same setup can be done for other commands like 'cpimport'.</p> <h2 class="anchored_heading" id="mariadb-columnstore-aliases">MariaDB ColumnStore aliases</h2> <p>To configure the MariaDB ColumnStore Aliases, run the following:</p> <pre class="fixed" data-language="sql">. /usr/local/mariadb/columnstore/bin/columnstoreAlias
</pre>
<p>Note: This script will also be added to the /root/.bash_profile. The following alias will be created after running the Alias:</p> <pre class="fixed" data-language="sql">mcsmysql = /usr/local/mariadb/columnstore/mysql/bin/mysql 
  --defaults-file=/usr/local/mariadb/columnstore/mysql/my.cnf 
  -u root
</pre>
<p>mcsmysql: Launches the MariaDB ColumnStore MySQL Console</p> <pre class="fixed" data-language="sql">mcsadmin = /usr/local/mariadb/columnstore/bin/mcsadmin
</pre>
<p>mcsadmin: Launches the MariaDB ColumnStore Admin Console</p> <h2 class="anchored_heading" id="mcsadmin">mcsadmin</h2> <p>The MariaDB ColumnStore Management Console allows you to configure, monitor, and manage the MariaDB ColumnStore system and servers. For more detailed information, see <a href="../mariadb-columnstore-administrative-console/index">MariaDB ColumnStore Administrative Console</a>.</p> <p>These 2 examples will provide a full command list</p> <pre class="fixed" data-language="sql">mcsadmin help
</pre>
<p>Or</p> <pre class="fixed" data-language="sql">mcsadmin
mcsadmin&gt; help
</pre>
<p>To get a verbose help on a specific command, enter:</p> <pre class="fixed" data-language="sql">mcsadmin help getsysteminfo
</pre>
<p>NOTE: You can also short-cut commands, both of these do the same command:</p> <pre class="fixed" data-language="sql">mcsadmin getsysteminfo
mcsadmin getsystemi
</pre>
<p>Check system status</p> <pre class="fixed" data-language="sql">mcsadmin getsystemstatus

getsystemstatus Tue Jan 12 08:07:02 2012
System mymcs1
System and Module statuses
Component    Status                    Last Status Change
------------ ----------------------   ------------------------
System       ACTIVE                    Mon Jan 11 17:54:46 2012
Module pm1   ACTIVE                    Mon Jan 11 17:54:45 2012
</pre>
<p>Check system info, which provides process status</p> <pre class="fixed" data-language="sql">mcsadmin getsysteminfo
</pre>
<h3 class="anchored_heading" id="shutting-down-the-system">Shutting down the system</h3> <p>When you perform a shutdown, all MariaDB ColumnStore processes are stopped. This command would be used mainly when performing software upgrades.</p> <p>To shutdown the system:</p> <ul start="1">
<li>From the MariaDB ColumnStore Console, type shutdownSystem </li>
<li>Press y </li>
</ul> <pre class="fixed" data-language="sql">mcsadmin shutdownSystem y
</pre>
<h3 class="anchored_heading" id="stopping-the-system">Stopping the system</h3> <p>Stopping the system stops the application processes. The platform process that supports the Management Console and System Alarms remain active. If you want to stop the system or server and immediately start the processes again (typically if the system or a server hangs), you can restart the system or servers as shown in the section “Restarting the system”.</p> <p>To stop the system:</p> <ul>
<li>From the MariaDB ColumnStore Console, type stopSystem </li>
<li>Press y </li>
</ul> <pre class="fixed" data-language="sql">mcsadmin stopSystem y
</pre>
<h3 class="anchored_heading" id="starting-the-system-or-modules">Starting the system or modules</h3> <p>You can start the system or module application processes with the following commands:</p> <p>To start the system after a stopSystem:</p> <ul><li>From the MariaDB ColumnStore Console, type startSystem </li></ul> <pre class="fixed" data-language="sql">mcsadmin startSystem
</pre>
<p>To start the system after a shutdownSystem:</p> <p>If its a multi-server system and ssh-keys are not configured between the servers, you will be required to provide the user password for the other servers. If ssh-keys are configured, then password parameter isn't required</p> <ul><li>From the MariaDB ColumnStore Console, type startSystem </li></ul> <pre class="fixed" data-language="sql">mcsadmin startSystem 'user-password'
</pre>
<h3 class="anchored_heading" id="restarting-the-system">Restarting the system</h3> <p>When you want to stop and immediately start application processes, you can perform a restart. You restart the system or modules application processes with the following commands:</p> <p>To restart the system:</p> <ul><li>From the MariaDB ColumnStore Console, type restartSystem </li></ul> <pre class="fixed" data-language="sql">mcsadmin restartSystem
</pre>
<h2 class="anchored_heading" id="logging-into-mariadb-columnstore-mariadb-console">Logging into MariaDB ColumnStore MariaDB console</h2> <p>a Linux prompt:</p> <pre class="fixed" data-language="sql">mcsmysql [optional database name]
</pre>
<h3 class="anchored_heading" id="mariadb-root-user-password">MariaDB Root user password</h3> <p>When a MariaDB Root user password is configured, do the following to access the MariaDB console:</p> <pre class="fixed" data-language="sql">mcsmysql -p'password' [optional database name]
</pre>
<p>Setup this file in the user account where MariaDB ColumnStore was installed, .my.cnf So for root user install, it would be /root/.my.cnf</p> <pre class="fixed" data-language="sql">  [client] 
   user            = root
   password        = 'password'
</pre>
<p>Make sure the permissions are set appropriately:</p> <pre class="fixed" data-language="sql">  # chmod 0600 /root/.my.cnf
</pre>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/password-security-user.html">https://dev.mysql.com/doc/refman/5.7/en/password-security-user.html</a></p> <p>IMPORTANT - If there is no MariaDB Root user password set, make sure there is no .my.cnf file. This could cause failures in install and upgrades if this file exist when no password is set.</p> <h2 class="anchored_heading" id="example-mariadb-columnstore-database-setup">Example MariaDB ColumnStore database setup</h2> <p>Once logged into mcsmysql:</p> <pre class="fixed" data-language="sql">create database mcs;
use mcs;
create table idbtest(col1 int, col2 int) engine=columnstore;
show create table idbtest;
insert into idbtest values (1, 2);
insert into idbtest values (3, 4);
select * from idbtest;
</pre>
<h2 class="anchored_heading" id="importing-data-into-mariadb-columnstore">Importing data into MariaDB ColumnStore</h2> <p>While MariaDB ColumnStore supports multiple ways to get data into the database (individual insert, batch insert, load data infile and import), the most efficient manner to load significant amounts of data into MariaDB ColumnStore is through the import utility. </p> <ul start="1"><li>A delimited import file should be created to match the table that you want to import data to similar to the following. In this example, the file will be saved as idbtest.tbl: </li></ul> <pre class="fixed" data-language="sql">100|1001|
200|2002|
</pre>
<ul start="1">
<li>Save/place this file in a directory </li>
<li>From that same directory, import the rows: </li>
</ul> <pre class="fixed" data-language="sql">/usr/local/mariadb/columnstore/bin/cpimport mcs idbtest idbtest.tbl
</pre>
<h4 class="anchored_heading" id="configuring_to_use_utf-8_character_sets"><code>Configuring_to_use_UTF-8_Character_sets</code></h4> <h2 class="anchored_heading" id="configuring-to-use-utf-8-character-sets">Configuring to use UTF-8 Character sets</h2> <p>MariaDB Columnstore has the ability to support UTF-8 character sets. This profile may be set as a default for the instance or set at the session level.</p> <p>Please refer to the SQL Syntax Guide for the setting UTF-8 profile at the session level.</p> <p>To set UTF-8 profile at the instance level, specify the following in my.cnf and the Columnstore.xml files.</p> <p>my.cnf To configure the MariaDB Locale language, modify the my.cnf file (/usr/local/mariadb/columnstore/mysql):</p> <pre class="fixed" data-language="sql">[client]
default-character-set=utf8
[mysqld]
character-set-server=utf8
collation-server=utf8_general_ci
init-connect='SET NAMES utf8'
</pre>
<p>Columnstore.xml</p> <p>To configure the ColumnStore Locale language, modify the Columnstore.xml files (/usr/local/mariadb/columnstore/etc)</p> <pre class="fixed" data-language="sql">&lt;SystemConfig&gt;
   &lt;SystemLang&gt;en_US.utf8&lt;/SystemLang&gt;
</pre>
<p>where value is a valid locale for the operating system. The recommended setting is en_US.utf8.</p> <p>Alternatively, you can set the value as follows</p> <pre class="fixed" data-language="sql">/usr/local/mariadb/columnstore/bin/setConfig SystemConfig SystemLang en_US.utf8
</pre>
<p>Any tables containing UTF-8 data must have the default character set specified as 'utf8', for example:</p> <pre class="fixed" data-language="sql">create table airports (
code char(3),
airport varchar(100),
city varchar(50),
state char(50),
country char(100),
latitude float,
longitude float
) engine=columnstore default character set=utf8;
</pre>
<h2 class="anchored_heading" id="importing-utf-8-data">Importing UTF-8 data</h2> <p>When using the cpimport utility, the input file must be converted to UTF-8 data. The Linux program iconv is one utility to convert it.</p> <pre class="fixed" data-language="sql">iconv -f ISO-8859-1 -t UTF-8 &lt; input.txt &gt; output.txt
</pre> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/mariadb-columnstore-system-usage/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/mariadb-columnstore-system-usage/</a>
  </p>
</div>
