<h1>Upgrading MariaDB ColumnStore from 1.0.1 to 1.0.2</h1> <div> <div class="node creole"> <div class="answer formatted">  <h2 class="anchored_heading" id="mariadb-columnstore-single-server-software-upgrade-from-101-to-102">MariaDB ColumnStore single server software upgrade from 1.0.1 to 1.0.2</h2> <p>Note: Calpont.xml modifications you manually made are not automatically carried forward on an upgrade. These modifications will need to be incorporated back into .XML once the upgrade has occurred.</p> <p>The previous configuration file will be saved as /usr/local/MariaDB/Columnstore/etc/Calpont.xml.rpmsave.</p> <p>In 1.0.2, the configuration file name was changed to Columnstore.xml. Check the 1.0.2 Release Notes on how to perform the upgrade from the 1.0.1 to the 1.0.2. There is a work-around procedure to follow.</p> <h3 class="anchored_heading" id="upgrade-workaround">Upgrade workaround</h3> <p>After you have completed the part of the package upgrade process (removing the old package and installing the 1.0.2 package), the following file will exist: /usr/local/mariadb/columnstore/etc/Calpont.xml.rpmsave Run the following commands, this is the work-around part that is only required when going from 1.0.0/1.0.1 to 1.0.2</p> <ol start="1">
<li>cd /usr/local/mariadb/columnstore/etc/ </li>
<li>cp Calpont.xml.rpmsave Columnstore.xml.rpmsave </li>
<li>sed -i 's/Calpont Version/Columnstore Version/g' Columnstore.xml.rpmsave </li>
<li>sed -i 's/Calpont.xml/Columnstore.xml/g' Columnstore.xml.rpmsave </li>
<li>sed -i 's/&lt;\/Calpont&gt;/&lt;\/Columnstore&gt;/g' Columnstore.xml.rpmsave Then you can run the install script to upgrade the system: </li>
<li>/usr/local/mariadb/columnstore/bin/postConfigure -u </li>
</ol> <h3 class="anchored_heading" id="choosing-the-type-of-upgrade">Choosing the type of upgrade</h3> <h4 class="anchored_heading" id="root-user-installs">Root User Installs</h4> <h4 class="anchored_heading" id="upgrading-mariadb-columnstore-using-rpms">Upgrading MariaDB ColumnStore using RPMs</h4> <p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p> <p><strong> Download the package mariadb-columnstore-1.0.2-1-centos#.x86_64.rpm.tar.gz to the server where you are installing MariaDB ColumnStore. </strong> Shutdown the MariaDB ColumnStore system: </p> <pre class="fixed" data-language="sql"># mcsadmin shutdownsystem y
</pre>
<ul><li>Unpack the tarball, which will generate a set of RPMs that will reside in the /root/ directory. </li></ul> <p><code>tar -zxf mariadb-columnstore-1.0.2-1-centos#.x86_64.rpm.tar.gz</code></p> <ul start="1"><li>Upgrade the RPMs. The MariaDB ColumnStore software will be installed in /usr/local/. </li></ul> <p>Note: If another version of MariaDB is currently running, this service will need to be stopped before running this command. After the rpm command has been executed, you can restart the service. </p> <pre class="fixed" data-language="sql">rpm -Uvh mariadb-columnstore*.rpm
</pre>
<ul start="1"><li>Run postConfigure using the upgrade option, which will utilize the configuration from the Columnstore.xml,rpmsave </li></ul> <pre class="fixed" data-language="sql"># /usr/local/MariaDB/Columnstore/bin/postConfigure -u
</pre>
<p>For RPM Upgrade, the previous configuration file will be saved as:</p> <p>/usr/local/MariaDB/Columnstore/etc/Columnstore.xml.rpmsave</p> <h3 class="anchored_heading" id="initial-downloadinstall-of-mariadb-columnstore-binary-package">Initial download/install of MariaDB ColumnStore binary package</h3> <p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p> <ul start="1"><li>Download the package into the /usr/local directory -mariadb-columnstore-release#.x86_64.bin.tar.gz (Binary 64-BIT)to the server where you are installing MariaDB ColumnStore. </li></ul> <ul start="1"><li>Shutdown the MariaDB ColumnStore system: </li></ul> <p><code>cc shutdownsystem y</code></p> <ul start="1"><li>Run pre-uninstall script </li></ul> <p><code>/usr/local/MariaDB/Columnstore/bin/pre-uninstall</code></p> <ul start="1"><li>Unpack the tarball, which will generate the /usr/local/ directory. </li></ul> <p><code> tar -zxvf -mariadb-columnstore-release#.x86_64.bin.tar.gz</code></p> <ul start="1"><li>Run post-install scripts </li></ul> <p><code> /usr/local/MariaDB/Columnstore/bin/post-install</code></p> <ul start="1"><li>Run postConfigure using the upgrade option, which will utilize the configuration from the Columnstore.xml,rpmsave </li></ul> <p><code>/usr/local/MariaDB/Columnstore/bin/postConfigure -u</code></p> <div class="cstm-style hidden">
<h3 class="anchored_heading" id="upgrading-mariadb-columnstore-using-the-deb-package">Upgrading MariaDB ColumnStore using the DEB package</h3> <p>A DEB upgrade would be done on a system that supports DEBs like Debian or Ubuntu systems.</p> <p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p> <ul start="1"><li>Download the package into the /root directory </li></ul> <pre class="fixed" data-language="sql">mariadb-columnstore-release#.amd64.deb.tar.gz
</pre>
<p> (DEB 64-BIT) to the server where you are installing MariaDB ColumnStore.</p> <ul start="1"><li>Shutdown the MariaDB ColumnStore system: </li></ul> <pre class="fixed" data-language="sql">cc shutdownsystem y
</pre>
<ul start="1"><li>Unpack the tarball, which will generate DEBs. </li></ul> <pre class="fixed" data-language="sql">tar -zxf mariadb-columnstore-release#.amd64.deb.tar.gz
</pre>
<ul start="1"><li>Remove, purge and install all MariaDB ColumnStore debs </li></ul> <pre class="fixed" data-language="sql">cd /root/
dpkg -r mariadb-columnstore*deb
dpkg -P mariadb-columnstore*deb
</pre>
<ul start="1"><li>Run postConfigure using the upgrade option, which will utilize the configuration from the Calpont.xml,rpmsave </li></ul> <pre class="fixed" data-language="sql">/usr/local/MariaDB/Columnstore/bin/postConfigure -u
</pre>
</div>
<h4 class="anchored_heading" id="non-root-user-installs">Non-Root User Installs</h4> <h3 class="anchored_heading" id="initial-downloadinstall-of-mariadb-columnstore-binary-package">Initial download/install of MariaDB ColumnStore binary package</h3> <p>Upgrade MariaDB ColumnStore as user root on the server designated as PM1:</p> <ul start="1"><li>Download the package into the /home/'non-root-user" directory </li></ul> <p>mariadb-columnstore-release#.x86_64.bin.tar.gz (Binary 64-BIT)to the server where you are installing MariaDB ColumnStore.</p> <ul start="1"><li>Shutdown the MariaDB ColumnStore system: </li></ul> <p><code>cc shutdownsystem y</code></p> <ul start="1"><li>Run pre-uninstall script </li></ul> <p><code> $HOME/MariaDB/Columnstore/bin/pre-uninstall</code></p> <ul start="1"><li>Unpack the tarball, which will generate the $HOME/ directory. </li></ul> <p><code> tar -zxvf -mariadb-columnstore-release#.x86_64.bin.tar.gz</code></p> <ul start="1"><li>Run post-install scripts <ol start="1"><li>$HOME/MariaDB/Columnstore/bin/post-install
</li></ol> </li></ul> <ul start="1"><li>Run postConfigure using the upgrade option, which will utilize the configuration from the Columnstore.xml,rpmsave </li></ul> <p><code> $HOME<em>MariaDB/Columnstore/bin/postConfigure -n</em></code></p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/mariadb-columnstore-10-upgrades-upgrading-mariadb-columnstore-from-101-to-1/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/mariadb-columnstore-10-upgrades-upgrading-mariadb-columnstore-from-101-to-1/</a>
  </p>
</div>
