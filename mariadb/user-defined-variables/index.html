<h1>User-Defined Variables</h1> <div> <div class="node creole"> <div class="answer formatted"> <p> User-defined variables are variables which can be created by the user and exist in the session. This means that no one can access user-defined variables that have been set by another user, and when the session is closed these variables expire. However, these variables can be shared between several queries and <a href="../stored-programs-and-views/index">stored programs</a>.</p> <p>User-defined variables names must be preceded by a single <em>at</em> character (<code>@</code>). While it is safe to use a reserved word as a user-variable name, the only allowed characters are ASCII letters, digits, dollar sign (<code>$</code>), underscore (<code>_</code>) and dot (<code>.</code>). If other characters are used, the name can be quoted in one of the following ways:</p> <ul start="1">
<li>@`var_name` </li>
<li>@'var_name' </li>
<li>@"var_name" </li>
</ul> <p>These characters can be escaped as usual.</p> <p>User-variables names are case insensitive, though they were case sensitive in MySQL 4.1 and older versions.</p> <p>User-defined variables cannot be declared. They can be read even if no value has been set yet; in that case, they are NULL. To set a value for a user-defined variable you can use:</p> <ul start="1">
<li>
<a href="../set/index">SET</a> statement; </li>
<li>
<a href="../assignment-operator/index">:=</a> operator within a SQL statement; </li>
<li>
<a href="../select-into/index">SELECT ... INTO</a>. </li>
</ul> <p>Since user-defined variables type cannot be declared, the only way to force their type is using <a href="../cast/index">CAST()</a> or <a href="../convert/index">CONVERT()</a>:</p> <p>SET @str = CAST(123 AS CHAR(5));</p> <p>If a variable has not been used yet, its value is NULL:</p> <pre class="fixed" data-language="sql">SELECT @x IS NULL;
+------------+
| @x IS NULL |
+------------+
|          1 |
+------------+
</pre>
<p>It is unsafe to read a user-defined variable and set its value in the same statement (unless the command is SET), because the order of these actions is undefined.</p> <p>User-defined variables can be used in most MariaDB's statements and clauses which accept an SQL expression. However there are some exceptions, like the <a href="../select/index#limit">LIMIT</a> clause.</p> <p>They must be used to <a href="../prepare-statement/index">PREPARE</a> a prepared statement:</p> <pre class="fixed" data-language="sql">@sql = 'DELETE FROM my_table WHERE c&gt;1;';
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
</pre>
<p>Another common use is to include a counter in a query:</p> <pre class="fixed" data-language="sql">SET @var = 0;
SELECT a, b, c, (@var:=@var+1) AS counter FROM my_table;
</pre>
<h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../declare-variable/index">DECLARE VARIABLE</a> </li>
<li><a href="../information-schema-user_variables-table/index">Information Schema USER_VARIABLES Table</a></li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/user-defined-variables/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/user-defined-variables/</a>
  </p>
</div>
