<h1>Performance Schema Overview</h1> <div> <div class="node creole"> <div class="answer formatted"> <p> The Performance Schema is a feature for monitoring server performance. <br> <br> <br></p> <h2 class="anchored_heading" id="versions-in-mariadb">Versions in MariaDB</h2> <div class="cstm-style darkheader-nospace-borders">
<table>
<tr>
<th>Performance Schema Version</th>
<th>Introduced</th>
</tr> <tr>
<td>5.6.43</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10038-release-notes/">MariaDB 10.0.38</a></td>
</tr> <tr>
<td>5.6.42</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10037-release-notes/">MariaDB 10.0.37</a></td>
</tr> <tr>
<td>5.6.39</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10034-release-notes/">MariaDB 10.0.34</a></td>
</tr> <tr>
<td>5.6.38</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10033-release-notes/">MariaDB 10.0.33</a></td>
</tr> <tr>
<td>5.6.37</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-10126-release-notes/">MariaDB 10.1.26</a>, <a href="https://mariadb.com/kb/en/mariadb-10032-release-notes/">MariaDB 10.0.32</a>
</td>
</tr> <tr>
<td>5.6.36</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-1027-release-notes/">MariaDB 10.2.7</a>, <a href="https://mariadb.com/kb/en/mariadb-10124-release-notes/">MariaDB 10.1.24</a>, <a href="https://mariadb.com/kb/en/mariadb-10031-release-notes/">MariaDB 10.0.31</a>
</td>
</tr> <tr>
<td>5.6.35</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-10121-release-notes/">MariaDB 10.1.21</a>, <a href="https://mariadb.com/kb/en/mariadb-10029-release-notes/">MariaDB 10.0.29</a>
</td>
</tr> <tr>
<td>5.6.33</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-1025-release-notes/">MariaDB 10.2.5</a>, <a href="https://mariadb.com/kb/en/mariadb-10118-release-notes/">MariaDB 10.1.18</a>, <a href="https://mariadb.com/kb/en/mariadb-10028-release-notes/">MariaDB 10.0.28</a>
</td>
</tr> <tr>
<td>5.6.32</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-10117-release-notes/">MariaDB 10.1.17</a>, <a href="https://mariadb.com/kb/en/mariadb-10027-release-notes/">MariaDB 10.0.27</a>
</td>
</tr> <tr>
<td>5.6.31</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-10115-release-notes/">MariaDB 10.1.15</a>, <a href="https://mariadb.com/kb/en/mariadb-10026-release-notes/">MariaDB 10.0.26</a>
</td>
</tr> <tr>
<td>5.6.30</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-10114-release-notes/">MariaDB 10.1.14</a>, <a href="https://mariadb.com/kb/en/mariadb-10025-release-notes/">MariaDB 10.0.25</a>
</td>
</tr> <tr>
<td>5.6.29</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-10112-release-notes/">MariaDB 10.1.12</a>, <a href="https://mariadb.com/kb/en/mariadb-10024-release-notes/">MariaDB 10.0.24</a>
</td>
</tr> <tr>
<td>5.6.28</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10023-release-notes/">MariaDB 10.0.23</a></td>
</tr> <tr>
<td>5.6.27</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-1018-release-notes/">MariaDB 10.1.8</a> , <a href="https://mariadb.com/kb/en/mariadb-10022-release-notes/">MariaDB 10.0.22</a>
</td>
</tr> <tr>
<td>5.6.26</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-1017-release-notes/">MariaDB 10.1.7</a>, <a href="https://mariadb.com/kb/en/mariadb-10021-release-notes/">MariaDB 10.0.21</a>
</td>
</tr> <tr>
<td>5.6.25</td>
<td>
<a href="https://mariadb.com/kb/en/mariadb-1016-release-notes/">MariaDB 10.1.6</a>, <a href="https://mariadb.com/kb/en/mariadb-10020-release-notes/">MariaDB 10.0.20</a>
</td>
</tr> <tr>
<td>5.6.24</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10018-release-notes/">MariaDB 10.0.18</a></td>
</tr> <tr>
<td>5.6.20</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10013-release-notes/">MariaDB 10.0.13</a></td>
</tr> <tr>
<td>5.6.17</td>
<td><a href="https://mariadb.com/kb/en/mariadb-10011-release-notes/">MariaDB 10.0.11</a></td>
</tr> </table> </div>
<h2 class="anchored_heading" id="introduction">Introduction</h2> <p>It is implemented as a storage engine, and so will appear in the list of storage engines available.</p> <pre class="fixed" data-language="sql">SHOW ENGINES;
+--------------------+---------+----------------------------------+--------------+------+------------+
| Engine             | Support | Comment                          | Transactions | XA   | Savepoints |
+--------------------+---------+----------------------------------+--------------+------+------------+
| ...                |         |                                  |              |      |            |
| PERFORMANCE_SCHEMA | YES     | Performance Schema               | NO           | NO   | NO         |
| ...                |         |                                  |              |      |            |
+--------------------+---------+----------------------------------+--------------+------+------------+
</pre>
<p>However, <code>performance_schema</code> is not a regular storage engine for storing data, it's a mechanism for implementing the Performance Schema feature.</p> <p>The storage engine contains a database called <code>performance_schema</code>, which in turn consists of a number of tables that can be queried with regular SQL statements, returning specific performance information.</p> <pre class="fixed" data-language="sql">USE performance_schema
</pre>
<pre class="fixed" data-language="sql">SHOW TABLES;
+----------------------------------------------------+
| Tables_in_performance_schema                       |
+----------------------------------------------------+
| accounts                                           |
| cond_instances                                     |
| events_stages_current                              |
| events_stages_history                              |
| events_stages_history_long                         |
| events_stages_summary_by_account_by_event_name     |
| events_stages_summary_by_host_by_event_name        |
| events_stages_summary_by_thread_by_event_name      |
| events_stages_summary_by_user_by_event_name        |
| events_stages_summary_global_by_event_name         |
| events_statements_current                          |
| events_statements_history                          |
| events_statements_history_long                     |
| events_statements_summary_by_account_by_event_name |
| events_statements_summary_by_digest                |
| events_statements_summary_by_host_by_event_name    |
| events_statements_summary_by_thread_by_event_name  |
| events_statements_summary_by_user_by_event_name    |
| events_statements_summary_global_by_event_name     |
| events_waits_current                               |
| events_waits_history                               |
| events_waits_history_long                          |
| events_waits_summary_by_account_by_event_name      |
| events_waits_summary_by_host_by_event_name         |
| events_waits_summary_by_instance                   |
| events_waits_summary_by_thread_by_event_name       |
| events_waits_summary_by_user_by_event_name         |
| events_waits_summary_global_by_event_name          |
| file_instances                                     |
| file_summary_by_event_name                         |
| file_summary_by_instance                           |
| host_cache                                         |
| hosts                                              |
| mutex_instances                                    |
| objects_summary_global_by_type                     |
| performance_timers                                 |
| rwlock_instances                                   |
| session_account_connect_attrs                      |
| session_connect_attrs                              |
| setup_actors                                       |
| setup_consumers                                    |
| setup_instruments                                  |
| setup_objects                                      |
| setup_timers                                       |
| socket_instances                                   |
| socket_summary_by_event_name                       |
| socket_summary_by_instance                         |
| table_io_waits_summary_by_index_usage              |
| table_io_waits_summary_by_table                    |
| table_lock_waits_summary_by_table                  |
| threads                                            |
| users                                              |
+----------------------------------------------------+
52 rows in set (0.00 sec)
</pre>
<p>See <a href="../list-of-performance-schema-tables/index">List of Performance Schema Tables</a> for a full list and links to detailed descriptions of each table.</p> <h2 class="anchored_heading" id="activating-the-performance-schema">Activating the Performance Schema</h2> <p>Since <a href="https://mariadb.com/kb/en/mariadb-10012-release-notes/">MariaDB 10.0.12</a>, the performance schema has been disabled by default for performance reasons. You can check its current status by looking at the value of the <code><a href="../performance-schema-system-variables/index#performance_schema">performance_schema</a></code> system variable.</p> <pre class="fixed" data-language="sql">SHOW VARIABLES LIKE 'performance_schema';
+--------------------+-------+
| Variable_name      | Value |
+--------------------+-------+
| performance_schema | ON    |
+--------------------+-------+
</pre>
<p>The performance schema cannot be activated at runtime - it must be set when the server starts by adding the following line in your <code>my.cnf</code> configuration file.</p> <pre class="fixed" data-language="sql">performance_schema=ON
</pre>
<h2 class="anchored_heading" id="enabling-the-performance-schema">Enabling the Performance Schema</h2> <p>You need to set up all consumers (starting collection of data) and instrumentations (what to collect):</p> <pre class="fixed" data-language="sql">UPDATE performance_schema.setup_consumers SET ENABLED = 'YES';
UPDATE performance_schema.setup_instruments SET ENABLED = 'YES', TIMED = 'YES';
</pre>
<p>You can decide what to enable/disable with <code>WHERE NAME like "%what_to_enable"</code>; You can disable instrumentations by setting <code>ENABLED</code> to <code>"NO"</code>.</p> <p>You can also do this in your my.cnf file. The following enables all instrumentation of all stages (computation units) in MariaDB:</p> <pre class="fixed" data-language="sql">[mysqld]
performance_schema=ON
performance-schema-instrument='stage/%=ON'
performance-schema-consumer-events-stages-current=ON
performance-schema-consumer-events-stages-history=ON
performance-schema-consumer-events-stages-history-long=ON
</pre>
<h2 class="anchored_heading" id="listing-performance-schema-variables">Listing Performance Schema Variables</h2> <pre class="fixed" data-language="sql">SHOW VARIABLES LIKE "perf%";
+--------------------------------------------------------+-------+
| Variable_name                                          | Value |
+--------------------------------------------------------+-------+
| performance_schema                                     | ON    |
| performance_schema_accounts_size                       | 100   |
| performance_schema_digests_size                        | 5000  |
| performance_schema_events_stages_history_long_size     | 1000  |
| performance_schema_events_stages_history_size          | 10    |
| performance_schema_events_statements_history_long_size | 1000  |
| performance_schema_events_statements_history_size      | 10    |
| performance_schema_events_waits_history_long_size      | 1000  |
| performance_schema_events_waits_history_size           | 10    |
| performance_schema_hosts_size                          | 100   |
| performance_schema_max_cond_classes                    | 80    |
| performance_schema_max_cond_instances                  | 986   |
| performance_schema_max_digest_length                   | 1024  |
| performance_schema_max_file_classes                    | 50    |
| performance_schema_max_file_handles                    | 32768 |
| performance_schema_max_file_instances                  | 2500  |
| performance_schema_max_mutex_classes                   | 200   |
| performance_schema_max_mutex_instances                 | 5086  |
| performance_schema_max_rwlock_classes                  | 40    |
| performance_schema_max_rwlock_instances                | 2886  |
| performance_schema_max_socket_classes                  | 10    |
| performance_schema_max_socket_instances                | 43    |
| performance_schema_max_stage_classes                   | 160   |
| performance_schema_max_statement_classes               | 191   |
| performance_schema_max_table_handles                   | 2858  |
| performance_schema_max_table_instances                 | 667   |
| performance_schema_max_thread_classes                  | 50    |
| performance_schema_max_thread_instances                | 100   |
| performance_schema_session_connect_attrs_size          | 512   |
| performance_schema_setup_actors_size                   | 100   |
| performance_schema_setup_objects_size                  | 100   |
| performance_schema_users_size                          | 100   |
+--------------------------------------------------------+-------+
</pre>
<p>Note that the "consumer" events are not shown on this list. They can only be enabled at <a href="../mysqld-options/index#performance-schema-options">startup</a>.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../mysqld-options/index#performance-schema-options">Performance schema options</a> </li>
<li>
<code><a href="../show-engine/index">SHOW ENGINE STATUS</a></code> </li>
<li>
<code><a href="../show-profile/index">SHOW PROFILE</a></code> </li>
<li>
<code><a href="https://mariadb.com/analyze-statement">ANALYZE STATEMENT</a></code> </li>
<li>
<a href="https://dev.mysql.com/doc/refman/5.6/en/performance-schema.html">Performance schema in MySQL 5.6</a>. All things here should also work for MariaDB.</li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/performance-schema-overview/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/performance-schema-overview/</a>
  </p>
</div>
