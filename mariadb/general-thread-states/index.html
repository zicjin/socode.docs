<h1>General Thread States</h1> <div> <div class="node creole"> <div class="answer formatted"> <p>This article documents the major general thread states. More specific lists related to <a href="../insert-delayed/index">delayed inserts</a>, <a href="../replication/index">replication</a>, the <a href="../query-cache/index">query cache</a> and the <a href="../events/index">event scheduler</a> are listed in:</p> <ul start="1">
<li>
<a href="../event-scheduler-thread-states/index">Event Scheduler Thread States</a> </li>
<li>
<a href="../query-cache-thread-states/index">Query Cache Thread States</a> </li>
<li>
<a href="../master-thread-states/index">Master Thread States</a> </li>
<li>
<a href="../slave-connection-thread-states/index">Slave Connection Thread States</a> </li>
<li>
<a href="../slave-io-thread-states/index">Slave I/O Thread States</a> </li>
<li>
<a href="../slave-sql-thread-states/index">Slave SQL Thread States</a> </li>
</ul> <p>These correspond to the <code>STATE</code> values listed by the <a href="../show-processlist/index">SHOW PROCESSLIST</a> statement or in the <a href="../information-schema-processlist-table/index">Information Schema PROCESSLIST Table</a> as well as the <code>PROCESSLIST_STATE</code> value listed in the <a href="../performance-schema-threads-table/index">Performance Schema threads Table</a></p> <div class="cstm-style darkheader-nospace-borders">
<table>
<tr>
<th>Value</th>
<th>Description</th>
</tr> <tr>
<td>After create</td>
<td>The function that created (or tried to create) a table (temporary or non-temporary) has just ended.</td>
</tr> <tr>
<td>Analyzing</td>
<td>Calculating table key distributions, such as when running an <a href="../analyze-table/index">ANALYZE TABLE</a> statement.</td>
</tr> <tr>
<td>checking permissions</td>
<td>Checking to see whether the permissions are adequate to perform the statement.</td>
</tr> <tr>
<td>Checking table</td>
<td>
<a href="../sql-commands-check-table/index">Checking</a> the table.</td>
</tr> <tr>
<td>cleaning up</td>
<td>Preparing to reset state variables and free memory after executing a command.</td>
</tr> <tr>
<td>closing tables</td>
<td>Flushing the changes to disk and closing the table. This state will only persist if the disk is full or under extremely high load.</td>
</tr> <tr>
<td>converting HEAP to Aria</td>
<td>Converting an internal <a href="../memory-storage-engine/index">MEMORY</a> temporary table into an on-disk <a href="../aria/index">Aria</a> temporary table.</td>
</tr> <tr>
<td>converting HEAP to MyISAM</td>
<td>Converting an internal <a href="../memory-storage-engine/index">MEMORY</a> temporary table into an on-disk <a href="../myisam/index">MyISAM</a> temporary table.</td>
</tr> <tr>
<td>copy to tmp table</td>
<td>A new table has been created as part of an <a href="../alter-table/index">ALTER TABLE</a> statement, and rows are about to be copied into it.</td>
</tr> <tr>
<td>Copying to group table</td>
<td>Sorting the rows by group and copying to a temporary table, which occurs when a statement has different <a href="../select/index#group-by">GROUP BY</a> and <a href="../select/index#order-by">ORDER BY</a> criteria.</td>
</tr> <tr>
<td>Copying to tmp table</td>
<td>Copying to a temporary table in memory.</td>
</tr> <tr>
<td>Copying to tmp table on disk</td>
<td>Copying to a temporary table on disk, as the resultset is too large to fit into memory.</td>
</tr> <tr>
<td>Creating index</td>
<td>Processing an <a href="../alter-table/index">ALTER TABLE ... ENABLE KEYS</a> for an <a href="../aria/index">Aria</a> or <a href="../myisam/index">MyISAM</a> table.</td>
</tr> <tr>
<td>Creating sort index</td>
<td>Processing a <a href="../select/index">SELECT</a> statement resolved using an internal temporary table.</td>
</tr> <tr>
<td>creating table</td>
<td>Creating a table (temporary or non-temporary).</td>
</tr> <tr>
<td>Creating tmp table</td>
<td>Creating a temporary table (in memory or on-disk).</td>
</tr> <tr>
<td>deleting from main table</td>
<td>Deleting from the first table in a multi-table <a href="../delete/index">delete</a>, saving columns and offsets for use in deleting from the other tables.</td>
</tr> <tr>
<td>deleting from reference tables</td>
<td>Deleting matched rows from secondary reference tables as part of a multi-table <a href="../delete/index">delete</a>.</td>
</tr> <tr>
<td>discard_or_import_tablespace</td>
<td>Processing an <a href="../alter-table/index">ALTER TABLE ... IMPORT TABLESPACE</a> or <a href="../alter-table/index">ALTER TABLE ... DISCARD TABLESPACE</a> statement.</td>
</tr> <tr>
<td>end</td>
<td>State before the final cleanup of an <a href="../alter-table/index">ALTER TABLE</a>, <a href="../create-view/index">CREATE VIEW</a>, <a href="../delete/index">DELETE</a>, <a href="../insert/index">INSERT</a>, <a href="../select/index">SELECT</a>, or <a href="../update/index">UPDATE</a> statement.</td>
</tr> <tr>
<td>executing</td>
<td>Executing a statement.</td>
</tr> <tr>
<td>Execution of init_command</td>
<td>Executing statements specified by the <code>--init_command</code> <a href="../mysql-command-line-client/index">mysql client</a> option.</td>
</tr> <tr>
<td>filling schema table</td>
<td>A table in the <code><a href="../information-schema/index">information_schema</a></code> database is being built.</td>
</tr> <tr>
<td>freeing items</td>
<td>Freeing items from the <a href="../query-cache/index">query cache</a> after executing a command. Usually followed by the <code>cleaning up</code> state.</td>
</tr> <tr>
<td>Flushing tables</td>
<td>Executing a <a href="../flush/index">FLUSH TABLES</a> statement and waiting for other threads to close their tables.</td>
</tr> <tr>
<td>FULLTEXT initialization</td>
<td>Preparing to run a <a href="../full-text-indexes/index">full-text</a> search</td>
</tr> <tr>
<td>init</td>
<td>About to initialize an <a href="../alter-table/index">ALTER TABLE</a>, <a href="../delete/index">DELETE</a>, <a href="../insert/index">INSERT</a>, <a href="../select/index">SELECT</a>, or <a href="../update/index">UPDATE</a> statement. Could be performaing <a href="../query-cache/index">query cache</a> cleanup, or flushing the <a href="../binary-log/index">binary log</a> or InnoDB log.</td>
</tr> <tr>
<td>Killed</td>
<td>Thread will abort next time it checks the kill flag. Requires waiting for any locks to be released.</td>
</tr> <tr>
<td>Locked</td>
<td>Query has been locked by another query.</td>
</tr> <tr>
<td>logging slow query</td>
<td>Writing statement to the <a href="../slow-query-log/index">slow query log</a>.</td>
</tr> <tr>
<td>NULL</td>
<td>State used for <a href="../show-processlist/index">SHOW PROCESSLIST</a>.</td>
</tr> <tr>
<td>login</td>
<td>Connection thread has not yet been authenticated.</td>
</tr> <tr>
<td>manage keys</td>
<td>Enabling or disabling a table index.</td>
</tr> <tr>
<td>Opening table[s]</td>
<td>Trying to open a table. Usually very quick unless the limit set by <a href="../server-system-variables/index#table_open_cache">table_open_cache</a> has been reached, or an <a href="../alter-table/index">ALTER TABLE</a> or <a href="../lock-tables-and-unlock-tables/index">LOCK TABLE</a> is in progress.</td>
</tr> <tr>
<td>optimizing</td>
<td>Server is performing initial optimizations in for a query.</td>
</tr> <tr>
<td>preparing</td>
<td>State occurring during query optimization.</td>
</tr> <tr>
<td>Purging old relay logs</td>
<td>Relay logs that are no longer needed are being removed.</td>
</tr> <tr>
<td>query end</td>
<td>Query has finished being processed, but items have not yet been freed (the <code>freeing items</code> state.</td>
</tr> <tr>
<td>Reading file</td>
<td>Server is reading the file (for example during <a href="../load-data-infile/index">LOAD DATA INFILE</a>).</td>
</tr> <tr>
<td>Reading from net</td>
<td>Server is reading a network packet.</td>
</tr> <tr>
<td>Removing duplicates</td>
<td>Duplicated rows being removed before sending to the client. This happens when <code>SELECT DISTINCT</code> is used in a way that the distinct operation could not be optimized at an earlier point.</td>
</tr> <tr>
<td>removing tmp table</td>
<td>Removing an internal temporary table after processing a <a href="../select/index">SELECT</a> statement.</td>
</tr> <tr>
<td>rename</td>
<td>Renaming a table.</td>
</tr> <tr>
<td>rename result table</td>
<td>Renaming a table that results from an <a href="../alter-table/index">ALTER TABLE</a> statement having created a new table.</td>
</tr> <tr>
<td>Reopen tables</td>
<td>Table is being re-opened after thread obtained a lock but the underlying table structure had changed, so the lock was released.</td>
</tr> <tr>
<td>Repair by sorting</td>
<td>Indexes are being created with the use of a sort. Much faster than the related <code>Repair with keycache</code>.</td>
</tr> <tr>
<td>Repair done</td>
<td>Multi-threaded repair has been completed.</td>
</tr> <tr>
<td>Repair with keycache</td>
<td>Indexes are being created through the key cache, one-by-one. Much slower than the related <code>Repair by sorting</code>.</td>
</tr> <tr>
<td>Rolling back</td>
<td>A transaction is being rolled back.</td>
</tr> <tr>
<td>Saving state</td>
<td>New table state is being saved. For example, after, analyzing a <a href="../myisam/index">MyISAM</a> table, the key distributions, rowcount etc. are saved to the .MYI file.</td>
</tr> <tr>
<td>Searching rows for update</td>
<td>Finding matching rows before performing an <a href="../update/index">UPDATE</a>, which is needed when the UPDATE would change the index used for the UPDATE</td>
</tr> <tr>
<td>Sending data</td>
<td>Sending data to the client as part of processing a <a href="../select/index">SELECT</a> statement. Often the longest-occurring state due to the relatively slow disk accesses that may be required.</td>
</tr> <tr>
<td>setup</td>
<td>Setting up an <a href="../alter-table/index">ALTER TABLE</a> operation.</td>
</tr> <tr>
<td>Sorting for group</td>
<td>Sorting as part of a <a href="../select/index#group-by">GROUP BY</a>
</td>
</tr> <tr>
<td>Sorting for order</td>
<td>Sorting as part of an <a href="../select/index#order-by">ORDER BY</a>
</td>
</tr> <tr>
<td>Sorting index</td>
<td>Sorting index pages as part of a table optimization operation.</td>
</tr> <tr>
<td>Sorting result</td>
<td>Processing a <a href="../select/index">SELECT</a> statement using a non-temporary table.</td>
</tr> <tr>
<td>statistics</td>
<td>Calculating statistics as part of deciding on a query execution plan. Usually a brief state unless the server is disk-bound.</td>
</tr> <tr>
<td>System lock</td>
<td>Requesting or waiting for an <em>external</em> lock for a specific table. The <a href="../storage-engines/index">storage engine</a> determines what kind of <em>external</em> lock to use. For example, the <a href="../myisam-storage-engine/index">MyISAM</a> storage engine uses file-based locks. However, MyISAM's <em>external</em> locks are disabled by default, due to the default value of the <code><a href="../server-system-variables/index#skip_external_locking">skip_external_locking</a></code> system variable. Transactional storage engines such as <a href="../innodb/index">InnoDB</a> also register the transaction or statement with MariaDB's <a href="../transaction-coordinator-log/index">transaction coordinator</a> while in this thread state. See <a href="https://jira.mariadb.org/browse/MDEV-19391">MDEV-19391</a> for more information about that.</td>
</tr> <tr>
<td>Table lock</td>
<td>About to request a table's <em>internal</em> lock after acquiring the table's <em>external</em> lock. This thread state occurs after the <em>System lock</em> thread state.</td>
</tr> <tr>
<td>update</td>
<td>About to start updating table.</td>
</tr> <tr>
<td>Updating</td>
<td>Searching for and updating rows in a table.</td>
</tr> <tr>
<td>updating main table</td>
<td>Updating the first table in a multi-table update, and saving columns and offsets for use in the other tables.</td>
</tr> <tr>
<td>updating reference tables</td>
<td>Updating the secondary (reference) tables in a multi-table update</td>
</tr> <tr>
<td>updating status</td>
<td>This state occurs after a query's execution is complete. If the query's execution time exceeds <code><a href="../server-system-variables/index#long_query_time">long_query_time</a></code>, then <code><a href="../server-status-variables/index#slow_queries">Slow_queries</a></code> is incremented, and if the <a href="../slow-query-log/index">slow query log</a> is enabled, then the query is logged. If the <code><a href="../mariadb-audit-plugin/index">SERVER_AUDIT</a></code> plugin is enabled, then the query is also logged into the audit log at this stage. If the <code><a href="../user-statistics/index">userstats</a></code> plugin is enabled, then CPU statistics are also updated at this stage.</td>
</tr> <tr>
<td>User lock</td>
<td>About to request or waiting for an advisory lock from a <a href="../get_lock/index">GET LOCK()</a> call. For <a href="../show-profile/index">SHOW PROFILE</a>, means requesting a lock only.</td>
</tr> <tr>
<td>User sleep</td>
<td>A <a href="../sleep/index">SLEEP()</a> call has been invoked.</td>
</tr> <tr>
<td>Waiting for commit lock</td>
<td>
<a href="../flush/index">FLUSH TABLES WITH READ LOCK</a> is waiting for a commit lock, or a statement resulting in an explicit or implicit commit is waiting for a read lock to be released. This state was called <code>Waiting for all running commits to finish </code> in earlier versions.</td>
</tr> <tr>
<td>Waiting for global read lock</td>
<td>Waiting for a global read lock.</td>
</tr> <tr>
<td>Waiting for table level lock</td>
<td>External lock acquired,and internal lock about to be requested. Occurs after the <code>System lock</code> state. In earlier versions, this was called <code>Table lock</code>.</td>
</tr> <tr>
<td>Waiting for <em>xx</em> lock</td>
<td>Waiting to obtain a lock of type <code>xx</code>.</td>
</tr> <tr>
<td>Waiting on cond</td>
<td>Waiting for an unspecified condition to occur.</td>
</tr> <tr>
<td>Writing to net</td>
<td>Writing a packet to the network.</td>
</tr> </table> </div> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://mariadb.com/kb/en/general-thread-states/" class="_attribution-link" target="_blank">https://mariadb.com/kb/en/general-thread-states/</a>
  </p>
</div>
