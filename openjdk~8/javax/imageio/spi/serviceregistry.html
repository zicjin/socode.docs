<h1>Class ServiceRegistry</h1>   <ul class="inheritance"> <li><a href="../../../java/lang/object">java.lang.Object</a></li> <li> <ul class="inheritance"> <li>javax.imageio.spi.ServiceRegistry</li> </ul> </li> </ul>   <dl> <dt>Direct Known Subclasses:</dt> <dd><a href="iioregistry">IIORegistry</a></dd> </dl>   <pre data-language="java">public class ServiceRegistry
extends Object</pre> <div>
<p>A registry for service provider instances. </p>
<p> A <i>service</i> is a well-known set of interfaces and (usually abstract) classes. A <i>service provider</i> is a specific implementation of a service. The classes in a provider typically implement the interface or subclass the class defined by the service itself. </p>
<p> Service providers are stored in one or more <i>categories</i>, each of which is defined by a class of interface (described by a <code>Class</code> object) that all of its members must implement. The set of categories may be changed dynamically. </p>
<p> Only a single instance of a given leaf class (that is, the actual class returned by <code>getClass()</code>, as opposed to any inherited classes or interfaces) may be registered. That is, suppose that the <code>com.mycompany.mypkg.GreenServiceProvider</code> class implements the <code>com.mycompany.mypkg.MyService</code> interface. If a <code>GreenServiceProvider</code> instance is registered, it will be stored in the category defined by the <code>MyService</code> class. If a new instance of <code>GreenServiceProvider</code> is registered, it will replace the previous instance. In practice, service provider objects are usually singletons so this behavior is appropriate. </p>
<p> To declare a service provider, a <code>services</code> subdirectory is placed within the <code>META-INF</code> directory that is present in every JAR file. This directory contains a file for each service provider interface that has one or more implementation classes present in the JAR file. For example, if the JAR file contained a class named <code>com.mycompany.mypkg.MyServiceImpl</code> which implements the <code>javax.someapi.SomeService</code> interface, the JAR file would contain a file named: </p>
<pre data-language="java">META-INF/services/javax.someapi.SomeService</pre> containing the line: <pre data-language="java">com.mycompany.mypkg.MyService</pre> <p> The service provider classes should be to be lightweight and quick to load. Implementations of these interfaces should avoid complex dependencies on other classes and on native code. The usual pattern for more complex services is to register a lightweight proxy for the heavyweight service. </p>
<p> An application may customize the contents of a registry as it sees fit, so long as it has the appropriate runtime permission. </p>
<p> For more details on declaring service providers, and the JAR format in general, see the  JAR File Specification.</p>
</div> <dl> <dt>See Also:</dt> <dd><a href="registerableservice"><code>RegisterableService</code></a></dd> </dl>       <h2 id="nested.class.summary">Nested Classes</h2> <table> <caption>Nested Classes </caption> <tr> <th scope="col">Modifier and Type</th> <th scope="col">Class and Description</th> </tr> <tr> <td><code>static interface </code></td> <td>
<code><a href="serviceregistry.filter">ServiceRegistry.Filter</a></code> <p>A simple filter interface used by <code>ServiceRegistry.getServiceProviders</code> to select providers matching an arbitrary criterion.</p> </td> </tr> </table>    <h2 id="constructor.detail">Constructors</h2>   <h3 id="ServiceRegistry-java.util.Iterator-">ServiceRegistry</h3> <pre data-language="java">public ServiceRegistry(Iterator&lt;Class&lt;?&gt;&gt; categories)</pre> <p>Constructs a <code>ServiceRegistry</code> instance with a set of categories taken from the <code>categories</code> argument.</p> <dl> <dt>Parameters:</dt> <dd>
<code>categories</code> - an <code>Iterator</code> containing <code>Class</code> objects to be used to define categories.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>categories</code> is <code>null</code>.</dd> </dl>     <h2 id="method.detail">Methods</h2>   <h3 id="lookupProviders-java.lang.Class-java.lang.ClassLoader-">lookupProviders</h3> <pre data-language="java">public static &lt;T&gt; Iterator&lt;T&gt; lookupProviders(Class&lt;T&gt; providerClass,
                                              ClassLoader loader)</pre> <div>
<p>Searches for implementations of a particular service class using the given class loader. </p>
<p> This method transforms the name of the given service class into a provider-configuration filename as described in the class comment and then uses the <code>getResources</code> method of the given class loader to find all available files with that name. These files are then read and parsed to produce a list of provider-class names. The iterator that is returned uses the given class loader to look up and then instantiate each element of the list. </p>
<p> Because it is possible for extensions to be installed into a running Java virtual machine, this method may return different results each time it is invoked.</p>
</div> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the providerClass.</dd> <dt>Parameters:</dt> <dd>
<code>providerClass</code> - a <code>Class</code>object indicating the class or interface of the service providers being detected.</dd> <dd>
<code>loader</code> - the class loader to be used to load provider-configuration files and instantiate provider classes, or <code>null</code> if the system class loader (or, failing that the bootstrap class loader) is to be used.</dd> <dt>Returns:</dt> <dd>An <code>Iterator</code> that yields provider objects for the given service, in some arbitrary order. The iterator will throw an <code>Error</code> if a provider-configuration file violates the specified format or if a provider class cannot be found and instantiated.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>providerClass</code> is <code>null</code>.</dd> </dl>    <h3 id="lookupProviders-java.lang.Class-">lookupProviders</h3> <pre data-language="java">public static &lt;T&gt; Iterator&lt;T&gt; lookupProviders(Class&lt;T&gt; providerClass)</pre> <p>Locates and incrementally instantiates the available providers of a given service using the context class loader. This convenience method is equivalent to: <pre data-language="java">ClassLoader cl = Thread.currentThread().getContextClassLoader();
   return Service.providers(service, cl);</pre></p> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the providerClass.</dd> <dt>Parameters:</dt> <dd>
<code>providerClass</code> - a <code>Class</code>object indicating the class or interface of the service providers being detected.</dd> <dt>Returns:</dt> <dd>An <code>Iterator</code> that yields provider objects for the given service, in some arbitrary order. The iterator will throw an <code>Error</code> if a provider-configuration file violates the specified format or if a provider class cannot be found and instantiated.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>providerClass</code> is <code>null</code>.</dd> </dl>    <h3 id="getCategories--">getCategories</h3> <pre data-language="java">public Iterator&lt;Class&lt;?&gt;&gt; getCategories()</pre> <p>Returns an <code>Iterator</code> of <code>Class</code> objects indicating the current set of categories. The iterator will be empty if no categories exist.</p> <dl> <dt>Returns:</dt> <dd>an <code>Iterator</code> containing <code>Class</code>objects.</dd> </dl>    <h3 id="registerServiceProvider-T-java.lang.Class-">registerServiceProvider</h3> <pre data-language="java">public &lt;T&gt; boolean registerServiceProvider(T provider,
                                           Class&lt;T&gt; category)</pre> <div>
<p>Adds a service provider object to the registry. The provider is associated with the given category. </p>
<p> If <code>provider</code> implements the <code>RegisterableService</code> interface, its <code>onRegistration</code> method will be called. Its <code>onDeregistration</code> method will be called each time it is deregistered from a category, for example if a category is removed or the registry is garbage collected.</p>
</div> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the provider.</dd> <dt>Parameters:</dt> <dd>
<code>provider</code> - the service provide object to be registered.</dd> <dd>
<code>category</code> - the category under which to register the provider.</dd> <dt>Returns:</dt> <dd>true if no provider of the same class was previously registered in the same category category.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>provider</code> is <code>null</code>.</dd> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> <dd>
<code><a href="../../../java/lang/classcastexception">ClassCastException</a></code> - if provider does not implement the <code>Class</code> defined by <code>category</code>.</dd> </dl>    <h3 id="registerServiceProvider-java.lang.Object-">registerServiceProvider</h3> <pre data-language="java">public void registerServiceProvider(Object provider)</pre> <div>
<p>Adds a service provider object to the registry. The provider is associated within each category present in the registry whose <code>Class</code> it implements. </p>
<p> If <code>provider</code> implements the <code>RegisterableService</code> interface, its <code>onRegistration</code> method will be called once for each category it is registered under. Its <code>onDeregistration</code> method will be called each time it is deregistered from a category or when the registry is finalized.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>provider</code> - the service provider object to be registered.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>provider</code> is <code>null</code>.</dd> </dl>    <h3 id="registerServiceProviders-java.util.Iterator-">registerServiceProviders</h3> <pre data-language="java">public void registerServiceProviders(Iterator&lt;?&gt; providers)</pre> <div>
<p>Adds a set of service provider objects, taken from an <code>Iterator</code> to the registry. Each provider is associated within each category present in the registry whose <code>Class</code> it implements. </p>
<p> For each entry of <code>providers</code> that implements the <code>RegisterableService</code> interface, its <code>onRegistration</code> method will be called once for each category it is registered under. Its <code>onDeregistration</code> method will be called each time it is deregistered from a category or when the registry is finalized.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>providers</code> - an Iterator containing service provider objects to be registered.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>providers</code> is <code>null</code> or contains a <code>null</code> entry.</dd> </dl>    <h3 id="deregisterServiceProvider-T-java.lang.Class-">deregisterServiceProvider</h3> <pre data-language="java">public &lt;T&gt; boolean deregisterServiceProvider(T provider,
                                             Class&lt;T&gt; category)</pre> <div>
<p>Removes a service provider object from the given category. If the provider was not previously registered, nothing happens and <code>false</code> is returned. Otherwise, <code>true</code> is returned. If an object of the same class as <code>provider</code> but not equal (using <code>==</code>) to <code>provider</code> is registered, it will not be deregistered. </p>
<p> If <code>provider</code> implements the <code>RegisterableService</code> interface, its <code>onDeregistration</code> method will be called.</p>
</div> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the provider.</dd> <dt>Parameters:</dt> <dd>
<code>provider</code> - the service provider object to be deregistered.</dd> <dd>
<code>category</code> - the category from which to deregister the provider.</dd> <dt>Returns:</dt> <dd>
<code>true</code> if the provider was previously registered in the same category category, <code>false</code> otherwise.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>provider</code> is <code>null</code>.</dd> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> <dd>
<code><a href="../../../java/lang/classcastexception">ClassCastException</a></code> - if provider does not implement the class defined by <code>category</code>.</dd> </dl>    <h3 id="deregisterServiceProvider-java.lang.Object-">deregisterServiceProvider</h3> <pre data-language="java">public void deregisterServiceProvider(Object provider)</pre> <p>Removes a service provider object from all categories that contain it.</p> <dl> <dt>Parameters:</dt> <dd>
<code>provider</code> - the service provider object to be deregistered.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>provider</code> is <code>null</code>.</dd> </dl>    <h3 id="contains-java.lang.Object-">contains</h3> <pre data-language="java">public boolean contains(Object provider)</pre> <p>Returns <code>true</code> if <code>provider</code> is currently registered.</p> <dl> <dt>Parameters:</dt> <dd>
<code>provider</code> - the service provider object to be queried.</dd> <dt>Returns:</dt> <dd>
<code>true</code> if the given provider has been registered.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>provider</code> is <code>null</code>.</dd> </dl>    <h3 id="getServiceProviders-java.lang.Class-boolean-">getServiceProviders</h3> <pre data-language="java">public &lt;T&gt; Iterator&lt;T&gt; getServiceProviders(Class&lt;T&gt; category,
                                           boolean useOrdering)</pre> <p>Returns an <code>Iterator</code> containing all registered service providers in the given category. If <code>useOrdering</code> is <code>false</code>, the iterator will return all of the server provider objects in an arbitrary order. Otherwise, the ordering will respect any pairwise orderings that have been set. If the graph of pairwise orderings contains cycles, any providers that belong to a cycle will not be returned.</p> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the category.</dd> <dt>Parameters:</dt> <dd>
<code>category</code> - the category to be retrieved from.</dd> <dd>
<code>useOrdering</code> - <code>true</code> if pairwise orderings should be taken account in ordering the returned objects.</dd> <dt>Returns:</dt> <dd>an <code>Iterator</code> containing service provider objects from the given category, possibly in order.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> </dl>    <h3 id="getServiceProviders-java.lang.Class-javax.imageio.spi.ServiceRegistry.Filter-boolean-">getServiceProviders</h3> <pre data-language="java">public &lt;T&gt; Iterator&lt;T&gt; getServiceProviders(Class&lt;T&gt; category,
                                           ServiceRegistry.Filter filter,
                                           boolean useOrdering)</pre> <div>
<p>Returns an <code>Iterator</code> containing service provider objects within a given category that satisfy a criterion imposed by the supplied <code>ServiceRegistry.Filter</code> object's <code>filter</code> method. </p>
<p> The <code>useOrdering</code> argument controls the ordering of the results using the same rules as <code>getServiceProviders(Class, boolean)</code>.</p>
</div> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the category.</dd> <dt>Parameters:</dt> <dd>
<code>category</code> - the category to be retrieved from.</dd> <dd>
<code>filter</code> - an instance of <code>ServiceRegistry.Filter</code> whose <code>filter</code> method will be invoked.</dd> <dd>
<code>useOrdering</code> - <code>true</code> if pairwise orderings should be taken account in ordering the returned objects.</dd> <dt>Returns:</dt> <dd>an <code>Iterator</code> containing service provider objects from the given category, possibly in order.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> </dl>    <h3 id="getServiceProviderByClass-java.lang.Class-">getServiceProviderByClass</h3> <pre data-language="java">public &lt;T&gt; T getServiceProviderByClass(Class&lt;T&gt; providerClass)</pre> <p>Returns the currently registered service provider object that is of the given class type. At most one object of a given class is allowed to be registered at any given time. If no registered object has the desired class type, <code>null</code> is returned.</p> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the provider.</dd> <dt>Parameters:</dt> <dd>
<code>providerClass</code> - the <code>Class</code> of the desired service provider object.</dd> <dt>Returns:</dt> <dd>a currently registered service provider object with the desired <code>Class</code>type, or <code>null</code> is none is present.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if <code>providerClass</code> is <code>null</code>.</dd> </dl>    <h3 id="setOrdering-java.lang.Class-T-T-">setOrdering</h3> <pre data-language="java">public &lt;T&gt; boolean setOrdering(Class&lt;T&gt; category,
                               T firstProvider,
                               T secondProvider)</pre> <div>
<p>Sets a pairwise ordering between two service provider objects within a given category. If one or both objects are not currently registered within the given category, or if the desired ordering is already set, nothing happens and <code>false</code> is returned. If the providers previously were ordered in the reverse direction, that ordering is removed. </p>
<p> The ordering will be used by the <code>getServiceProviders</code> methods when their <code>useOrdering</code> argument is <code>true</code>.</p>
</div> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the category.</dd> <dt>Parameters:</dt> <dd>
<code>category</code> - a <code>Class</code> object indicating the category under which the preference is to be established.</dd> <dd>
<code>firstProvider</code> - the preferred provider.</dd> <dd>
<code>secondProvider</code> - the provider to which <code>firstProvider</code> is preferred.</dd> <dt>Returns:</dt> <dd>
<code>true</code> if a previously unset ordering was established.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if either provider is <code>null</code> or they are the same object.</dd> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> </dl>    <h3 id="unsetOrdering-java.lang.Class-T-T-">unsetOrdering</h3> <pre data-language="java">public &lt;T&gt; boolean unsetOrdering(Class&lt;T&gt; category,
                                 T firstProvider,
                                 T secondProvider)</pre> <div>
<p>Sets a pairwise ordering between two service provider objects within a given category. If one or both objects are not currently registered within the given category, or if no ordering is currently set between them, nothing happens and <code>false</code> is returned. </p>
<p> The ordering will be used by the <code>getServiceProviders</code> methods when their <code>useOrdering</code> argument is <code>true</code>.</p>
</div> <dl> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the category.</dd> <dt>Parameters:</dt> <dd>
<code>category</code> - a <code>Class</code> object indicating the category under which the preference is to be disestablished.</dd> <dd>
<code>firstProvider</code> - the formerly preferred provider.</dd> <dd>
<code>secondProvider</code> - the provider to which <code>firstProvider</code> was formerly preferred.</dd> <dt>Returns:</dt> <dd>
<code>true</code> if a previously set ordering was disestablished.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if either provider is <code>null</code> or they are the same object.</dd> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> </dl>    <h3 id="deregisterAll-java.lang.Class-">deregisterAll</h3> <pre data-language="java">public void deregisterAll(Class&lt;?&gt; category)</pre> <p>Deregisters all service provider object currently registered under the given category.</p> <dl> <dt>Parameters:</dt> <dd>
<code>category</code> - the category to be emptied.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if there is no category corresponding to <code>category</code>.</dd> </dl>    <h3 id="deregisterAll--">deregisterAll</h3> <pre data-language="java">public void deregisterAll()</pre> <p>Deregisters all currently registered service providers from all categories.</p>    <h3 id="finalize--">finalize</h3> <pre data-language="java">public void finalize()
              throws Throwable</pre> <p>Finalizes this object prior to garbage collection. The <code>deregisterAll</code> method is called to deregister all currently registered service providers. This method should not be called from application code.</p> <dl> <dt>Overrides:</dt> <dd>
<code><a href="../../../java/lang/object#finalize--">finalize</a></code> in class <code><a href="../../../java/lang/object">Object</a></code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java/lang/throwable">Throwable</a></code> - if an error occurs during superclass finalization.</dd> <dt>See Also:</dt> <dd>
<a href="../../../java/lang/ref/weakreference"><code>WeakReference</code></a>, <a href="../../../java/lang/ref/phantomreference"><code>PhantomReference</code></a>
</dd> </dl>     <div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2017, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    
  </p>
</div>
