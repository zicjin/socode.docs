<h1>Class RMIServerImpl</h1>   <ul class="inheritance"> <li><a href="../../../../java/lang/object">java.lang.Object</a></li> <li> <ul class="inheritance"> <li>javax.management.remote.rmi.RMIServerImpl</li> </ul> </li> </ul>   <dl> <dt>All Implemented Interfaces:</dt> <dd>
<a href="../../../../java/io/closeable">Closeable</a>, <a href="../../../../java/lang/autocloseable">AutoCloseable</a>, <a href="/openjdk~8_web/java/rmi/remote">Remote</a>, <a href="rmiserver">RMIServer</a>
</dd> </dl> <dl> <dt>Direct Known Subclasses:</dt> <dd>
<a href="rmiiiopserverimpl">RMIIIOPServerImpl</a>, <a href="rmijrmpserverimpl">RMIJRMPServerImpl</a>
</dd> </dl>   <pre data-language="java">public abstract class RMIServerImpl
extends Object
implements Closeable, RMIServer</pre> <div>

<p>An RMI object representing a connector server. Remote clients can make connections using the <a href="rmiserverimpl#newClient-java.lang.Object-"><code>newClient(Object)</code></a> method. This method returns an RMI object representing the connection.</p> <p>User code does not usually reference this class directly. RMI connection servers are usually created with the class <a href="rmiconnectorserver"><code>RMIConnectorServer</code></a>. Remote clients usually create connections either with <a href="../jmxconnectorfactory"><code>JMXConnectorFactory</code></a> or by instantiating <a href="rmiconnector"><code>RMIConnector</code></a>.</p> <p>This is an abstract class. Concrete subclasses define the details of the client connection objects, such as whether they use JRMP or IIOP.</p>
</div> <dl> <dt>Since:</dt> <dd>1.5</dd> </dl>       <h2 id="constructor.detail">Constructors</h2>   <h3 id="RMIServerImpl-java.util.Map-">RMIServerImpl</h3> <pre data-language="java">public RMIServerImpl(Map&lt;String,?&gt; env)</pre> <div>

<p>Constructs a new <code>RMIServerImpl</code>.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>env</code> - the environment containing attributes for the new <code>RMIServerImpl</code>. Can be null, which is equivalent to an empty Map.</dd> </dl>     <h2 id="method.detail">Methods</h2>   <h3 id="export--">export</h3> <pre data-language="java">protected abstract void export()
                        throws IOException</pre> <div>

<p>Exports this RMI object.</p>
</div> <dl> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if this RMI object cannot be exported.</dd> </dl>    <h3 id="toStub--">toStub</h3> <pre data-language="java">public abstract Remote toStub()
                       throws IOException</pre> <p>Returns a remotable stub for this server object.</p> <dl> <dt>Returns:</dt> <dd>a remotable stub.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if the stub cannot be obtained - e.g the RMIServerImpl has not been exported yet.</dd> </dl>    <h3 id="setDefaultClassLoader-java.lang.ClassLoader-">setDefaultClassLoader</h3> <pre data-language="java">public void setDefaultClassLoader(ClassLoader cl)</pre> <div>

<p>Sets the default <code>ClassLoader</code> for this connector server. New client connections will use this classloader. Existing client connections are unaffected.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>cl</code> - the new <code>ClassLoader</code> to be used by this connector server.</dd> <dt>See Also:</dt> <dd><a href="rmiserverimpl#getDefaultClassLoader--"><code>getDefaultClassLoader()</code></a></dd> </dl>    <h3 id="getDefaultClassLoader--">getDefaultClassLoader</h3> <pre data-language="java">public ClassLoader getDefaultClassLoader()</pre> <div>

<p>Gets the default <code>ClassLoader</code> used by this connector server.</p>
</div> <dl> <dt>Returns:</dt> <dd>the default <code>ClassLoader</code> used by this connector server.</dd> <dt>See Also:</dt> <dd><a href="rmiserverimpl#setDefaultClassLoader-java.lang.ClassLoader-"><code>setDefaultClassLoader(java.lang.ClassLoader)</code></a></dd> </dl>    <h3 id="setMBeanServer-javax.management.MBeanServer-">setMBeanServer</h3> <pre data-language="java">public void setMBeanServer(MBeanServer mbs)</pre> <div>

<p>Sets the <code>MBeanServer</code> to which this connector server is attached. New client connections will interact with this <code>MBeanServer</code>. Existing client connections are unaffected.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>mbs</code> - the new <code>MBeanServer</code>. Can be null, but new client connections will be refused as long as it is.</dd> <dt>See Also:</dt> <dd><a href="rmiserverimpl#getMBeanServer--"><code>getMBeanServer()</code></a></dd> </dl>    <h3 id="getMBeanServer--">getMBeanServer</h3> <pre data-language="java">public MBeanServer getMBeanServer()</pre> <div>

<p>The <code>MBeanServer</code> to which this connector server is attached. This is the last value passed to <a href="rmiserverimpl#setMBeanServer-javax.management.MBeanServer-"><code>setMBeanServer(javax.management.MBeanServer)</code></a> on this object, or null if that method has never been called.</p>
</div> <dl> <dt>Returns:</dt> <dd>the <code>MBeanServer</code> to which this connector is attached.</dd> <dt>See Also:</dt> <dd><a href="rmiserverimpl#setMBeanServer-javax.management.MBeanServer-"><code>setMBeanServer(javax.management.MBeanServer)</code></a></dd> </dl>    <h3 id="getVersion--">getVersion</h3> <pre data-language="java">public String getVersion()</pre> <p>Description copied from interface: <code><a href="rmiserver#getVersion--">RMIServer</a></code></p> <div>

<p>The version of the RMI Connector Protocol understood by this connector server. This is a string with the following format:</p> <pre data-language="java">protocol-version implementation-name</pre> <p>The <code><em>protocol-version</em></code> is a series of two or more non-negative integers separated by periods (<code>.</code>). An implementation of the version described by this documentation must use the string <code>1.0</code> here.</p> <p>After the protocol version there must be a space, followed by the implementation name. The format of the implementation name is unspecified. It is recommended that it include an implementation version number. An implementation can use an empty string as its implementation name, for example for security reasons.</p>
</div> <dl> <dt>Specified by:</dt> <dd>
<code><a href="rmiserver#getVersion--">getVersion</a></code> in interface <code><a href="rmiserver">RMIServer</a></code>
</dd> <dt>Returns:</dt> <dd>a string with the format described here.</dd> </dl>    <h3 id="newClient-java.lang.Object-">newClient</h3> <pre data-language="java">public RMIConnection newClient(Object credentials)
                        throws IOException</pre> <div>

<p>Creates a new client connection. This method calls <a href="rmiserverimpl#makeClient-java.lang.String-javax.security.auth.Subject-"><code>makeClient</code></a> and adds the returned client connection object to an internal list. When this <code>RMIServerImpl</code> is shut down via its <a href="rmiserverimpl#close--"><code>close()</code></a> method, the <a href="rmiconnection#close--"><code>close()</code></a> method of each object remaining in the list is called.</p> <p>The fact that a client connection object is in this internal list does not prevent it from being garbage collected.</p>
</div> <dl> <dt>Specified by:</dt> <dd>
<code><a href="rmiserver#newClient-java.lang.Object-">newClient</a></code> in interface <code><a href="rmiserver">RMIServer</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>credentials</code> - this object specifies the user-defined credentials to be passed in to the server in order to authenticate the caller before creating the <code>RMIConnection</code>. Can be null.</dd> <dt>Returns:</dt> <dd>the newly-created <code>RMIConnection</code>. This is usually the object created by <code>makeClient</code>, though an implementation may choose to wrap that object in another object implementing <code>RMIConnection</code>.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if the new client object cannot be created or exported.</dd> <dd>
<code><a href="../../../../java/lang/securityexception">SecurityException</a></code> - if the given credentials do not allow the server to authenticate the user successfully.</dd> <dd>
<code><a href="../../../../java/lang/illegalstateexception">IllegalStateException</a></code> - if <a href="rmiserverimpl#getMBeanServer--"><code>getMBeanServer()</code></a> is null.</dd> </dl>    <h3 id="makeClient-java.lang.String-javax.security.auth.Subject-">makeClient</h3> <pre data-language="java">protected abstract RMIConnection makeClient(String connectionId,
                                            Subject subject)
                                     throws IOException</pre> <div>

<p>Creates a new client connection. This method is called by the public method <a href="rmiserverimpl#newClient-java.lang.Object-"><code>newClient(Object)</code></a>.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>connectionId</code> - the ID of the new connection. Every connection opened by this connector server will have a different ID. The behavior is unspecified if this parameter is null.</dd> <dd>
<code>subject</code> - the authenticated subject. Can be null.</dd> <dt>Returns:</dt> <dd>the newly-created <code>RMIConnection</code>.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if the new client object cannot be created or exported.</dd> </dl>    <h3 id="closeClient-javax.management.remote.rmi.RMIConnection-">closeClient</h3> <pre data-language="java">protected abstract void closeClient(RMIConnection client)
                             throws IOException</pre> <div>

<p>Closes a client connection made by <a href="rmiserverimpl#makeClient-java.lang.String-javax.security.auth.Subject-"><code>makeClient</code></a>.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>client</code> - a connection previously returned by <code>makeClient</code> on which the <code>closeClient</code> method has not previously been called. The behavior is unspecified if these conditions are violated, including the case where <code>client</code> is null.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if the client connection cannot be closed.</dd> </dl>    <h3 id="getProtocol--">getProtocol</h3> <pre data-language="java">protected abstract String getProtocol()</pre> <div>

<p>Returns the protocol string for this object. The string is <code>rmi</code> for RMI/JRMP and <code>iiop</code> for RMI/IIOP.</p>
</div> <dl> <dt>Returns:</dt> <dd>the protocol string for this object.</dd> </dl>    <h3 id="clientClosed-javax.management.remote.rmi.RMIConnection-">clientClosed</h3> <pre data-language="java">protected void clientClosed(RMIConnection client)
                     throws IOException</pre> <div>

<p>Method called when a client connection created by <a href="rmiserverimpl#makeClient-java.lang.String-javax.security.auth.Subject-"><code>makeClient</code></a> is closed. A subclass that defines <code>makeClient</code> must arrange for this method to be called when the resultant object's <a href="rmiconnection#close--"><code>close</code></a> method is called. This enables it to be removed from the <code>RMIServerImpl</code>'s list of connections. It is not an error for <code>client</code> not to be in that list.</p> <p>After removing <code>client</code> from the list of connections, this method calls <a href="rmiserverimpl#closeClient-javax.management.remote.rmi.RMIConnection-"><code>closeClient(client)</code></a>.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>client</code> - the client connection that has been closed.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if <a href="rmiserverimpl#closeClient-javax.management.remote.rmi.RMIConnection-"><code>closeClient(javax.management.remote.rmi.RMIConnection)</code></a> throws this exception.</dd> <dd>
<code><a href="../../../../java/lang/nullpointerexception">NullPointerException</a></code> - if <code>client</code> is null.</dd> </dl>    <h3 id="close--">close</h3> <pre data-language="java">public void close()
           throws IOException</pre> <div>

<p>Closes this connection server. This method first calls the <a href="rmiserverimpl#closeServer--"><code>closeServer()</code></a> method so that no new client connections will be accepted. Then, for each remaining <a href="rmiconnection"><code>RMIConnection</code></a> object returned by <a href="rmiserverimpl#makeClient-java.lang.String-javax.security.auth.Subject-"><code>makeClient</code></a>, its <a href="rmiconnection#close--"><code>close</code></a> method is called.</p> <p>The behavior when this method is called more than once is unspecified.</p> <p>If <a href="rmiserverimpl#closeServer--"><code>closeServer()</code></a> throws an <code>IOException</code>, the individual connections are nevertheless closed, and then the <code>IOException</code> is thrown from this method.</p> <p>If <a href="rmiserverimpl#closeServer--"><code>closeServer()</code></a> returns normally but one or more of the individual connections throws an <code>IOException</code>, then, after closing all the connections, one of those <code>IOException</code>s is thrown from this method. If more than one connection throws an <code>IOException</code>, it is unspecified which one is thrown from this method.</p>
</div> <dl> <dt>Specified by:</dt> <dd>
<code><a href="../../../../java/io/closeable#close--">close</a></code> in interface <code><a href="../../../../java/io/closeable">Closeable</a></code>
</dd> <dt>Specified by:</dt> <dd>
<code><a href="../../../../java/lang/autocloseable#close--">close</a></code> in interface <code><a href="../../../../java/lang/autocloseable">AutoCloseable</a></code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if <a href="rmiserverimpl#closeServer--"><code>closeServer()</code></a> or one of the <a href="rmiconnection#close--"><code>RMIConnection.close()</code></a> calls threw <code>IOException</code>.</dd> </dl>    <h3 id="closeServer--">closeServer</h3> <pre data-language="java">protected abstract void closeServer()
                             throws IOException</pre> <div>

<p>Called by <a href="rmiserverimpl#close--"><code>close()</code></a> to close the connector server. After returning from this method, the connector server must not accept any new connections.</p>
</div> <dl> <dt>Throws:</dt> <dd>
<code><a href="../../../../java/io/ioexception">IOException</a></code> - if the attempt to close the connector server failed.</dd> </dl>     <div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2017, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    
  </p>
</div>
