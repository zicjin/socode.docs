<h1>Package javax.management.remote.rmi</h1>  <p>The RMI connector is a connector for the JMX Remote API that uses RMI to transmit client requests to a remote MBean server.</p>  <p>See: <a href="#package.description">Description</a></p>   <table> <caption>Interface Summary </caption> <tr> <th scope="col">Interface</th> <th scope="col">Description</th> </tr>  <tr> <td><a href="rmiconnection">RMIConnection</a></td> <td> <p>RMI object used to forward an MBeanServer request from a client to its MBeanServer implementation on the server side.</p> </td> </tr> <tr> <td><a href="rmiserver">RMIServer</a></td> <td> <p>RMI object used to establish connections to an RMI connector.</p> </td> </tr>  </table>
<table> <caption>Class Summary </caption> <tr> <th scope="col">Class</th> <th scope="col">Description</th> </tr>  <tr> <td><a href="rmiconnectionimpl">RMIConnectionImpl</a></td> <td> <p>Implementation of the <a href="rmiconnection"><code>RMIConnection</code></a> interface.</p> </td> </tr> <tr> <td><a href="rmiconnectionimpl_stub">RMIConnectionImpl_Stub</a></td> <td> </td> </tr> <tr> <td><a href="rmiconnector">RMIConnector</a></td> <td> <p>A connection to a remote RMI connector.</p> </td> </tr> <tr> <td><a href="rmiconnectorserver">RMIConnectorServer</a></td> <td> <p>A JMX API connector server that creates RMI-based connections from remote clients.</p> </td> </tr> <tr> <td><a href="rmiiiopserverimpl">RMIIIOPServerImpl</a></td> <td> <p>An <a href="rmiserverimpl"><code>RMIServerImpl</code></a> that is exported through IIOP and that creates client connections as RMI objects exported through IIOP.</p> </td> </tr> <tr> <td><a href="rmijrmpserverimpl">RMIJRMPServerImpl</a></td> <td> <p>An <a href="rmiserver"><code>RMIServer</code></a> object that is exported through JRMP and that creates client connections as RMI objects exported through JRMP.</p> </td> </tr> <tr> <td><a href="rmiserverimpl">RMIServerImpl</a></td> <td> <p>An RMI object representing a connector server.</p> </td> </tr> <tr> <td><a href="rmiserverimpl_stub">RMIServerImpl_Stub</a></td> <td> </td> </tr>  </table>
  <h2 id="package.description">Package javax.management.remote.rmi Description</h2> <div>

<p>The RMI connector is a connector for the JMX Remote API that uses RMI to transmit client requests to a remote MBean server. This package defines the classes that the user of an RMI connector needs to reference directly, for both the client and server sides. It also defines certain classes that the user will not usually reference directly, but that must be defined so that different implementations of the RMI connector can interoperate.</p> <p>The RMI connector supports the JRMP transport for RMI, and optionally the IIOP transport.</p> <p>Like most connectors in the JMX Remote API, an RMI connector usually has an address, which is a <a href="../jmxserviceurl"><code>JMXServiceURL</code></a>. The protocol part of this address is <code>rmi</code> for a connector that uses the default RMI transport (JRMP), or <code>iiop</code> for a connector that uses RMI/IIOP.</p> <p>There are two forms for RMI connector addresses:</p> <ul> <li> In the <em>JNDI form</em>, the URL indicates <em>where to find an RMI stub for the connector</em>. This RMI stub is a Java object of type <a href="rmiserver"><code>RMIServer</code></a> that gives remote access to the connector server. With this address form, the RMI stub is obtained from an external directory entry included in the URL. An external directory is any directory recognized by <a href="../../../naming/package-summary"><code>JNDI</code></a>, typically the RMI registry, LDAP, or COS Naming. </li>
<li> In the <em>encoded form</em>, the URL directly includes the information needed to connect to the connector server. When using RMI/JRMP, the encoded form is the serialized RMI stub for the server object, encoded using BASE64 without embedded newlines. When using RMI/IIOP, the encoded form is the CORBA IOR for the server object. </li>
</ul> <p>Addresses are covered in more detail below.</p> <h2>Creating an RMI connector server</h2> <p>The usual way to create an RMI connector server is to supply an RMI connector address to the method <a href="../jmxconnectorserverfactory#newJMXConnectorServer-javax.management.remote.JMXServiceURL-java.util.Map-javax.management.MBeanServer-"><code>JMXConnectorServerFactory.newJMXConnectorServer</code></a>. The MBean server to which the connector server is attached can be specified as a parameter to that method. Alternatively, the connector server can be registered as an MBean in that MBean server.</p> <p>An RMI connector server can also be created by constructing an instance of <a href="rmiconnectorserver"><code>RMIConnectorServer</code></a>, explicitly or through the MBean server's <code>createMBean</code> method.</p> <h3>Choosing the RMI transport</h3> <p>You can choose the RMI transport (JRMP or IIOP) by specifying <code>rmi</code> or <code>iiop</code> in the <code><em>protocol</em></code> part of the <code>serviceURL</code> when creating the connector server. You can also create specialized connector servers by instantiating an appropriate subclass of <a href="rmiserverimpl"><code>RMIServerImpl</code></a> and supplying it to the <code>RMIConnectorServer</code> constructor.</p> <h3><a name="servergen">Connector addresses generated by the server</a></h3> <p>If the <code>serviceURL</code> you specify has an empty URL path (after the optional host and port), or if you do not specify a <code>serviceURL</code>, then the connector server will fabricate a new <code>JMXServiceURL</code> that clients can use to connect:</p> <ul> <li>
<p>If the <code>serviceURL</code> looks like:</p> <pre data-language="java">service:jmx:rmi://host:port</pre> <p>then the connector server will generate an <a href="rmijrmpserverimpl"><code>RMIJRMPServerImpl</code></a> and the returned <code>JMXServiceURL</code> looks like:</p> <pre data-language="java">service:jmx:rmi://host:port/stub/XXXX</pre> <p>where <code><em>XXXX</em></code> is the serialized form of the stub for the generated object, encoded in BASE64 without newlines.</p> </li>
<li>
<p>If the <code>serviceURL</code> looks like:</p> <pre data-language="java">service:jmx:iiop://host:port</pre> <p>then the connector server will generate an <a href="rmiiiopserverimpl"><code>RMIIIOPServerImpl</code></a> and the returned <code>JMXServiceURL</code> looks like:</p> <pre data-language="java">service:jmx:iiop://host:port/ior/IOR:XXXX</pre> <p>where <code>IOR:<em>XXXX</em></code> is the standard CORBA encoding of the Interoperable Object Reference for the generated object.</p> </li>
<li>
<p>If there is no <code>serviceURL</code>, there must be a user-provided <code>RMIServerImpl</code>. If the <a href="rmiserverimpl#toStub--"><code>toStub</code></a> method on this object returns an instance of <a href="/openjdk~8_web/javax/rmi/corba/stub"><code>Stub</code></a>, then the connector server will generate a <code>JMXServiceURL</code> using the <code>iiop</code> form above. Otherwise, it will generate a <code>JMXServiceURL</code> using the <code>rmi</code> form.</p> </li>
</ul> <p>The <code><em>host</em></code> in a user-provided <code>serviceURL</code> is optional. If present, it is copied into the generated <code>JMXServiceURL</code> but otherwise ignored. If absent, the generated <code>JXMServiceURL</code> will have the local host name.</p> <p>The <code><em>port</em></code> in a user-provided <code>serviceURL</code> is also optional. If present, it is also copied into the generated <code>JMXServiceURL</code>; otherwise, the generated <code>JMXServiceURL</code> has no port. For an <code>serviceURL</code> using the <code>rmi</code> protocol, the <code><em>port</em></code>, if present, indicates what port the generated remote object should be exported on. It has no other effect.</p> <p>If the user provides an <code>RMIServerImpl</code> rather than a <code>JMXServiceURL</code>, then the generated <code>JMXServiceURL</code> will have the local host name in its <code><em>host</em></code> part and no <code><em>port</em></code>.</p> <h3><a name="directory">Connector addresses based on directory entries</a></h3> <p>As an alternative to the generated addresses just described, the <code>serviceURL</code> address supplied when creating a connector server can specify a <em>directory address</em> in which to store the provided or generated <code>RMIServer</code> stub. This directory address is then used by both client and server.</p> <p>In this case, the <code>serviceURL</code> has one of these two forms:</p> <pre data-language="java">service:jmx:rmi://host:port/jndi/jndi-name
    service:jmx:iiop://host:port/jndi/jndi-name</pre> <p>Here, <code><em>jndi-name</em></code> is a string that can be supplied to <a href="../../../naming/initialcontext#bind-java.lang.String-java.lang.Object-"><code>javax.naming.InitialContext.bind</code></a>.</p> <p>As usual, the <code><em>host</em></code> and <code>:<em>port</em></code> can be omitted.</p> <p>The connector server will generate an <code>RMIServerImpl</code> based on the protocol (<code>rmi</code> or <code>iiop</code>) and, for <code>rmi</code>, the <code><em>port</em></code> if any. When the connector server is started, it will derive a stub from this object using its <a href="rmiserverimpl#toStub--"><code>toStub</code></a> method and store the object using the given <code><em>jndi-name</em></code>. The properties defined by the JNDI API are consulted as usual.</p> <p>For example, if the <code>JMXServiceURL</code> is: </p>
<pre data-language="java">service:jmx:rmi://ignoredhost/jndi/rmi://myhost/myname</pre> then the connector server will generate an <code>RMIJRMPServerImpl</code> and store its stub using the JNDI name <pre data-language="java">rmi://myhost/myname</pre> which means entry <code>myname</code> in the RMI registry running on the default port of host <code>myhost</code>. Note that the RMI registry only allows registration from the local host. So, in this case, <code>myhost</code> must be the name (or a name) of the host that the connector server is running on. <p>In this <code>JMXServiceURL</code>, the first <code>rmi:</code> specifies the RMI connector, while the second <code>rmi:</code> specifies the RMI registry.</p> <p>As another example, if the <code>JMXServiceURL</code> is: </p>
<pre data-language="java">service:jmx:iiop://ignoredhost/jndi/ldap://dirhost:9999/cn=this,ou=that</pre> then the connector server will generate an <code>RMIIIOPServerImpl</code> and store its stub using the JNDI name <pre data-language="java">ldap://dirhost:9999/cn=this,ou=that</pre> which means entry <code>cn=this,ou=that</code> in the LDAP directory running on port 9999 of host <code>dirhost</code>. <p>If the <code>JMXServiceURL</code> is: </p>
<pre data-language="java">service:jmx:iiop://ignoredhost/jndi/cn=this,ou=that</pre> then the connector server will generate an <code>RMIIIOPServerImpl</code> and store its stub using the JNDI name <pre data-language="java">cn=this,ou=that</pre> For this case to work, the JNDI API must have been configured appropriately to supply the information about what directory to use. <p>In these examples, the host name <code>ignoredhost</code> is not used by the connector server or its clients. It can be omitted, for example:</p> <pre data-language="java">service:jmx:iiop:///jndi/cn=this,ou=that</pre> <p>However, it is good practice to use the name of the host where the connector server is running. This is often different from the name of the directory host.</p> <h3>Connector server attributes</h3> <p>When using the default JRMP transport, RMI socket factories can be specified using the attributes <code>jmx.remote.rmi.client.socket.factory</code> and <code>jmx.remote.rmi.server.socket.factory</code> in the <code>environment</code> given to the <code>RMIConnectorServer</code> constructor. The values of these attributes must be of type <a href="/openjdk~8_web/java/rmi/server/rmiclientsocketfactory"><code>RMIClientSocketFactory</code></a> and <a href="/openjdk~8_web/java/rmi/server/rmiserversocketfactory"><code>RMIServerSocketFactory</code></a>, respectively. These factories are used when creating the RMI objects associated with the connector.</p> <h2>Creating an RMI connector client</h2> <p>An RMI connector client is usually constructed using <a href="../jmxconnectorfactory"><code>JMXConnectorFactory</code></a>, with a <code>JMXServiceURL</code> that has <code>rmi</code> or <code>iiop</code> as its protocol.</p> <p>If the <code>JMXServiceURL</code> was generated by the server, as described above under <a href="#servergen">"connector addresses generated by the server"</a>, then the client will need to obtain it directly or indirectly from the server. Typically, the server makes the <code>JMXServiceURL</code> available by storing it in a file or a lookup service.</p> <p>If the <code>JMXServiceURL</code> uses the directory syntax, as described above under <a href="#directory">"connector addresses based on directory entries"</a>, then the client may obtain it as just explained, or client and server may both know the appropriate directory entry to use. For example, if the connector server for the Whatsit agent uses the entry <code>whatsit-agent-connector</code> in the RMI registry on host <code>myhost</code>, then client and server can both know that the appropriate <code>JMXServiceURL</code> is:</p> <pre data-language="java">service:jmx:rmi:///jndi/rmi://myhost/whatsit-agent-connector</pre> <p>If you have an RMI stub of type <a href="rmiserver"><code>RMIServer</code></a>, you can construct an RMI connection directly by using the appropriate constructor of <a href="rmiconnector"><code>RMIConnector</code></a>.</p> <h2>Specifying an ORB for the RMI/IIOP connector</h2> <p>When using the IIOP transport, the client and server can specify what ORB to use with the attribute <code>java.naming.corba.orb</code>. Connection to the ORB happens at <a href="rmiconnectorserver#start--"><code>start</code></a> time for the connector server, and at <a href="rmiconnector#connect-java.util.Map-"><code>connect</code></a> time for the connector client. If the <code>java.naming.corba.orb</code> attribute is contained in the environment Map, then its value (an <a href="/openjdk~8_web/org/omg/corba/orb"><code>ORB</code></a>), is used to connect the IIOP Stubs. Otherwise, a new org.omg.CORBA.ORB is created by calling <a href="/openjdk~8_web/org/omg/corba/orb"><code>org.omg.CORBA.ORB.init((String[])null,(Properties)null)</code></a>. A later RMI connector client or server in the same JVM can reuse this ORB, or it can create another one in the same way.</p> <p>If the <code>java.naming.corba.orb</code> attribute is specified and does not point to an <a href="/openjdk~8_web/org/omg/corba/orb"><code>ORB</code></a>, then an <code><a href="../../../../java/lang/illegalargumentexception"><code>IllegalArgumentException</code></a></code> will be thrown.</p> <p>The mechanism described here does not apply when the IIOP Remote objects (Stubs or Servers) are created and connected to an ORB manually before being passed to the RMIConnector and RMIConnectorServer.</p> <h2>Dynamic code downloading</h2> <p>If an RMI connector client or server receives from its peer an instance of a class that it does not know, and if dynamic code downloading is active for the RMI connection, then the class can be downloaded from a codebase specified by the peer. The article <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/rmi/codebase.html"><em>Dynamic code downloading using Java RMI</em></a> explains this in more detail.</p>
</div> <dl> <dt>Since:</dt> <dd>1.5</dd> <dt>See Also:</dt> <dd>
<a href="https://docs.oracle.com/javase/7/docs/technotes/guides/rmi/index.html"> Java<sup><font size="-1">TM</font></sup> Remote Method Invocation (RMI)</a>, <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/jndi/index.html"> Java Naming and Directory Interface<sup><font size="-1">TM</font></sup> (JNDI)</a>, <a href="http://www.ietf.org/rfc/rfc2045.txt">RFC 2045, section 6.8, "Base64 Content-Transfer-Encoding"</a>
</dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2017, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    
  </p>
</div>
