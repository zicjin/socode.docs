  <div id="layout"> <div id="layout-content"><div id="mysqli-stmt.prepare" class="refentry"> <div class="refnamediv"> <h1 class="refname">mysqli_stmt::prepare</h1> <h1 class="refname">mysqli_stmt_prepare</h1> <p class="verinfo">(PHP 5, PHP 7)</p>
<p class="refpurpose"><span class="refname">mysqli_stmt::prepare</span> -- <span class="refname">mysqli_stmt_prepare</span> — <span class="dc-title">Prepare an SQL statement for execution</span></p> </div> <div class="refsect1 description" id="refsect1-mysqli-stmt.prepare-description"> <h3 class="title">Description</h3> <p class="para">Object oriented style</p> <pre class="methodsynopsis dc-description" data-language="php">public mysqli_stmt::prepare ( string $query ) : mixed</pre> <p class="para rdfs-comment">Procedural style</p> <pre class="methodsynopsis dc-description" data-language="php">mysqli_stmt_prepare ( mysqli_stmt $stmt , string $query ) : bool</pre> <p class="para rdfs-comment"> Prepares the SQL query pointed to by the null-terminated string query. </p> <p class="para"> The parameter markers must be bound to application variables using <span class="function"><a href="mysqli-stmt.bind-param" class="function">mysqli_stmt_bind_param()</a></span> and/or <span class="function"><a href="mysqli-stmt.bind-result" class="function">mysqli_stmt_bind_result()</a></span> before executing the statement or fetching rows. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> In the case where you pass a statement to <span class="function"><strong>mysqli_stmt_prepare()</strong></span> that is longer than <code class="literal">max_allowed_packet</code> of the server, the returned error codes are different depending on whether you are using MySQL Native Driver (<code class="literal">mysqlnd</code>) or MySQL Client Library (<code class="literal">libmysqlclient</code>). The behavior is as follows: </p> <ul class="itemizedlist"> <li class="listitem"> <p class="para"> <code class="literal">mysqlnd</code> on Linux returns an error code of 1153. The error message means <q class="quote">got a packet bigger than <code class="literal">max_allowed_packet</code> bytes</q>. </p> </li> <li class="listitem"> <p class="para"> <code class="literal">mysqlnd</code> on Windows returns an error code 2006. This error message means <q class="quote">server has gone away</q>. </p> </li> <li class="listitem"> <p class="para"> <code class="literal">libmysqlclient</code> on all platforms returns an error code 2006. This error message means <q class="quote">server has gone away</q>. </p> </li> </ul> </blockquote> </div> <div class="refsect1 parameters" id="refsect1-mysqli-stmt.prepare-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">
stmt</code>
</dt> <dd> <p class="para">Procedural style only: A statement identifier returned by <span class="function"><a href="mysqli.stmt-init" class="function">mysqli_stmt_init()</a></span>.</p>
</dd> <dt> <code class="parameter">query</code>
</dt> <dd> <p class="para"> The query, as a string. It must consist of a single SQL statement. </p> <p class="para"> You can include one or more parameter markers in the SQL statement by embedding question mark (<code class="literal">?</code>) characters at the appropriate positions. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> You should not add a terminating semicolon or <code class="literal">\g</code> to the statement. </p> </blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> The markers are legal only in certain places in SQL statements. For example, they are allowed in the VALUES() list of an INSERT statement (to specify column values for a row), or in a comparison with a column in a WHERE clause to specify a comparison value. </p> <p class="para"> However, they are not allowed for identifiers (such as table or column names), in the select list that names the columns to be returned by a SELECT statement), or to specify both operands of a binary operator such as the <code class="literal">=</code> equal sign. The latter restriction is necessary because it would be impossible to determine the parameter type. In general, parameters are legal only in Data Manipulation Language (DML) statements, and not in Data Definition Language (DDL) statements. </p> </blockquote> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-mysqli-stmt.prepare-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> Returns <strong><code>true</code></strong> on success or <strong><code>false</code></strong> on failure. </p> </div> <div class="refsect1 examples" id="refsect1-mysqli-stmt.prepare-examples"> <h3 class="title">Examples</h3> <div class="example" id="example-1728"> <p><strong>Example #1 Object oriented style</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt =  $mysqli-&gt;stmt_init();
if ($stmt-&gt;prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt-&gt;bind_param("s", $city);

    /* execute query */
    $stmt-&gt;execute();

    /* bind result variables */
    $stmt-&gt;bind_result($district);

    /* fetch value */
    $stmt-&gt;fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt-&gt;close();
}

/* close connection */
$mysqli-&gt;close();
?&gt;</pre> </div> </div> <div class="example" id="example-1729"> <p><strong>Example #2 Procedural style</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt = mysqli_stmt_init($link);
if (mysqli_stmt_prepare($stmt, 'SELECT District FROM City WHERE Name=?')) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $city);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $district);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?&gt;</pre> </div> <div class="example-contents"><p>The above examples will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
Amersfoort is in district Utrecht
</pre></div> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-mysqli-stmt.prepare-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li class="member"><span class="function"><a href="mysqli.stmt-init" class="function" rel="rdfs-seeAlso">mysqli_stmt_init()</a> - Initializes a statement and returns an object for use with mysqli_stmt_prepare</span></li> <li class="member"><span class="function"><a href="mysqli-stmt.execute" class="function" rel="rdfs-seeAlso">mysqli_stmt_execute()</a> - Executes a prepared Query</span></li> <li class="member"><span class="function"><a href="mysqli-stmt.fetch" class="function" rel="rdfs-seeAlso">mysqli_stmt_fetch()</a> - Fetch results from a prepared statement into the bound variables</span></li> <li class="member"><span class="function"><a href="mysqli-stmt.bind-param" class="function" rel="rdfs-seeAlso">mysqli_stmt_bind_param()</a> - Binds variables to a prepared statement as parameters</span></li> <li class="member"><span class="function"><a href="mysqli-stmt.bind-result" class="function" rel="rdfs-seeAlso">mysqli_stmt_bind_result()</a> - Binds variables to a prepared statement for result storage</span></li> <li class="member"><span class="function"><a href="mysqli-stmt.get-result" class="function" rel="rdfs-seeAlso">mysqli_stmt_get_result()</a> - Gets a result set from a prepared statement</span></li> <li class="member"><span class="function"><a href="mysqli-stmt.close" class="function" rel="rdfs-seeAlso">mysqli_stmt_close()</a> - Closes a prepared statement</span></li> </ul> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2020 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/mysqli-stmt.prepare.php" class="_attribution-link">https://www.php.net/manual/en/mysqli-stmt.prepare.php</a>
  </p>
</div>
