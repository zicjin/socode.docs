<h1 class="main-heading">Trait std::os::wasi::fs::FileExt</h1>
<pre class="rust trait" data-language="rust">pub trait FileExt {
Show 16 methods    fn read_vectored_at(        &amp;self,         bufs: &amp;mut [IoSliceMut&lt;'_&gt;],         offset: u64    ) -&gt; Result&lt;usize&gt;;
    fn write_vectored_at(        &amp;self,         bufs: &amp;[IoSlice&lt;'_&gt;],         offset: u64    ) -&gt; Result&lt;usize&gt;;
    fn tell(&amp;self) -&gt; Result&lt;u64&gt;;
    fn fdstat_set_flags(&amp;self, flags: u16) -&gt; Result&lt;()&gt;;
    fn fdstat_set_rights(&amp;self, rights: u64, inheriting: u64) -&gt; Result&lt;()&gt;;
    fn advise(&amp;self, offset: u64, len: u64, advice: u8) -&gt; Result&lt;()&gt;;
    fn allocate(&amp;self, offset: u64, len: u64) -&gt; Result&lt;()&gt;;
    fn create_directory&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, dir: P) -&gt; Result&lt;()&gt;;
    fn read_link&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; Result&lt;PathBuf&gt;;
    fn metadata_at&lt;P: AsRef&lt;Path&gt;&gt;(        &amp;self,         lookup_flags: u32,         path: P    ) -&gt; Result&lt;Metadata&gt;;
    fn remove_file&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; Result&lt;()&gt;;
    fn remove_directory&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; Result&lt;()&gt;;

    fn read_at(&amp;self, buf: &amp;mut [u8], offset: u64) -&gt; Result&lt;usize&gt; { ... }
    fn read_exact_at(&amp;self, buf: &amp;mut [u8], offset: u64) -&gt; Result&lt;()&gt; { ... }
    fn write_at(&amp;self, buf: &amp;[u8], offset: u64) -&gt; Result&lt;usize&gt; { ... }
    fn write_all_at(&amp;self, buf: &amp;[u8], offset: u64) -&gt; Result&lt;()&gt; { ... }
}</pre>
<span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div>
<div class="stab portability">Available on <strong>WASI</strong> only.</div></span><p>WASI-specific extensions to <a href="../../../fs/struct.file" title="File"><code>File</code></a>.</p> <h2 id="required-methods" class="small-section-header">Required Methods</h2>
<div class="methods">
<summary><div id="tymethod.read_vectored_at" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#46">source</a></div>
<h4 class="code-header">fn read_vectored_at(<br> &amp;self, <br> bufs: &amp;mut [IoSliceMut&lt;'_&gt;], <br> offset: u64<br>) -&gt; Result&lt;usize&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Reads a number of bytes starting from a given offset.</p> <p>Returns the number of bytes read.</p> <p>The offset is relative to the start of the file and thus independent from the current cursor.</p> <p>The current file cursor is not affected by this function.</p> <p>Note that similar to <a href="../../../fs/struct.file#method.read_vectored" title="File::read_vectored"><code>File::read_vectored</code></a>, it is not an error to return with a short read.</p> </div>
<summary><div id="tymethod.write_vectored_at" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#129">source</a></div>
<h4 class="code-header">fn write_vectored_at(&amp;self, bufs: &amp;[IoSlice&lt;'_&gt;], offset: u64) -&gt; Result&lt;usize&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Writes a number of bytes starting from a given offset.</p> <p>Returns the number of bytes written.</p> <p>The offset is relative to the start of the file and thus independent from the current cursor.</p> <p>The current file cursor is not affected by this function.</p> <p>When writing beyond the end of the file, the file is appropriately extended and the intermediate bytes are initialized with the value 0.</p> <p>Note that similar to <a href="../../../fs/struct.file#method.write_vectored" title="File::write_vectored"><code>File::write_vectored</code></a>, it is not an error to return a short write.</p> </div>
<summary><div id="tymethod.tell" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#176">source</a></div>
<h4 class="code-header">fn tell(&amp;self) -&gt; Result&lt;u64&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Returns the current position within the file.</p> <p>This corresponds to the <code>fd_tell</code> syscall and is similar to <code>seek</code> where you offset 0 bytes from the current position.</p> </div>
<summary><div id="tymethod.fdstat_set_flags" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#181">source</a></div>
<h4 class="code-header">fn fdstat_set_flags(&amp;self, flags: u16) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Adjust the flags associated with this file.</p> <p>This corresponds to the <code>fd_fdstat_set_flags</code> syscall.</p> </div>
<summary><div id="tymethod.fdstat_set_rights" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#186">source</a></div>
<h4 class="code-header">fn fdstat_set_rights(&amp;self, rights: u64, inheriting: u64) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Adjust the rights associated with this file.</p> <p>This corresponds to the <code>fd_fdstat_set_rights</code> syscall.</p> </div>
<summary><div id="tymethod.advise" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#191">source</a></div>
<h4 class="code-header">fn advise(&amp;self, offset: u64, len: u64, advice: u8) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Provide file advisory information on a file descriptor.</p> <p>This corresponds to the <code>fd_advise</code> syscall.</p> </div>
<summary><div id="tymethod.allocate" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#196">source</a></div>
<h4 class="code-header">fn allocate(&amp;self, offset: u64, len: u64) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Force the allocation of space in a file.</p> <p>This corresponds to the <code>fd_allocate</code> syscall.</p> </div>
<summary><div id="tymethod.create_directory" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#201">source</a></div>
<h4 class="code-header">fn create_directory&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, dir: P) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Create a directory.</p> <p>This corresponds to the <code>path_create_directory</code> syscall.</p> </div>
<summary><div id="tymethod.read_link" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#206">source</a></div>
<h4 class="code-header">fn read_link&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; Result&lt;PathBuf&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Read the contents of a symbolic link.</p> <p>This corresponds to the <code>path_readlink</code> syscall.</p> </div>
<summary><div id="tymethod.metadata_at" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#211">source</a></div>
<h4 class="code-header">fn metadata_at&lt;P: AsRef&lt;Path&gt;&gt;(<br> &amp;self, <br> lookup_flags: u32, <br> path: P<br>) -&gt; Result&lt;Metadata&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Return the attributes of a file or directory.</p> <p>This corresponds to the <code>path_filestat_get</code> syscall.</p> </div>
<summary><div id="tymethod.remove_file" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#216">source</a></div>
<h4 class="code-header">fn remove_file&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Unlink a file.</p> <p>This corresponds to the <code>path_unlink_file</code> syscall.</p> </div>
<summary><div id="tymethod.remove_directory" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#221">source</a></div>
<h4 class="code-header">fn remove_directory&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; Result&lt;()&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Remove a directory.</p> <p>This corresponds to the <code>path_remove_directory</code> syscall.</p> </div>
</div>
<h2 id="provided-methods" class="small-section-header">Provided Methods</h2>
<div class="methods">
<summary><div id="method.read_at" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#30-33">source</a></div>
<h4 class="code-header">fn read_at(&amp;self, buf: &amp;mut [u8], offset: u64) -&gt; Result&lt;usize&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Reads a number of bytes starting from a given offset.</p> <p>Returns the number of bytes read.</p> <p>The offset is relative to the start of the file and thus independent from the current cursor.</p> <p>The current file cursor is not affected by this function.</p> <p>Note that similar to <a href="../../../fs/struct.file#method.read" title="File::read"><code>File::read</code></a>, it is not an error to return with a short read.</p> </div>
<summary><div id="method.read_exact_at" class="method has-srclink">
<div class="rightside">
<a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#76-94">source</a><span class="since" title="Stable since Rust version 1.33.0">1.33.0</span> · </div>
<h4 class="code-header">fn read_exact_at(&amp;self, buf: &amp;mut [u8], offset: u64) -&gt; Result&lt;()&gt;</h4>
</div></summary><div class="docblock">
<p>Reads the exact number of byte required to fill <code>buf</code> from the given offset.</p> <p>The offset is relative to the start of the file and thus independent from the current cursor.</p> <p>The current file cursor is not affected by this function.</p> <p>Similar to <a href="../../../io/trait.read#method.read_exact" title="Read::read_exact"><code>Read::read_exact</code></a> but uses <a href="trait.fileext#method.read_at"><code>read_at</code></a> instead of <code>read</code>.</p> <h5 id="errors">Errors</h5> <p>If this function encounters an error of the kind <a href="../../../io/enum.errorkind#variant.Interrupted" title="io::ErrorKind::Interrupted"><code>io::ErrorKind::Interrupted</code></a> then the error is ignored and the operation will continue.</p> <p>If this function encounters an “end of file” before completely filling the buffer, it returns an error of the kind <a href="../../../io/enum.errorkind#variant.UnexpectedEof" title="io::ErrorKind::UnexpectedEof"><code>io::ErrorKind::UnexpectedEof</code></a>. The contents of <code>buf</code> are unspecified in this case.</p> <p>If any other read error is encountered then this function immediately returns. The contents of <code>buf</code> are unspecified in this case.</p> <p>If this function returns an error, it is unspecified how many bytes it has read, but it will never read more than would be necessary to completely fill the buffer.</p> </div>
<summary><div id="method.write_at" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#110-113">source</a></div>
<h4 class="code-header">fn write_at(&amp;self, buf: &amp;[u8], offset: u64) -&gt; Result&lt;usize&gt;</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>wasi_ext</code> <a href="https://github.com/rust-lang/rust/issues/71213">#71213</a>)</div></span><div class="docblock">
<p>Writes a number of bytes starting from a given offset.</p> <p>Returns the number of bytes written.</p> <p>The offset is relative to the start of the file and thus independent from the current cursor.</p> <p>The current file cursor is not affected by this function.</p> <p>When writing beyond the end of the file, the file is appropriately extended and the intermediate bytes are initialized with the value 0.</p> <p>Note that similar to <a href="../../../fs/struct.file#method.write" title="File::write"><code>File::write</code></a>, it is not an error to return a short write.</p> </div>
<summary><div id="method.write_all_at" class="method has-srclink">
<div class="rightside">
<a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#152-170">source</a><span class="since" title="Stable since Rust version 1.33.0">1.33.0</span> · </div>
<h4 class="code-header">fn write_all_at(&amp;self, buf: &amp;[u8], offset: u64) -&gt; Result&lt;()&gt;</h4>
</div></summary><div class="docblock">
<p>Attempts to write an entire buffer starting from a given offset.</p> <p>The offset is relative to the start of the file and thus independent from the current cursor.</p> <p>The current file cursor is not affected by this function.</p> <p>This method will continuously call <a href="trait.fileext#method.write_at"><code>write_at</code></a> until there is no more data to be written or an error of non-<a href="../../../io/enum.errorkind#variant.Interrupted" title="io::ErrorKind::Interrupted"><code>io::ErrorKind::Interrupted</code></a> kind is returned. This method will not return until the entire buffer has been successfully written or such an error occurs. The first error that is not of <a href="../../../io/enum.errorkind#variant.Interrupted" title="io::ErrorKind::Interrupted"><code>io::ErrorKind::Interrupted</code></a> kind generated from this method will be returned.</p> <h5 id="errors-1">Errors</h5> <p>This function will return the first error of non-<a href="../../../io/enum.errorkind#variant.Interrupted" title="io::ErrorKind::Interrupted"><code>io::ErrorKind::Interrupted</code></a> kind that <a href="trait.fileext#method.write_at"><code>write_at</code></a> returns.</p> </div>
</div>
<h2 id="implementors" class="small-section-header">Implementors</h2>
<div class="item-list" id="implementors-list"><section id="impl-FileExt" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/os/wasi/fs.rs.html#231-295">source</a></span><h3 class="code-header in-band">impl FileExt for File</h3></section></div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://doc.rust-lang.org/std/os/wasi/fs/trait.FileExt.html" class="_attribution-link" target="_blank">https://doc.rust-lang.org/std/os/wasi/fs/trait.FileExt.html</a>
  </p>
</div>
