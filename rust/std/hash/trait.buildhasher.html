<h1 class="main-heading">Trait std::hash::BuildHasher</h1>
<pre class="rust trait" data-language="rust">pub trait BuildHasher {
    type Hasher: Hasher;

    fn build_hasher(&amp;self) -&gt; Self::Hasher;

    fn hash_one&lt;T&gt;(&amp;self, x: T) -&gt; u64Â Â Â  whereÂ Â Â Â Â Â Â Â T: Hash,
    { ... }
}</pre>
<p>A trait for creating instances of <a href="trait.hasher" title="Hasher"><code>Hasher</code></a>.</p> <p>A <code>BuildHasher</code> is typically used (e.g., by <a href="../collections/struct.hashmap"><code>HashMap</code></a>) to create <a href="trait.hasher" title="Hasher"><code>Hasher</code></a>s for each key such that they are hashed independently of one another, since <a href="trait.hasher" title="Hasher"><code>Hasher</code></a>s contain state.</p> <p>For each instance of <code>BuildHasher</code>, the <a href="trait.hasher" title="Hasher"><code>Hasher</code></a>s created by <a href="trait.buildhasher#tymethod.build_hasher"><code>build_hasher</code></a> should be identical. That is, if the same stream of bytes is fed into each hasher, the same output will also be generated.</p> <h2 id="examples">Examples</h2> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">use std::collections::hash_map::RandomState;
use std::hash::{BuildHasher, Hasher};

let s = RandomState::new();
let mut hasher_1 = s.build_hasher();
let mut hasher_2 = s.build_hasher();

hasher_1.write_u32(8128);
hasher_2.write_u32(8128);

assert_eq!(hasher_1.finish(), hasher_2.finish());</pre></div> <h2 id="required-associated-types" class="small-section-header">Required Associated Types</h2>
<div class="methods">
<summary><div id="associatedtype.Hasher" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/core/hash/mod.rs.html#644">source</a></div>
<h4 class="code-header">type Hasher: Hasher</h4>
</div></summary><div class="docblock">
<p>Type of the hasher that will be created.</p> </div>
</div>
<h2 id="required-methods" class="small-section-header">Required Methods</h2>
<div class="methods">
<summary><div id="tymethod.build_hasher" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/core/hash/mod.rs.html#661">source</a></div>
<h4 class="code-header">fn build_hasher(&amp;self) -&gt; Self::Hasher</h4>
</div></summary><div class="docblock">
<p>Creates a new hasher.</p> <p>Each call to <code>build_hasher</code> on the same instance should produce identical <a href="trait.hasher" title="Hasher"><code>Hasher</code></a>s.</p> <h5 id="examples-1">Examples</h5> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">use std::collections::hash_map::RandomState;
use std::hash::BuildHasher;

let s = RandomState::new();
let new_s = s.build_hasher();</pre></div> </div>
</div>
<h2 id="provided-methods" class="small-section-header">Provided Methods</h2>
<div class="methods">
<summary><div id="method.hash_one" class="method has-srclink">
<div class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/core/hash/mod.rs.html#701-703">source</a></div>
<h4 class="code-header">fn hash_one&lt;T&gt;(&amp;self, x: T) -&gt; u64 <span class="where fmt-newline">where<br> T: <a class="trait" href="trait.hash" title="trait std::hash::Hash">Hash</a>, </span>
</h4>
</div></summary><span class="item-info"><div class="stab unstable">
<span class="emoji">ðŸ”¬</span> This is a nightly-only experimental API. (<code>build_hasher_simple_hash_one</code> <a href="https://github.com/rust-lang/rust/issues/86161">#86161</a>)</div></span><div class="docblock">
<p>Calculates the hash of a single value.</p> <p>This is intended as a convenience for code which <em>consumes</em> hashes, such as the implementation of a hash table or in unit tests that check whether a custom <a href="trait.hash" title="Hash"><code>Hash</code></a> implementation behaves as expected.</p> <p>This must not be used in any code which <em>creates</em> hashes, such as in an implementation of <a href="trait.hash" title="Hash"><code>Hash</code></a>. The way to create a combined hash of multiple values is to call <a href="trait.hash#tymethod.hash" title="Hash::hash"><code>Hash::hash</code></a> multiple times using the same <a href="trait.hasher" title="Hasher"><code>Hasher</code></a>, not to call this method repeatedly and combine the results.</p> <h5 id="example">Example</h5> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">#![feature(build_hasher_simple_hash_one)]

use std::cmp::{max, min};
use std::hash::{BuildHasher, Hash, Hasher};
struct OrderAmbivalentPair&lt;T: Ord&gt;(T, T);
impl&lt;T: Ord + Hash&gt; Hash for OrderAmbivalentPair&lt;T&gt; {
    fn hash&lt;H: Hasher&gt;(&amp;self, hasher: &amp;mut H) {
        min(&amp;self.0, &amp;self.1).hash(hasher);
        max(&amp;self.0, &amp;self.1).hash(hasher);
    }
}

// Then later, in a `#[test]` for the type...
let bh = std::collections::hash_map::RandomState::new();
assert_eq!(
    bh.hash_one(OrderAmbivalentPair(1, 2)),
    bh.hash_one(OrderAmbivalentPair(2, 1))
);
assert_eq!(
    bh.hash_one(OrderAmbivalentPair(10, 2)),
    bh.hash_one(&amp;OrderAmbivalentPair(2, 10))
);</pre></div> </div>
</div>
<h2 id="implementors" class="small-section-header">Implementors</h2>
<div class="item-list" id="implementors-list">
<summary><section id="impl-BuildHasher" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/std/collections/hash/map.rs.html#2964-2971">source</a></span><h3 class="code-header in-band">impl BuildHasher for RandomState</h3></section></summary><div class="impl-items"><section id="associatedtype.Hasher-1" class="associatedtype trait-impl has-srclink"><h4 class="code-header">type Hasher = DefaultHasher</h4></section></div>
<summary><section id="impl-BuildHasher-1" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/src/core/hash/mod.rs.html#767-773">source</a></span><h3 class="code-header in-band">impl&lt;H&gt; BuildHasher for BuildHasherDefault&lt;H&gt; <span class="where fmt-newline">where<br> H: <a class="trait" href="../default/trait.default" title="trait std::default::Default">Default</a> + <a class="trait" href="trait.hasher" title="trait std::hash::Hasher">Hasher</a>, </span>
</h3></section></summary><div class="impl-items"><section id="associatedtype.Hasher-2" class="associatedtype trait-impl has-srclink"><h4 class="code-header">type Hasher = H</h4></section></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://doc.rust-lang.org/std/hash/trait.BuildHasher.html" class="_attribution-link" target="_blank">https://doc.rust-lang.org/std/hash/trait.BuildHasher.html</a>
  </p>
</div>
