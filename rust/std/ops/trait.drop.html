<h1 class="fqn">Trait std::ops::Drop</h1>
<pre class="rust trait" data-language="rust">pub trait Drop {
    fn drop(&amp;mut self);
}</pre>
<details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock">
<p>Custom code within the destructor.</p> <p>When a value is no longer needed, Rust will run a “destructor” on that value. The most common way that a value is no longer needed is when it goes out of scope. Destructors may still run in other circumstances, but we’re going to focus on scope for the examples here. To learn about some of those other cases, please see <a href="../../reference/destructors">the reference</a> section on destructors.</p> <p>This destructor consists of two components:</p> <ul> <li>A call to <code>Drop::drop</code> for that value, if this special <code>Drop</code> trait is implemented for its type.</li> <li>The automatically generated “drop glue” which recursively calls the destructors of the all fields of this value.</li> </ul> <p>As Rust automatically calls the destructors of all contained fields, you don’t have to implement <code>Drop</code> in most cases. But there are some cases where it is useful, for example for types which directly manage a resource. That resource may be memory, it may be a file descriptor, it may be a network socket. Once a value of that type is no longer going to be used, it should “clean up” its resource by freeing the memory or closing the file or socket. This is the job of a destructor, and therefore the job of <code>Drop::drop</code>.</p> <h3 id="examples" class="section-header">Examples</h3> <p>To see destructors in action, let’s take a look at the following program:</p> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">
struct HasDrop;

impl Drop for HasDrop {
    fn drop(&amp;mut self) {
        println!("Dropping HasDrop!");
    }
}

struct HasTwoDrops {
    one: HasDrop,
    two: HasDrop,
}

impl Drop for HasTwoDrops {
    fn drop(&amp;mut self) {
        println!("Dropping HasTwoDrops!");
    }
}

fn main() {
    let _x = HasTwoDrops { one: HasDrop, two: HasDrop };
    println!("Running!");
}</pre></div> <p>Rust will first call <code>Drop::drop</code> for <code>_x</code> and then for both <code>_x.one</code> and <code>_x.two</code>, meaning that running this will print</p> <pre>Running!
Dropping HasTwoDrops!
Dropping HasDrop!
Dropping HasDrop!
</pre> <p>Even if we remove the implementation of <code>Drop</code> for <code>HasTwoDrop</code>, the destructors of its fields are still called. This would result in</p> <pre>Running!
Dropping HasDrop!
Dropping HasDrop!
</pre> <h3 id="you-cannot-call-dropdrop-yourself" class="section-header">You cannot call <code>Drop::drop</code> yourself</h3> <p>Because <code>Drop::drop</code> is used to clean up a value, it may be dangerous to use this value after the method has been called. As <code>Drop::drop</code> does not take ownership of its input, Rust prevents misuse by not allowing you to call <code>Drop::drop</code> directly.</p> <p>In other words, if you tried to explicitly call <code>Drop::drop</code> in the above example, you’d get a compiler error.</p> <p>If you’d like to explicitly call the destructor of a value, <a href="../mem/fn.drop"><code>mem::drop</code></a> can be used instead.</p> <h3 id="drop-order" class="section-header">Drop order</h3> <p>Which of our two <code>HasDrop</code> drops first, though? For structs, it’s the same order that they’re declared: first <code>one</code>, then <code>two</code>. If you’d like to try this yourself, you can modify <code>HasDrop</code> above to contain some data, like an integer, and then use it in the <code>println!</code> inside of <code>Drop</code>. This behavior is guaranteed by the language.</p> <p>Unlike for structs, local variables are dropped in reverse order:</p> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">
struct Foo;

impl Drop for Foo {
    fn drop(&amp;mut self) {
        println!("Dropping Foo!")
    }
}

struct Bar;

impl Drop for Bar {
    fn drop(&amp;mut self) {
        println!("Dropping Bar!")
    }
}

fn main() {
    let _foo = Foo;
    let _bar = Bar;
}</pre></div> <p>This will print</p> <pre>Dropping Bar!
Dropping Foo!
</pre> <p>Please see <a href="../../reference/destructors">the reference</a> for the full rules.</p> <h3 id="copy-and-drop-are-exclusive" class="section-header">
<code>Copy</code> and <code>Drop</code> are exclusive</h3> <p>You cannot implement both <a href="../marker/trait.copy" title="Copy"><code>Copy</code></a> and <code>Drop</code> on the same type. Types that are <code>Copy</code> get implicitly duplicated by the compiler, making it very hard to predict when, and how often destructors will be executed. As such, these types cannot have destructors.</p> </div></details><h2 id="required-methods" class="small-section-header">Required methods</h2>
<div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.drop" class="method has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/core/ops/drop.rs.html#164" title="goto source code">[src]</a>
</div></summary><div class="docblock">
<p>Executes the destructor for this type.</p> <p>This method is called implicitly when the value goes out of scope, and cannot be called explicitly (this is compiler error <a href="../../error-index#E0040">E0040</a>). However, the <a href="../mem/fn.drop"><code>mem::drop</code></a> function in the prelude can be used to call the argument’s <code>Drop</code> implementation.</p> <p>When this method has been called, <code>self</code> has not yet been deallocated. That only happens after the method is over. If this wasn’t the case, <code>self</code> would be a dangling reference.</p> <h2 id="panics" class="section-header">Panics</h2> <p>Given that a <a href="https://doc.rust-lang.org/core/macro.panic.html"><code>panic!</code></a> will call <code>drop</code> as it unwinds, any <a href="https://doc.rust-lang.org/core/macro.panic.html"><code>panic!</code></a> in a <code>drop</code> implementation will likely abort.</p> <p>Note that even if this panics, the value is considered to be dropped; you must not cause <code>drop</code> to be called again. This is normally automatically handled by the compiler, but when using unsafe code, can sometimes occur unintentionally, particularly when using <a href="../ptr/fn.drop_in_place"><code>ptr::drop_in_place</code></a>.</p> </div></details></div>
<h2 id="implementors" class="small-section-header">Implementors</h2>
<div class="item-list" id="implementors-list">
<details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop" class="impl has-srclink">
<h3 class="code-header in-band">impl Drop for CString</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/ffi/c_str.rs.html#768-775" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.13.0">1.13.0</span>
</div></summary><div class="impl-items"><div id="method.drop" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/ffi/c_str.rs.html#770-774" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-1" class="impl has-srclink">
<h3 class="code-header in-band">impl Drop for Waker</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/core/task/wake.rs.html#274-282" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.36.0">1.36.0</span>
</div></summary><div class="impl-items"><div id="method.drop-1" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/core/task/wake.rs.html#276" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-2" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_&gt; Drop for std::string::Drain&lt;'_&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/string.rs.html#2753-2764" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.6.0">1.6.0</span>
</div></summary><div class="impl-items"><div id="method.drop-2" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/string.rs.html#2754" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-3" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, I, A&gt; Drop for Splice&lt;'_, I, A&gt; <span class="where fmt-newline">where<br> I: <a class="trait" href="../iter/trait.iterator" title="trait std::iter::Iterator">Iterator</a>,<br> A: <a class="trait" href="../alloc/trait.allocator" title="trait std::alloc::Allocator">Allocator</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/splice.rs.html#54-92" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.21.0">1.21.0</span>
</div></summary><div class="impl-items"><div id="method.drop-3" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/splice.rs.html#55" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-4" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, K, V, F&gt; Drop for std::collections::btree_map::DrainFilter&lt;'_, K, V, F&gt; <span class="where fmt-newline">where<br> F: <a class="trait" href="trait.fnmut" title="trait std::ops::FnMut">FnMut</a>(<a class="primitive" href="../primitive.reference">&amp;</a>K, <a class="primitive" href="../primitive.reference">&amp;mut </a>V) -&gt; <a class="primitive" href="../primitive.bool">bool</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/map.rs.html#1644-1651" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-4" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/map.rs.html#1648" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-5" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, T&gt; Drop for PeekMut&lt;'_, T&gt; <span class="where fmt-newline">where<br> T: <a class="trait" href="../cmp/trait.ord" title="trait std::cmp::Ord">Ord</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/binary_heap.rs.html#276-283" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.12.0">1.12.0</span>
</div></summary><div class="impl-items"><div id="method.drop-5" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/binary_heap.rs.html#277" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-6" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, T&gt; Drop for std::collections::vec_deque::Drain&lt;'_, T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/vec_deque/drain.rs.html#38-96" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.6.0">1.6.0</span>
</div></summary><div class="impl-items"><div id="method.drop-6" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/vec_deque/drain.rs.html#39" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-7" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, T, A&gt; Drop for std::vec::Drain&lt;'_, T, A&gt; <span class="where fmt-newline">where<br> A: <a class="trait" href="../alloc/trait.allocator" title="trait std::alloc::Allocator">Allocator</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/drain.rs.html#103-142" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.6.0">1.6.0</span>
</div></summary><div class="impl-items"><div id="method.drop-7" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/drain.rs.html#104" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-8" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, T, F&gt; Drop for std::collections::btree_set::DrainFilter&lt;'_, T, F&gt; <span class="where fmt-newline">where<br> F: <a class="trait" href="trait.fnmut" title="trait std::ops::FnMut">FnMut</a>(<a class="primitive" href="../primitive.reference">&amp;</a>T) -&gt; <a class="primitive" href="../primitive.bool">bool</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/set.rs.html#1103-1110" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-8" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/set.rs.html#1107" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-9" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, T, F&gt; Drop for std::collections::linked_list::DrainFilter&lt;'_, T, F&gt; <span class="where fmt-newline">where<br> F: <a class="trait" href="trait.fnmut" title="trait std::ops::FnMut">FnMut</a>(<a class="primitive" href="../primitive.reference">&amp;mut </a>T) -&gt; <a class="primitive" href="../primitive.bool">bool</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/linked_list.rs.html#1554-1578" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-9" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/linked_list.rs.html#1558" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-10" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'_, T, F, A&gt; Drop for std::vec::DrainFilter&lt;'_, T, F, A&gt; <span class="where fmt-newline">where<br> F: <a class="trait" href="trait.fnmut" title="trait std::ops::FnMut">FnMut</a>(<a class="primitive" href="../primitive.reference">&amp;mut </a>T) -&gt; <a class="primitive" href="../primitive.bool">bool</a>,<br> A: <a class="trait" href="../alloc/trait.allocator" title="trait std::alloc::Allocator">Allocator</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/drain_filter.rs.html#98-143" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-10" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/drain_filter.rs.html#102" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-11" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'a, T&gt; Drop for DrainSorted&lt;'a, T&gt; <span class="where fmt-newline">where<br> T: <a class="trait" href="../cmp/trait.ord" title="trait std::cmp::Ord">Ord</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/binary_heap.rs.html#1413-1430" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.drop-11" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/binary_heap.rs.html#1415" title="goto source code">[src]</a>
</div></summary><div class="docblock">
<p>Removes heap elements in heap order.</p> </div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-12" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;'f&gt; Drop for VaListImpl&lt;'f&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/core/ffi.rs.html#380-393" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-12" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/core/ffi.rs.html#381" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-13" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;K, V&gt; Drop for std::collections::btree_map::IntoIter&lt;K, V&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/map.rs.html#1476-1482" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.7.0">1.7.0</span>
</div></summary><div class="impl-items"><div id="method.drop-13" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/map.rs.html#1477" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-14" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;K, V&gt; Drop for BTreeMap&lt;K, V&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/map.rs.html#149-155" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.7.0">1.7.0</span>
</div></summary><div class="impl-items"><div id="method.drop-14" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/btree/map.rs.html#150" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-15" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for LinkedList&lt;T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/linked_list.rs.html#968-986" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-15" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/linked_list.rs.html#969" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-16" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for VecDeque&lt;T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/vec_deque/mod.rs.html#117-139" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-16" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/collections/vec_deque/mod.rs.html#118" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-17" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for SyncOnceCell&lt;T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/lazy.rs.html#463-472" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-17" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/lazy.rs.html#464-471" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-18" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for Rc&lt;T&gt; <span class="where fmt-newline">where<br> T: ?<a class="trait" href="../marker/trait.sized" title="trait std::marker::Sized">Sized</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/rc.rs.html#1408-1451" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.drop-18" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/rc.rs.html#1434" title="goto source code">[src]</a>
</div></summary><div class="docblock">
<p>Drops the <code>Rc</code>.</p> <p>This will decrement the strong reference count. If the strong reference count reaches zero then the only other references (if any) are <a href="../rc/struct.weak" title="Weak"><code>Weak</code></a>, so we <code>drop</code> the inner value.</p> <h2 id="examples-1" class="section-header">Examples</h2> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">
use std::rc::Rc;

struct Foo;

impl Drop for Foo {
    fn drop(&amp;mut self) {
        println!("dropped!");
    }
}

let foo  = Rc::new(Foo);
let foo2 = Rc::clone(&amp;foo);

drop(foo);    // Doesn't print anything
drop(foo2);   // Prints "dropped!"</pre></div> </div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-19" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for std::rc::Weak&lt;T&gt; <span class="where fmt-newline">where<br> T: ?<a class="trait" href="../marker/trait.sized" title="trait std::marker::Sized">Sized</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/rc.rs.html#2318-2355" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.4.0">1.4.0</span>
</div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.drop-19" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/rc.rs.html#2343" title="goto source code">[src]</a>
</div></summary><div class="docblock">
<p>Drops the <code>Weak</code> pointer.</p> <h2 id="examples-2" class="section-header">Examples</h2> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">
use std::rc::{Rc, Weak};

struct Foo;

impl Drop for Foo {
    fn drop(&amp;mut self) {
        println!("dropped!");
    }
}

let foo = Rc::new(Foo);
let weak_foo = Rc::downgrade(&amp;foo);
let other_weak_foo = Weak::clone(&amp;weak_foo);

drop(weak_foo);   // Doesn't print anything
drop(foo);        // Prints "dropped!"

assert!(other_weak_foo.upgrade().is_none());</pre></div> </div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-20" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for Receiver&lt;T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mpsc/mod.rs.html#1459-1468" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-20" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mpsc/mod.rs.html#1460-1467" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-21" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for Sender&lt;T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mpsc/mod.rs.html#853-862" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-21" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mpsc/mod.rs.html#854-861" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-22" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for SyncSender&lt;T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mpsc/mod.rs.html#985-989" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-22" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mpsc/mod.rs.html#986-988" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-23" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for Arc&lt;T&gt; <span class="where fmt-newline">where<br> T: ?<a class="trait" href="../marker/trait.sized" title="trait std::marker::Sized">Sized</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/sync.rs.html#1527-1596" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.drop-23" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/sync.rs.html#1554" title="goto source code">[src]</a>
</div></summary><div class="docblock">
<p>Drops the <code>Arc</code>.</p> <p>This will decrement the strong reference count. If the strong reference count reaches zero then the only other references (if any) are <a href="../sync/struct.weak" title="Weak"><code>Weak</code></a>, so we <code>drop</code> the inner value.</p> <h2 id="examples-3" class="section-header">Examples</h2> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">
use std::sync::Arc;

struct Foo;

impl Drop for Foo {
    fn drop(&amp;mut self) {
        println!("dropped!");
    }
}

let foo  = Arc::new(Foo);
let foo2 = Arc::clone(&amp;foo);

drop(foo);    // Doesn't print anything
drop(foo2);   // Prints "dropped!"</pre></div> </div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-24" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T&gt; Drop for std::sync::Weak&lt;T&gt; <span class="where fmt-newline">where<br> T: ?<a class="trait" href="../marker/trait.sized" title="trait std::marker::Sized">Sized</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/sync.rs.html#2018-2059" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.4.0">1.4.0</span>
</div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.drop-24" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/sync.rs.html#2043" title="goto source code">[src]</a>
</div></summary><div class="docblock">
<p>Drops the <code>Weak</code> pointer.</p> <h2 id="examples-4" class="section-header">Examples</h2> <div class="example-wrap"><pre class="rust rust-example-rendered" data-language="rust">
use std::sync::{Arc, Weak};

struct Foo;

impl Drop for Foo {
    fn drop(&amp;mut self) {
        println!("dropped!");
    }
}

let foo = Arc::new(Foo);
let weak_foo = Arc::downgrade(&amp;foo);
let other_weak_foo = Weak::clone(&amp;weak_foo);

drop(weak_foo);   // Doesn't print anything
drop(foo);        // Prints "dropped!"

assert!(other_weak_foo.upgrade().is_none());</pre></div> </div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-25" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T, A&gt; Drop for Box&lt;T, A&gt; <span class="where fmt-newline">where<br> T: ?<a class="trait" href="../marker/trait.sized" title="trait std::marker::Sized">Sized</a>,<br> A: <a class="trait" href="../alloc/trait.allocator" title="trait std::alloc::Allocator">Allocator</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/boxed.rs.html#1022-1026" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-25" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/boxed.rs.html#1023" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-26" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T, A&gt; Drop for std::vec::IntoIter&lt;T, A&gt; <span class="where fmt-newline">where<br> A: <a class="trait" href="../alloc/trait.allocator" title="trait std::alloc::Allocator">Allocator</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/into_iter.rs.html#242-264" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-26" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/into_iter.rs.html#243" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-27" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T, A&gt; Drop for Vec&lt;T, A&gt; <span class="where fmt-newline">where<br> A: <a class="trait" href="../alloc/trait.allocator" title="trait std::alloc::Allocator">Allocator</a>, </span>
</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/mod.rs.html#2710-2720" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-27" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/alloc/vec/mod.rs.html#2711" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-28" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T, const N: usize&gt; Drop for std::array::IntoIter&lt;T, N&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/core/array/iter.rs.html#156-163" title="goto source code">[src]</a><span class="since" title="Stable since Rust version 1.40.0">1.40.0</span>
</div></summary><div class="impl-items"><div id="method.drop-28" class="method trait-impl has-srclink">
<h4 class="code-header">pub fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/core/array/iter.rs.html#157" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-29" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T: ?Sized&gt; Drop for MutexGuard&lt;'_, T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mutex.rs.html#479-487" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-29" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/mutex.rs.html#481-486" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-30" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T: ?Sized&gt; Drop for RwLockReadGuard&lt;'_, T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/rwlock.rs.html#518-524" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-30" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/rwlock.rs.html#519-523" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-31" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;T: ?Sized&gt; Drop for RwLockWriteGuard&lt;'_, T&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/rwlock.rs.html#527-534" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-31" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/sync/rwlock.rs.html#528-533" title="goto source code">[src]</a>
</div></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Drop-32" class="impl has-srclink">
<h3 class="code-header in-band">impl&lt;W: Write&gt; Drop for BufWriter&lt;W&gt;</h3>
<a class="srclink" href="https://doc.rust-lang.org/src/std/io/buffered/bufwriter.rs.html#664-671" title="goto source code">[src]</a>
</div></summary><div class="impl-items"><div id="method.drop-32" class="method trait-impl has-srclink">
<h4 class="code-header">fn drop(&amp;mut self)</h4>
<a class="srclink" href="https://doc.rust-lang.org/src/std/io/buffered/bufwriter.rs.html#665-670" title="goto source code">[src]</a>
</div></div></details>
</div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://doc.rust-lang.org/std/ops/trait.Drop.html" class="_attribution-link" target="_blank">https://doc.rust-lang.org/std/ops/trait.Drop.html</a>
  </p>
</div>
