 <div class="theme-default-content content__default">
<h1 id="client-side-hydration"> Client Side Hydration</h1> <p>Hydration refers to the client-side process during which Vue takes over the static HTML sent by the server and turns it into dynamic DOM that can react to client-side data changes.</p> <p>In <code>entry-client.js</code>, we are simply mounting the app with this line:</p> <div class="language-js line-numbers-mode">
<pre class="language-js" data-language="javascript">app.mount('#app')</pre> </div>
<p>Since the server has already rendered the markup, we obviously do not want to throw that away and re-create all the DOM elements. Instead, we want to "hydrate" the static markup and make it interactive.</p> <p>Vue provides a <code>createSSRApp</code> method for use in client-side code (in this case, in our <code>entry-client.js</code>) to tell Vue to hydrate the existing static HTML instead of re-creating all the DOM elements.</p> <h3 id="hydration-caveats"> Hydration Caveats</h3> <p>Vue will assert the client-side generated virtual DOM tree matches the DOM structure rendered from the server. If there is a mismatch, it will bail hydration, discard existing DOM and render from scratch. There will be a warning in the browser console but your site will still work.</p> <p>The first key way to ensure that SSR is working to ensuring your application state is the same on client and server. Take special care not to depend on APIs specific to the browser (like window width, device capability or localStorage) or server (such as Node built-ins), and take care where the same code will give different results when run in different places (such as when using timezones, timestamps, normalizing URLs or generating random numbers). See <a href="universal">Writing Universal Code</a> for more details.</p> <p>A second key thing to be aware of when using SSR + client hydration is that invalid HTML may be altered by the browser. For example, when you write this in a Vue template:</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;table&gt;
  &lt;tr&gt;
    &lt;td&gt;hi&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</pre> </div>
<p>The browser will automatically inject <code>&lt;tbody&gt;</code> inside <code>&lt;table&gt;</code>, however, the virtual DOM generated by Vue does not contain <code>&lt;tbody&gt;</code>, so it will cause a mismatch. To ensure correct matching, make sure to write valid HTML in your templates.</p> <p>You might consider using a HTML validator like <a href="https://validator.w3.org/" target="_blank" rel="noopener noreferrer">the W3C Markup Validation Service<span> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://html-validate.org/" target="_blank" rel="noopener noreferrer">HTML-validate<span> <span class="sr-only">(opens new window)</span></span></a> to check your templates in development.</p>
</div>   <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://v3.vuejs.org/guide/ssr/hydration.html" class="_attribution-link" target="_blank">https://v3.vuejs.org/guide/ssr/hydration.html</a>
  </p>
</div>
