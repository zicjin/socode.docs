 <div class="theme-default-content content__default">
<h1 id="key-attribute"> <code>key</code> Attribute <div class="migration-badge-wrapper" data-v-cb310528><span class="migration-badge is-breaking" data-v-cb310528> breaking </span></div>
</h1> <h2 id="overview"> Overview</h2> <ul>
<li>
<strong>NEW:</strong> <code>key</code>s are no longer necessary on <code>v-if</code>/<code>v-else</code>/<code>v-else-if</code> branches, since Vue now automatically generates unique <code>key</code>s. <ul><li>
<strong>BREAKING:</strong> If you manually provide <code>key</code>s, then each branch must use a unique <code>key</code>. You can no longer intentionally use the same <code>key</code> to force branch reuse.</li></ul>
</li> <li>
<strong>BREAKING:</strong> <code>&lt;template v-for&gt;</code> <code>key</code> should be placed on the <code>&lt;template&gt;</code> tag (rather than on its children).</li>
</ul> <h2 id="background"> Background</h2> <p>The <code>key</code> special attribute is used as a hint for Vue's virtual DOM algorithm to keep track of a node's identity. That way, Vue knows when it can reuse and patch existing nodes and when it needs to reorder or recreate them. For more information, see the following sections:</p> <ul>
<li><a href="../list#maintaining-state">List Rendering: Maintaining State</a></li> <li><a href="../../api/special-attributes#key">API Reference: <code>key</code> Special Attribute</a></li>
</ul> <h2 id="on-conditional-branches"> On conditional branches</h2> <p>In Vue 2.x, it was recommended to use <code>key</code>s on <code>v-if</code>/<code>v-else</code>/<code>v-else-if</code> branches.</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;!-- Vue 2.x --&gt;
&lt;div v-if="condition" key="yes"&gt;Yes&lt;/div&gt;
&lt;div v-else key="no"&gt;No&lt;/div&gt;</pre> </div>
<p>The example above still works in Vue 3.x. However, we no longer recommend using the <code>key</code> attribute on <code>v-if</code>/<code>v-else</code>/<code>v-else-if</code> branches, since unique <code>key</code>s are now automatically generated on conditional branches if you don't provide them.</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;!-- Vue 3.x --&gt;
&lt;div v-if="condition"&gt;Yes&lt;/div&gt;
&lt;div v-else&gt;No&lt;/div&gt;</pre> </div>
<p>The breaking change is that if you manually provide <code>key</code>s, each branch must use a unique <code>key</code>. In most cases, you can remove these <code>key</code>s.</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;!-- Vue 2.x --&gt;
&lt;div v-if="condition" key="a"&gt;Yes&lt;/div&gt;
&lt;div v-else key="a"&gt;No&lt;/div&gt;

&lt;!-- Vue 3.x (recommended solution: remove keys) --&gt;
&lt;div v-if="condition"&gt;Yes&lt;/div&gt;
&lt;div v-else&gt;No&lt;/div&gt;

&lt;!-- Vue 3.x (alternate solution: make sure the keys are always unique) --&gt;
&lt;div v-if="condition" key="a"&gt;Yes&lt;/div&gt;
&lt;div v-else key="b"&gt;No&lt;/div&gt;</pre> </div>
<h2 id="with-template-v-for"> With <code>&lt;template v-for&gt;</code>
</h2> <p>In Vue 2.x, a <code>&lt;template&gt;</code> tag could not have a <code>key</code>. Instead, you could place the <code>key</code>s on each of its children.</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;!-- Vue 2.x --&gt;
&lt;template v-for="item in list"&gt;
  &lt;div :key="'heading-' + item.id"&gt;...&lt;/div&gt;
  &lt;span :key="'content-' + item.id"&gt;...&lt;/span&gt;
&lt;/template&gt;</pre> </div>
<p>In Vue 3.x, the <code>key</code> should be placed on the <code>&lt;template&gt;</code> tag instead.</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;!-- Vue 3.x --&gt;
&lt;template v-for="item in list" :key="item.id"&gt;
  &lt;div&gt;...&lt;/div&gt;
  &lt;span&gt;...&lt;/span&gt;
&lt;/template&gt;</pre> </div>
<p>Similarly, when using <code>&lt;template v-for&gt;</code> with a child that uses <code>v-if</code>, the <code>key</code> should be moved up to the <code>&lt;template&gt;</code> tag.</p> <div class="language-html line-numbers-mode">
<pre class="language-html" data-language="javascript">&lt;!-- Vue 2.x --&gt;
&lt;template v-for="item in list"&gt;
  &lt;div v-if="item.isVisible" :key="item.id"&gt;...&lt;/div&gt;
  &lt;span v-else :key="item.id"&gt;...&lt;/span&gt;
&lt;/template&gt;

&lt;!-- Vue 3.x --&gt;
&lt;template v-for="item in list" :key="item.id"&gt;
  &lt;div v-if="item.isVisible"&gt;...&lt;/div&gt;
  &lt;span v-else&gt;...&lt;/span&gt;
&lt;/template&gt;</pre> </div>
</div>   <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://v3.vuejs.org/guide/migration/key-attribute.html" class="_attribution-link" target="_blank">https://v3.vuejs.org/guide/migration/key-attribute.html</a>
  </p>
</div>
