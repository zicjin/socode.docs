 <div class="theme-default-content content__default">
<h1 id="functional-components"> Functional Components <div class="migration-badge-wrapper" data-v-cb310528><span class="migration-badge is-breaking" data-v-cb310528> breaking </span></div>
</h1> <h2 id="overview"> Overview</h2> <p>In terms of what has changed, at a high level:</p> <ul>
<li>Performance gains from 2.x for functional components are now negligible in 3.x, so we recommend just using stateful components</li> <li>Functional components can only be created using a plain function that receives <code>props</code> and <code>context</code> (i.e., <code>slots</code>, <code>attrs</code>, <code>emit</code>)</li> <li>
<strong>BREAKING:</strong> <code>functional</code> attribute on single-file component (SFC) <code>&lt;template&gt;</code> is removed</li> <li>
<strong>BREAKING:</strong> <code>{ functional: true }</code> option in components created by functions is removed</li>
</ul> <p>For more information, read on!</p> <h2 id="introduction"> Introduction</h2> <p>In Vue 2, functional components had two primary use cases:</p> <ul>
<li>as a performance optimization, because they initialized much faster than stateful components</li> <li>to return multiple root nodes</li>
</ul> <p>However, in Vue 3, the performance of stateful components has improved to the point that the difference is negligible. In addition, stateful components now also include the ability to return multiple root nodes.</p> <p>As a result, the only remaining use case for functional components is simple components, such as a component to create a dynamic heading. Otherwise, it is recommended to use stateful components as you normally would.</p> <h2 id="_2-x-syntax"> 2.x Syntax</h2> <p>Using the <code>&lt;dynamic-heading&gt;</code> component, which is responsible for rendering out the appropriate heading (i.e., <code>h1</code>, <code>h2</code>, <code>h3</code>, etc.), this could have been written as a single-file component in 2.x as:</p> <div class="language-js line-numbers-mode">
<pre class="language-js" data-language="javascript">// Vue 2 Functional Component Example
export default {
  functional: true,
  props: ['level'],
  render(h, { props, data, children }) {
    return h(`h${props.level}`, data, children)
  }
}</pre> </div>
<p>Or, for those who preferred the <code>&lt;template&gt;</code> in a single-file component:</p> <div class="language-vue line-numbers-mode">
<pre class="language-vue" data-language="javascript">&lt;!-- Vue 2 Functional Component Example with &lt;template&gt; --&gt;
&lt;template functional&gt;
  &lt;component
    :is="`h${props.level}`"
    v-bind="attrs"
    v-on="listeners"
  /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: ['level']
}
&lt;/script&gt;</pre> </div>
<h2 id="_3-x-syntax"> 3.x Syntax</h2> <h3 id="components-created-by-functions"> Components Created by Functions</h3> <p>Now in Vue 3, all functional components are created with a plain function. In other words, there is no need to define the <code>{ functional: true }</code> component option.</p> <p>They will receive two arguments: <code>props</code> and <code>context</code>. The <code>context</code> argument is an object that contains a component's <code>attrs</code>, <code>slots</code>, and <code>emit</code> properties.</p> <p>In addition, rather than implicitly provide <code>h</code> in a <code>render</code> function, <code>h</code> is now imported globally.</p> <p>Using the previously mentioned example of a <code>&lt;dynamic-heading&gt;</code> component, here is how it looks now.</p> <div class="language-js line-numbers-mode">
<pre class="language-js" data-language="javascript">import { h } from 'vue'

const DynamicHeading = (props, context) =&gt; {
  return h(`h${props.level}`, context.attrs, context.slots)
}

DynamicHeading.props = ['level']

export default DynamicHeading</pre> </div>
<h3 id="single-file-components-sfcs"> Single File Components (SFCs)</h3> <p>In 3.x, the performance difference between stateful and functional components has been drastically reduced and will be insignificant in most use cases. As a result, the migration path for developers using <code>functional</code> on SFCs is to remove the attribute and rename all references of <code>props</code> to <code>$props</code> and <code>attrs</code> to <code>$attrs</code>.</p> <p>Using our <code>&lt;dynamic-heading&gt;</code> example from before, here is how it would look now.</p> <div class="language-vue line-numbers-mode">
<div class="highlight-lines">

<br>

<br><br><br><br><br><br><br><br><br>
</div>
<pre class="language-vue" data-language="javascript">&lt;template&gt;
  &lt;component
    v-bind:is="`h${$props.level}`"
    v-bind="$attrs"
  /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: ['level']
}
&lt;/script&gt;</pre>
</div>
<p>The main differences are that:</p> <ol>
<li>
<code>functional</code> attribute removed on <code>&lt;template&gt;</code>
</li> <li>
<code>listeners</code> are now passed as part of <code>$attrs</code> and can be removed</li>
</ol> <h2 id="next-steps"> Next Steps</h2> <p>For more information on the usage of the new functional components and the changes to render functions in general, see:</p> <ul>
<li><a href="render-function-api">Migration: Render Functions</a></li> <li><a href="../render-function">Guide: Render Functions</a></li> <li><a href="migration-build#compat-configuration">Migration build flag: <code>COMPONENT_FUNCTIONAL</code></a></li>
</ul>
</div>   <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://v3.vuejs.org/guide/migration/functional-components.html" class="_attribution-link" target="_blank">https://v3.vuejs.org/guide/migration/functional-components.html</a>
  </p>
</div>
