<h1 data-toc="native-cocoapods-xcode" id="native-cocoapods-xcode.md">Use a Kotlin Gradle project as a CocoaPods dependency</h1>
<p id="b424d7a3">You can use a Kotlin Multiplatform project with native targets as a CocoaPods dependency. You can include such a dependency in the Podfile of the Xcode project by its name and path to the project directory containing the generated Podspec.</p>
<p id="808ee3de">This dependency will be automatically built (and rebuilt) along with this project. Such an approach simplifies importing to Xcode by removing a need to write the corresponding Gradle tasks and Xcode build steps manually.</p>
<p id="5101ad12">You can add dependencies between a Kotlin Gradle project and an Xcode project with one or several targets. It's also possible to add dependencies between a Gradle project and multiple Xcode projects. However, in this case, you need to add a dependency by calling <code class="code ">pod install</code> manually for each Xcode project. In other cases, it's done automatically.</p>
<aside data-type="note" class="prompt" data-title="" id="9625ac14"><ul class="list _ul" id="b39dd773">
<li class="list__item" id="dc51f476"><p>To correctly import the dependencies into the Kotlin/Native module, the <code class="code ">Podfile</code> must contain either <a href="https://guides.cocoapods.org/syntax/podfile.html#use_modular_headers_bang" id="f9e9a1ed" data-external="true" rel="noopener noreferrer"><code class="code ">use_modular_headers!</code></a> or <a href="https://guides.cocoapods.org/syntax/podfile.html#use_frameworks_bang" id="e9cd5bf2" data-external="true" rel="noopener noreferrer"><code class="code ">use_frameworks!</code></a> directive.</p></li>
<li class="list__item" id="76b853fb"><p>If you don't specify the minimum deployment target version and a dependency Pod requires a higher deployment target, you will get an error.</p></li>
</ul></aside><section class="chapter"><h2 id="xcode-project-with-one-target" data-toc="native-cocoapods-xcode#xcode-project-with-one-target">Xcode project with one target</h2>
<ol class="list _decimal" id="5d08b00f">
<li class="list__item" id="c8688311"><p id="2892e2f5">Create an Xcode project with a <code class="code ">Podfile</code> if you haven’t done so yet.</p></li>
<li class="list__item" id="d73299d3"><p id="a83ec6f7">Add the path to your Xcode project <code class="code ">Podfile</code> with <code class="code ">podfile = project.file(..)</code> to <code class="code ">build.gradle.kts</code> (<code class="code ">build.gradle</code>) of your Kotlin project. This step helps synchronize your Xcode project with Gradle project dependencies by calling <code class="code ">pod install</code> for your <code class="code ">Podfile</code>.</p></li>
<li class="list__item" id="127171c1">
<p id="67654617">Specify the minimum target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" pod("AFNetworking") { version = "~&gt; 4.0.0" } podfile = project.file("../ios-app/Podfile") } } </pre>
</li>
<li class="list__item" id="7e2cb3a7">
<p id="b0b7243d">Add the name and path of the Gradle project you want to include in the Xcode project to <code class="code ">Podfile</code>.</p>
<pre class="code-block" data-lang="ruby" data-language="ruby">use_frameworks! platform :ios, '13.5' target 'ios-app' do pod 'kotlin_library', :path =&gt; '../kotlin-library' end </pre>
</li>
<li class="list__item" id="bfa50abf"><p id="740a0a11">Re-import the project.</p></li>
</ol></section><section class="chapter"><h2 id="xcode-project-with-several-targets" data-toc="native-cocoapods-xcode#xcode-project-with-several-targets">Xcode project with several targets</h2>
<ol class="list _decimal" id="6dd41b50">
<li class="list__item" id="2c6c663a"><p id="e857607b">Create an Xcode project with a <code class="code ">Podfile</code> if you haven’t done so yet.</p></li>
<li class="list__item" id="5a1cd913"><p id="2f356e5b">Add the path to your Xcode project <code class="code ">Podfile</code> with <code class="code ">podfile = project.file(..)</code> to <code class="code ">build.gradle.kts</code> (<code class="code ">build.gradle</code>) of your Kotlin project. This step helps synchronize your Xcode project with Gradle project dependencies by calling <code class="code ">pod install</code> for your <code class="code ">Podfile</code>.</p></li>
<li class="list__item" id="89084460"><p id="d195c92a">Add dependencies to the Pod libraries you want to use in your project with <code class="code ">pod()</code>.</p></li>
<li class="list__item" id="8698dfaa">
<p id="96b257ce">For each target, specify the minimum target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() tvos() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" tvos.deploymentTarget = "13.4" pod("AFNetworking") { version = "~&gt; 4.0.0" } podfile = project.file("../severalTargetsXcodeProject/Podfile") // specify the path to the Podfile } } </pre>
</li>
<li class="list__item" id="b66716cb">
<p id="fffdb259">Add the name and path of the Gradle project you want to include in the Xcode project to the <code class="code ">Podfile</code>.</p>
<pre class="code-block" data-lang="ruby" data-language="ruby">target 'iosApp' do use_frameworks! platform :ios, '13.5' # Pods for iosApp pod 'kotlin_library', :path =&gt; '../kotlin-library' end target 'TVosApp' do use_frameworks! platform :tvos, '13.4' # Pods for TVosApp pod 'kotlin_library', :path =&gt; '../kotlin-library' end </pre>
</li>
<li class="list__item" id="3736a16"><p id="a180e79a">Re-import the project.</p></li>
</ol>
<p id="9fafa630">You can find a sample project <a href="https://github.com/Kotlin/kmm-with-cocoapods-multitarget-xcode-sample" id="b872ee01" data-external="true" rel="noopener noreferrer">here</a>.</p></section><div class="last-modified"> Last modified: 20 January 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="native-cocoapods-libraries">Add dependencies on a Pod library</a> <a class="navigation-links__next" href="apple-framework">Kotlin/Native as an Apple framework – tutorial</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/native-cocoapods-xcode.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/native-cocoapods-xcode.html</a>
  </p>
</div>
