<h1 data-toc="mpp-dsl-reference" id="mpp-dsl-reference.md">Multiplatform Gradle DSL reference</h1>
<aside data-type="note" class="prompt" data-title="" id="330def4e"><p id="c20cfb72">Multiplatform projects are in <a href="components-stability" id="da68370">Alpha</a>. Language features and tooling may change in future Kotlin versions.</p></aside><p id="925ef983">The Kotlin Multiplatform Gradle plugin is a tool for creating <a href="multiplatform" id="649528cb">Kotlin multiplatform</a> projects. Here we provide a reference of its contents; use it as a reminder when writing Gradle build scripts for Kotlin multiplatform projects. Learn the <a href="mpp-intro" id="71585b18">concepts of Kotlin multiplatform projects, how to create and configure them</a>.</p>
<section class="chapter"><h2 id="id-and-version" data-toc="mpp-dsl-reference#id-and-version">Id and version</h2>
<p id="75e7226b">The fully qualified name of the Kotlin Multiplatform Gradle plugin is <code class="code ">org.jetbrains.kotlin.multiplatform</code>. If you use the Kotlin Gradle DSL, you can apply the plugin with <code class="code ">kotlin(“multiplatform”)</code>. The plugin versions match the Kotlin release versions. The most recent version is 1.6.10.</p>
<div class="tabs" id="27cda4b2" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="101b6715" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">plugins { kotlin("multiplatform") version "1.6.10" } </pre></div>
<div class="tabs__content" data-gtm="tab" id="863cab92" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">plugins { id 'org.jetbrains.kotlin.multiplatform' version '1.6.10' } </pre></div>
</div></section><section class="chapter"><h2 id="top-level-blocks" data-toc="mpp-dsl-reference#top-level-blocks">Top-level blocks</h2>
<p id="522acb1"><code class="code ">kotlin</code> is the top-level block for multiplatform project configuration in the Gradle build script. Inside <code class="code ">kotlin</code>, you can write the following blocks:</p>
<div class="table-wrapper"><table class=" wide" id="c16de8a7">
<thead><tr class="ijRowHead" id="fa9d4c2a">
<th id="8b22c63d"><p><b id="aa4bee28" class="">Block</b></p></th>
<th id="34b2c46a"><p><b id="9bda9cba" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="7f0a8af">
<td id="60a489ca"><p><em id="e1ac19bd" class="">&lt;targetName&gt;</em></p></td>
<td id="79f00281"><p>Declares a particular target of a project. The names of available targets are listed in the <a href="#targets" id="be0d3a79">Targets</a> section.</p></td>
</tr>
<tr class="" id="e4217515">
<td id="8e4ad387"><p><code class="code ">targets</code></p></td>
<td id="1bdc7e82"><p>All targets of the project.</p></td>
</tr>
<tr class="" id="5bf83071">
<td id="4fac01c"><p><code class="code ">presets</code></p></td>
<td id="edcae684"><p>All predefined targets. Use this for <a href="mpp-supported-platforms" id="8bff8476">configuring multiple predefined targets</a> at once.</p></td>
</tr>
<tr class="" id="f10943bd">
<td id="95e85c7"><p><code class="code ">sourceSets</code></p></td>
<td id="babb1156"><p>Configures predefined and declares custom <a href="#source-sets" id="b63a4f6">source sets</a> of the project.</p></td>
</tr>
</tbody>
</table></div></section><section class="chapter"><h2 id="targets" data-toc="mpp-dsl-reference#targets">Targets</h2>
<p id="f149829b"><em id="d83b2a30" class="">Target</em> is a part of the build responsible for compiling, testing, and packaging a piece of software aimed for one of the <a href="mpp-supported-platforms" id="bc605845">supported platforms</a>.</p>
<p id="22c49888">Each target can have one or more <a href="#compilations" id="d64be199">compilations</a>. In addition to default compilations for test and production purposes, you can <a href="mpp-configure-compilations#create-a-custom-compilation" id="4ec33b47">create custom compilations</a>.</p>
<p id="a8eb2901">The targets of a multiplatform project are described in the corresponding blocks inside <code class="code ">kotlin</code>, for example, <code class="code ">jvm</code>, <code class="code ">android</code>, <code class="code ">iosArm64</code>. The complete list of available targets is the following:</p>
<div class="table-wrapper"><table class=" wide" id="31a83a94">
<thead><tr class="ijRowHead" id="d316cc28">
<th id="b182c923"><p><b id="136df103" class="">Name</b></p></th>
<th id="d6f76183"><p><b id="8c6e4e98" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="99d260f4">
<td id="f5257eac"><p><code class="code ">jvm</code></p></td>
<td id="cad0240"><p>Java Virtual Machine</p></td>
</tr>
<tr class="" id="71488a8d">
<td id="8067e8e9"><p><code class="code ">js</code></p></td>
<td id="b5a223ae"><p>JavaScript</p></td>
</tr>
<tr class="" id="220eac8">
<td id="d9d2102c"><p><code class="code ">android</code></p></td>
<td id="df75c9fa"><p>Android (APK)</p></td>
</tr>
<tr class="" id="8aca8272">
<td id="1d73d3b5"><p><code class="code ">androidNativeArm32</code></p></td>
<td id="53a67e18"><p><a href="https://developer.android.com/ndk" id="4b46950b" data-external="true" rel="noopener noreferrer">Android NDK</a> on ARM (ARM32) platforms</p></td>
</tr>
<tr class="" id="883c6b03">
<td id="4cd99db1"><p><code class="code ">androidNativeArm64</code></p></td>
<td id="e5c8b7c9"><p><a href="https://developer.android.com/ndk" id="b94e6287" data-external="true" rel="noopener noreferrer">Android NDK</a> on ARM64 platforms</p></td>
</tr>
<tr class="" id="dec881ab">
<td id="84c735a4"><p><code class="code ">androidNativeX86</code></p></td>
<td id="4e4a2f9a"><p><a href="https://developer.android.com/ndk" id="37566e44" data-external="true" rel="noopener noreferrer">Android NDK</a> on x86 platforms</p></td>
</tr>
<tr class="" id="f5e3dfc1">
<td id="e6a3ef0b"><p><code class="code ">androidNativeX64</code></p></td>
<td id="f17764ac"><p><a href="https://developer.android.com/ndk" id="71373075" data-external="true" rel="noopener noreferrer">Android NDK</a> on x86_64 platforms</p></td>
</tr>
<tr class="" id="523913b">
<td id="ffb526cf"><p><code class="code ">iosArm32</code></p></td>
<td id="69000fb4"><p>Apple iOS on ARM (ARM32) platforms (Apple iPhone 5 and earlier)</p></td>
</tr>
<tr class="" id="383e56b4">
<td id="4801113a"><p><code class="code ">iosArm64</code></p></td>
<td id="47fc5984"><p>Apple iOS on ARM64 platforms (Apple iPhone 5s and newer)</p></td>
</tr>
<tr class="" id="4b896743">
<td id="5a745c71"><p><code class="code ">iosX64</code></p></td>
<td id="aa530218"><p>Apple iOS simulator on x86_64 platforms</p></td>
</tr>
<tr class="" id="cb9543c5">
<td id="5d0a9b5c"><p><code class="code ">iosSimulatorArm64</code></p></td>
<td id="87f3e71d"><p>Apple iOS simulator on Apple Silicon platforms</p></td>
</tr>
<tr class="" id="f83b5eed">
<td id="943e09c5"><p><code class="code ">watchosArm32</code></p></td>
<td id="9a12e252"><p>Apple watchOS on ARM (ARM32) platforms (Apple Watch Series 3 and earlier)</p></td>
</tr>
<tr class="" id="525fe45">
<td id="d8bbf307"><p><code class="code ">watchosArm64</code></p></td>
<td id="c1a8f15e"><p>Apple watchOS on ARM64_32 platforms (Apple Watch Series 4 and newer)</p></td>
</tr>
<tr class="" id="5806a772">
<td id="ad6c5004"><p><code class="code ">watchosX86</code></p></td>
<td id="283f86dd"><p>Apple watchOS 32-bit simulator (watchOS 6.3 and earlier) on x86_64 platforms</p></td>
</tr>
<tr class="" id="406f9dbb">
<td id="1b80d05c"><p><code class="code ">watchosX64</code></p></td>
<td id="1bf758bb"><p>Apple watchOS 64-bit simulator (watchOS 7.0 and newer) on x86_64 platforms</p></td>
</tr>
<tr class="" id="d18933cc">
<td id="a4cec2da"><p><code class="code ">watchosSimulatorArm64</code></p></td>
<td id="b4fd3fc5"><p>Apple watchOS simulator on Apple Silicon platforms</p></td>
</tr>
<tr class="" id="ca23f5b6">
<td id="98fa9132"><p><code class="code ">tvosArm64</code></p></td>
<td id="6ab4fc7d"><p>Apple tvOS on ARM64 platforms (Apple TV 4th generation and newer)</p></td>
</tr>
<tr class="" id="d034ef39">
<td id="cf32c2e9"><p><code class="code ">tvosX64</code></p></td>
<td id="3b0af52d"><p>Apple tvOS simulator on x86_64 platforms</p></td>
</tr>
<tr class="" id="31d99246">
<td id="4fa3bb94"><p><code class="code ">tvosSimulatorArm64</code></p></td>
<td id="93db413e"><p>Apple tvOS simulator on Apple Silicon platforms</p></td>
</tr>
<tr class="" id="23d501be">
<td id="64aca844"><p><code class="code ">linuxArm64</code></p></td>
<td id="e6d95c9"><p>Linux on ARM64 platforms, for example, Raspberry Pi</p></td>
</tr>
<tr class="" id="5c50c480">
<td id="1f715040"><p><code class="code ">linuxArm32Hfp</code></p></td>
<td id="54eae76e"><p>Linux on hard-float ARM (ARM32) platforms</p></td>
</tr>
<tr class="" id="7cc724a2">
<td id="ccebbcf4"><p><code class="code ">linuxMips32</code></p></td>
<td id="62aad564"><p>Linux on MIPS platforms</p></td>
</tr>
<tr class="" id="f9dbefd">
<td id="935bed2a"><p><code class="code ">linuxMipsel32</code></p></td>
<td id="378431d1"><p>Linux on little-endian MIPS (mipsel) platforms</p></td>
</tr>
<tr class="" id="c15b06ee">
<td id="53230777"><p><code class="code ">linuxX64</code></p></td>
<td id="1d2d3b5c"><p>Linux on x86_64 platforms</p></td>
</tr>
<tr class="" id="cac9c25b">
<td id="84fabff7"><p><code class="code ">macosX64</code></p></td>
<td id="a96d5bff"><p>Apple macOS on x86_64 platforms</p></td>
</tr>
<tr class="" id="5509c1f4">
<td id="b150e53c"><p><code class="code ">macosArm64</code></p></td>
<td id="b1ab8121"><p>Apple macOS on Apple Silicon platforms</p></td>
</tr>
<tr class="" id="9abd59bb">
<td id="fc9a4883"><p><code class="code ">mingwX64</code></p></td>
<td id="b98160e3"><p>64-bit Microsoft Windows</p></td>
</tr>
<tr class="" id="e775dc5">
<td id="51ef7528"><p><code class="code ">mingwX86</code></p></td>
<td id="e7ad40ba"><p>32-bit Microsoft Windows</p></td>
</tr>
<tr class="" id="4685a741">
<td id="d378eb5b"><p><code class="code ">wasm32</code></p></td>
<td id="f041113d"><p>WebAssembly</p></td>
</tr>
</tbody>
</table></div>
<pre class="code-block" data-lang="groovy" data-language="groovy">kotlin { jvm() iosX64() macosX64() js().browser() } </pre>
<p id="6404f779">Configuration of a target can include two parts:</p>
<ul class="list _ul" id="ae212329">
<li class="list__item" id="857065b9"><p><a href="#common-target-configuration" id="3e57d214">Common configuration</a> available for all targets.</p></li>
<li class="list__item" id="6ffc0593"><p>Target-specific configuration.</p></li>
</ul>
<p id="67a68846">Each target can have one or more <a href="#compilations" id="7186f33f">compilations</a>.</p>
<section class="chapter"><h3 id="common-target-configuration" data-toc="mpp-dsl-reference#common-target-configuration">Common target configuration</h3>
<p id="9d46c098">In any target block, you can use the following declarations:</p>
<div class="table-wrapper"><table class=" wide" id="e9135443">
<thead><tr class="ijRowHead" id="ef981cd4">
<th id="18007a20"><p><b id="96558ceb" class="">Name</b></p></th>
<th id="6f621d4c"><p><b id="4079e931" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="2e673f60">
<td id="e86d1b6b"><p><code class="code ">attributes</code></p></td>
<td id="1dab2be4"><p>Attributes used for <a href="mpp-set-up-targets#distinguish-several-targets-for-one-platform" id="8dea9b74">disambiguating targets</a> for a single platform.</p></td>
</tr>
<tr class="" id="74a762bb">
<td id="9d0c5911"><p><code class="code ">preset</code></p></td>
<td id="ca4f97dc"><p>The preset that the target has been created from, if any.</p></td>
</tr>
<tr class="" id="84f009ed">
<td id="6f6e8a51"><p><code class="code ">platformType</code></p></td>
<td id="e2556e75"><p>Designates the Kotlin platform of this target. Avaiable values: <code class="code ">jvm</code>, <code class="code ">androidJvm</code>, <code class="code ">js</code>, <code class="code ">native</code>, <code class="code ">common</code>.</p></td>
</tr>
<tr class="" id="62f4e980">
<td id="51246724"><p><code class="code ">artifactsTaskName</code></p></td>
<td id="70295001"><p>The name of the task that builds the resulting artifacts of this target.</p></td>
</tr>
<tr class="" id="f89edf0a">
<td id="f7d095fb"><p><code class="code ">components</code></p></td>
<td id="19759453"><p>The components used to setup Gradle publications.</p></td>
</tr>
</tbody>
</table></div></section><section class="chapter"><h3 id="jvm-targets" data-toc="mpp-dsl-reference#jvm-targets">JVM targets</h3>
<p id="bae9a7d1">In addition to <a href="#common-target-configuration" id="2416b68b">common target configuration</a>, <code class="code ">jvm</code> targets have a specific function:</p>
<div class="table-wrapper"><table class=" wide" id="174c0c0a">
<thead><tr class="ijRowHead" id="ad05a102">
<th id="7bea6e8c"><p><b id="24ab1cb9" class="">Name</b></p></th>
<th id="4a8a63ae"><p><b id="aa200a8b" class="">Description</b></p></th>
</tr></thead>
<tbody><tr class="" id="6d265c59">
<td id="c28fb243"><p><code class="code ">withJava()</code></p></td>
<td id="39a6a812"><p>Includes Java sources into the JVM target’s compilations.</p></td>
</tr></tbody>
</table></div>
<p id="49e2d6d2">Use this function for projects that contain both Java and Kotlin source files. Note that the default source directories for Java sources don't follow the Java plugin's defaults. Instead, they are derived from the Kotlin source sets. For example, if the JVM target has the default name <code class="code ">jvm</code>, the paths are <code class="code ">src/jvmMain/java</code> (for production Java sources) and <code class="code ">src/jvmTest/java</code> for test Java sources. Learn more about <a href="mpp-configure-compilations#use-java-sources-in-jvm-compilations" id="529e4783">Java sources in JVM compilations</a>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { jvm { withJava() } } </pre></section><section class="chapter"><h3 id="javascript-targets" data-toc="mpp-dsl-reference#javascript-targets">JavaScript targets</h3>
<p id="332c9695">The <code class="code ">js</code> block describes the configuration of JavaScript targets. It can contain one of two blocks depending on the target execution environment:</p>
<div class="table-wrapper"><table class=" wide" id="968e8305">
<thead><tr class="ijRowHead" id="cc522ca6">
<th id="96e0497a"><p><b id="ee0923d7" class="">Name</b></p></th>
<th id="b604c3a4"><p><b id="14b809b5" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="6c1d0cc1">
<td id="5698277f"><p><code class="code ">browser</code></p></td>
<td id="f812a08f"><p>Configuration of the browser target.</p></td>
</tr>
<tr class="" id="3ab9aff8">
<td id="ac25bdfb"><p><code class="code ">nodejs</code></p></td>
<td id="ab30f606"><p>Configuration of the Node.js target.</p></td>
</tr>
</tbody>
</table></div>
<p id="d6da8e93">Learn more about <a href="js-project-setup" id="941aa341">configuring Kotlin/JS projects</a>.</p>
<section class="chapter"><h4 id="browser" data-toc="mpp-dsl-reference#browser">Browser</h4>
<p id="2edc7f07"><code class="code ">browser</code> can contain the following configuration blocks:</p>
<div class="table-wrapper"><table class=" wide" id="d1af01ed">
<thead><tr class="ijRowHead" id="cb4758aa">
<th id="fb659f66"><p><b id="f9d76bd5" class="">Name</b></p></th>
<th id="b8056f8c"><p><b id="ee6f4fe5" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="9e88b7ba">
<td id="53eb9149"><p><code class="code ">testRuns</code></p></td>
<td id="3e67512e"><p>Configuration of test execution.</p></td>
</tr>
<tr class="" id="d07029f0">
<td id="db1398fd"><p><code class="code ">runTask</code></p></td>
<td id="aaf790c0"><p>Configuration of project running.</p></td>
</tr>
<tr class="" id="a2c1a723">
<td id="e9f2b772"><p><code class="code ">webpackTask</code></p></td>
<td id="dc52788"><p>Configuration of project bundling with <a href="https://webpack.js.org/" id="b6684c41" data-external="true" rel="noopener noreferrer">Webpack</a>.</p></td>
</tr>
<tr class="" id="33ecef2f">
<td id="a4ed0941"><p><code class="code ">dceTask</code></p></td>
<td id="f6d164ee"><p>Configuration of <a href="javascript-dce" id="774ee3d4">Dead Code Elimination</a>.</p></td>
</tr>
<tr class="" id="eb90d4e">
<td id="5f3ca0e8"><p><code class="code ">distribution</code></p></td>
<td id="acb74a6e"><p>Path to output files.</p></td>
</tr>
</tbody>
</table></div>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { js().browser { webpackTask { /* ... */ } testRuns { /* ... */ } dceTask { keep("myKotlinJsApplication.org.example.keepFromDce") } distribution { directory = File("$projectDir/customdir/") } } } </pre></section><section class="chapter"><h4 id="node-js" data-toc="mpp-dsl-reference#node-js">Node.js</h4>
<p id="b40ba8b0"><code class="code ">nodejs</code> can contain configurations of test and run tasks:</p>
<div class="table-wrapper"><table class=" wide" id="a8368b0b">
<thead><tr class="ijRowHead" id="a84b60ee">
<th id="854dba36"><p><b id="3fb09116" class="">Name</b></p></th>
<th id="1ace6791"><p><b id="bc253627" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="e4cdc233">
<td id="ad77e5ce"><p><code class="code ">testRuns</code></p></td>
<td id="d0c4a8c2"><p>Configuration of test execution.</p></td>
</tr>
<tr class="" id="6b406a8d">
<td id="1d03b7a1"><p><code class="code ">runTask</code></p></td>
<td id="ea515b9d"><p>Configuration of project running.</p></td>
</tr>
</tbody>
</table></div>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { js().nodejs { runTask { /* ... */ } testRuns { /* ... */ } } } </pre></section></section><section class="chapter"><h3 id="native-targets" data-toc="mpp-dsl-reference#native-targets">Native targets</h3>
<p id="4febfd2e">For native targets, the following specific blocks are available:</p>
<div class="table-wrapper"><table class=" wide" id="a2a2cd58">
<thead><tr class="ijRowHead" id="5171b2f">
<th id="580e35ba"><p><b id="de55af05" class="">Name</b></p></th>
<th id="80523607"><p><b id="af22f6c8" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="2ec73d85">
<td id="a4decc8a"><p><code class="code ">binaries</code></p></td>
<td id="7bc22a1d"><p>Configuration of <a href="#binaries" id="ccfb8ec1">binaries</a> to produce.</p></td>
</tr>
<tr class="" id="7a4b4b1e">
<td id="b4454fad"><p><code class="code ">cinterops</code></p></td>
<td id="36aa9f9"><p>Configuration of <a href="#cinterops" id="42ef537f">interop with C libraries</a>.</p></td>
</tr>
</tbody>
</table></div>
<section class="chapter"><h4 id="binaries" data-toc="mpp-dsl-reference#binaries">Binaries</h4>
<p id="44f2a1d4">There are the following kinds of binaries:</p>
<div class="table-wrapper"><table class=" wide" id="a484ef7b">
<thead><tr class="ijRowHead" id="380b0a58">
<th id="b0b5716f"><p><b id="328d18df" class="">Name</b></p></th>
<th id="14b07fee"><p><b id="d74b64a4" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="bb659993">
<td id="5a9800b3"><p><code class="code ">executable</code></p></td>
<td id="4db4616b"><p>Product executable.</p></td>
</tr>
<tr class="" id="f7bc299e">
<td id="fdf99417"><p><code class="code ">test</code></p></td>
<td id="ccaf467b"><p>Test executable.</p></td>
</tr>
<tr class="" id="ab2e46ae">
<td id="5495053e"><p><code class="code ">sharedLib</code></p></td>
<td id="20894396"><p>Shared library.</p></td>
</tr>
<tr class="" id="b02b3df5">
<td id="c923fba5"><p><code class="code ">staticLib</code></p></td>
<td id="fb125666"><p>Static library.</p></td>
</tr>
<tr class="" id="b980cb9c">
<td id="d4c99b1f"><p><code class="code ">framework</code></p></td>
<td id="78b1f9ae"><p>Objective-C framework.</p></td>
</tr>
</tbody>
</table></div>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { linuxX64 { // Use your target instead. binaries { executable { // Binary configuration. } } } } </pre>
<p id="a6e6682d">For binaries configuration, the following parameters are available:</p>
<div class="table-wrapper"><table class=" wide" id="a08c0d7b">
<thead><tr class="ijRowHead" id="ecbb13c2">
<th id="f8f21a8c"><p><b id="36559d93" class="">Name</b></p></th>
<th id="fb08205a"><p><b id="806bd838" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="50ab2479">
<td id="aab1c727"><p><code class="code ">compilation</code></p></td>
<td id="2d9d90e0"><p>The compilation from which the binary is built. By default, <code class="code ">test</code> binaries are based on the <code class="code ">test</code> compilation while other binaries - on the <code class="code ">main</code> compilation.</p></td>
</tr>
<tr class="" id="95f381f0">
<td id="ae75dcee"><p><code class="code ">linkerOpts</code></p></td>
<td id="3b183f1e"><p>Options passed to a system linker during binary building.</p></td>
</tr>
<tr class="" id="18975d83">
<td id="5c10a92a"><p><code class="code ">baseName</code></p></td>
<td id="b2cb92a0"><p>Custom base name for the output file. The final file name will be formed by adding system-dependent prefix and postfix to this base name.</p></td>
</tr>
<tr class="" id="f684fa44">
<td id="7d40ef1c"><p><code class="code ">entryPoint</code></p></td>
<td id="881cbe10"><p>The entry point function for executable binaries. By default, it's <code class="code ">main()</code> in the root package.</p></td>
</tr>
<tr class="" id="413bb0ac">
<td id="b3133af6"><p><code class="code ">outputFile</code></p></td>
<td id="15b87d7"><p>Access to the output file.</p></td>
</tr>
<tr class="" id="cf6b0a00">
<td id="fd4f4a56"><p><code class="code ">linkTask</code></p></td>
<td id="883bc6b4"><p>Access to the link task.</p></td>
</tr>
<tr class="" id="d53e72d9">
<td id="41f0332f"><p><code class="code ">runTask</code></p></td>
<td id="4db66fe"><p>Access to the run task for executable binaries. For targets other than <code class="code ">linuxX64</code>, <code class="code ">macosX64</code>, or <code class="code ">mingwX64</code> the value is <code class="code ">null</code>.</p></td>
</tr>
<tr class="" id="e8fde856">
<td id="b05f455b"><p><code class="code ">isStatic</code></p></td>
<td id="e34f4c46"><p>For Objective-C frameworks. Includes a static library instead of a dynamic one.</p></td>
</tr>
</tbody>
</table></div>
<div class="tabs" id="24e8529a" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="36107302" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">binaries { executable("my_executable", listOf(RELEASE)) { // Build a binary on the basis of the test compilation. compilation = compilations["test"] // Custom command line options for the linker. linkerOpts = mutableListOf("-L/lib/search/path", "-L/another/search/path", "-lmylib") // Base name for the output file. baseName = "foo" // Custom entry point function. entryPoint = "org.example.main" // Accessing the output file. println("Executable path: ${outputFile.absolutePath}") // Accessing the link task. linkTask.dependsOn(additionalPreprocessingTask) // Accessing the run task. // Note that the runTask is null for non-host platforms. runTask?.dependsOn(prepareForRun) } framework("my_framework" listOf(RELEASE)) { // Include a static library instead of a dynamic one into the framework. isStatic = true } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="17d29989" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">binaries { executable('my_executable', [RELEASE]) { // Build a binary on the basis of the test compilation. compilation = compilations.test // Custom command line options for the linker. linkerOpts = ['-L/lib/search/path', '-L/another/search/path', '-lmylib'] // Base name for the output file. baseName = 'foo' // Custom entry point function. entryPoint = 'org.example.main' // Accessing the output file. println("Executable path: ${outputFile.absolutePath}") // Accessing the link task. linkTask.dependsOn(additionalPreprocessingTask) // Accessing the run task. // Note that the runTask is null for non-host platforms. runTask?.dependsOn(prepareForRun) } framework('my_framework' [RELEASE]) { // Include a static library instead of a dynamic one into the framework. isStatic = true } } </pre></div>
</div>
<p id="78b81ab0">Learn more about <a href="mpp-build-native-binaries" id="3cfdb2f3">building native binaries</a>.</p></section><section class="chapter"><h4 id="cinterops" data-toc="mpp-dsl-reference#cinterops">CInterops</h4>
<p id="5fe3b6ec"><code class="code ">cinterops</code> is a collection of descriptions for interop with native libraries. To provide an interop with a library, add an entry to <code class="code ">cinterops</code> and define its parameters:</p>
<div class="table-wrapper"><table class=" wide" id="2a7f4e60">
<thead><tr class="ijRowHead" id="72f5062d">
<th id="e4c5ae43"><p><b id="957ff178" class="">Name</b></p></th>
<th id="702a330"><p><b id="8fca1363" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="183ef87c">
<td id="9718008f"><p><code class="code ">defFile</code></p></td>
<td id="82b11777"><p><code class="code ">def</code> file describing the native API.</p></td>
</tr>
<tr class="" id="ce97ab90">
<td id="ca2c4833"><p><code class="code ">packageName</code></p></td>
<td id="b7bbc6c3"><p>Package prefix for the generated Kotlin API.</p></td>
</tr>
<tr class="" id="5b1f5c47">
<td id="cefa2d1b"><p><code class="code ">compilerOpts</code></p></td>
<td id="fcc56864"><p>Options to pass to the compiler by the cinterop tool.</p></td>
</tr>
<tr class="" id="dfad2cea">
<td id="75cf459a"><p><code class="code ">includeDirs</code></p></td>
<td id="35082fa9"><p>Directories to look for headers.</p></td>
</tr>
</tbody>
</table></div>
<p id="445fd6a">Learn more how to <a href="mpp-configure-compilations#configure-interop-with-native-languages" id="e6301356">configure interop with native languages</a>.</p>
<div class="tabs" id="8d03c933" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="6ee74338" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { linuxX64 { // Replace with a target you need. compilations.getByName("main") { val myInterop by cinterops.creating { // Def-file describing the native API. // The default path is src/nativeInterop/cinterop/&lt;interop-name&gt;.def defFile(project.file("def-file.def")) // Package to place the Kotlin API generated. packageName("org.sample") // Options to be passed to compiler by cinterop tool. compilerOpts("-Ipath/to/headers") // Directories for header search (an analogue of the -I&lt;path&gt; compiler option). includeDirs.allHeaders("path1", "path2") // A shortcut for includeDirs.allHeaders. includeDirs("include/directory", "another/directory") } val anotherInterop by cinterops.creating { /* ... */ } } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="2e9f660d" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { linuxX64 { // Replace with a target you need. compilations.main { cinterops { myInterop { // Def-file describing the native API. // The default path is src/nativeInterop/cinterop/&lt;interop-name&gt;.def defFile project.file("def-file.def") // Package to place the Kotlin API generated. packageName 'org.sample' // Options to be passed to compiler by cinterop tool. compilerOpts '-Ipath/to/headers' // Directories for header search (an analogue of the -I&lt;path&gt; compiler option). includeDirs.allHeaders("path1", "path2") // A shortcut for includeDirs.allHeaders. includeDirs("include/directory", "another/directory") } anotherInterop { /* ... */ } } } } } </pre></div>
</div></section></section><section class="chapter"><h3 id="android-targets" data-toc="mpp-dsl-reference#android-targets">Android targets</h3>
<p id="bc38c429">The Kotlin multiplatform plugin contains two specific functions for android targets. Two functions help you configure <a href="https://developer.android.com/studio/build/build-variants" id="ffe3d736" data-external="true" rel="noopener noreferrer">build variants</a>:</p>
<div class="table-wrapper"><table class=" wide" id="85693cd9">
<thead><tr class="ijRowHead" id="9a5a063">
<th id="fbc8dae9"><p><b id="5519868d" class="">Name</b></p></th>
<th id="3363f7b4"><p><b id="a1cfaa7c" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="10062e60">
<td id="b2f5e940"><p><code class="code ">publishLibraryVariants()</code></p></td>
<td id="312eceb2"><p>Specifies build variants to publish. Learn more about <a href="mpp-publish-lib#publish-an-android-library" id="b6dc2956">publishing Android libraries</a>.</p></td>
</tr>
<tr class="" id="e63fe39e">
<td id="3c2b38bb"><p><code class="code ">publishAllLibraryVariants()</code></p></td>
<td id="4821b212"><p>Publishes all build variants.</p></td>
</tr>
</tbody>
</table></div>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { android { publishLibraryVariants("release", "debug") } } </pre>
<p id="12189462">Learn more about <a href="mpp-configure-compilations#compilation-for-android" id="730a1ce3">compilation for Android</a>.</p>
<aside data-type="note" class="prompt" data-title="" id="3d493844"><p id="49dcfe80">The <code class="code ">android</code> configuration inside <code class="code ">kotlin</code> doesn’t replace the build configuration of any Android project. Learn more about writing build scripts for Android projects in <a href="https://developer.android.com/studio/build" id="e8693d24" data-external="true" rel="noopener noreferrer">Android developer documentation</a>.</p></aside></section></section><section class="chapter"><h2 id="source-sets" data-toc="mpp-dsl-reference#source-sets">Source sets</h2>
<p id="7a242478">The <code class="code ">sourceSets</code> block describes source sets of the project. A source set contains Kotlin source files that participate in compilations together, along with their resources, dependencies, and language settings.</p>
<p id="1662057d">A multiplatform project contains <a href="#predefined-source-sets" id="5152b2ec">predefined</a> source sets for its targets; developers can also create <a href="#custom-source-sets" id="25e22f2a">custom</a> source sets for their needs.</p>
<section class="chapter"><h3 id="predefined-source-sets" data-toc="mpp-dsl-reference#predefined-source-sets">Predefined source sets</h3>
<p id="e882b9da">Predefined source sets are set up automatically upon creation of a multiplatform project. Available predefined source sets are the following:</p>
<div class="table-wrapper"><table class=" wide" id="4a943f07">
<thead><tr class="ijRowHead" id="4bdb6cb6">
<th id="e1b23ac9"><p><b id="175d0820" class="">Name</b></p></th>
<th id="31f4dfd"><p><b id="979b8ec1" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="dcadffaf">
<td id="28a53125"><p><code class="code ">commonMain</code></p></td>
<td id="472d3c98"><p>Code and resources shared between all platforms. Available in all multiplatform projects. Used in all main <a href="#compilations" id="b2688f48">compilations</a> of a project.</p></td>
</tr>
<tr class="" id="6478c6b4">
<td id="8bf5b6d1"><p><code class="code ">commonTest</code></p></td>
<td id="51e2290f"><p>Test code and resources shared between all platforms. Available in all multiplatform projects. Used in all test compilations of a project.</p></td>
</tr>
<tr class="" id="9f62aa95">
<td id="2cd54c42"><p><em id="97d3beb7" class="">&lt;targetName&gt;&lt;compilationName&gt;</em></p></td>
<td id="79d1c443"><p>Target-specific sources for a compilation. <em id="41526833" class="">&lt;targetName&gt;</em> is the name of a predefined target and <em id="c499f230" class="">&lt;compilationName&gt;</em> is the name of a compilation for this target. Examples: <code class="code ">jsTest</code>, <code class="code ">jvmMain</code>.</p></td>
</tr>
</tbody>
</table></div>
<p id="2a7d047e">With Kotlin Gradle DSL, the sections of predefined source sets should be marked <code class="code ">by getting</code>.</p>
<div class="tabs" id="4b0e6cd5" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="3b21b3b6" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { sourceSets { val commonMain by getting { /* ... */ } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="fa503226" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { sourceSets { commonMain { /* ... */ } } } </pre></div>
</div>
<p id="2838216">Learn more about <a href="mpp-discover-project#source-sets" id="2b10c798">source sets</a>.</p></section><section class="chapter"><h3 id="custom-source-sets" data-toc="mpp-dsl-reference#custom-source-sets">Custom source sets</h3>
<p id="fc61348c">Custom source sets are created by the project developers manually. To create a custom source set, add a section with its name inside the <code class="code ">sourceSets</code> section. If using Kotlin Gradle DSL, mark custom source sets <code class="code ">by creating</code>.</p>
<div class="tabs" id="4089ae6c" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="f2064293" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { sourceSets { val myMain by creating { /* ... */ } // create a new source set by the name 'MyMain' } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="499507ba" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { sourceSets { myMain { /* ... */ } // create or configure a source set by the name 'myMain' } } </pre></div>
</div>
<p id="5606d012">Note that a newly created source set isn’t connected to other ones. To use it in the project’s compilations, <a href="mpp-share-on-platforms#configure-the-hierarchical-structure-manually" id="959a07a5">connect it with other source sets</a>.</p></section><section class="chapter"><h3 id="source-set-parameters" data-toc="mpp-dsl-reference#source-set-parameters">Source set parameters</h3>
<p id="3ee537f0">Configurations of source sets are stored inside the corresponding blocks of <code class="code ">sourceSets</code>. A source set has the following parameters:</p>
<div class="table-wrapper"><table class=" wide" id="1bb56fab">
<thead><tr class="ijRowHead" id="75509786">
<th id="f9dbd734"><p><b id="c1a10335" class="">Name</b></p></th>
<th id="4c16ea63"><p><b id="77c360ee" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="77110630">
<td id="602e012d"><p><code class="code ">kotlin.srcDir</code></p></td>
<td id="60fdacf5"><p>Location of Kotlin source files inside the source set directory.</p></td>
</tr>
<tr class="" id="35687ae4">
<td id="518d5d9b"><p><code class="code ">resources.srcDir</code></p></td>
<td id="327aa862"><p>Location of resources inside the source set directory.</p></td>
</tr>
<tr class="" id="60f536db">
<td id="94a5c17c"><p><code class="code ">dependsOn</code></p></td>
<td id="57ad0671"><p><a href="mpp-share-on-platforms#configure-the-hierarchical-structure-manually" id="a9a5ec9f">Connection with another source set.</a></p></td>
</tr>
<tr class="" id="72bc85fb">
<td id="e51af983"><p><code class="code ">dependencies</code></p></td>
<td id="da4dc86e"><p><a href="#dependencies" id="d074e116">Dependencies</a> of the source set.</p></td>
</tr>
<tr class="" id="2b4bca60">
<td id="7b34c601"><p><code class="code ">languageSettings</code></p></td>
<td id="2882b881"><p><a href="#language-settings" id="7c487851">Language settings</a> applied to the source set.</p></td>
</tr>
</tbody>
</table></div>
<div class="tabs" id="318c72a4" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="a9144e9c" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { sourceSets { val commonMain by getting { kotlin.srcDir("src") resources.srcDir("res") dependencies { /* ... */ } } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="819e6e35" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { sourceSets { commonMain { kotlin.srcDir('src') resources.srcDir('res') dependencies { /* ... */ } } } } </pre></div>
</div></section></section><section class="chapter"><h2 id="compilations" data-toc="mpp-dsl-reference#compilations">Compilations</h2>
<p id="7f70841d">A target can have one or more compilations, for example, for production or testing. There are <a href="#predefined-compilations" id="2fd9fdca">predefined compilations</a> that are added automatically upon target creation. You can additionally create <a href="#custom-compilations" id="4c5bbebd">custom compilations</a>.</p>
<p id="913ed3a8">To refer to all or some particular compilations of a target, use the <code class="code ">compilations</code> object collection. From <code class="code ">compilations</code>, you can refer to a compilation by its name.</p>
<p id="c0727e10">Learn more about <a href="mpp-configure-compilations" id="9f61e4cb">configuring compilations</a>.</p>
<section class="chapter"><h3 id="predefined-compilations" data-toc="mpp-dsl-reference#predefined-compilations">Predefined compilations</h3>
<p id="e2e93909">Predefined compilations are created automatically for each target of a project except for Android targets. Available predefined compilations are the following:</p>
<div class="table-wrapper"><table class=" wide" id="2e819422">
<thead><tr class="ijRowHead" id="fe97f8d0">
<th id="df1f9ca9"><p><b id="6f21b823" class="">Name</b></p></th>
<th id="6581ce7d"><p><b id="d34fa244" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="1dacf097">
<td id="71367e6a"><p><code class="code ">main</code></p></td>
<td id="f2fb16f0"><p>Compilation for production sources.</p></td>
</tr>
<tr class="" id="e9fa0d6c">
<td id="6224728b"><p><code class="code ">test</code></p></td>
<td id="c9ad39dc"><p>Compilation for tests.</p></td>
</tr>
</tbody>
</table></div>
<div class="tabs" id="d50cb44f" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="2f9a6e26" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { jvm { val main by compilations.getting { output // get the main compilation output } compilations["test"].runtimeDependencyFiles // get the test runtime classpath } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="3cb09ea" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { jvm { compilations.main.output // get the main compilation output compilations.test.runtimeDependencyFiles // get the test runtime classpath } } </pre></div>
</div></section><section class="chapter"><h3 id="custom-compilations" data-toc="mpp-dsl-reference#custom-compilations">Custom compilations</h3>
<p id="ada352b1">In addition to predefined compilations, you can create your own custom compilations. To create a custom compilation, add a new item into the <code class="code ">compilations</code> collection. If using Kotlin Gradle DSL, mark custom compilations <code class="code ">by creating</code>.</p>
<p id="766cb173">Learn more about creating a <a href="mpp-configure-compilations#create-a-custom-compilation" id="d3e2089c">custom compilation</a>.</p>
<div class="tabs" id="8f1f60d7" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="15eca597" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { jvm() { compilations { val integrationTest by compilations.creating { defaultSourceSet { dependencies { /* ... */ } } // Create a test task to run the tests produced by this compilation: tasks.register&lt;Test&gt;("integrationTest") { /* ... */ } } } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="a86bccb6" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { jvm() { compilations.create('integrationTest') { defaultSourceSet { dependencies { /* ... */ } } // Create a test task to run the tests produced by this compilation: tasks.register('jvmIntegrationTest', Test) { /* ... */ } } } } </pre></div>
</div></section><section class="chapter"><h3 id="compilation-parameters" data-toc="mpp-dsl-reference#compilation-parameters">Compilation parameters</h3>
<p id="1eff292d">A compilation has the following parameters:</p>
<div class="table-wrapper"><table class=" wide" id="eed9db3c">
<thead><tr class="ijRowHead" id="a42f6fce">
<th id="68bd8ca3"><p><b id="81fff217" class="">Name</b></p></th>
<th id="10b76bd0"><p><b id="da9e6c9d" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="7ac08b41">
<td id="c42afa43"><p><code class="code ">defaultSourceSet</code></p></td>
<td id="1a36f7e3"><p>The compilation’s default source set.</p></td>
</tr>
<tr class="" id="eb43e72a">
<td id="9b10f04e"><p><code class="code ">kotlinSourceSets</code></p></td>
<td id="d3dc6ecf"><p>Source sets participating in the compilation.</p></td>
</tr>
<tr class="" id="5371164">
<td id="f9ac6692"><p><code class="code ">allKotlinSourceSets</code></p></td>
<td id="bdddc7a3"><p>Source sets participating in the compilation and their connections via <code class="code ">dependsOn()</code>.</p></td>
</tr>
<tr class="" id="bbec6e62">
<td id="3f6f44e5"><p><code class="code ">kotlinOptions</code></p></td>
<td id="23024751"><p>Compiler options applied to the compilation. For the list of available options, see <a href="gradle#compiler-options" id="c6372394">Compiler options</a>.</p></td>
</tr>
<tr class="" id="6c37729f">
<td id="8bdc08fe"><p><code class="code ">compileKotlinTask</code></p></td>
<td id="e58aec3f"><p>Gradle task for compiling Kotlin sources.</p></td>
</tr>
<tr class="" id="74fb8ae9">
<td id="aec080a7"><p><code class="code ">compileKotlinTaskName</code></p></td>
<td id="1a0d70c5"><p>Name of <code class="code ">compileKotlinTask</code>.</p></td>
</tr>
<tr class="" id="6f44a985">
<td id="ce538d5e"><p><code class="code ">compileAllTaskName</code></p></td>
<td id="a4ace202"><p>Name of the Gradle task for compiling all sources of a compilation.</p></td>
</tr>
<tr class="" id="ba66b792">
<td id="cf3d3793"><p><code class="code ">output</code></p></td>
<td id="b0bb1c78"><p>The compilation output.</p></td>
</tr>
<tr class="" id="8f14aaef">
<td id="b63b2b4"><p><code class="code ">compileDependencyFiles</code></p></td>
<td id="9b723076"><p>Compile-time dependency files (classpath) of the compilation.</p></td>
</tr>
<tr class="" id="94efc050">
<td id="7b35661f"><p><code class="code ">runtimeDependencyFiles</code></p></td>
<td id="120bbff6"><p>Runtime dependency files (classpath) of the compilation.</p></td>
</tr>
</tbody>
</table></div>
<div class="tabs" id="732c0396" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="a49d171a" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { jvm { val main by compilations.getting { kotlinOptions { // Setup the Kotlin compiler options for the 'main' compilation: jvmTarget = "1.8" } compileKotlinTask // get the Kotlin task 'compileKotlinJvm' output // get the main compilation output } compilations["test"].runtimeDependencyFiles // get the test runtime classpath } // Configure all compilations of all targets: targets.all { compilations.all { kotlinOptions { allWarningsAsErrors = true } } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="c66e47c" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { jvm { compilations.main.kotlinOptions { // Setup the Kotlin compiler options for the 'main' compilation: jvmTarget = "1.8" } compilations.main.compileKotlinTask // get the Kotlin task 'compileKotlinJvm' compilations.main.output // get the main compilation output compilations.test.runtimeDependencyFiles // get the test runtime classpath } // Configure all compilations of all targets: targets.all { compilations.all { kotlinOptions { allWarningsAsErrors = true } } } } </pre></div>
</div></section></section><section class="chapter"><h2 id="dependencies" data-toc="mpp-dsl-reference#dependencies">Dependencies</h2>
<p id="a14936df">The <code class="code ">dependencies</code> block of the source set declaration contains the dependencies of this source set.</p>
<p id="98af609e">Learn more about <a href="gradle#configuring-dependencies" id="6e163115">configuring dependencies</a>.</p>
<p id="ce60461b">There are four types of dependencies:</p>
<div class="table-wrapper"><table class=" wide" id="e4ada23d">
<thead><tr class="ijRowHead" id="8b9d846">
<th id="4e520ef7"><p><b id="ad1a8005" class="">Name</b></p></th>
<th id="845569b1"><p><b id="31187ec2" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="7619219">
<td id="4a3e17ec"><p><code class="code ">api</code></p></td>
<td id="25f6803f"><p>Dependencies used in the API of the current module.</p></td>
</tr>
<tr class="" id="d278e36">
<td id="960851bb"><p><code class="code ">implementation</code></p></td>
<td id="2802ece7"><p>Dependencies used in the module but not exposed outside it.</p></td>
</tr>
<tr class="" id="811eb989">
<td id="9573dd5d"><p><code class="code ">compileOnly</code></p></td>
<td id="cf269aec"><p>Dependencies used only for compilation of the current module.</p></td>
</tr>
<tr class="" id="24283897">
<td id="832215da"><p><code class="code ">runtimeOnly</code></p></td>
<td id="f34db402"><p>Dependencies available at runtime but not visible during compilation of any module.</p></td>
</tr>
</tbody>
</table></div>
<div class="tabs" id="59bbd854" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="88631095" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { sourceSets { val commonMain by getting { dependencies { api("com.example:foo-metadata:1.0") } } val jvm6Main by getting { dependencies { implementation("com.example:foo-jvm6:1.0") } } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="d574932a" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { sourceSets { commonMain { dependencies { api 'com.example:foo-metadata:1.0' } } jvm6Main { dependencies { implementation 'com.example:foo-jvm6:1.0' } } } } </pre></div>
</div>
<p id="789c81bd">Additionally, source sets can depend on each other and form a hierarchy. In this case, the <a href="#source-set-parameters" id="791ddc06">dependsOn()</a> relation is used.</p>
<p id="9f89e8ae">Source set dependencies can also be declared in the top-level <code class="code ">dependencies</code> block of the build script. In this case, their declarations follow the pattern <code class="code ">&lt;sourceSetName&gt;&lt;DependencyKind&gt;</code>, for example, <code class="code ">commonMainApi</code>.</p>
<div class="tabs" id="8e523857" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="dc1ca5a8" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">dependencies { "commonMainApi"("com.example:foo-common:1.0") "jvm6MainApi"("com.example:foo-jvm6:1.0") } </pre></div>
<div class="tabs__content" data-gtm="tab" id="c9ec6da8" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">dependencies { commonMainApi 'com.example:foo-common:1.0' jvm6MainApi 'com.example:foo-jvm6:1.0' } </pre></div>
</div></section><section class="chapter"><h2 id="language-settings" data-toc="mpp-dsl-reference#language-settings">Language settings</h2>
<p id="17b2a44e">The <code class="code ">languageSettings</code> block of a source set defines certain aspects of project analysis and build. The following language settings are available:</p>
<div class="table-wrapper"><table class=" wide" id="35df71a2">
<thead><tr class="ijRowHead" id="ce96ad60">
<th id="86601c34"><p><b id="c5c105ab" class="">Name</b></p></th>
<th id="31711c94"><p><b id="76744718" class="">Description</b></p></th>
</tr></thead>
<tbody>
<tr class="" id="1488b8ce">
<td id="d265a922"><p><code class="code ">languageVersion</code></p></td>
<td id="46ea6923"><p>Provides source compatibility with the specified version of Kotlin.</p></td>
</tr>
<tr class="" id="7751eb46">
<td id="784c6e27"><p><code class="code ">apiVersion</code></p></td>
<td id="2a739a86"><p>Allows using declarations only from the specified version of Kotlin bundled libraries.</p></td>
</tr>
<tr class="" id="de3c30be">
<td id="60f46898"><p><code class="code ">enableLanguageFeature</code></p></td>
<td id="18792504"><p>Enables the specified language feature. The available values correspond to the language features that are currently experimental or have been introduced as such at some point.</p></td>
</tr>
<tr class="" id="615df86c">
<td id="ef5df072"><p><code class="code ">optIn</code></p></td>
<td id="afca7bb0"><p>Allows using the specified <a href="opt-in-requirements" id="f4d3489d">opt-in annotation</a>.</p></td>
</tr>
<tr class="" id="cc857c84">
<td id="3d99aefc"><p><code class="code ">progressiveMode</code></p></td>
<td id="3a142ffc"><p>Enables the <a href="whatsnew13#progressive-mode" id="15a4f465">progressive mode</a>.</p></td>
</tr>
</tbody>
</table></div>
<div class="tabs" id="1ef82b8c" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="eb3b55e2" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">kotlin { sourceSets.all { languageSettings.apply { languageVersion = "1.4" // possible values: "1.0", "1.1", "1.2", "1.3", "1.4" apiVersion = "1.4" // possible values: "1.0", "1.1", "1.2", "1.3", "1.4" enableLanguageFeature("InlineClasses") // language feature name optIn("kotlin.ExperimentalUnsignedTypes") // annotation FQ-name progressiveMode = true // false by default } } } </pre></div>
<div class="tabs__content" data-gtm="tab" id="8e6a8713" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">kotlin { sourceSets.all { languageSettings { languageVersion = '1.4' // possible values: '1.0', '1.1', '1.2', '1.3', '1.4' apiVersion = '1.4' // possible values: '1.0', '1.1', '1.2', '1.3', '1.4' enableLanguageFeature('InlineClasses') // language feature name optIn('kotlin.ExperimentalUnsignedTypes') // annotation FQ-name progressiveMode = true // false by default } } } </pre></div>
</div></section><div class="last-modified"> Last modified: 01 December 2021</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="mpp-supported-platforms">Supported platforms</a> <a class="navigation-links__next" href="migrating-multiplatform-project-to-14">Migrating multiplatform projects to Kotlin 1.4.0</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/mpp-dsl-reference.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/mpp-dsl-reference.html</a>
  </p>
</div>
