<h1 data-toc="native-gradle" id="native-gradle.md">Get started with Kotlin/Native using Gradle</h1>
<p id="2bbc0781"><a href="https://gradle.org" id="e44e41fd" data-external="true" rel="noopener noreferrer">Gradle</a> is a build system that is very commonly used in the Java, Android, and other ecosystems. It is the default choice for Kotlin/Native and Multiplatform when it comes to build systems.</p>
<p id="c3478dcf">While most IDE's including <a href="https://www.jetbrains.com/idea" id="9129e704" data-external="true" rel="noopener noreferrer">IntelliJ IDEA</a> can generate the corresponding Gradle file, we're going to take a look at how to create this manually, to have a better understanding of how things work under the covers. If you'd like to use the IDE, check out <a href="native-get-started" id="f59fd9d">Using IntelliJ IDEA</a>.</p>
<p id="ec86c43c">Gradle supports two languages for build scripts:</p>
<ul class="list _ul" id="af51834f">
<li class="list__item" id="2bfac244"><p>Groovy scripts in <code class="code ">build.gradle</code> files</p></li>
<li class="list__item" id="b735ec19"><p>Kotlin scripts in <code class="code ">build.gradle.kts</code> files</p></li>
</ul>
<p id="56528446">The Groovy language is the first supported scripting language for Gradle, it leverages the power of dynamic typing and runtime features of the language. It is also possible to use Kotlin in Gradle scripts. Being a statically-typed language, it plays better with IDEs when it comes to compilation and error detection.</p>
<p id="ef898e49">Either can be used and samples will show the syntax for both languages.</p>
<section class="chapter"><h2 id="create-project-files" data-toc="native-gradle#create-project-files">Create project files</h2>
<p id="a80001f8">First, create a project directory. Inside it, create <code class="code ">build.gradle</code> or <code class="code ">build.gradle.kts</code> Gradle build file with the following contents:</p>
<div class="tabs" id="36d79e98" data-group="build-script">
<div class="tabs__content" data-gtm="tab" id="8587ca89" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code-block" data-lang="kotlin" data-title="Kotlin" data-language="kotlin">plugins { kotlin("multiplatform") version "1.6.10" } repositories { mavenCentral() } kotlin { macosX64("native") { // on macOS // linuxX64("native") // on Linux // mingwX64("native") // on Windows binaries { executable() } } } tasks.withType&lt;Wrapper&gt; { gradleVersion = "6.7.1" distributionType = Wrapper.DistributionType.BIN } </pre></div>
<div class="tabs__content" data-gtm="tab" id="96ca95d5" data-sync-tabs="groovy" data-title="Groovy"><pre class="code-block" data-lang="groovy" data-title="Groovy" data-language="groovy">plugins { id 'org.jetbrains.kotlin.multiplatform' version '1.6.10' } repositories { mavenCentral() } kotlin { macosX64('native') { // on macOS // linuxX64('native') // on Linux // mingwX64('native') // on Windows binaries { executable() } } } wrapper { gradleVersion = '6.7.1' distributionType = 'BIN' } </pre></div>
</div>
<p id="6457d756">Next, create an empty <code class="code ">settings.gradle</code> or <code class="code ">settings.gradle.kts</code> file in the project folder.</p>
<p id="e3161b36">Depending on the target platform, different <a href="mpp-supported-platforms" id="5d6a2c1a">functions</a>, such as <code class="code ">macosX64</code>, <code class="code ">mingwX64</code>, <code class="code ">linuxX64</code>, <code class="code ">iosX64</code>, are used for creating the Kotlin target. The function name is the platform for which you are compiling your code. These functions optionally take the target name as a parameter, which is <code class="code ">"native"</code> in our case. The specified <em id="7b8d304a" class="">target name</em> is used to generate the source paths and task names in the project.</p>
<p id="94105744">By convention, all sources are located in the <code class="code ">src/&lt;target name&gt;[Main|Test]/kotlin</code> folders, where <code class="code ">main</code> is for the source code and <code class="code ">test</code> is for tests. <code class="code ">&lt;target name&gt;</code> corresponds to the target platform (in this case <code class="code ">native</code>), as specified in the build file.</p>
<p id="289d6a8">Create a folder <code class="code ">src/nativeMain/kotlin</code> and inside it place the file <code class="code ">hello.kt</code> with the following contents:</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">fun main() { println("Hello Kotlin/Native!") } </pre></section><section class="chapter"><h2 id="build-the-project" data-toc="native-gradle#build-the-project">Build the project</h2>
<p id="6f278fbb">From the root project folder, execute the build by running</p>
<p id="fc7d6639"><code class="code ">gradle nativeBinaries</code></p>
<p id="c5a23912">This should create a folder <code class="code ">build/bin/native</code> with two subfolders <code class="code ">debugExecutable</code> and <code class="code ">releaseExecutable</code> with the corresponding binary. By default, the binary's name is the same as the project folder.</p></section><section class="chapter"><h2 id="open-the-project-in-an-ide" data-toc="native-gradle#open-the-project-in-an-ide">Open the project in an IDE</h2>
<p id="db50633e">Any IDE that supports Gradle should allow for opening the project in the IDE. In the case of <a href="https://www.jetbrains.com/idea" id="7d94c50" data-external="true" rel="noopener noreferrer">IntelliJ IDEA</a>, just open the project folder, and it will automatically detect it as Kotlin/Native project.</p></section><section class="chapter"><h2 id="what-s-next" data-toc="native-gradle#what-s-next">What's next?</h2>
<p id="c13dea1d">Learn how to <a href="mpp-dsl-reference" id="c889dae6">write Gradle build scripts for real-life Kotlin/Native projects</a>.</p></section><div class="last-modified"> Last modified: 08 September 2021</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="native-get-started">Get started with Kotlin/Native in IntelliJ IDEA</a> <a class="navigation-links__next" href="native-command-line-compiler">Get started with Kotlin/Native using the command-line compiler</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/native-gradle.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/native-gradle.html</a>
  </p>
</div>
