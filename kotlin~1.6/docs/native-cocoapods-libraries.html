<h1 data-toc="native-cocoapods-libraries" id="native-cocoapods-libraries.md">Add dependencies on a Pod library</h1>
<p id="464b3366">To add dependencies between a Kotlin project and a Pod library, you should <a href="native-cocoapods#set-up-the-environment-to-work-with-cocoapods" id="be38ac01">complete the initial configuration</a>. This allows you to add dependencies on different types of Pod libraries.</p>
<p id="ad1f4ab1">When you add a new dependency and re-import the project in IntelliJ IDEA, the new dependency will be added automatically. No additional steps are required.</p>
<p id="1f80a986">To use your Kotlin project with Xcode, you should <a href="native-cocoapods#update-podfile-for-xcode" id="7bd42e27">make changes in your project Podfile</a>.</p>
<p id="4f2112ac">A Kotlin project requires the <code class="code ">pod()</code> function call in <code class="code ">build.gradle.kts</code> (<code class="code ">build.gradle</code>) for adding a Pod dependency. Each dependency requires its separate function call. You can specify the parameters for the dependency in the configuration block of the function.</p>
<aside data-type="note" class="prompt" data-title="" id="62ef97ec"><p id="358f9189">If you don't specify the minimum deployment target version and a dependency Pod requires a higher deployment target, you will get an error.</p></aside><p id="df3f366e">You can find a sample project <a href="https://github.com/Kotlin/kmm-with-cocoapods-sample" id="90dd1242" data-external="true" rel="noopener noreferrer">here</a>.</p>
<section class="chapter"><h2 id="from-the-cocoapods-repository" data-toc="native-cocoapods-libraries#from-the-cocoapods-repository">From the CocoaPods repository</h2>
<ol class="list _decimal" id="43eac756">
<li class="list__item" id="cdd81093">
<p id="679c0511">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="ebc06cd7">In the configuration block, you can specify the version of the library using the <code class="code ">version</code> parameter. To use the latest version of the library, you can just omit this parameter altogether.</p>
<aside data-type="note" class="prompt" data-title="" id="2e94986f"><p id="eb964de1">You can add dependencies on subspecs.</p></aside>
</li>
<li class="list__item" id="ab81e57e">
<p id="a16ddeaf">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { ios.deploymentTarget = "13.5" summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" pod("AFNetworking") { version = "~&gt; 4.0.1" } } } </pre>
</li>
<li class="list__item" id="43001c67"><p id="118e51ec">Re-import the project.</p></li>
</ol>
<p id="4fe19484">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.AFNetworking.* </pre></section><section class="chapter"><h2 id="on-a-locally-stored-library" data-toc="native-cocoapods-libraries#on-a-locally-stored-library">On a locally stored library</h2>
<ol class="list _decimal" id="2cf4142">
<li class="list__item" id="77a946a">
<p id="5ee22ace">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="1ddccb25">In the configuration block, specify the path to the local Pod library: use the <code class="code ">path()</code> function in the <code class="code ">source</code> parameter value.</p>
<aside data-type="note" class="prompt" data-title="" id="a4824a21"><p id="e90bf506">You can add local dependencies on subspecs as well. The <code class="code ">cocoapods</code> block can include dependencies to Pods stored locally and Pods from the CocoaPods repository at the same time.</p></aside>
</li>
<li class="list__item" id="9bbf6482">
<p id="19a008c0">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" pod("pod_dependency") { version = "1.0" source = path(project.file("../pod_dependency")) } pod("subspec_dependency/Core") { version = "1.0" source = path(project.file("../subspec_dependency")) } pod("AFNetworking") { version = "~&gt; 4.0.1" } } } </pre>
<aside data-type="note" class="prompt" data-title="" id="40a03e78"><p id="415cfd60">You can also specify the version of the library using <code class="code ">version</code> parameter in the configuration block. To use the latest version of the library, omit the parameter.</p></aside>
</li>
<li class="list__item" id="2f3e1471"><p id="61f88e3a">Re-import the project.</p></li>
</ol>
<p id="c0e3e504">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.pod_dependency.* import cocoapods.subspec_dependency.* import cocoapods.AFNetworking.* </pre></section><section class="chapter"><h2 id="from-a-custom-git-repository" data-toc="native-cocoapods-libraries#from-a-custom-git-repository">From a custom Git repository</h2>
<ol class="list _decimal" id="e347caeb">
<li class="list__item" id="feb77d2a">
<p id="7aa23139">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="78297433">In the configuration block, specify the path to the git repository: use the <code class="code ">git()</code> function in the <code class="code ">source</code> parameter value.</p>
<p id="9d139246">Additionally, you can specify the following parameters in the block after <code class="code ">git()</code>:</p>
<ul class="list _ul" id="16c2ad24">
<li class="list__item" id="20bc1831"><p><code class="code ">commit</code> – to use a specific commit from the repository</p></li>
<li class="list__item" id="e2e8a385"><p><code class="code ">tag</code> – to use a specific tag from the repository</p></li>
<li class="list__item" id="b21b09a2"><p><code class="code ">branch</code> – to use a specific branch from the repository</p></li>
</ul>
<p id="2d2aedc1">The <code class="code ">git()</code> function prioritizes passed parameters in the following order: <code class="code ">commit</code>, <code class="code ">tag</code>, <code class="code ">branch</code>. If you don't specify a parameter, the Kotlin plugin uses <code class="code ">HEAD</code> from the <code class="code ">master</code> branch.</p>
<aside data-type="note" class="prompt" data-title="" id="3b92c44d"><p id="a5eda290">You can combine <code class="code ">branch</code>, <code class="code ">commit</code>, and <code class="code ">tag</code> parameters to get the specific version of a Pod.</p></aside>
</li>
<li class="list__item" id="742c412b">
<p id="8c930f78">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" pod("AFNetworking") { source = git("https://github.com/AFNetworking/AFNetworking") { tag = "4.0.0" } } pod("JSONModel") { source = git("https://github.com/jsonmodel/jsonmodel.git") { branch = "key-mapper-class" } } pod("CocoaLumberjack") { source = git("https://github.com/CocoaLumberjack/CocoaLumberjack.git") { commit = "3e7f595e3a459c39b917aacf9856cd2a48c4dbf3" } } } } </pre>
</li>
<li class="list__item" id="aafdd16"><p id="2ee5116b">Re-import the project.</p></li>
</ol>
<aside data-type="note" class="prompt" data-title="" id="31539882"><p id="c6e9db8f">To work correctly with Xcode, you should specify the path to the Podspec in your Podfile. For example:</p>
<pre class="code-block" data-lang="ruby" data-language="ruby">target 'ios-app' do # ... other pod depedencies ... pod 'JSONModel', :path =&gt; '../cocoapods/kmm-with-cocoapods-sample/kotlin-library/build/cocoapods/externalSources/git/JSONModel' end </pre></aside><p id="f27dcb74">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.AFNetworking.* import cocoapods.JSONModel.* import cocoapods.CocoaLumberjack.* </pre></section><section class="chapter"><h2 id="from-a-zip-tar-or-jar-archive" data-toc="native-cocoapods-libraries#from-a-zip-tar-or-jar-archive">From a zip, tar, or jar archive</h2>
<ol class="list _decimal" id="3477f841">
<li class="list__item" id="5f7792a4">
<p id="7c6d65f5">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="f2820f48">In the configuration block, specify the path to the archive: use the <code class="code ">url()</code> function with an arbitrary HTTP address in the <code class="code ">source</code> parameter value.</p>
<p id="b24da765">Additionally, you can specify the boolean <code class="code ">flatten</code> parameter as a second argument for the <code class="code ">url()</code> function. This parameter indicates that all the Pod files are located in the root directory of the archive.</p>
</li>
<li class="list__item" id="b09dd6bb">
<p id="c1a7c95">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" pod("pod_dependency") { source = url("https://github.com/Kotlin/kmm-with-cocoapods-sample/raw/cocoapods-zip/cocoapodSourcesZip.zip", flatten = true) } } } </pre>
</li>
<li class="list__item" id="9ae22d53"><p id="cf413a42">Re-import the project.</p></li>
</ol>
<aside data-type="note" class="prompt" data-title="" id="ce20a248"><p id="68cefafc">To work correctly with Xcode, you should specify the path to the Podspec in your Podfile. For example:</p>
<pre class="code-block" data-lang="ruby" data-language="ruby">target 'ios-app' do # ... other pod depedencies ... pod 'podspecWithFilesExample', :path =&gt; '../cocoapods/kmm-with-cocoapods-sample/pod_dependency' end </pre></aside><p id="c06943b0">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.pod_dependency.* </pre></section><section class="chapter"><h2 id="from-a-custom-podspec-repository" data-toc="native-cocoapods-libraries#from-a-custom-podspec-repository">From a custom Podspec repository</h2>
<ol class="list _decimal" id="af9dbe20">
<li class="list__item" id="8fcd84f2"><p id="b3f5b6d7">Specify the HTTP address to the custom Podspec repository using the <code class="code ">url()</code> inside the <code class="code ">specRepos</code> block.</p></li>
<li class="list__item" id="b56873a3"><p id="f526d22b">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p></li>
<li class="list__item" id="e8d8b88c">
<p id="634c84a5">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" specRepos { url("https://github.com/Kotlin/kotlin-cocoapods-spec.git") } pod("example") } } </pre>
</li>
<li class="list__item" id="7bc03cd3"><p id="c6ef5a9d">Re-import the project.</p></li>
</ol>
<aside data-type="note" class="prompt" data-title="" id="fd0ee99c"><p id="c9f2f0e3">To work correctly with Xcode, you should specify the location of specs at the beginning of your Podfile. For example,</p>
<pre class="code-block" data-lang="ruby" data-language="ruby">source 'https://github.com/Kotlin/kotlin-cocoapods-spec.git'` </pre>
<p id="91c8cdc">You should also specify the path to the Podspec in your Podfile. For example:</p>
<pre class="code-block" data-lang="ruby" data-language="ruby">target 'ios-app' do # ... other pod depedencies ... pod 'podspecWithFilesExample', :path =&gt; '../cocoapods/kmm-with-cocoapods-sample/pod_dependency' end </pre></aside><p id="14c3baf">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.example.* </pre></section><section class="chapter"><h2 id="with-custom-cinterop-options" data-toc="native-cocoapods-libraries#with-custom-cinterop-options">With custom cinterop options</h2>
<ol class="list _decimal" id="8928e0e8">
<li class="list__item" id="77b46101">
<p id="265ed23d">Specify the name of a Pod library in the <code class="code ">pod()</code> function.</p>
<p id="af256256">In the configuration block, specify the cinterop options:</p>
<ul class="list _ul" id="a3b363b4">
<li class="list__item" id="e6e7163b"><p><code class="code ">extraOpts</code> – to specify the list of options for a Pod library. For example, specific flags: <code class="code ">extraOpts = listOf("-compiler-option")</code></p></li>
<li class="list__item" id="eba371f7"><p><code class="code ">packageName</code> – to specify the package name. If you specify this, you can import the library using the package name: <code class="code ">import &lt;packageName&gt;</code>.</p></li>
</ul>
</li>
<li class="list__item" id="771c2472">
<p id="74d178d1">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" useLibraries() pod("YandexMapKit") { packageName = "YandexMK" } } } </pre>
</li>
<li class="list__item" id="245fea07"><p id="8c606501">Re-import the project.</p></li>
</ol>
<p id="dc1efef6">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.YandexMapKit.* </pre>
<p id="2d27e489">If you use the <code class="code ">packageName</code> parameter, you can import the library using the package name <code class="code ">import &lt;packageName&gt;</code>:</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import YandexMK.YMKPoint import YandexMK.YMKDistance </pre></section><section class="chapter"><h2 id="on-a-static-pod-library" data-toc="native-cocoapods-libraries#on-a-static-pod-library">On a static Pod library</h2>
<ol class="list _decimal" id="428e9438">
<li class="list__item" id="cfdf2050"><p id="21b9a40d">Specify the name of the library using the <code class="code ">pod()</code> function.</p></li>
<li class="list__item" id="78c2872d"><p id="e5ce4e71">Call the <code class="code ">useLibraries()</code> function – it enables a special flag for static libraries.</p></li>
<li class="list__item" id="6dff833a">
<p id="12e87e2a">Specify the minimum deployment target version for the Pod library.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">kotlin { ios() cocoapods { summary = "CocoaPods test library" homepage = "https://github.com/JetBrains/kotlin" ios.deploymentTarget = "13.5" pod("YandexMapKit") { version = "~&gt; 3.2" } useLibraries() } } </pre>
</li>
<li class="list__item" id="5e393e9c"><p id="a9f8b4be">Re-import the project.</p></li>
</ol>
<p id="5504d593">To use these dependencies from the Kotlin code, import the packages <code class="code ">cocoapods.&lt;library-name&gt;</code>.</p>
<pre class="code-block" data-lang="kotlin" data-language="kotlin">import cocoapods.YandexMapKit.* </pre></section><div class="last-modified"> Last modified: 20 January 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="native-cocoapods">CocoaPods overview</a> <a class="navigation-links__next" href="native-cocoapods-xcode">Use a Kotlin Gradle project as a CocoaPods dependency</a> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://kotlinlang.org/docs/native-cocoapods-libraries.html" class="_attribution-link" target="_blank">https://kotlinlang.org/docs/native-cocoapods-libraries.html</a>
  </p>
</div>
