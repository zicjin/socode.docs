  <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-idm11063').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm11063').style.visibility = 'hidden';">Module</span></h2> <p class="REFBODY module-body">snmpm_user</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-summary-idm11064').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm11064').style.visibility = 'hidden';">Module Summary</span></h2> <p class="REFBODY module-summary-body">Behaviour module for the SNMP manager user.</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-description-idm11065').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm11065').style.visibility = 'hidden';">Description</span></h2> 
<p>This module defines the behaviour of the manager user. A <code class="code">snmpm_user</code> compliant module must export the following functions: </p> <ul> <li> <p>handle_error/3</p> </li> <li> <p>handle_agent/4</p> </li> <li> <p>handle_pdu/4</p> </li> <li> <p>handle_trap/3</p> </li> <li> <p>handle_inform/3</p> </li> <li> <p>handle_report/3</p> </li> <li> <p>handle_invalid_result/2</p> </li> </ul> <p>The semantics of them and their exact signatures are explained below. </p> <p>Some of the function has no defined return value (<code class="code">void()</code>), they can of course return anything. But the functions that do have specified return value(s) <strong>must</strong> adhere to this. None of the functions can use exit of throw to return. </p> <p>If the manager is not configured to use any particular transport domain, the behaviour <code class="code">handle_agent/4</code> will for backwards copmpatibility reasons be called with the old <code class="code">IpAddr</code> and <code class="code">PortNumber</code> arguments</p>   </div> <div class="innertube"> <h2>Data types</h2>  <pre data-language="erlang">snmp_gen_info() = {ErrorStatus :: atom(), 
                   ErrorIndex  :: pos_integer(), 
                   Varbinds    :: [snmp:varbind()]}
snmp_v1_trap_info() :: {Enteprise :: snmp:oid(), 
                        Generic   :: integer(), 
                        Spec      :: integer(), 
                        Timestamp :: integer(), 
                        Varbinds  :: [snmp:varbind()]}</pre>   </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm11096').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm11096').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_error-3-idm11098').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_error-3-idm11098').style.visibility = 'hidden';" id="handle_error-3">handle_error(ReqId, Reason, UserData) -&gt; void()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>         
<p>This function is called when the manager needs to communicate an "asynchronous" error to the user: e.g. failure to send an asynchronous message (i.e. encoding error), a received message was discarded due to security error, the manager failed to generate a response message to a received inform-request, or when receiving an unexpected PDU from an agent (could be an expired async request). </p> <p>If <code class="code">ReqId</code> is less then 0, it means that this information was not available to the manager (that info was never retrieved before the message was discarded). </p> <p>For <code class="code">SnmpInfo</code> see handle_agent below.</p> <p>Note that there is a special case when the value of <code class="code">ReqId</code> has the value of the atom <code class="code">netif</code>. This means that the NetIF process has suffered a "fatal" error and been restarted. With possible loss of traffic! </p>   </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_agent-5-idm11119').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_agent-5-idm11119').style.visibility = 'hidden';" id="handle_agent-5">handle_agent(Domain, Addr, Type, SnmpInfo, UserData) -&gt; Reply</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>               
<p>This function is called when a message is received from an unknown agent.</p> <p>Note that this will always be the default user that is called.</p> <p>For more info about the <code class="code">agent_config()</code>, see <code><a href="snmpm#register_agent">register_agent</a></code>.</p> <p>The arguments <code class="code">Type</code> and <code class="code">SnmpInfo</code> relates in the following way: </p> <ul> <li> <p><code class="code">pdu</code> - <code class="code">SnmpPduInfo</code> (see <code><a href="#handle_pdu">handle_pdu</a></code> for more info).</p> </li> <li> <p><code class="code">trap</code> - <code class="code">SnmpTrapInfo</code> (see <code><a href="#handle_trap">handle_trap</a></code> for more info).</p> </li> <li> <p><code class="code">report</code> - <code class="code">SnmpReportInfo</code> (see <code><a href="#handle_report">handle_report</a></code> for more info).</p> </li> <li> <p><code class="code">inform</code> - <code class="code">SnmpInformInfo</code> (see <code><a href="#handle_inform">handle_inform</a></code> for more info).</p> </li> </ul> <p>The only user which would return <code class="code">{register, UserId, TargetName, AgentConfig}</code> is the <strong>default user</strong>.</p>   </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_pdu-4-idm11171').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_pdu-4-idm11171').style.visibility = 'hidden';" id="handle_pdu-4">handle_pdu(TargetName, ReqId, SnmpPduInfo, UserData) -&gt; void()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>      
<p>Handle the reply to an asynchronous request, such as <code><a href="snmpm#async_get2">async_get</a></code>, <code><a href="snmpm#async_get_next2">async_get_next</a></code> or <code><a href="snmpm#async_set2">async_set</a></code>.</p> <p>It could also be a late reply to a synchronous request.</p> <p><code class="code">ReqId</code> is returned by the asynchronous request function.</p>   </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_trap-3-idm11188').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_trap-3-idm11188').style.visibility = 'hidden';" id="handle_trap-3">handle_trap(TargetName, SnmpTrapInfo, UserData) -&gt; Reply</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>        
<p>Handle a trap/notification message from an agent.</p> <p>For more info about the <code class="code">agent_config()</code>, see <code><a href="snmpm#register_agent">register_agent</a></code></p> <p>The only user which would return <code class="code">{register, UserId, TargetName2, agent_info()}</code> is the <strong>default user</strong>.</p>   </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_inform-3-idm11207').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_inform-3-idm11207').style.visibility = 'hidden';" id="handle_inform-3">handle_inform(TargetName, SnmpInformInfo, UserData) -&gt; Reply</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>        
<p>Handle a inform message.</p> <p>For more info about the <code class="code">agent_config()</code>, see <code><a href="snmpm#register_agent">register_agent</a></code></p> <p>The only user which would return <code class="code">{register, UserId, TargetName2, AgentConfig}</code> is the <strong>default user</strong>.</p> <p>If the <code><a href="snmp_config#manager_irb">inform request behaviour</a></code> configuration option is set to <code class="code">user</code> or <code class="code">{user, integer()}</code>, the response (acknowledgment) to this inform-request will be sent when this function returns.</p>   </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_report-3-idm11230').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_report-3-idm11230').style.visibility = 'hidden';" id="handle_report-3">handle_report(TargetName, SnmpReportInfo, UserData) -&gt; Reply</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>          
<p>Handle a report message.</p> <p>For more info about the <code class="code">agent_config()</code>, see <code><a href="snmpm#register_agent">register_agent</a></code></p> <p>The only user which would return <code class="code">{register, UserId, TargetName2, AgentConfig}</code> is the <strong>default user</strong>.</p>   </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-handle_invalid_result-2-idm11251').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-handle_invalid_result-2-idm11251').style.visibility = 'hidden';" id="handle_invalid_result-2">handle_invalid_result(IN, OUT) -&gt; void()</span></div></td> <td class="func-since-td"><span class="since">OTP R16B03</span></td> </tr></table> <div class="exports-tube">  <h2 class="func-types-title">Types</h2>           
<p>If <strong>any</strong> of the <strong>other</strong> callback functions crashes (exit, throw or a plain crash) or return an invalid result (if a valid return has been specified), this function is called. The purpose is to allow the user handle this error (for instance to issue an error report).</p> <p><code class="code">IN</code> reprecents the function called (and its arguments). <code class="code">OUT</code> represents the unexpected/invalid result. </p>  </div> </div> <div class="footer"> <hr> <p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2021 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
