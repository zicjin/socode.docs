  <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-idm2619').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm2619').style.visibility = 'hidden';">Module</span></h2> <p class="REFBODY module-body">binary</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-summary-idm2620').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm2620').style.visibility = 'hidden';">Module Summary</span></h2> <p class="REFBODY module-summary-body">Library for handling binary data.</p> <h2><span onmouseover="document.getElementById('ghlink-since-idm2620').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-since-idm2620').style.visibility = 'hidden';">Since</span></h2> <p class="REFBODY module-since"> Module binary was introduced in OTP R14B. </p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-description-idm2621').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm2621').style.visibility = 'hidden';">Description</span></h2> 
<p>This module contains functions for manipulating byte-oriented binaries. Although the majority of functions could be provided using bit-syntax, the functions in this library are highly optimized and are expected to either execute faster or consume less memory, or both, than a counterpart written in pure Erlang.</p> <p>The module is provided according to Erlang Enhancement Proposal (EEP) 31.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The library handles byte-oriented data. For bitstrings that are not binaries (does not contain whole octets of bits) a <code class="code">badarg</code> exception is thrown from any of the functions in this module.</p> </div> </div>  </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-data-types-idm2627').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-data-types-idm2627').style.visibility = 'hidden';">Data Types</span></h2> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-cp').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-cp').style.visibility = 'hidden';">  <code id="type-cp">cp()</code><br> </div> <div class="data-type-desc">

<p>Opaque data type representing a compiled search pattern. Guaranteed to be a <code class="code">tuple()</code> to allow programs to distinguish it from non-precompiled search patterns.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-part').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-part').style.visibility = 'hidden';">  <code id="type-part">part() = {Start :: integer() &gt;= 0, Length :: integer()}</code><br> </div> <div class="data-type-desc">

<p>A representation of a part (or range) in a binary. <code class="code">Start</code> is a zero-based offset into a <code class="code">binary()</code> and <code class="code">Length</code> is the length of that part. As input to functions in this module, a reverse part specification is allowed, constructed with a negative <code class="code">Length</code>, so that the part of the binary begins at <code class="code">Start</code> + <code class="code">Length</code> and is -<code class="code">Length</code> long. This is useful for referencing the last <code class="code">N</code> bytes of a binary as <code class="code">{size(Binary), -N}</code>. The functions in this module always return <code class="code">part()</code>s with positive <code class="code">Length</code>.</p> </div> </div> </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm2648').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm2648').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table" id="at-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-at-2-idp55').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-at-2-idp55').style.visibility = 'hidden';"> at(Subject, Pos) -&gt; byte()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Returns the byte at position <code class="code">Pos</code> (zero-based) in binary <code class="code">Subject</code> as an integer. If <code class="code">Pos</code> &gt;= <code class="code">byte_size(Subject)</code>, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="bin_to_list-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-bin_to_list-1-idp56').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-bin_to_list-1-idp56').style.visibility = 'hidden';"> bin_to_list(Subject) -&gt; [byte()]</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">bin_to_list(Subject, {0,byte_size(Subject)})</code>.</p> </div> <table class="func-table" id="bin_to_list-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-bin_to_list-2-idp57').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-bin_to_list-2-idp57').style.visibility = 'hidden';"> bin_to_list(Subject, PosLen) -&gt; [byte()]</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Converts <code class="code">Subject</code> to a list of <code class="code">byte()</code>s, each representing the value of one byte. <code class="code">part()</code> denotes which part of the <code class="code">binary()</code> to convert.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:bin_to_list(&lt;&lt;"erlang"&gt;&gt;, {1,3}).
"rla"
%% or [114,108,97] in list notation.</pre> <p>If <code class="code">PosLen</code> in any way references outside the binary, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="bin_to_list-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-bin_to_list-3-idp58').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-bin_to_list-3-idp58').style.visibility = 'hidden';"> bin_to_list(Subject, Pos, Len) -&gt; [byte()]</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as<code class="code">bin_to_list(Subject, {Pos, Len})</code>.</p> </div> <table class="func-table" id="compile_pattern-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-compile_pattern-1-idp59').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-compile_pattern-1-idp59').style.visibility = 'hidden';"> compile_pattern(Pattern) -&gt; <code><a href="#type-cp">cp()</a></code> </div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Builds an internal structure representing a compilation of a search pattern, later to be used in functions <code><a href="#match-3"><span class="code">match/3</span></a></code>, <code><a href="#matches-3"><span class="code">matches/3</span></a></code>, <code><a href="#split-3"><span class="code">split/3</span></a></code>, or <code><a href="#replace-4"><span class="code">replace/4</span></a></code>. The <code class="code">cp()</code> returned is guaranteed to be a <code class="code">tuple()</code> to allow programs to distinguish it from non-precompiled search patterns.</p> <p>When a list of binaries is specified, it denotes a set of alternative binaries to search for. For example, if <code class="code">[&lt;&lt;"functional"&gt;&gt;,&lt;&lt;"programming"&gt;&gt;]</code> is specified as <code class="code">Pattern</code>, this means either <code class="code">&lt;&lt;"functional"&gt;&gt;</code> or <code class="code">&lt;&lt;"programming"&gt;&gt;</code>". The pattern is a set of alternatives; when only a single binary is specified, the set has only one element. The order of alternatives in a pattern is not significant.</p> <p>The list of binaries used for search alternatives must be flat and proper.</p> <p>If <code class="code">Pattern</code> is not a binary or a flat proper list of binaries with length &gt; 0, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="copy-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-copy-1-idp60').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-copy-1-idp60').style.visibility = 'hidden';"> copy(Subject) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">copy(Subject, 1)</code>.</p> </div> <table class="func-table" id="copy-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-copy-2-idp61').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-copy-2-idp61').style.visibility = 'hidden';"> copy(Subject, N) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Creates a binary with the content of <code class="code">Subject</code> duplicated <code class="code">N</code> times.</p> <p>This function always creates a new binary, even if <code class="code">N = 1</code>. By using <code><a href="#copy-1"><span class="code">copy/1</span></a></code> on a binary referencing a larger binary, one can free up the larger binary for garbage collection.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>By deliberately copying a single binary to avoid referencing a larger binary, one can, instead of freeing up the larger binary for later garbage collection, create much more binary data than needed. Sharing binary data is usually good. Only in special cases, when small parts reference large binaries and the large binaries are no longer used in any process, deliberate copying can be a good idea.</p> </div> </div> <p>If <code class="code">N</code> &lt; <code class="code">0</code>, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="decode_unsigned-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-decode_unsigned-1-idp62').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-decode_unsigned-1-idp62').style.visibility = 'hidden';"> decode_unsigned(Subject) -&gt; Unsigned</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Same as <code class="code">decode_unsigned(Subject, big)</code>.</p> </div> <table class="func-table" id="decode_unsigned-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-decode_unsigned-2-idp63').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-decode_unsigned-2-idp63').style.visibility = 'hidden';"> decode_unsigned(Subject, Endianness) -&gt; Unsigned</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Converts the binary digit representation, in big endian or little endian, of a positive integer in <code class="code">Subject</code> to an Erlang <code class="code">integer()</code>.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:decode_unsigned(&lt;&lt;169,138,199&gt;&gt;,big).
11111111</pre> </div> <table class="func-table" id="encode_unsigned-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-encode_unsigned-1-idp64').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-encode_unsigned-1-idp64').style.visibility = 'hidden';"> encode_unsigned(Unsigned) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">encode_unsigned(Unsigned, big)</code>.</p> </div> <table class="func-table" id="encode_unsigned-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-encode_unsigned-2-idp65').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-encode_unsigned-2-idp65').style.visibility = 'hidden';"> encode_unsigned(Unsigned, Endianness) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Converts a positive integer to the smallest possible representation in a binary digit representation, either big endian or little endian.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:encode_unsigned(11111111, big).
&lt;&lt;169,138,199&gt;&gt;</pre> </div> <table class="func-table" id="encode_hex-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-encode_hex-1-idp66').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-encode_hex-1-idp66').style.visibility = 'hidden';"> encode_hex(Bin) -&gt; Bin2</div></td> <td class="func-since-td"><span class="since">OTP 24.0</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Encodes a binary into a hex encoded binary.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:encode_hex(&lt;&lt;"f"&gt;&gt;).
&lt;&lt;"66"&gt;&gt;</pre> </div> <table class="func-table" id="decode_hex-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-decode_hex-1-idp67').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-decode_hex-1-idp67').style.visibility = 'hidden';"> decode_hex(Bin) -&gt; Bin2</div></td> <td class="func-since-td"><span class="since">OTP 24.0</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Decodes a hex encoded binary into a binary.</p> <p><strong>Example</strong></p> <pre data-language="erlang">1&gt; binary:decode_hex(&lt;&lt;"66"&gt;&gt;).
&lt;&lt;"f"&gt;&gt;</pre> </div> <table class="func-table" id="first-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-first-1-idp68').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-first-1-idp68').style.visibility = 'hidden';"> first(Subject) -&gt; byte()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Returns the first byte of binary <code class="code">Subject</code> as an integer. If the size of <code class="code">Subject</code> is zero, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="last-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-last-1-idp69').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-last-1-idp69').style.visibility = 'hidden';"> last(Subject) -&gt; byte()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Returns the last byte of binary <code class="code">Subject</code> as an integer. If the size of <code class="code">Subject</code> is zero, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="list_to_bin-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-list_to_bin-1-idp70').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-list_to_bin-1-idp70').style.visibility = 'hidden';"> list_to_bin(ByteList) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Works exactly as <code><span class="code">erlang:list_to_binary/1</span></code>, added for completeness.</p> </div> <table class="func-table" id="longest_common_prefix-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-longest_common_prefix-1-idp71').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-longest_common_prefix-1-idp71').style.visibility = 'hidden';"> longest_common_prefix(Binaries) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Returns the length of the longest common prefix of the binaries in list <code class="code">Binaries</code>.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:longest_common_prefix([&lt;&lt;"erlang"&gt;&gt;, &lt;&lt;"ergonomy"&gt;&gt;]).
2
2&gt; binary:longest_common_prefix([&lt;&lt;"erlang"&gt;&gt;, &lt;&lt;"perl"&gt;&gt;]).
0</pre> <p>If <code class="code">Binaries</code> is not a flat list of binaries, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="longest_common_suffix-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-longest_common_suffix-1-idp72').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-longest_common_suffix-1-idp72').style.visibility = 'hidden';"> longest_common_suffix(Binaries) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Returns the length of the longest common suffix of the binaries in list <code class="code">Binaries</code>.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:longest_common_suffix([&lt;&lt;"erlang"&gt;&gt;, &lt;&lt;"fang"&gt;&gt;]).
3
2&gt; binary:longest_common_suffix([&lt;&lt;"erlang"&gt;&gt;, &lt;&lt;"perl"&gt;&gt;]).
0</pre> <p>If <code class="code">Binaries</code> is not a flat list of binaries, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="match-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-match-2-idp73').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match-2-idp73').style.visibility = 'hidden';"> match(Subject, Pattern) -&gt; Found | nomatch</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as <code class="code">match(Subject, Pattern, [])</code>. </p> </div> <table class="func-table" id="match-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-match-3-idp74').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match-3-idp74').style.visibility = 'hidden';"> match(Subject, Pattern, Options) -&gt; Found | nomatch</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>        <div class="exports-tube">

<p>Searches for the first occurrence of <code class="code">Pattern</code> in <code class="code">Subject</code> and returns the position and length.</p> <p>The function returns <code class="code">{Pos, Length}</code> for the binary in <code class="code">Pattern</code>, starting at the lowest position in <code class="code">Subject</code>.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:match(&lt;&lt;"abcde"&gt;&gt;, [&lt;&lt;"bcde"&gt;&gt;, &lt;&lt;"cd"&gt;&gt;],[]).
{1,4}</pre> <p>Even though <code class="code">&lt;&lt;"cd"&gt;&gt;</code> ends before <code class="code">&lt;&lt;"bcde"&gt;&gt;</code>, <code class="code">&lt;&lt;"bcde"&gt;&gt;</code> begins first and is therefore the first match. If two overlapping matches begin at the same position, the longest is returned.</p> <p>Summary of the options:</p> <dl> <dt><strong>{scope, {Start, Length}}</strong></dt> <dd><p>Only the specified part is searched. Return values still have offsets from the beginning of <code class="code">Subject</code>. A negative <code class="code">Length</code> is allowed as described in section Data Types in this manual.</p></dd> </dl> <p>If none of the strings in <code class="code">Pattern</code> is found, the atom <code class="code">nomatch</code> is returned.</p> <p>For a description of <code class="code">Pattern</code>, see function <code><a href="#compile_pattern-1"><span class="code">compile_pattern/1</span></a></code>. </p> <p>If <code class="code">{scope, {Start,Length}}</code> is specified in the options such that <code class="code">Start</code> &gt; size of <code class="code">Subject</code>, <code class="code">Start</code> + <code class="code">Length</code> &lt; 0 or <code class="code">Start</code> + <code class="code">Length</code> &gt; size of <code class="code">Subject</code>, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="matches-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-matches-2-idp75').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-matches-2-idp75').style.visibility = 'hidden';"> matches(Subject, Pattern) -&gt; Found</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as <code class="code">matches(Subject, Pattern, [])</code>. </p> </div> <table class="func-table" id="matches-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-matches-3-idp76').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-matches-3-idp76').style.visibility = 'hidden';"> matches(Subject, Pattern, Options) -&gt; Found</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>        <div class="exports-tube">

<p>As <code><a href="#match-2"><span class="code">match/2</span></a></code>, but <code class="code">Subject</code> is searched until exhausted and a list of all non-overlapping parts matching <code class="code">Pattern</code> is returned (in order).</p> <p>The first and longest match is preferred to a shorter, which is illustrated by the following example:</p> <pre data-language="erlang">1&gt; binary:matches(&lt;&lt;"abcde"&gt;&gt;,
                  [&lt;&lt;"bcde"&gt;&gt;,&lt;&lt;"bc"&gt;&gt;,&lt;&lt;"de"&gt;&gt;],[]).
[{1,4}]</pre> <p>The result shows that &lt;&lt;"bcde"&gt;&gt; is selected instead of the shorter match &lt;&lt;"bc"&gt;&gt; (which would have given raise to one more match, &lt;&lt;"de"&gt;&gt;). This corresponds to the behavior of POSIX regular expressions (and programs like awk), but is not consistent with alternative matches in <code class="code">re</code> (and Perl), where instead lexical ordering in the search pattern selects which string matches.</p> <p>If none of the strings in a pattern is found, an empty list is returned.</p> <p>For a description of <code class="code">Pattern</code>, see <code><a href="#compile_pattern-1"><span class="code">compile_pattern/1</span></a></code>. For a description of available options, see <code><a href="#match-3"><span class="code">match/3</span></a></code>.</p> <p>If <code class="code">{scope, {Start,Length}}</code> is specified in the options such that <code class="code">Start</code> &gt; size of <code class="code">Subject</code>, <code class="code">Start + Length</code> &lt; 0 or <code class="code">Start + Length</code> is &gt; size of <code class="code">Subject</code>, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="part-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-part-2-idp77').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-part-2-idp77').style.visibility = 'hidden';"> part(Subject, PosLen) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Extracts the part of binary <code class="code">Subject</code> described by <code class="code">PosLen</code>.</p> <p>A negative length can be used to extract bytes at the end of a binary:</p> <pre data-language="erlang">1&gt; Bin = &lt;&lt;1,2,3,4,5,6,7,8,9,10&gt;&gt;.
2&gt; binary:part(Bin, {byte_size(Bin), -5}).
&lt;&lt;6,7,8,9,10&gt;&gt;</pre> <div class="note"> <div class="label">Note</div> <div class="content">

<p><code><a href="#part-2">part/2</a></code> and <code><a href="#part-3">part/3</a></code> are also available in the <code><span class="code">erlang</span></code> module under the names <code class="code">binary_part/2</code> and <code class="code">binary_part/3</code>. Those BIFs are allowed in guard tests.</p> </div> </div> <p>If <code class="code">PosLen</code> in any way references outside the binary, a <code class="code">badarg</code> exception is raised.</p> </div> <table class="func-table" id="part-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-part-3-idp78').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-part-3-idp78').style.visibility = 'hidden';"> part(Subject, Pos, Len) -&gt; binary()</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as <code class="code">part(Subject, {Pos, Len})</code>.</p> </div> <table class="func-table" id="referenced_byte_size-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-referenced_byte_size-1-idp79').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-referenced_byte_size-1-idp79').style.visibility = 'hidden';"> referenced_byte_size(Binary) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>If a binary references a larger binary (often described as being a subbinary), it can be useful to get the size of the referenced binary. This function can be used in a program to trigger the use of <code><a href="#copy-1"><span class="code">copy/1</span></a></code>. By copying a binary, one can dereference the original, possibly large, binary that a smaller binary is a reference to.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">store(Binary, GBSet) -&gt;
  NewBin =
      case binary:referenced_byte_size(Binary) of
          Large when Large &gt; 2 * byte_size(Binary) -&gt;
             binary:copy(Binary);
          _ -&gt;
             Binary
      end,
  gb_sets:insert(NewBin,GBSet).</pre> <p>In this example, we chose to copy the binary content before inserting it in <code class="code">gb_sets:set()</code> if it references a binary more than twice the data size we want to keep. Of course, different rules apply when copying to different programs.</p> <p>Binary sharing occurs whenever binaries are taken apart. This is the fundamental reason why binaries are fast, decomposition can always be done with O(1) complexity. In rare circumstances this data sharing is however undesirable, why this function together with <code class="code">copy/1</code> can be useful when optimizing for memory use.</p> <p>Example of binary sharing:</p> <pre data-language="erlang">1&gt; A = binary:copy(&lt;&lt;1&gt;&gt;, 100).
&lt;&lt;1,1,1,1,1 ...
2&gt; byte_size(A).
100
3&gt; binary:referenced_byte_size(A).
100
4&gt; &lt;&lt;B:10/binary, C:90/binary&gt;&gt; = A.
&lt;&lt;1,1,1,1,1 ...
5&gt; {byte_size(B), binary:referenced_byte_size(B)}.
{10,10}
6&gt; {byte_size(C), binary:referenced_byte_size(C)}.
{90,100}</pre> <p>In the above example, the small binary <code class="code">B</code> was copied while the larger binary <code class="code">C</code> references binary <code class="code">A</code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Binary data is shared among processes. If another process still references the larger binary, copying the part this process uses only consumes more memory and does not free up the larger binary for garbage collection. Use this kind of intrusive functions with extreme care and only if a real problem is detected.</p> </div> </div> </div> <table class="func-table" id="replace-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-replace-3-idp80').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-replace-3-idp80').style.visibility = 'hidden';"> replace(Subject, Pattern, Replacement) -&gt; Result</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>      <div class="exports-tube">

<p>Same as <code class="code">replace(Subject, Pattern, Replacement,[])</code>.</p> </div> <table class="func-table" id="replace-4"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-replace-4-idp81').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-replace-4-idp81').style.visibility = 'hidden';"> replace(Subject, Pattern, Replacement, Options) -&gt; Result</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>        <p class="REFBODY rb-1">An integer() =&lt; byte_size(Replacement) </p>   <div class="exports-tube">

<p>Constructs a new binary by replacing the parts in <code class="code">Subject</code> matching <code class="code">Pattern</code> with the content of <code class="code">Replacement</code>.</p> <p>If the matching subpart of <code class="code">Subject</code> giving raise to the replacement is to be inserted in the result, option <code class="code">{insert_replaced, InsPos}</code> inserts the matching part into <code class="code">Replacement</code> at the specified position (or positions) before inserting <code class="code">Replacement</code> into <code class="code">Subject</code>.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:replace(&lt;&lt;"abcde"&gt;&gt;,&lt;&lt;"b"&gt;&gt;,&lt;&lt;"[]"&gt;&gt;, [{insert_replaced,1}]).
&lt;&lt;"a[b]cde"&gt;&gt;
2&gt; binary:replace(&lt;&lt;"abcde"&gt;&gt;,[&lt;&lt;"b"&gt;&gt;,&lt;&lt;"d"&gt;&gt;],&lt;&lt;"[]"&gt;&gt;,[global,{insert_replaced,1}]).
&lt;&lt;"a[b]c[d]e"&gt;&gt;
3&gt; binary:replace(&lt;&lt;"abcde"&gt;&gt;,[&lt;&lt;"b"&gt;&gt;,&lt;&lt;"d"&gt;&gt;],&lt;&lt;"[]"&gt;&gt;,[global,{insert_replaced,[1,1]}]).
&lt;&lt;"a[bb]c[dd]e"&gt;&gt;
4&gt; binary:replace(&lt;&lt;"abcde"&gt;&gt;,[&lt;&lt;"b"&gt;&gt;,&lt;&lt;"d"&gt;&gt;],&lt;&lt;"[-]"&gt;&gt;,[global,{insert_replaced,[1,2]}]).
&lt;&lt;"a[b-b]c[d-d]e"&gt;&gt;</pre> <p>If any position specified in <code class="code">InsPos</code> &gt; size of the replacement binary, a <code class="code">badarg</code> exception is raised.</p> <p>Options <code class="code">global</code> and <code class="code">{scope, part()}</code> work as for <code><a href="#split-3"><span class="code">split/3</span></a></code>. The return type is always a <code class="code">binary()</code>.</p> <p>For a description of <code class="code">Pattern</code>, see <code><a href="#compile_pattern-1"><span class="code">compile_pattern/1</span></a></code>. </p> </div> <table class="func-table" id="split-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-split-2-idp82').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-split-2-idp82').style.visibility = 'hidden';"> split(Subject, Pattern) -&gt; Parts</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as <code class="code">split(Subject, Pattern, [])</code>.</p> </div> <table class="func-table" id="split-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-split-3-idp83').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-split-3-idp83').style.visibility = 'hidden';"> split(Subject, Pattern, Options) -&gt; Parts</div></td> <td class="func-since-td"><span class="since">OTP R14B</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>       <div class="exports-tube">

<p>Splits <code class="code">Subject</code> into a list of binaries based on <code class="code">Pattern</code>. If option <code class="code">global</code> is not specified, only the first occurrence of <code class="code">Pattern</code> in <code class="code">Subject</code> gives rise to a split.</p> <p>The parts of <code class="code">Pattern</code> found in <code class="code">Subject</code> are not included in the result.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; binary:split(&lt;&lt;1,255,4,0,0,0,2,3&gt;&gt;, [&lt;&lt;0,0,0&gt;&gt;,&lt;&lt;2&gt;&gt;],[]).
[&lt;&lt;1,255,4&gt;&gt;, &lt;&lt;2,3&gt;&gt;]
2&gt; binary:split(&lt;&lt;0,1,0,0,4,255,255,9&gt;&gt;, [&lt;&lt;0,0&gt;&gt;, &lt;&lt;255,255&gt;&gt;],[global]).
[&lt;&lt;0,1&gt;&gt;,&lt;&lt;4&gt;&gt;,&lt;&lt;9&gt;&gt;]</pre> <p>Summary of options:</p> <dl> <dt><strong>{scope, part()}</strong></dt> <dd><p>Works as in <code><a href="#match-3"><span class="code">match/3</span></a></code> and <code><a href="#matches-3"><span class="code">matches/3</span></a></code>. Notice that this only defines the scope of the search for matching strings, it does not cut the binary before splitting. The bytes before and after the scope are kept in the result. See the example below.</p></dd> <dt><strong>trim</strong></dt> <dd><p>Removes trailing empty parts of the result (as does <code class="code">trim</code> in <code><a href="re#split-3"><span class="code">re:split/3</span></a></code>.</p></dd> <dt><strong>trim_all</strong></dt> <dd><p>Removes all empty parts of the result.</p></dd> <dt><strong>global</strong></dt> <dd><p>Repeats the split until <code class="code">Subject</code> is exhausted. Conceptually option <code class="code">global</code> makes split work on the positions returned by <code><a href="#matches-3"><span class="code">matches/3</span></a></code>, while it normally works on the position returned by <code><a href="#match-3"><span class="code">match/3</span></a></code>.</p></dd> </dl> <p>Example of the difference between a scope and taking the binary apart before splitting:</p> <pre data-language="erlang">1&gt; binary:split(&lt;&lt;"banana"&gt;&gt;, [&lt;&lt;"a"&gt;&gt;],[{scope,{2,3}}]).
[&lt;&lt;"ban"&gt;&gt;,&lt;&lt;"na"&gt;&gt;]
2&gt; binary:split(binary:part(&lt;&lt;"banana"&gt;&gt;,{2,3}), [&lt;&lt;"a"&gt;&gt;],[]).
[&lt;&lt;"n"&gt;&gt;,&lt;&lt;"n"&gt;&gt;]</pre> <p>The return type is always a list of binaries that are all referencing <code class="code">Subject</code>. This means that the data in <code class="code">Subject</code> is not copied to new binaries, and that <code class="code">Subject</code> cannot be garbage collected until the results of the split are no longer referenced.</p> <p>For a description of <code class="code">Pattern</code>, see <code><a href="#compile_pattern-1"><span class="code">compile_pattern/1</span></a></code>. </p> </div> </div> <div class="footer"> <hr> <p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2021 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
