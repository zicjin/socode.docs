  <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-idm1391').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm1391').style.visibility = 'hidden';">Module</span></h2> <p class="REFBODY module-body">cprof</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-summary-idm1392').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm1392').style.visibility = 'hidden';">Module Summary</span></h2> <p class="REFBODY module-summary-body">A simple Call Count Profiling Tool using breakpoints for minimal runtime performance impact.</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-description-idm1393').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm1393').style.visibility = 'hidden';">Description</span></h2> 
<p>The <code class="code">cprof</code> module is used to profile a program to find out how many times different functions are called. Breakpoints similar to local call trace, but containing a counter, are used to minimise runtime performance impact. </p> <p>Since breakpoints are used there is no need for special compilation of any module to be profiled. For now these breakpoints can only be set on BEAM code so BIFs cannot be call count traced. </p> <p>The size of the call counters is the host machine word size. One bit is used when pausing the counter, so the maximum counter value for a 32-bit host is 2147483647. </p> <p>The profiling result is delivered as a term containing a sorted list of entries, one per module. Each module entry contains a sorted list of functions. The sorting order in both cases is of decreasing call count. </p> <p>Call count tracing is very lightweight compared to other forms of tracing since no trace message has to be generated. Some measurements indicates performance degradation in the vicinity of 10 percent. </p>  </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm1400').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm1400').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table" id="analyse-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-analyse-0-idp43').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-analyse-0-idp43').style.visibility = 'hidden';"> analyse() -&gt;<br> {AllCallCount :: integer() &gt;= 0,<br> ModAnalysisList :: mod_analysis_list()}</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="analyse-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-analyse-1-idp44').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-analyse-1-idp44').style.visibility = 'hidden';"> analyse(Limit) -&gt;<br> {AllCallCount :: integer() &gt;= 0,<br> ModAnalysisList :: mod_analysis_list()}</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-analyse-1-idp45').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-analyse-1-idp45').style.visibility = 'hidden';"> analyse(Mod) -&gt; ModAnalysis :: mod_analysis()</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="analyse-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-analyse-2-idp46').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-analyse-2-idp46').style.visibility = 'hidden';"> analyse(Mod, Limit) -&gt; ModAnalysis :: mod_analysis()</div></td> <td class="func-since-td"></td> </tr></table>  <h2 class="func-types-title">Types</h2>       <div class="exports-tube">

<p>Collects and analyses the call counters presently in the node for either module <code class="code">Mod</code>, or for all modules (except <code class="code">cprof</code> itself), and returns: </p> <dl> <dt><strong><code class="code">FuncAnalysisList</code></strong></dt> <dd>A list of tuples, one for each function in a module, in decreasing <code class="code">FuncCallCount</code> order.</dd> <dt><strong><code class="code">ModCallCount</code></strong></dt> <dd>The sum of <code class="code">FuncCallCount</code> values for all functions in module <code class="code">Mod</code>.</dd> <dt><strong><code class="code">AllCallCount</code></strong></dt> <dd>The sum of <code class="code">ModCallCount</code> values for all modules concerned in <code class="code">ModAnalysisList</code>.</dd> <dt><strong><code class="code">ModAnalysisList</code></strong></dt> <dd>A list of tuples, one for each module except <code class="code">cprof</code>, in decreasing <code class="code">ModCallCount</code> order.</dd> </dl> <p>If call counters are still running while <code class="code">analyse/0..2</code> is executing, you might get an inconsistent result. This happens if the process executing <code class="code">analyse/0..2</code> gets scheduled out so some other process can increment the counters that are being analysed, Calling <code><a href="#pause-0"><span class="code">pause()</span></a></code> before analysing takes care of the problem. </p> <p>If the <code class="code">Mod</code> argument is given, the result contains a <code class="code">ModAnalysis</code> tuple for module <code class="code">Mod</code> only, otherwise the result contains one <code class="code">ModAnalysis</code> tuple for all modules returned from <code> <span class="code">code:all_loaded()</span></code> except <code class="code">cprof</code> itself. </p> <p>All functions with a <code class="code">FuncCallCount</code> lower than <code class="code">Limit</code> are excluded from <code class="code">FuncAnalysisList</code>. They are still included in <code class="code">ModCallCount</code>, though. The default value for <code class="code">Limit</code> is <code class="code">1</code>.</p> </div> <table class="func-table" id="pause-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-pause-0-idp47').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-pause-0-idp47').style.visibility = 'hidden';"> pause() -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Pause call count tracing for all functions in all modules and stop it for all functions in modules to be loaded. This is the same as <code class="code">(pause({'_','_','_'})+stop({on_load}))</code>. </p> <p>See also <code><a href="#pause-1"><span class="code">pause/1..3</span></a></code> below. </p> </div> <table class="func-table" id="pause-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-pause-1-idp48').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-pause-1-idp48').style.visibility = 'hidden';"> pause(FuncSpec) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="pause-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-pause-2-idp49').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-pause-2-idp49').style.visibility = 'hidden';"> pause(Mod, Func) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="pause-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-pause-3-idp50').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-pause-3-idp50').style.visibility = 'hidden';"> pause(Mod, Func, Arity) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Pause call counters for matching functions in matching modules. The <code class="code">FS</code> argument can be used to specify the first argument to <code><span class="code">erlang:trace_pattern/3</span></code>. </p> <p>The call counters for all matching functions that has got call count breakpoints are paused at their current count. </p> <p>Return the number of matching functions that can have call count breakpoints, the same as <code><a href="#start-0"><span class="code">start/0..3</span></a></code> with the same arguments would have returned. </p> </div> <table class="func-table" id="restart-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-restart-0-idp51').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-restart-0-idp51').style.visibility = 'hidden';"> restart() -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="restart-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-restart-1-idp52').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-restart-1-idp52').style.visibility = 'hidden';"> restart(FuncSpec) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="restart-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-restart-2-idp53').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-restart-2-idp53').style.visibility = 'hidden';"> restart(Mod, Func) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="restart-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-restart-3-idp54').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-restart-3-idp54').style.visibility = 'hidden';"> restart(Mod, Func, Arity) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Restart call counters for the matching functions in matching modules that are call count traced. The <code class="code">FS</code> argument can be used to specify the first argument to <code><span class="code">erlang:trace_pattern/3</span></code>. </p> <p>The call counters for all matching functions that has got call count breakpoints are set to zero and running. </p> <p>Return the number of matching functions that can have call count breakpoints, the same as <code><a href="#start-0"><span class="code">start/0..3</span></a></code> with the same arguments would have returned. </p> </div> <table class="func-table" id="start-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-start-0-idp55').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-0-idp55').style.visibility = 'hidden';"> start() -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Start call count tracing for all functions in all modules, and also for all functions in modules to be loaded. This is the same as <code class="code">(start({'_','_','_'})+start({on_load}))</code>. </p> <p>See also <code><a href="#start-1"><span class="code">start/1..3</span></a></code> below. </p> </div> <table class="func-table" id="start-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-start-1-idp56').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-1-idp56').style.visibility = 'hidden';"> start(FuncSpec) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="start-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-start-2-idp57').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-2-idp57').style.visibility = 'hidden';"> start(Mod, Func) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="start-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-start-3-idp58').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-3-idp58').style.visibility = 'hidden';"> start(Mod, Func, Arity) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Start call count tracing for matching functions in matching modules. The <code class="code">FS</code> argument can be used to specify the first argument to <code><span class="code">erlang:trace_pattern/3</span></code>, for example <code class="code">on_load</code>. </p> <p>Set call count breakpoints on the matching functions that has no call count breakpoints. Call counters are set to zero and running for all matching functions. </p> <p>Return the number of matching functions that has got call count breakpoints. </p> </div> <table class="func-table" id="stop-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-stop-0-idp59').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop-0-idp59').style.visibility = 'hidden';"> stop() -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Stop call count tracing for all functions in all modules, and also for all functions in modules to be loaded. This is the same as <code class="code">(stop({'_','_','_'})+stop({on_load}))</code>. </p> <p>See also <code><a href="#stop-1"><span class="code">stop/1..3</span></a></code> below. </p> </div> <table class="func-table" id="stop-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-stop-1-idp60').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop-1-idp60').style.visibility = 'hidden';"> stop(FuncSpec) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="stop-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-stop-2-idp61').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop-2-idp61').style.visibility = 'hidden';"> stop(Mod, Func) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table> <table class="func-table" id="stop-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-stop-3-idp62').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop-3-idp62').style.visibility = 'hidden';"> stop(Mod, Func, Arity) -&gt; integer() &gt;= 0</div></td> <td class="func-since-td"></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Stop call count tracing for matching functions in matching modules. The <code class="code">FS</code> argument can be used to specify the first argument to <code><span class="code">erlang:trace_pattern/3</span></code>, for example <code class="code">on_load</code>. </p> <p>Remove call count breakpoints from the matching functions that has call count breakpoints. </p> <p>Return the number of matching functions that can have call count breakpoints, the same as <code><a href="#start-0"><span class="code">start/0..3</span></a></code> with the same arguments would have returned. </p> </div> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-see-also-idm1562').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-see-also-idm1562').style.visibility = 'hidden';">See Also</span></h2>  <p><code><a href="eprof">eprof</a></code>(3), <code><a href="fprof">fprof</a></code>(3), erlang(3), <code><a href="cprof_chapter">User's Guide</a></code></p>  </div> <div class="footer"> <hr> <p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2021 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
