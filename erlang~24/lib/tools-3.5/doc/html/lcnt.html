  <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-idm2744').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm2744').style.visibility = 'hidden';">Module</span></h2> <p class="REFBODY module-body">lcnt</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-summary-idm2745').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm2745').style.visibility = 'hidden';">Module Summary</span></h2> <p class="REFBODY module-summary-body">A runtime system Lock Profiling tool.</p> <h2><span onmouseover="document.getElementById('ghlink-since-idm2745').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-since-idm2745').style.visibility = 'hidden';">Since</span></h2> <p class="REFBODY module-since"> Module lcnt was introduced in OTP R13B04. </p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-description-idm2746').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm2746').style.visibility = 'hidden';">Description</span></h2> 
<p>The <code class="code">lcnt</code> module is used to profile the internal ethread locks in the Erlang Runtime System. With <code class="code">lcnt</code> enabled, internal counters in the runtime system are updated each time a lock is taken. The counters stores information about the number of acquisition tries and the number of collisions that has occurred during the acquisition tries. The counters also record the waiting time a lock has caused for a blocked thread when a collision has occurred. </p> <p> The data produced by the lock counters will give an estimate on how well the runtime system will behave from a parallelizable view point for the scenarios tested. This tool was mainly developed to help Erlang runtime developers iron out potential and generic bottlenecks. </p> <p>Locks in the emulator are named after what type of resource they protect and where in the emulator they are initialized, those are lock 'classes'. Most of those locks are also instantiated several times, and given unique identifiers, to increase locking granularity. Typically an instantiated lock protects a disjunct set of the resource, for example ets tables, processes or ports. In other cases it protects a specific range of a resource, for example <code class="code">pix_lock</code> which protects index to process mappings, and is given a unique number within the class. A unique lock in <code class="code">lcnt</code> is referenced by a name (class) and an identifier: <code class="code">{Name, Id}</code>. </p> <p>Some locks in the system are static and protects global resources, for example <code class="code">bif_timers</code> and the <code class="code">run_queue</code> locks. Other locks are dynamic and not necessarily long lived, for example process locks and ets-table locks. The statistics data from short lived locks can be stored separately when the locks are deleted. This behavior is by default turned off to save memory but can be turned on via <code class="code">lcnt:rt_opt({copy_save, true})</code>. The <code class="code">lcnt:apply/1,2,3</code> functions enables this behavior during profiling. </p>  </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm2760').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm2760').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table" id="start-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-start-0-idp110').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-0-idp110').style.visibility = 'hidden';"> start() -&gt; {ok, Pid} | {error, {already_started, Pid}}</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Starts the lock profiler server. The server only act as a medium for the user and performs filtering and printing of data collected by <code class="code">lcnt:collect/1</code>. </p> </div> <table class="func-table" id="stop-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-stop-0-idp111').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop-0-idp111').style.visibility = 'hidden';"> stop() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Stops the lock profiler server.</p> </div> <table class="func-table" id="collect-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-collect-0-idp112').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-collect-0-idp112').style.visibility = 'hidden';"> collect() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Same as <code class="code">collect(node())</code>.</p>
</div> <table class="func-table" id="collect-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-collect-1-idp113').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-collect-1-idp113').style.visibility = 'hidden';"> collect(Node) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Collects lock statistics from the runtime system. The function starts a server if it is not already started. It then populates the server with lock statistics. If the server held any lock statistics data before the collect then that data is lost. </p> </div> <table class="func-table" id="clear-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-clear-0-idp114').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-clear-0-idp114').style.visibility = 'hidden';"> clear() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Same as <code class="code">clear(node())</code>.</p>
</div> <table class="func-table" id="clear-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-clear-1-idp115').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-clear-1-idp115').style.visibility = 'hidden';"> clear(Node) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Clears the internal lock statistics from the runtime system. This does not clear the data on the server only on runtime system. All counters for static locks are zeroed, all dynamic locks currently alive are zeroed and all saved locks now destroyed are removed. It also resets the duration timer. </p> </div> <table class="func-table" id="conflicts-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-conflicts-0-idp116').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-conflicts-0-idp116').style.visibility = 'hidden';"> conflicts() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Same as <code class="code">conflicts([])</code>.</p>
</div> <table class="func-table" id="conflicts-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-conflicts-1-idp117').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-conflicts-1-idp117').style.visibility = 'hidden';"> conflicts(Options) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>       <div class="exports-tube">

<p>Prints a list of internal locks and its statistics.</p> <p>For option description, see <code><a href="#inspect-2"><span class="code">lcnt:inspect/2</span></a></code>.</p> </div> <table class="func-table" id="locations-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-locations-0-idp118').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-locations-0-idp118').style.visibility = 'hidden';"> locations() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Same as <code class="code">locations([])</code>.</p> </div> <table class="func-table" id="locations-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-locations-1-idp119').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-locations-1-idp119').style.visibility = 'hidden';"> locations(Options) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>       <div class="exports-tube">

<p>Prints a list of internal lock counters by source code locations.</p> <p>For option description, see <code><a href="#inspect-2"><span class="code">lcnt:inspect/2</span></a></code>.</p> </div> <table class="func-table" id="inspect-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-inspect-1-idp120').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-inspect-1-idp120').style.visibility = 'hidden';"> inspect(Lock) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as <code class="code">inspect(Lock, [])</code>.</p>
</div> <table class="func-table" id="inspect-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-inspect-2-idp121').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-inspect-2-idp121').style.visibility = 'hidden';"> inspect(Lock, Options) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>          <div class="exports-tube">

<p>Prints a list of internal lock counters for a specific lock.</p> <p>Lock <code class="code">Name</code> and <code class="code">Id</code> for ports and processes are interchangeable with the use of <code><a href="#swap_pid_keys-0"><span class="code">lcnt:swap_pid_keys/0</span></a></code> and is the reason why <code class="code">pid()</code> and <code class="code">port()</code> options can be used in both <code class="code">Name</code> and <code class="code">Id</code> space. Both pids and ports are special identifiers with stripped creation and can be recreated with <code><a href="#pid-3"><span class="code">lcnt:pid/2,3</span></a></code> and <code><a href="#port-2"><span class="code">lcnt:port/1,2</span></a></code>.</p> <p>Option description:</p> <dl> <dt><strong><code class="code">{combine, boolean()}</code></strong></dt> <dd>Combine the statistics from different instances of a lock class. <br>Default: <code class="code">true</code> </dd> <dt><strong><code class="code">{locations, boolean()}</code></strong></dt> <dd>Print the statistics by source file and line numbers. <br>Default: <code class="code">false</code> </dd> <dt><strong><code class="code">{max_locks, MaxLocks}</code></strong></dt> <dd>Maximum number of locks printed or no limit with <code class="code">none</code>. <br>Default: <code class="code">20</code> </dd> <dt><strong><code class="code">{print, PrintOptions}</code></strong></dt> <dd>Printing options: <dl> <dt><strong><code class="code">name</code></strong></dt> <dd>Named lock or named set of locks (classes). The same name used for initializing the lock in the VM.</dd> <dt><strong><code class="code">id</code></strong></dt> <dd>Internal id for set of locks, not always unique. This could be table name for ets tables (db_tab), port id for ports, integer identifiers for allocators, etc.</dd> <dt><strong><code class="code">type</code></strong></dt> <dd>Type of lock: <code class="code">rw_mutex</code>, <code class="code">mutex</code>, <code class="code">spinlock</code>, <code class="code">rw_spinlock</code> or <code class="code">proclock</code>.</dd> <dt><strong><code class="code">entry</code></strong></dt> <dd>In combination with <code class="code">{locations, true}</code> this option prints the lock operations source file and line number entry-points along with statistics for each entry. </dd> <dt><strong><code class="code">tries</code></strong></dt> <dd>Number of acquisitions of this lock.</dd> <dt><strong><code class="code">colls</code></strong></dt> <dd>Number of collisions when a thread tried to acquire this lock. This is when a trylock is EBUSY, a write try on read held rw_lock, a try read on write held rw_lock, a thread tries to lock an already locked lock. (Internal states supervises this).</dd> <dt><strong><code class="code">ratio</code></strong></dt> <dd>The ratio between the number of collisions and the number of tries (acquisitions) in percentage.</dd> <dt><strong><code class="code">time</code></strong></dt> <dd>Accumulated waiting time for this lock. This could be greater than actual wall clock time, it is accumulated for all threads. Trylock conflicts does not accumulate time.</dd> <dt><strong><code class="code">duration</code></strong></dt> <dd>Percentage of accumulated waiting time of wall clock time. This percentage can be higher than 100% since accumulated time is from all threads.</dd> </dl> <br>Default: <code class="code">[name,id,tries,colls,ratio,time,duration]</code> </dd> <dt><strong><code class="code">{reverse, boolean()}</code></strong></dt> <dd>Reverses the order of sorting. <br>Default: <code class="code">false</code> </dd> <dt><strong><code class="code">{sort, Sort}</code></strong></dt> <dd>Column sorting orders. <br>Default: <code class="code">time</code> </dd> <dt><strong><code class="code">{thresholds, Thresholds}</code></strong></dt> <dd>Filtering thresholds. Anything values above the threshold value are passed through. <br>Default: <code class="code">[{tries, 0}, {colls, 0}, {time, 0}]</code> </dd> </dl> </div> <table class="func-table" id="information-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-information-0-idp122').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-information-0-idp122').style.visibility = 'hidden';"> information() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Prints lcnt server state and generic information about collected lock statistics.</p> </div> <table class="func-table" id="swap_pid_keys-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-swap_pid_keys-0-idp123').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-swap_pid_keys-0-idp123').style.visibility = 'hidden';"> swap_pid_keys() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Swaps places on <code class="code">Name</code> and <code class="code">Id</code> space for ports and processes.</p> </div> <table class="func-table" id="load-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-load-1-idp124').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-load-1-idp124').style.visibility = 'hidden';"> load(Filename) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Restores previously saved data to the server.</p> </div> <table class="func-table" id="save-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-save-1-idp125').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-save-1-idp125').style.visibility = 'hidden';"> save(Filename) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Saves the collected data to file.</p> </div> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-convenience-functions-idm2970').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-convenience-functions-idm2970').style.visibility = 'hidden';">Convenience functions</span></h2>  <p>The following functions are used for convenience.</p>  </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm2969').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm2969').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table" id="apply-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-apply-1-idp126').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-apply-1-idp126').style.visibility = 'hidden';"> apply(Fun) -&gt; term()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">apply(Fun, [])</code>.</p> </div> <table class="func-table" id="apply-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-apply-2-idp127').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-apply-2-idp127').style.visibility = 'hidden';"> apply(Fun, Args) -&gt; term()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p> Clears the lock counters and then setups the instrumentation to save all destroyed locks. After setup the function is called, passing the elements in <code class="code">Args</code> as arguments. When the function returns the statistics are immediately collected to the server. After the collection the instrumentation is returned to its previous behavior. The result of the applied function is returned. </p> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p> This function should only be used for micro-benchmarks; it sets <code class="code">copy_save</code> to <code class="code">true</code> for the duration of the call, which can quickly lead to running out of memory. </p> </div> </div> </div> <table class="func-table" id="apply-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-apply-3-idp128').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-apply-3-idp128').style.visibility = 'hidden';"> apply(Module, Function, Args) -&gt; term()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Same as <code class="code">apply(fun() -&gt; erlang:apply(Module, Function, Args) end)</code>.</p> </div> <table class="func-table" id="pid-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-pid-2-idp129').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-pid-2-idp129').style.visibility = 'hidden';"> pid(Id, Serial) -&gt; pid()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Same as <code class="code">pid(node(), Id, Serial)</code>.</p>
</div> <table class="func-table" id="pid-3"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-pid-3-idp130').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-pid-3-idp130').style.visibility = 'hidden';"> pid(Node, Id, Serial) -&gt; pid()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Creates a process id with creation 0.</p> </div> <table class="func-table" id="port-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-port-1-idp131').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-port-1-idp131').style.visibility = 'hidden';"> port(Id) -&gt; port()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">port(node(), Id)</code>.</p>
</div> <table class="func-table" id="port-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-port-2-idp132').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-port-2-idp132').style.visibility = 'hidden';"> port(Node, Id) -&gt; port()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Creates a port id with creation 0.</p>
</div> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-internal-runtime-lock-counter-controllers-idm3037').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-internal-runtime-lock-counter-controllers-idm3037').style.visibility = 'hidden';">Internal runtime lock counter controllers</span></h2>  <p> The following functions control the behavior of the internal counters. </p>  </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm3036').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm3036').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table" id="rt_collect-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_collect-0-idp133').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_collect-0-idp133').style.visibility = 'hidden';"> rt_collect() -&gt; [lock_counter_data()]</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">rt_collect(node())</code>.</p> </div> <table class="func-table" id="rt_collect-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_collect-1-idp134').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_collect-1-idp134').style.visibility = 'hidden';"> rt_collect(Node) -&gt; [lock_counter_data()]</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Returns a list of raw lock counter data.</p> </div> <table class="func-table" id="rt_clear-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_clear-0-idp135').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_clear-0-idp135').style.visibility = 'hidden';"> rt_clear() -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table> <div class="exports-tube">

<p>Same as <code class="code">rt_clear(node())</code>.</p> </div> <table class="func-table" id="rt_clear-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_clear-1-idp136').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_clear-1-idp136').style.visibility = 'hidden';"> rt_clear(Node) -&gt; ok</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Clear the internal counters. Same as <code><a href="#clear-1"><span class="code">lcnt:clear(Node)</span></a></code>. </p>
</div> <table class="func-table" id="rt_mask-0"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_mask-0-idp137').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_mask-0-idp137').style.visibility = 'hidden';"> rt_mask() -&gt; [category_atom()]</div></td> <td class="func-since-td"><span class="since">OTP 20.1</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>   <div class="exports-tube">

<p>Same as <code class="code">rt_mask(node())</code>.</p>
</div> <table class="func-table" id="rt_mask-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_mask-1-idp138').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_mask-1-idp138').style.visibility = 'hidden';"> rt_mask(Node) -&gt; [category_atom()]</div></td> <td class="func-since-td"><span class="since">OTP 20.1</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p> Refer to <code><a href="#rt_mask-2"><span class="code">rt_mask/2</span></a></code>. for a list of valid categories. All categories are enabled by default. </p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_mask-1-idp139').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_mask-1-idp139').style.visibility = 'hidden';"> rt_mask(Categories) -&gt; ok | {error, copy_save_enabled}</div></td> <td class="func-since-td"><span class="since">OTP 20.1</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Same as <code class="code">rt_mask(node(), Categories)</code>.</p>
</div> <table class="func-table" id="rt_mask-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_mask-2-idp140').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_mask-2-idp140').style.visibility = 'hidden';"> rt_mask(Node, Categories) -&gt; ok | {error, copy_save_enabled}</div></td> <td class="func-since-td"><span class="since">OTP 20.1</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p> Sets the lock category mask to the given categories. </p> <p> This will fail if the <code class="code">copy_save</code> option is enabled; see <code><a href="#rt_opt-2"><span class="code">lcnt:rt_opt/2</span></a></code>. </p> <p>Valid categories are:</p> <ul> <li><code class="code">allocator</code></li> <li> <code class="code">db</code> (ETS tables)</li> <li><code class="code">debug</code></li> <li><code class="code">distribution</code></li> <li><code class="code">generic</code></li> <li><code class="code">io</code></li> <li><code class="code">process</code></li> <li><code class="code">scheduler</code></li> </ul> <p> This list is subject to change at any time, as is the category any given lock may belong to. </p> </div> <table class="func-table" id="rt_opt-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_opt-1-idp141').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_opt-1-idp141').style.visibility = 'hidden';"> rt_opt(Option) -&gt; boolean()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Same as <code class="code">rt_opt(node(), {Type, Value})</code>.</p> </div> <table class="func-table" id="rt_opt-2"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-rt_opt-2-idp142').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rt_opt-2-idp142').style.visibility = 'hidden';"> rt_opt(Node, Option) -&gt; boolean()</div></td> <td class="func-since-td"><span class="since">OTP R13B04</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>     <div class="exports-tube">

<p>Option description:</p> <dl> <dt><strong><code class="code">{copy_save, boolean()}</code></strong></dt> <dd>Retains the statistics of destroyed locks. <br>Default: <code class="code">false</code> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p> This option will use a lot of memory when enabled, which must be reclaimed with <code class="code">lcnt:rt_clear</code>. Note that it makes no distinction between locks that were destroyed and locks for which counting was disabled, so enabling this option will disable changes to the lock category mask. </p> </div> </div> </dd> <dt><strong><code class="code">{process_locks, boolean()}</code></strong></dt> <dd>Profile process locks, equal to adding <code class="code">process</code> to the lock category mask; see <code class="code">lcnt:rt_mask/2</code> <br>Default: <code class="code">true</code> </dd> </dl> </div> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-see-also-idm3156').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-see-also-idm3156').style.visibility = 'hidden';">See Also</span></h2>  <p> <code><a href="lcnt_chapter">LCNT User's Guide</a></code></p>  </div> <div class="footer"> <hr> <p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2021 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
