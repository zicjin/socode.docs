  <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-idm465').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm465').style.visibility = 'hidden';">Module</span></h2> <p class="REFBODY module-body">erl_prettypr</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-summary-idm466').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm466').style.visibility = 'hidden';">Module Summary</span></h2> <p class="REFBODY module-summary-body">Pretty printing of abstract Erlang syntax trees.</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-description-idm467').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm467').style.visibility = 'hidden';">Description</span></h2> 
<p>Pretty printing of abstract Erlang syntax trees.</p> <p>This module is a front end to the pretty-printing library module <code class="code">prettypr</code>, for text formatting of abstract syntax trees defined by the module <code class="code">erl_syntax</code>.</p> </div> <div class="innertube"> <h2>Data types</h2>   <dl id="types"> <dt><strong>clause_t() = case_expr | fun_expr | if_expr | receive_expr | try_expr | {function, <code id="type-clause_t">prettypr:document()</code>} | spec</strong></dt>  <dt><strong>context() = #ctxt{prec=integer(), sub_indent=non_neg_integer(), break_indent=non_neg_integer(), clause=<code id="type-context"><a href="#type-clause_t">clause_t()</a></code> | undefined, hook=<code><a href="#type-hook">hook()</a></code>, paper=integer(), ribbon=integer(), user=term(), encoding=<code>epp:source_encoding()</code>, empty_lines=<code>sets:set(integer())</code>}</strong></dt>  <dt><strong>hook() = none | (<code id="type-hook">erl_syntax:syntaxTree()</code>, term(), term()) -&gt; <code>prettypr:document()</code></strong></dt>  <dt><strong>syntaxTree() = <code id="type-syntaxTree">erl_syntax:syntaxTree()</code></strong></dt> <dd>  <p>An abstract syntax tree. See the <code><a href="erl_syntax">erl_syntax</a></code> module for details. </p> </dd> </dl>  </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm502').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm502').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-best-1-idm504').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-best-1-idm504').style.visibility = 'hidden';" id="best-1">best(Node::<code>erl_syntax:syntaxTree()</code>) -&gt; empty | <code>prettypr:document()</code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Equivalent to <code><a href="#best-2">best(Tree, [])</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-best-2-idm513').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-best-2-idm513').style.visibility = 'hidden';" id="best-2">best(Node::<code>erl_syntax:syntaxTree()</code>, Options::[term()]) -&gt; empty | <code>prettypr:document()</code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Creates a fixed "best" abstract layout for a syntax tree. This is similar to the <code class="code">layout/2</code> function, except that here, the final layout has been selected with respect to the given options. The atom <code class="code">empty</code> is returned if no such layout could be produced. For information on the options, see the <code class="code">format/2</code> function. </p> <p><strong>See also:</strong> <code><a href="#best-1">best/1</a></code>, <code><a href="#format-2">format/2</a></code>, <code><a href="#layout-2">layout/2</a></code>, <code><a href="prettypr#best-3">prettypr:best/3</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-format-1-idm530').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-format-1-idm530').style.visibility = 'hidden';" id="format-1">format(Node::<code>erl_syntax:syntaxTree()</code>) -&gt; string()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Equivalent to <code><a href="#format-2">format(Tree, [])</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-format-2-idm538').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-format-2-idm538').style.visibility = 'hidden';" id="format-2">format(Node::<code>erl_syntax:syntaxTree()</code>, Options::[term()]) -&gt; string()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Prettyprint-formats an abstract Erlang syntax tree as text. For example, if you have a <code class="code">.beam</code> file that has been compiled with <code class="code">debug_info</code>, the following should print the source code for the module (as it looks in the debug info representation): </p>
<pre data-language="erlang">{ok,{_,[{abstract_code,{_,AC}}]}} =
        beam_lib:chunks("myfile.beam",[abstract_code]),
io:put_chars(erl_prettypr:format(erl_syntax:form_list(AC)))</pre>
<p> Available options: </p>
<dl> <dt><strong>{hook, none | <code><a href="#type-hook">hook()</a></code>}</strong></dt> <dd><p>Unless the value is <code class="code">none</code>, the given function is called for each node whose list of annotations is not empty; see below for details. The default value is <code class="code">none</code>.</p></dd> <dt><strong>{paper, integer()}</strong></dt> <dd><p>Specifies the preferred maximum number of characters on any line, including indentation. The default value is 80.</p></dd> <dt><strong>{ribbon, integer()}</strong></dt> <dd><p>Specifies the preferred maximum number of characters on any line, not counting indentation. The default value is 65.</p></dd> <dt><strong>{user, term()}</strong></dt> <dd><p>User-specific data for use in hook functions. The default value is <code class="code">undefined</code>.</p></dd> <dt><strong>{encoding, epp:source_encoding()}</strong></dt> <dd><p>Specifies the encoding of the generated file.</p></dd> </dl>
<p> A hook function (cf. the <code><a href="#type-hook">hook()</a></code> type) is passed the current syntax tree node, the context, and a continuation. The context can be examined and manipulated by functions such as <code class="code">get_ctxt_user/1</code> and <code class="code">set_ctxt_user/2</code>. The hook must return a "document" data structure (see <code><a href="#layout-2">layout/2</a></code> and <code><a href="#best-2">best/2</a></code>); this may be constructed in part or in whole by applying the continuation function. For example, the following is a trivial hook: </p>
<pre data-language="erlang">fun (Node, Ctxt, Cont) -&gt; Cont(Node, Ctxt) end</pre>
<p> which yields the same result as if no hook was given. The following, however: </p>
<pre data-language="erlang">fun (Node, Ctxt, Cont) -&gt;
    Doc = Cont(Node, Ctxt),
    prettypr:beside(prettypr:text("&lt;b&gt;"),
                    prettypr:beside(Doc,
                                    prettypr:text("&lt;/b&gt;")))
end</pre>
<p> will place the text of any annotated node (regardless of the annotation data) between HTML "boldface begin" and "boldface end" tags. </p> <p><strong>See also:</strong> <code><a href="erl_syntax">erl_syntax</a></code>, <code><a href="#best-2">best/2</a></code>, <code><a href="#format-1">format/1</a></code>, <code><a href="#get_ctxt_user-1">get_ctxt_user/1</a></code>, <code><a href="#layout-2">layout/2</a></code>, <code><a href="#set_ctxt_user-2">set_ctxt_user/2</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-get_ctxt_hook-1-idm587').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-get_ctxt_hook-1-idm587').style.visibility = 'hidden';" id="get_ctxt_hook-1">get_ctxt_hook(Ctxt::<code><a href="#type-context">context()</a></code>) -&gt; <code><a href="#type-hook">hook()</a></code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Returns the hook function field of the prettyprinter context.</p> <p><strong>See also:</strong> <code><a href="#set_ctxt_hook-2">set_ctxt_hook/2</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-get_ctxt_linewidth-1-idm598').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-get_ctxt_linewidth-1-idm598').style.visibility = 'hidden';" id="get_ctxt_linewidth-1">get_ctxt_linewidth(Ctxt::<code><a href="#type-context">context()</a></code>) -&gt; integer()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Returns the line widh field of the prettyprinter context.</p> <p><strong>See also:</strong> <code><a href="#set_ctxt_linewidth-2">set_ctxt_linewidth/2</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-get_ctxt_paperwidth-1-idm608').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-get_ctxt_paperwidth-1-idm608').style.visibility = 'hidden';" id="get_ctxt_paperwidth-1">get_ctxt_paperwidth(Ctxt::<code><a href="#type-context">context()</a></code>) -&gt; integer()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Returns the paper widh field of the prettyprinter context.</p> <p><strong>See also:</strong> <code><a href="#set_ctxt_paperwidth-2">set_ctxt_paperwidth/2</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-get_ctxt_precedence-1-idm618').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-get_ctxt_precedence-1-idm618').style.visibility = 'hidden';" id="get_ctxt_precedence-1">get_ctxt_precedence(Ctxt::<code><a href="#type-context">context()</a></code>) -&gt; integer()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Returns the operator precedence field of the prettyprinter context. </p> <p><strong>See also:</strong> <code><a href="#set_ctxt_precedence-2">set_ctxt_precedence/2</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-get_ctxt_user-1-idm628').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-get_ctxt_user-1-idm628').style.visibility = 'hidden';" id="get_ctxt_user-1">get_ctxt_user(Ctxt::<code><a href="#type-context">context()</a></code>) -&gt; term()</span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Returns the user data field of the prettyprinter context.</p> <p><strong>See also:</strong> <code><a href="#set_ctxt_user-2">set_ctxt_user/2</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-layout-1-idm638').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-layout-1-idm638').style.visibility = 'hidden';" id="layout-1">layout(Node::<code>erl_syntax:syntaxTree()</code>) -&gt; <code>prettypr:document()</code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Equivalent to <code><a href="#layout-2">layout(Tree, [])</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-layout-2-idm647').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-layout-2-idm647').style.visibility = 'hidden';" id="layout-2">layout(Node::<code>erl_syntax:syntaxTree()</code>, Options::[term()]) -&gt; <code>prettypr:document()</code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Creates an abstract document layout for a syntax tree. The result represents a set of possible layouts (cf. module <code class="code">prettypr</code>). For information on the options, see <code><a href="#format-2">format/2</a></code>; note, however, that the <code class="code">paper</code> and <code class="code">ribbon</code> options are ignored by this function.</p> <p>This function provides a low-level interface to the pretty printer, returning a flexible representation of possible layouts, independent of the paper width eventually to be used for formatting. This can be included as part of another document and/or further processed directly by the functions in the <code class="code">prettypr</code> module, or used in a hook function (see <code class="code">format/2</code> for details). </p> <p><strong>See also:</strong> <code><a href="prettypr">prettypr</a></code>, <code><a href="#format-2">format/2</a></code>, <code><a href="#layout-1">layout/1</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-set_ctxt_hook-2-idm667').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-set_ctxt_hook-2-idm667').style.visibility = 'hidden';" id="set_ctxt_hook-2">set_ctxt_hook(Ctxt::<code><a href="#type-context">context()</a></code>, Hook::<code><a href="#type-hook">hook()</a></code>) -&gt; <code><a href="#type-context">context()</a></code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Updates the hook function field of the prettyprinter context.</p> <p><strong>See also:</strong> <code><a href="#get_ctxt_hook-1">get_ctxt_hook/1</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-set_ctxt_linewidth-2-idm679').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-set_ctxt_linewidth-2-idm679').style.visibility = 'hidden';" id="set_ctxt_linewidth-2">set_ctxt_linewidth(Ctxt::<code><a href="#type-context">context()</a></code>, W::integer()) -&gt; <code><a href="#type-context">context()</a></code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Updates the line widh field of the prettyprinter context.</p> <p>Note: changing this value (and passing the resulting context to a continuation function) does not affect the normal formatting, but may affect user-defined behaviour in hook functions. </p> <p><strong>See also:</strong> <code><a href="#get_ctxt_linewidth-1">get_ctxt_linewidth/1</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-set_ctxt_paperwidth-2-idm691').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-set_ctxt_paperwidth-2-idm691').style.visibility = 'hidden';" id="set_ctxt_paperwidth-2">set_ctxt_paperwidth(Ctxt::<code><a href="#type-context">context()</a></code>, W::integer()) -&gt; <code><a href="#type-context">context()</a></code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Updates the paper widh field of the prettyprinter context.</p> <p>Note: changing this value (and passing the resulting context to a continuation function) does not affect the normal formatting, but may affect user-defined behaviour in hook functions. </p> <p><strong>See also:</strong> <code><a href="#get_ctxt_paperwidth-1">get_ctxt_paperwidth/1</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-set_ctxt_precedence-2-idm703').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-set_ctxt_precedence-2-idm703').style.visibility = 'hidden';" id="set_ctxt_precedence-2">set_ctxt_precedence(Ctxt::<code><a href="#type-context">context()</a></code>, Prec::integer()) -&gt; <code><a href="#type-context">context()</a></code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Updates the operator precedence field of the prettyprinter context. See the <code>erl_parse(3)</code> module for operator precedences. </p> <p><strong>See also:</strong> <code>erl_parse(3)</code>, <code><a href="#get_ctxt_precedence-1">get_ctxt_precedence/1</a></code>.</p> </div> <table class="func-table"><tr class="func-tr"> <td class="func-td"><div><span onmouseover="document.getElementById('ghlink-set_ctxt_user-2-idm716').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-set_ctxt_user-2-idm716').style.visibility = 'hidden';" id="set_ctxt_user-2">set_ctxt_user(Ctxt::<code><a href="#type-context">context()</a></code>, X::term()) -&gt; <code><a href="#type-context">context()</a></code></span></div></td> <td class="func-since-td"></td> </tr></table> <div class="exports-tube">

<p>Updates the user data field of the prettyprinter context.</p> <p><strong>See also:</strong> <code><a href="#get_ctxt_user-1">get_ctxt_user/1</a></code>.</p> </div> </div> Richard Carlsson carlsson.richard@gmail.com<div class="footer"> <hr> <p>Copyright © 2006-2021 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2021 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
