  <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-idm15513').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-idm15513').style.visibility = 'hidden';">Module</span></h2> <p class="REFBODY module-body">logger_std_h</p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-module-summary-idm15514').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-idm15514').style.visibility = 'hidden';">Module Summary</span></h2> <p class="REFBODY module-summary-body">Standard handler for Logger.</p> <h2><span onmouseover="document.getElementById('ghlink-since-idm15514').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-since-idm15514').style.visibility = 'hidden';">Since</span></h2> <p class="REFBODY module-since"> Module logger_std_h was introduced in OTP 21.0. </p> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-description-idm15515').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-idm15515').style.visibility = 'hidden';">Description</span></h2> 
<p>This is the standard handler for Logger. Multiple instances of this handler can be added to Logger, and each instance prints logs to <code class="code">standard_io</code>, <code class="code">standard_error</code>, or to file.</p> <p>The handler has an overload protection mechanism that keeps the handler process and the Kernel application alive during high loads of log events. How overload protection works, and how to configure it, is described in the <code><a href="logger_chapter#overload_protection"><span class="code">User's Guide</span> </a></code>.</p> <p>To add a new instance of the standard handler, use <code><a href="logger#add_handler-3"><span class="code">logger:add_handler/3</span> </a></code>. The handler configuration argument is a map which can contain general configuration parameters, as documented in the <code><a href="logger_chapter#handler_configuration"><span class="code">User's Guide</span> </a></code>, and handler specific parameters. The specific data is stored in a sub map with the key <code class="code">config</code>, and can contain the following parameters:</p> <dl> <dt><strong><code class="code" id="type">type = standard_io | standard_error | file | {device, io:device()}</code></strong></dt> <dd> <p>Specifies the log destination.</p> <p>The value is set when the handler is added, and it cannot be changed in runtime.</p> <p>Defaults to <code class="code">standard_io</code>, unless parameter <code><a href="#file"><span class="code">file</span></a></code> is given, in which case it defaults to <code class="code">file</code>.</p> </dd> <dt><strong><code class="code" id="file">file =</code><code><a href="file#type-filename"><span class="code">file:filename()</span></a></code></strong></dt> <dd> <p>This specifies the name of the log file when the handler is of type <code class="code">file</code>.</p> <p>The value is set when the handler is added, and it cannot be changed in runtime.</p> <p>Defaults to the same name as the handler identity, in the current directory.</p> </dd> <dt><strong><code class="code" id="modes">modes = [</code><code><a href="file#type-mode"><span class="code">file:mode()</span></a></code><code class="code">]</code></strong></dt> <dd> <p>This specifies the file modes to use when opening the log file, see <code><a href="file#open-2"><span class="code">file:open/2</span></a></code>. If <code class="code">modes</code> are not specified, the default list used is <code class="code">[raw,append,delayed_write]</code>. If <code class="code">modes</code> are specified, the list replaces the default modes list with the following adjustments:</p> <ul> <li> If <code class="code">raw</code> is not found in the list, it is added. </li> <li> If none of <code class="code">write</code>, <code class="code">append</code> or <code class="code">exclusive</code> is found in the list, <code class="code">append</code> is added.</li> <li>If none of <code class="code">delayed_write</code> or <code class="code">{delayed_write,Size,Delay}</code> is found in the list, <code class="code">delayed_write</code> is added.</li> </ul> <p>Log files are always UTF-8 encoded. The encoding cannot be changed by setting the mode <code class="code">{encoding,Encoding}</code>.</p> <p>The value is set when the handler is added, and it cannot be changed in runtime.</p> <p>Defaults to <code class="code">[raw,append,delayed_write]</code>.</p> </dd> <dt><strong><code class="code" id="max_no_bytes">max_no_bytes = pos_integer() | infinity</code></strong></dt> <dd> <p>This parameter specifies if the log file should be rotated or not. The value <code class="code">infinity</code> means the log file will grow indefinitely, while an integer value specifies at which file size (bytes) the file is rotated.</p> <p>Defaults to <code class="code">infinity</code>.</p> </dd> <dt><strong><code class="code" id="max_no_files">max_no_files = non_neg_integer()</code></strong></dt> <dd> <p>This parameter specifies the number of rotated log file archives to keep. This has meaning only if <code><a href="#max_no_bytes"><span class="code">max_no_bytes</span></a></code> is set to an integer value.</p> <p>The log archives are named <code class="code">FileName.0</code>, <code class="code">FileName.1</code>, ... <code class="code">FileName.N</code>, where <code class="code">FileName</code> is the name of the current log file. <code class="code">FileName.0</code> is the newest of the archives. The maximum value for <code class="code">N</code> is the value of <code class="code">max_no_files</code> minus 1.</p> <p>Notice that setting this value to <code class="code">0</code> does not turn off rotation. It only specifies that no archives are kept.</p> <p>Defaults to <code class="code">0</code>.</p> </dd> <dt><strong><code class="code" id="compress_on_rotate">compress_on_rotate = boolean()</code></strong></dt> <dd> <p>This parameter specifies if the rotated log file archives shall be compressed or not. If set to <code class="code">true</code>, all archives are compressed with <code class="code">gzip</code>, and renamed to <code class="code">FileName.N.gz</code></p> <p><code class="code">compress_on_rotate</code> has no meaning if <code><a href="#max_no_bytes"><span class="code">max_no_bytes</span></a></code> has the value <code class="code">infinity</code>.</p> <p>Defaults to <code class="code">false</code>.</p> </dd> <dt><strong><code class="code" id="file_check">file_check = non_neg_integer()</code></strong></dt> <dd> <p>When <code class="code">logger_std_h</code> logs to a file, it reads the file information of the log file prior to each write operation. This is to make sure the file still exists and has the same inode as when it was opened. This implies some performance loss, but ensures that no log events are lost in the case when the file has been removed or renamed by an external actor.</p> <p>In order to allow minimizing the performance loss, the <code class="code">file_check</code> parameter can be set to a positive integer value, <code class="code">N</code>. The handler will then skip reading the file information prior to writing, as long as no more than <code class="code">N</code> milliseconds have passed since it was last read.</p> <p>Notice that the risk of loosing log events grows when the <code class="code">file_check</code> value grows.</p> <p>Defaults to 0.</p> </dd> <dt><strong><code class="code">filesync_repeat_interval = pos_integer() | no_repeat</code></strong></dt> <dd> <p>This value, in milliseconds, specifies how often the handler does a file sync operation to write buffered data to disk. The handler attempts the operation repeatedly, but only performs a new sync if something has actually been logged.</p> <p>If <code class="code">no_repeat</code> is set as value, the repeated file sync operation is disabled, and it is the operating system settings that determine how quickly or slowly data is written to disk. The user can also call the <code><a href="logger_std_h#filesync-1"><span class="code">filesync/1</span></a></code> function to perform a file sync.</p> <p>Defaults to <code class="code">5000</code> milliseconds.</p> </dd> </dl> <p>Other configuration parameters exist, to be used for customizing the overload protection behaviour. The same parameters are used both in the standard handler and the disk_log handler, and are documented in the <code><a href="logger_chapter#overload_protection"><span class="code">User's Guide</span> </a></code>.</p> <p>Notice that if changing the configuration of the handler in runtime, the <code class="code">type</code>, <code class="code">file</code>, or <code class="code">modes</code> parameters must not be modified.</p> <p>Example of adding a standard handler:</p> <pre data-language="erlang">logger:add_handler(my_standard_h, logger_std_h,
                   #{config =&gt; #{file =&gt; "./system_info.log",
                                 filesync_repeat_interval =&gt; 1000}}).</pre> <p>To set the default handler, that starts initially with the Kernel application, to log to file instead of <code class="code">standard_io</code>, change the Kernel default logger configuration. Example:</p> <pre data-language="erlang">erl -kernel logger '[{handler,default,logger_std_h,
                      #{config =&gt; #{file =&gt; "./log.log"}}}]'</pre> <p>An example of how to replace the standard handler with a disk_log handler at startup is found in the <code><a href="logger_disk_log_h"><span class="code">logger_disk_log_h</span></a></code> manual.</p>  </div> <div class="innertube"><h2><span onmouseover="document.getElementById('ghlink-exports-idm15660').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-idm15660').style.visibility = 'hidden';">Exports</span></h2></div> <div class="exports-body"> <table class="func-table" id="filesync-1"><tr class="func-tr"> <td class="func-td"><div onmouseover="document.getElementById('ghlink-filesync-1-idp450').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-filesync-1-idp450').style.visibility = 'hidden';"> filesync(Name) -&gt; ok | {error, Reason}</div></td> <td class="func-since-td"><span class="since">OTP 21.0</span></td> </tr></table>  <h2 class="func-types-title">Types</h2>    <div class="exports-tube">

<p>Write buffered data to disk.</p> </div> </div> <div class="innertube"> <h2><span onmouseover="document.getElementById('ghlink-see-also-idm15666').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-see-also-idm15666').style.visibility = 'hidden';">See Also</span></h2>  <p><code><a href="logger"><span class="code">logger(3)</span></a></code>, <code><a href="logger_disk_log_h"> <span class="code">logger_disk_log_h(3)</span></a></code></p>  </div> <div class="footer"> <hr> <p>Copyright © 1997-2021 Ericsson AB. All Rights Reserved.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2021 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
