   <h1 id="firstHeading" class="firstHeading">std::variant&lt;Types...&gt;::valueless_by_exception</h1>            <table class="t-dcl-begin"> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">constexpr bool valueless_by_exception() const noexcept;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr>  </table> <p>Returns <code>false</code> if and only if the variant holds a value.</p>
<h3 id="Notes">Notes</h3> <p>A variant may become valueless in the following situations:</p>
<ul>
<li> (guaranteed) an exception is thrown during the move initialization of the contained value from the temporary in <a href="operator=" title="cpp/utility/variant/operator=">copy assignment</a> </li>
<li> (guaranteed) an exception is thrown during the move initialization of the contained value during <a href="operator=" title="cpp/utility/variant/operator=">move assignment</a> </li>
<li> (optionally) an exception is thrown when initializing the contained value during a type-changing <a href="operator=" title="cpp/utility/variant/operator=">assignment</a> </li>
<li> (optionally) an exception is thrown when initializing the contained value during a type-changing <a href="emplace" title="cpp/utility/variant/emplace">emplace</a> </li>
</ul> <p>Since variant is never permitted to allocate dynamic memory, previous value cannot be retained in these situations.</p>
<p>This applies even to variants of non-class types:</p>
<div class="cpp source-cpp"><pre data-language="cpp">struct S {
    operator int() { throw 42; }
};
variant&lt;float, int&gt; v{12.f}; // OK
v.emplace&lt;1&gt;(S()); // v may be valueless</pre></div> <p>A variant that is valueless by exception is treated as being in an invalid state: <a href="index" title="cpp/utility/variant/index">index</a> returns <a href="variant_npos" title="cpp/utility/variant/variant npos">variant_npos</a>, <a href="get" title="cpp/utility/variant/get">get</a> and <a href="visit" title="cpp/utility/variant/visit">visit</a> throw <a href="bad_variant_access" title="cpp/utility/variant/bad variant access">bad_variant_access</a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="http://en.cppreference.com/w/cpp/utility/variant/valueless_by_exception" class="_attribution-link">http://en.cppreference.com/w/cpp/utility/variant/valueless_by_exception</a>
  </p>
</div>
