<h1>ALTER SUBSCRIPTION</h1> <p>ALTER SUBSCRIPTION â€” change the definition of a subscription</p>   <h2>Synopsis</h2> <pre data-language="sql">
ALTER SUBSCRIPTION name CONNECTION 'conninfo'
ALTER SUBSCRIPTION name SET PUBLICATION publication_name [, ...] [ WITH ( publication_option [= value] [, ... ] ) ]
ALTER SUBSCRIPTION name ADD PUBLICATION publication_name [, ...] [ WITH ( publication_option [= value] [, ... ] ) ]
ALTER SUBSCRIPTION name DROP PUBLICATION publication_name [, ...] [ WITH ( publication_option [= value] [, ... ] ) ]
ALTER SUBSCRIPTION name REFRESH PUBLICATION [ WITH ( refresh_option [= value] [, ... ] ) ]
ALTER SUBSCRIPTION name ENABLE
ALTER SUBSCRIPTION name DISABLE
ALTER SUBSCRIPTION name SET ( subscription_parameter [= value] [, ... ] )
ALTER SUBSCRIPTION name OWNER TO { new_owner | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SUBSCRIPTION name RENAME TO new_name
</pre>  <div class="refsect1" id="id-1.9.3.33.5"> <h2>Description</h2> <p><code class="command">ALTER SUBSCRIPTION</code> can change most of the subscription properties that can be specified in <a class="xref" href="sql-createsubscription" title="CREATE SUBSCRIPTION">CREATE SUBSCRIPTION</a>.</p> <p>You must own the subscription to use <code class="command">ALTER SUBSCRIPTION</code>. To alter the owner, you must also be a direct or indirect member of the new owning role. The new owner has to be a superuser. (Currently, all subscription owners must be superusers, so the owner checks will be bypassed in practice. But this might change in the future.)</p> <p>When refreshing a publication we remove the relations that are no longer part of the publication and we also remove the table synchronization slots if there are any. It is necessary to remove these slots so that the resources allocated for the subscription on the remote host are released. If due to network breakdown or some other error, PostgreSQL is unable to remove the slots, an ERROR will be reported. To proceed in this situation, the user either needs to retry the operation or disassociate the slot from the subscription and drop the subscription as explained in <a class="xref" href="sql-dropsubscription" title="DROP SUBSCRIPTION">DROP SUBSCRIPTION</a>.</p> <p>Commands <code class="command">ALTER SUBSCRIPTION ... REFRESH PUBLICATION</code> and <code class="command">ALTER SUBSCRIPTION ... {SET|ADD|DROP} PUBLICATION ...</code> with <code class="literal">refresh</code> option as <code class="literal">true</code> cannot be executed inside a transaction block.</p> </div> <div class="refsect1" id="id-1.9.3.33.6"> <h2>Parameters</h2> <div class="variablelist"> <dl class="variablelist"> <dt><code>name</code></dt> <dd> <p>The name of a subscription whose properties are to be altered.</p> </dd> <dt><code class="literal">CONNECTION 'conninfo'</code></dt> <dd> <p>This clause alters the connection property originally set by <a class="xref" href="sql-createsubscription" title="CREATE SUBSCRIPTION">CREATE SUBSCRIPTION</a>. See there for more information.</p> </dd> <dt>
<code class="literal">SET PUBLICATION publication_name</code><code class="literal">ADD PUBLICATION publication_name</code><code class="literal">DROP PUBLICATION publication_name</code>
</dt> <dd> <p>Changes the list of subscribed publications. <code class="literal">SET</code> replaces the entire list of publications with a new list, <code class="literal">ADD</code> adds additional publications to the list of publications, and <code class="literal">DROP</code> removes the publications from the list of publications. See <a class="xref" href="sql-createsubscription" title="CREATE SUBSCRIPTION">CREATE SUBSCRIPTION</a> for more information. By default, this command will also act like <code class="literal">REFRESH PUBLICATION</code>.</p> <p><code>publication_option</code> specifies additional options for this operation. The supported options are:</p> <div class="variablelist"> <dl class="variablelist"> <dt>
<code class="literal">refresh</code> (<code class="type">boolean</code>)</dt> <dd> <p>When false, the command will not try to refresh table information. <code class="literal">REFRESH PUBLICATION</code> should then be executed separately. The default is <code class="literal">true</code>.</p> </dd> </dl> </div> <p>Additionally, the options described under <code class="literal">REFRESH PUBLICATION</code> may be specified, to control the implicit refresh operation.</p> </dd> <dt><code class="literal">REFRESH PUBLICATION</code></dt> <dd> <p>Fetch missing table information from publisher. This will start replication of tables that were added to the subscribed-to publications since the last invocation of <code class="command">REFRESH PUBLICATION</code> or since <code class="command">CREATE SUBSCRIPTION</code>.</p> <p><code>refresh_option</code> specifies additional options for the refresh operation. The supported options are:</p> <div class="variablelist"> <dl class="variablelist"> <dt>
<code class="literal">copy_data</code> (<code class="type">boolean</code>)</dt> <dd> <p>Specifies whether the existing data in the publications that are being subscribed to should be copied once the replication starts. The default is <code class="literal">true</code>. (Previously subscribed tables are not copied.)</p> </dd> </dl> </div> </dd> <dt><code class="literal">ENABLE</code></dt> <dd> <p>Enables the previously disabled subscription, starting the logical replication worker at the end of transaction.</p> </dd> <dt><code class="literal">DISABLE</code></dt> <dd> <p>Disables the running subscription, stopping the logical replication worker at the end of transaction.</p> </dd> <dt><code class="literal">SET ( subscription_parameter [= value] [, ... ] )</code></dt> <dd> <p>This clause alters parameters originally set by <a class="xref" href="sql-createsubscription" title="CREATE SUBSCRIPTION">CREATE SUBSCRIPTION</a>. See there for more information. The parameters that can be altered are <code class="literal">slot_name</code>, <code class="literal">synchronous_commit</code>, <code class="literal">binary</code>, and <code class="literal">streaming</code>.</p> </dd> <dt><code>new_owner</code></dt> <dd> <p>The user name of the new owner of the subscription.</p> </dd> <dt><code>new_name</code></dt> <dd> <p>The new name for the subscription.</p> </dd> </dl> </div> </div> <div class="refsect1" id="id-1.9.3.33.7"> <h2>Examples</h2> <p>Change the publication subscribed by a subscription to <code class="literal">insert_only</code>:</p> <pre data-language="sql">
ALTER SUBSCRIPTION mysub SET PUBLICATION insert_only;
</pre> <p>Disable (stop) the subscription:</p> <pre data-language="sql">
ALTER SUBSCRIPTION mysub DISABLE;
</pre> </div> <div class="refsect1" id="id-1.9.3.33.8"> <h2>Compatibility</h2> <p><code class="command">ALTER SUBSCRIPTION</code> is a PostgreSQL extension.</p> </div> <div class="refsect1" id="id-1.9.3.33.9"> <h2>See Also</h2>
<span class="simplelist"><a class="xref" href="sql-createsubscription" title="CREATE SUBSCRIPTION">CREATE SUBSCRIPTION</a>, <a class="xref" href="sql-dropsubscription" title="DROP SUBSCRIPTION">DROP SUBSCRIPTION</a>, <a class="xref" href="sql-createpublication" title="CREATE PUBLICATION">CREATE PUBLICATION</a>, <a class="xref" href="sql-alterpublication" title="ALTER PUBLICATION">ALTER PUBLICATION</a></span> </div>  <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">  <table summary="Navigation footer"> <tr> <td width="40%" align="left">
<a accesskey="p" href="sql-alterstatistics" title="ALTER STATISTICS">Prev</a> </td> <td width="20%" align="center"><a accesskey="u" href="https://www.postgresql.org/docs/14/sql-commands.html" title="SQL Commands">Up</a></td> <td width="40%" align="right"> <a accesskey="n" href="sql-altersystem" title="ALTER SYSTEM">Next</a>
</td> </tr> <tr> <td width="40%" align="left">ALTER STATISTICS </td> <td width="20%" align="center"><a accesskey="h" href="https://www.postgresql.org/docs/14/index.html" title="PostgreSQL 14.1 Documentation">Home</a></td> <td width="40%" align="right"> ALTER SYSTEM</td> </tr> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.postgresql.org/docs/14/sql-altersubscription.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/14/sql-altersubscription.html</a>
  </p>
</div>
