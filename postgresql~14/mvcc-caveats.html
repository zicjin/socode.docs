<h1>13.5. Caveats</h1>    <p>Some DDL commands, currently only <a class="link" href="sql-truncate" title="TRUNCATE"><code class="command">TRUNCATE</code></a> and the table-rewriting forms of <a class="link" href="sql-altertable" title="ALTER TABLE"><code class="command">ALTER TABLE</code></a>, are not MVCC-safe. This means that after the truncation or rewrite commits, the table will appear empty to concurrent transactions, if they are using a snapshot taken before the DDL command committed. This will only be an issue for a transaction that did not access the table in question before the DDL command started — any transaction that has done so would hold at least an <code class="literal">ACCESS SHARE</code> table lock, which would block the DDL command until that transaction completes. So these commands will not cause any apparent inconsistency in the table contents for successive queries on the target table, but they could cause visible inconsistency between the contents of the target table and other tables in the database.</p> <p>Support for the Serializable transaction isolation level has not yet been added to Hot Standby replication targets (described in <a class="xref" href="hot-standby" title="27.4. Hot Standby">Section 27.4</a>). The strictest isolation level currently supported in hot standby mode is Repeatable Read. While performing all permanent database writes within Serializable transactions on the primary will ensure that all standbys will eventually reach a consistent state, a Repeatable Read transaction run on the standby can sometimes see a transient state that is inconsistent with any serial execution of the transactions on the primary.</p> <p>Internal access to the system catalogs is not done using the isolation level of the current transaction. This means that newly created database objects such as tables are visible to concurrent Repeatable Read and Serializable transactions, even though the rows they contain are not. In contrast, queries that explicitly examine the system catalogs don't see rows representing concurrently created database objects, in the higher isolation levels.</p>  <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">  <table summary="Navigation footer"> <tr> <td width="40%" align="left">
<a accesskey="p" href="applevel-consistency" title="13.4. Data Consistency Checks at the Application Level">Prev</a> </td> <td width="20%" align="center"><a accesskey="u" href="https://www.postgresql.org/docs/14/mvcc.html" title="Chapter 13. Concurrency Control">Up</a></td> <td width="40%" align="right"> <a accesskey="n" href="locking-indexes" title="13.6. Locking and Indexes">Next</a>
</td> </tr> <tr> <td width="40%" align="left">13.4. Data Consistency Checks at the Application Level </td> <td width="20%" align="center"><a accesskey="h" href="https://www.postgresql.org/docs/14/index.html" title="PostgreSQL 14.4 Documentation">Home</a></td> <td width="40%" align="right"> 13.6. Locking and Indexes</td> </tr> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.postgresql.org/docs/14/mvcc-caveats.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/14/mvcc-caveats.html</a>
  </p>
</div>
