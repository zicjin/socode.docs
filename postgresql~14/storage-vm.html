<h1>70.4. Visibility Map</h1>    <p>Each heap relation has a Visibility Map (VM) to keep track of which pages contain only tuples that are known to be visible to all active transactions; it also keeps track of which pages contain only frozen tuples. It's stored alongside the main relation data in a separate relation fork, named after the filenode number of the relation, plus a <code class="literal">_vm</code> suffix. For example, if the filenode of a relation is 12345, the VM is stored in a file called <code class="filename">12345_vm</code>, in the same directory as the main relation file. Note that indexes do not have VMs.</p> <p>The visibility map stores two bits per heap page. The first bit, if set, indicates that the page is all-visible, or in other words that the page does not contain any tuples that need to be vacuumed. This information can also be used by <a class="link" href="indexes-index-only-scans" title="11.9. Index-Only Scans and Covering Indexes"><em class="firstterm">index-only scans</em></a> to answer queries using only the index tuple. The second bit, if set, means that all tuples on the page have been frozen. That means that even an anti-wraparound vacuum need not revisit the page.</p> <p>The map is conservative in the sense that we make sure that whenever a bit is set, we know the condition is true, but if a bit is not set, it might or might not be true. Visibility map bits are only set by vacuum, but are cleared by any data-modifying operations on a page.</p> <p>The <a class="xref" href="pgvisibility" title="F.34. pg_visibility">pg_visibility</a> module can be used to examine the information stored in the visibility map.</p>  <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">  <table summary="Navigation footer"> <tr> <td width="40%" align="left">
<a accesskey="p" href="storage-fsm" title="70.3. Free Space Map">Prev</a> </td> <td width="20%" align="center"><a accesskey="u" href="https://www.postgresql.org/docs/14/storage.html" title="Chapter 70. Database Physical Storage">Up</a></td> <td width="40%" align="right"> <a accesskey="n" href="storage-init" title="70.5. The Initialization Fork">Next</a>
</td> </tr> <tr> <td width="40%" align="left">70.3. Free Space Map </td> <td width="20%" align="center"><a accesskey="h" href="https://www.postgresql.org/docs/14/index.html" title="PostgreSQL 14.1 Documentation">Home</a></td> <td width="40%" align="right"> 70.5. The Initialization Fork</td> </tr> </table> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.postgresql.org/docs/14/storage-vm.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/14/storage-vm.html</a>
  </p>
</div>
