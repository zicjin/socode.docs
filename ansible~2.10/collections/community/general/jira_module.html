<h1 id="community-general-jira-create-and-modify-issues-in-a-jira-instance">community.general.jira – create and modify issues in a JIRA instance</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 1.3.6).</p> <p>To install it use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.jira</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create and modify issues in a JIRA instance.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>assignee</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Sets the assignee on create or transition operations. Note not all transitions will allow this.</div> </td> </tr> <tr> <td colspan="1">  <b>comment</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The comment text to add.</div> </td> </tr> <tr> <td colspan="1">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The issue description, where appropriate.</div> </td> </tr> <tr> <td colspan="1">  <b>fields</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>This is a free-form data structure that can contain arbitrary data. This is passed directly to the JIRA REST API (possibly after merging with other required data, as when passed to create). See examples for more information, and the JIRA REST API for the structure required for various fields.</div> </td> </tr> <tr> <td colspan="1">  <b>inwardissue</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set issue from which link will be created.</div> </td> </tr> <tr> <td colspan="1">  <b>issue</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>An existing issue key to operate on.</div> <div>
<br>aliases: ticket</div> </td> </tr> <tr> <td colspan="1">  <b>issuetype</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The issue type, for issue creation.</div> </td> </tr> <tr> <td colspan="1">  <b>jql</b>  <div> <span>string</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> </td> <td> <div>Query JIRA in JQL Syntax, e.g. 'CMDB Hostname'='test.example.com'.</div> </td> </tr> <tr> <td colspan="1">  <b>linktype</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set type of link, when action 'link' selected.</div> </td> </tr> <tr> <td colspan="1">  <b>maxresults</b>  <div> <span>integer</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> </td> <td> <div>Limit the result of <em>operation=search</em>. If no value is specified, the default jira limit will be used.</div> <div>Used when <em>operation=search</em> only, ignored otherwise.</div> </td> </tr> <tr> <td colspan="1">  <b>operation</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>comment</li> <li>create</li> <li>edit</li> <li>fetch</li> <li>link</li> <li>search</li> <li>transition</li> <li>update</li> </ul> </td> <td> <div>The operation to perform.</div> <div>
<br>aliases: command</div> </td> </tr> <tr> <td colspan="1">  <b>outwardissue</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set issue to which link will be created.</div> </td> </tr> <tr> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password to log-in with.</div> </td> </tr> <tr> <td colspan="1">  <b>project</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The project for this operation. Required for issue creation.</div> </td> </tr> <tr> <td colspan="1">  <b>status</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The desired status; only relevant for the transition operation.</div> </td> </tr> <tr> <td colspan="1">  <b>summary</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The issue summary, where appropriate.</div> </td> </tr> <tr> <td colspan="1">  <b>timeout</b>  <div> <span>float</span> </div> </td> <td> <b>Default:</b><br><div>10</div> </td> <td> <div>Set timeout, in seconds, on requests to JIRA API.</div> </td> </tr> <tr> <td colspan="1">  <b>uri</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Base URI for the JIRA instance.</div> </td> </tr> <tr> <td colspan="1">  <b>username</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to log-in with.</div> </td> </tr> <tr> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Require valid SSL certificates (set to `false` if you'd like to use self-signed certificates)</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Currently this only works with basic-auth.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># Create a new issue and add a comment to it:
- name: Create an issue
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    project: ANS
    operation: create
    summary: Example Issue
    description: Created using Ansible
    issuetype: Task
  args:
    fields:
        customfield_13225: "test"
        customfield_12931: '{"value": "Test"}'
  register: issue

- name: Comment on issue
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    issue: '{{ issue.meta.key }}'
    operation: comment
    comment: A comment added by Ansible

# Assign an existing issue using edit
- name: Assign an issue using free-form fields
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    issue: '{{ issue.meta.key}}'
    operation: edit
    assignee: ssmith

# Create an issue with an existing assignee
- name: Create an assigned issue
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    project: ANS
    operation: create
    summary: Assigned issue
    description: Created and assigned using Ansible
    issuetype: Task
    assignee: ssmith

# Edit an issue
- name: Set the labels on an issue using free-form fields
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    issue: '{{ issue.meta.key }}'
    operation: edit
  args:
    fields:
        labels:
          - autocreated
          - ansible

# Updating a field using operations: add, set &amp; remove
- name: Change the value of a Select dropdown
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    issue: '{{ issue.meta.key }}'
    operation: update
  args:
    fields:
      customfield_12931: [ {'set': {'value': 'Virtual'}} ]
      customfield_13820: [ {'set': {'value':'Manually'}} ]
  register: cmdb_issue
  delegate_to: localhost


# Retrieve metadata for an issue and use it to create an account
- name: Get an issue
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    project: ANS
    operation: fetch
    issue: ANS-63
  register: issue

# Search for an issue
# You can limit the search for specific fields by adding optional args. Note! It must be a dict, hence, lastViewed: null
- name: Search for an issue
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    project: ANS
    operation: search
    maxresults: 10
    jql: project=cmdb AND cf[13225]="test"
  args:
    fields:
      lastViewed: null
  register: issue

- name: Create a unix account for the reporter
  become: true
  user:
    name: '{{ issue.meta.fields.creator.name }}'
    comment: '{{ issue.meta.fields.creator.displayName }}'

# You can get list of valid linktypes at /rest/api/2/issueLinkType
# url of your jira installation.
- name: Create link from HSP-1 to MKY-1
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    operation: link
    linktype: Relates
    inwardissue: HSP-1
    outwardissue: MKY-1

# Transition an issue by target status
- name: Close the issue
  community.general.jira:
    uri: '{{ server }}'
    username: '{{ user }}'
    password: '{{ pass }}'
    issue: '{{ issue.meta.key }}'
    operation: transition
    status: Done
  args:
    fields:
      customfield_14321: [ {'set': {'value': 'Value of Select' }} ]
      comment:  [ { 'add': { 'body' : 'Test' } }]
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Steve Smith (@tarka)</li> <li>Per Abildgaard Toft (@pertoft)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/2.10/collections/community/general/jira_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.10/collections/community/general/jira_module.html</a>
  </p>
</div>
