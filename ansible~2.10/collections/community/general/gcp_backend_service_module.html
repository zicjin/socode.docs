<h1 id="community-general-gcp-backend-service-create-or-destroy-a-backend-service">community.general.gcp_backend_service – Create or Destroy a Backend Service.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 1.3.6).</p> <p>To install it use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.gcp_backend_service</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#deprecated" id="id1">DEPRECATED</a></li> <li><a class="reference internal" href="#synopsis" id="id2">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id3">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id4">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> <li><a class="reference internal" href="#status" id="id8">Status</a></li> </ul>   <h2 id="deprecated">DEPRECATED</h2> <dl class="field-list simple"> <dt class="field-odd">Removed in</dt> <dd class="field-odd">
<p>version 2.0.0</p> </dd> <dt class="field-even">Why</dt> <dd class="field-even">
<p>Updated modules released with increased functionality</p> </dd> <dt class="field-odd">Alternative</dt> <dd class="field-odd">
<p>Use <a class="reference internal" href="../../google/cloud/gcp_compute_backend_service_module#ansible-collections-google-cloud-gcp-compute-backend-service-module"><span class="std std-ref">google.cloud.gcp_compute_backend_service</span></a> instead.</p> </dd> </dl>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create or Destroy a Backend Service. See <a class="reference external" href="https://cloud.google.com/compute/docs/load-balancing/http/backend-service">https://cloud.google.com/compute/docs/load-balancing/http/backend-service</a> for an overview. Full install/configuration instructions for the Google Cloud modules can be found in the comments of ansible/test/gce_tests.py.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>apache-libcloud &gt;= 1.3.0</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>backend_service_name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Name of the Backend Service.</div> </td> </tr> <tr> <td colspan="1">  <b>backends</b>  <div> <span>list</span> / <span>elements=string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>List of backends that make up the backend service. A backend is made up of an instance group and optionally several other parameters. See <a href="https://cloud.google.com/compute/docs/reference/latest/backendServices">https://cloud.google.com/compute/docs/reference/latest/backendServices</a> for details.</div> </td> </tr> <tr> <td colspan="1">  <b>credentials_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Path to the JSON file associated with the service account email.</div> </td> </tr> <tr> <td colspan="1">  <b>enable_cdn</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If true, enable Cloud CDN for this Backend Service.</div> </td> </tr> <tr> <td colspan="1">  <b>healthchecks</b>  <div> <span>list</span> / <span>elements=string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>List of healthchecks. Only one healthcheck is supported.</div> </td> </tr> <tr> <td colspan="1">  <b>pem_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Path to the PEM file associated with the service account email.</div> </td> </tr> <tr> <td colspan="1">  <b>port_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of the port on the managed instance group (MIG) that backend services can forward data to. Required for external load balancing.</div> </td> </tr> <tr> <td colspan="1">  <b>project_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>GCE project ID.</div> </td> </tr> <tr> <td colspan="1">  <b>protocol</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>HTTP</li> <li>HTTPS</li> <li><div>
<b>TCP</b> ←</div></li> <li>SSL</li> </ul> </td> <td> <div>The protocol this Backend Service uses to communicate with backends. Possible values are HTTP, HTTPS, TCP, and SSL. The default is TCP.</div> </td> </tr> <tr> <td colspan="1">  <b>service_account_email</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Service account email</div> </td> </tr> <tr> <td colspan="1">  <b>service_account_permissions</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>service account permissions</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li><div>
<b>present</b> ←</div></li> </ul> </td> <td> <div>Desired state of the resource</div> </td> </tr> <tr> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>How many seconds to wait for the backend before considering it a failed request. Default is 30 seconds. Valid range is 1-86400.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Update is not currently supported.</li> <li>Only global backend services are currently supported. Regional backends not currently supported.</li> <li>Internal load balancing not currently supported.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create Minimum Backend Service
  community.general.gcp_backend_service:
    service_account_email: "{{ service_account_email }}"
    credentials_file: "{{ credentials_file }}"
    project_id: "{{ project_id }}"
    backend_service_name: "{{ bes }}"
    backends:
    - instance_group: managed_instance_group_1
    healthchecks:
    - healthcheck_name_for_backend_service
    port_name: myhttpport
    state: present

- name: Create BES with extended backend parameters
  community.general.gcp_backend_service:
    service_account_email: "{{ service_account_email }}"
    credentials_file: "{{ credentials_file }}"
    project_id: "{{ project_id }}"
    backend_service_name: "{{ bes }}"
    backends:
    - instance_group: managed_instance_group_1
      max_utilization: 0.6
      max_rate: 10
    - instance_group: managed_instance_group_2
      max_utilization: 0.5
      max_rate: 4
    healthchecks:
    - healthcheck_name_for_backend_service
    port_name: myhttpport
    state: present
    timeout: 60
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>backend_service_created</b>  <div> <span>boolean</span> </div> </td> <td>When a Backend Service is created.</td> <td> <div>Indicator Backend Service was created.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td colspan="1">  <b>backend_service_deleted</b>  <div> <span>boolean</span> </div> </td> <td>When a Backend Service is deleted.</td> <td> <div>Indicator Backend Service was deleted.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td colspan="1">  <b>backend_service_name</b>  <div> <span>string</span> </div> </td> <td>Always.</td> <td> <div>Name of the Backend Service.</div> <br> <div><b>Sample:</b></div> <div>my-backend-service</div> </td> </tr> <tr> <td colspan="1">  <b>backends</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>When a Backend Service exists.</td> <td> <div>List of backends (comprised of instance_group) that make up a Backend Service.</div> <br> <div><b>Sample:</b></div> <div>[ { 'instance_group': 'mig_one', 'zone': 'us-central1-b'} ]</div> </td> </tr> <tr> <td colspan="1">  <b>enable_cdn</b>  <div> <span>boolean</span> </div> </td> <td>When a backend service exists.</td> <td> <div>If Cloud CDN is enabled. null if not set.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td colspan="1">  <b>healthchecks</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>When a Backend Service exists.</td> <td> <div>List of healthchecks applied to the Backend Service.</div> <br> <div><b>Sample:</b></div> <div>[ 'my-healthcheck' ]</div> </td> </tr> <tr> <td colspan="1">  <b>port_name</b>  <div> <span>string</span> </div> </td> <td>When a Backend Service exists.</td> <td> <div>Name of Backend Port.</div> <br> <div><b>Sample:</b></div> <div>myhttpport</div> </td> </tr> <tr> <td colspan="1">  <b>protocol</b>  <div> <span>string</span> </div> </td> <td>When a Backend Service exists.</td> <td> <div>Protocol used to communicate with the Backends.</div> <br> <div><b>Sample:</b></div> <div>HTTP</div> </td> </tr> <tr> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td>If specified.</td> <td> <div>In seconds, how long before a request sent to a backend is considered failed.</div> <br> <div><b>Sample:</b></div> <div>myhttpport</div> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <ul class="simple"> <li>This module will be removed in version 2.0.0. <em>[deprecated]</em>
</li> <li>For more information see <a class="reference internal" href="#deprecated">DEPRECATED</a>.</li> </ul>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Tom Melendez (@supertom) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#99edf6f4bfbaaaaea2bfbaacaba2bfbaada1a2eaece9fcebedf6f4bfbaadafa2faf6f4">tom<span>@</span>supertom<span>.</span>com</a>&gt;</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/2.10/collections/community/general/gcp_backend_service_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.10/collections/community/general/gcp_backend_service_module.html</a>
  </p>
</div>
