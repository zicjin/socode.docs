<h1 id="vmware-requirements">VMware Prerequisites</h1>  <ul id="vmware-prerequisites"> <li><a class="reference internal" href="#installing-vcenter-ssl-certificates-for-ansible" id="id2">Installing vCenter SSL certificates for Ansible</a></li> <li><a class="reference internal" href="#installing-esxi-ssl-certificates-for-ansible" id="id3">Installing ESXi SSL certificates for Ansible</a></li> </ul>
   <h2 id="installing-ssl-certificates">Installing SSL Certificates</h2> <p>All vCenter and ESXi servers require SSL encryption on all connections to enforce secure communication. You must enable SSL encryption for Ansible by installing the server’s SSL certificates on your Ansible control node or delegate node.</p> <p>If the SSL certificate of your vCenter or ESXi server is not correctly installed on your Ansible control node, you will see the following warning when using Ansible VMware modules:</p> <p><code>Unable to connect to vCenter or ESXi API at xx.xx.xx.xx on TCP/443: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:777)</code></p> <p>To install the SSL certificate for your VMware server, and run your Ansible VMware modules in encrypted mode, please follow the instructions for the server you are running with VMware.</p>  <h3 id="installing-vcenter-ssl-certificates-for-ansible">Installing vCenter SSL certificates for Ansible</h3> <ul class="simple"> <li>From any web browser, go to the base URL of the vCenter Server without port number like <code>https://vcenter-domain.example.com</code>
</li> <li>Click the “Download trusted root CA certificates” link at the bottom of the grey box on the right and download the file.</li> <li>Change the extension of the file to .zip. The file is a ZIP file of all root certificates and all CRLs.</li> <li>Extract the contents of the zip file. The extracted directory contains a <code>.certs</code> directory that contains two types of files. Files with a number as the extension (.0, .1, and so on) are root certificates.</li> <li>Install the certificate files are trusted certificates by the process that is appropriate for your operating system.</li> </ul>   <h3 id="installing-esxi-ssl-certificates-for-ansible">Installing ESXi SSL certificates for Ansible</h3> <ul class="simple"> <li>Enable SSH Service on ESXi either by using Ansible VMware module <a class="reference external" href="https://github.com/ansible-collections/vmware/blob/main/plugins/modules/vmware_host_config_manager.py">vmware_host_service_manager</a> or manually using vSphere Web interface.</li> <li>SSH to ESXi server using administrative credentials, and navigate to directory <code>/etc/vmware/ssl</code>
</li> <li>Secure copy (SCP) <code>rui.crt</code> located in <code>/etc/vmware/ssl</code> directory to Ansible control node.</li> <li>Install the certificate file by the process that is appropriate for your operating system.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://docs.ansible.com/ansible/2.10/scenario_guides/vmware_scenarios/vmware_requirements.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.10/scenario_guides/vmware_scenarios/vmware_requirements.html</a>
  </p>
</div>
