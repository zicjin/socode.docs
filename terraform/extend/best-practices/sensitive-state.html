 <h1 id="handling-sensitive-values-in-state">  Handling Sensitive Values in State </h1> <p>Many organizations use Terraform to manage their entire infrastructure, and it's inevitable that <a href="../../language/state/sensitive-data">sensitive information will find its way into Terraform</a> in these circumstances. There are a couple of recommended approaches for managing sensitive state in Terraform.</p> <h2 id="using-the-sensitive-flag">  Using the <code>Sensitive</code> Flag </h2> <p>When working with a field that contains information likely to be considered sensitive, it is best to set the <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-sdk/helper/schema#Schema.Sensitive"><code>Sensitive</code></a> property on its schema to <code>true</code>. This will prevent the field's values from showing up in CLI output and in Terraform Cloud. It will <strong>not encrypt</strong> or obscure the value in the state, however.</p> <h2 id="don-39-t-encrypt-state">  Don't Encrypt State </h2> <p>One experiment that has been attempted is allowing the user to provide a PGP key and a cipher text, and decrypting the value in the provider code before using it, storing only the cipher text in state. Another variation on this approach was providing a PGP key that data from an API would be encrypted with before being set in state, with nothing being set in the config.</p> <p>Both of these approaches are discouraged and will be removed from the HashiCorp-supported providers over time. This strategy was tailored to a time when Terraform's state had to be stored in cleartext on any machine running <code>terraform apply</code>, and was meant to provide a bit of security in that scenario. With the introduction and use of <a href="../../language/settings/backends/index">remote backends</a> and especially the availability of <a href="https://app.terraform.io/">Terraform Cloud</a>, there are now a variety of backends that will encrypt state at rest and will not store the state in cleartext on machines running <code>terraform apply</code>. This means the original problem the PGP key pattern was intended to solve has a better-supported solution, and we're deprecating it in favor of that solution.</p> <p>Even without comparing it to full state encryption, PGP key encryption has major drawbacks. Values encrypted with a PGP key can't be reliably interpolated, Terraform isn't built to provide a good user experience around a missing PGP key right now, and the approach needs serious modification to not violate protocol requirements for Terraform 0.12 and into the future.</p> <p>In light of these shortcomings, the encouraged solution at this time is to use a state backend that supports operations and encryption, and for users whose security needs cannot be met by that strategy to weigh in on <a href="https://github.com/hashicorp/terraform/issues/516">the issue about this</a> to help outline the gaps in this strategy, so appropriate solutions can be designed for them.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/extend/best-practices/sensitive-state.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/extend/best-practices/sensitive-state.html</a>
  </p>
</div>
