 <h1 id="terraform-servicenow-service-catalog-integration-developer-reference">  Terraform ServiceNow Service Catalog Integration Developer Reference </h1> <p>The Terraform ServiceNow integration can be customized by ServiceNow developers using the information found in this document.</p> <h2 id="terraform-variables-and-servicenow-variable-sets">  Terraform Variables and ServiceNow Variable Sets </h2> <p>ServiceNow has the concept of a Variable Set which is a collection of ServiceNow Variables that can be referenced in a Flow from a Service Catalog item. The Terraform Integration codebase can create <a href="../../workspaces/variables">Terraform Variables and Terraform Environment Variables</a> via the API using the <code>tf_variable.createVariablesFromSet()</code> function.</p> <p>This function looks for variables following these conventions:</p> <table>
<thead> <tr> <th>ServiceNow Variable Name</th> <th>Terraform Cloud Variable</th> </tr> </thead>
<tbody> <tr> <td><code>tf_var_VARIABLE_NAME</code></td> <td>Terraform Variable: <code>VARIABLE_NAME</code>
</td> </tr> <tr> <td><code>tf_env_ENV_NAME</code></td> <td>Environment Variable: <code>ENV_NAME</code>
</td> </tr> <tr> <td><code>sensitive_tf_var_VARIABLE_NAME</code></td> <td>Sensitive Terraform Variable (Write Only): <code>VARIABLE_NAME</code>
</td> </tr> <tr> <td><code>sensitive_tf_env_ENV_NAME</code></td> <td>Sensitive Environment Variable (Write Only): <code>ENV_NAME</code>
</td> </tr> </tbody>
</table> <p>This function takes the ServiceNow Variable Set and Terraform Cloud workspace ID. It will loop through the given variable set collection and create any necessary Terraform variables or environment variables in the workspace.</p> <h2 id="customizing-with-servicenow-quot-script-includes-quot-libraries">  Customizing with ServiceNow "Script Includes" Libraries </h2> <p>The Terraform/ServiceNow Integration codebase includes <a href="https://docs.servicenow.com/bundle/madrid-application-development/page/script/server-scripting/concept/c_ScriptIncludes.html">ServiceNow Script Includes Classes</a> that are used to interface with Terraform Cloud. The codebase also includes example catalog items and flows that implement the interface to the Terraform Cloud API.</p> <p>These classes and examples can be used to help create ServiceNow Catalog Items customized to your specific ServiceNow instance and requirements.</p> <h3 id="script-include-classes">  Script Include Classes </h3> <p>The ServiceNow Script Include Classes can be found in the ServiceNow Studio &gt; Server Development &gt; Script Include.</p> <table>
<thead> <tr> <th>Class Name</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td><code>tf_config</code></td> <td>Helper to pull values from the SN Terraform Configs Table</td> </tr> <tr> <td><code>tf_http</code></td> <td>ServiceNow HTTP REST Wrapper for requests to Terraform API</td> </tr> <tr> <td><code>tf_run</code></td> <td>Resources for Terraform Run API Requests</td> </tr> <tr> <td><code>tf_terraform_record</code></td> <td>Manage ServiceNow Terraform Table Records</td> </tr> <tr> <td><code>tf_util</code></td> <td>Miscellaneous helper functions</td> </tr> <tr> <td><code>tf_variable</code></td> <td>Resources for Terraform Variable API Requests</td> </tr> <tr> <td><code>tf_vcs_record</code></td> <td>Manage ServiceNow Terraform VCS Repositories Table Records</td> </tr> <tr> <td><code>tf_workspace</code></td> <td>Resources for Terraform Workspace API Requests</td> </tr> </tbody>
</table> <h3 id="example-service-catalog-flows-and-actions">  Example Service Catalog Flows and Actions </h3> <p>The ServiceNow Example Flows can be found in the ServiceNow Studio &gt; Flows. By default, the flows execute upon submitting an order request for the various catalog items. Admins can modify the flows and Actions to wait on an approval action, include approval rules, and specify approver groups.</p> <table>
<thead> <tr> <th>Flow Name</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td>Create Workspace</td> <td>Creates a new Terraform Cloud workspace from VCS repository.</td> </tr> <tr> <td>Create Workspace with Vars</td> <td>Creates a new Terraform Cloud workspace from VCS repository and creates any variables provided.</td> </tr> <tr> <td>Create Run</td> <td>Creates/queues a new run on the Terraform Cloud workspace.</td> </tr> <tr> <td>Apply Run</td> <td>Applies a run on the Terraform Cloud workspace.</td> </tr> <tr> <td>Provision Resources</td> <td>Creates a Terraform Cloud workspace (with auto-apply), creates/queues a run, applies the run when ready.</td> </tr> <tr> <td>Provision Resources with Vars</td> <td>Creates a Terraform Cloud workspace (with auto-apply), creates any variables, creates/queues a run, applies the run when ready.</td> </tr> <tr> <td>Delete Workspace</td> <td>Creates a destroy run plan.</td> </tr> <tr> <td>Worker Poll Run State</td> <td>Polls the Terraform Cloud API for the current run state of a workspace.</td> </tr> <tr> <td>Worker Poll Apply Run</td> <td>Polls the Terraform Cloud API and applies any pending Terraform runs.</td> </tr> <tr> <td>Worker Poll Destroy Workspace</td> <td>Queries ServiceNow Terraform Records for resources marked <code>is_destroyable</code>, applies the destroy run to destroy resources, and deletes the corresponding Terraform workspace.</td> </tr> </tbody>
</table> <h2 id="servicenow-acls">  ServiceNow ACLs </h2> <p>Access control lists (ACLs) restrict user access to objects and operations based on permissions granted. This integration includes the following roles that can be used to manage various components.</p> <table>
<thead> <tr> <th style="text-align: left">Access Control Roles</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td style="text-align: left"><code>x_terraform.config_user</code></td> <td>Can manage the connection from the ServiceNow application to your Terraform Cloud organization.</td> </tr> <tr> <td style="text-align: left"><code>x_terraform.terraform_user</code></td> <td>Can manage all of the Terraform resources created in ServiceNow.</td> </tr> <tr> <td style="text-align: left"><code>x_terraform.vcs_repositories_user</code></td> <td>Can manage the VCS repositories available for catalog items to be ordered by end-users.</td> </tr> </tbody>
</table> <p>For users who only need to order from the Terraform Catalog, we recommend creating another role with read-only permissions for <code>x_terraform_vcs_repositories</code> to view the available repositories for ordering infrastructure. Install the Terraform ServiceNow Service Catalog integration by following <a href="index">the installation guide</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/cloud/integrations/service-now/developer-reference.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/cloud/integrations/service-now/developer-reference.html</a>
  </p>
</div>
