 <h1 id="admin-workspaces-api">  Admin Workspaces API </h1> <blockquote class="alert alert-info" role="alert"> <p><strong>Terraform Enterprise feature:</strong> The admin API is exclusive to Terraform Enterprise, and can only be used by the admins and operators who install and maintain their organization's Terraform Enterprise instance.</p> </blockquote> <blockquote class="alert alert-info" role="alert"> <p>These API endpoints are available in Terraform Enterprise as of version 201807-1.</p> </blockquote> <p>The Workspaces Admin API contains endpoints to help site administrators manage workspaces.</p> <h2 id="list-all-workspaces">  List all workspaces </h2> <p><code>GET /api/v2/admin/workspaces</code></p> <p>This endpoint lists all workspaces in the Terraform Enterprise installation.</p> <table>
<thead> <tr> <th>Status</th> <th>Response</th> <th>Reason</th> </tr> </thead>
<tbody> <tr> <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200">200</a></td> <td>
<a href="../index#json-api-documents">JSON API document</a> (<code>type: "workspaces"</code>)</td> <td>Successfully listed workspaces</td> </tr> <tr> <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404">404</a></td> <td><a href="https://jsonapi.org/format/#error-objects">JSON API error object</a></td> <td>Client is not an administrator.</td> </tr> </tbody>
</table> <h3 id="query-parameters">  Query Parameters </h3> <p><a href="../index#query-parameters">These are standard URL query parameters</a>; remember to percent-encode <code>[</code> as <code>%5B</code> and <code>]</code> as <code>%5D</code> if your tooling doesn't automatically encode URLs.</p> <table>
<thead> <tr> <th>Parameter</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td><code>q</code></td> <td>
<strong>Optional.</strong> A search query string. Workspaces are searchable by name and organization name.</td> </tr> <tr> <td><code>filter[current_run][status]</code></td> <td>
<strong>Optional.</strong> A comma-separated list of Run statuses to restrict results to, which can include any of the following: <code>"pending"</code>, <code>"plan_queued"</code>, <code>"planning"</code>, <code>"planned"</code>, <code>"confirmed"</code>, <code>"apply_queued"</code>, <code>"applying"</code>, <code>"applied"</code>, <code>"discarded"</code>, <code>"errored"</code>, <code>"canceled"</code>, <code>"cost_estimating"</code>, <code>"cost_estimated"</code>, <code>"policy_checking"</code>, <code>"policy_override"</code>, <code>"policy_soft_failed"</code>, <code>"policy_checked"</code>, and <code>"planned_and_finished"</code>.</td> </tr> <tr> <td><code>sort</code></td> <td>
<strong>Optional.</strong> Allows sorting the returned workspaces. Valid values are <code>"name"</code> (the default) and <code>"current-run.created-at"</code> (which sorts by the time of the current run). Prepending a hyphen to the sort parameter will reverse the order (e.g. <code>"-name"</code> to reverse the default order)</td> </tr> <tr> <td><code>page[number]</code></td> <td>
<strong>Optional.</strong> If omitted, the endpoint will return the first page.</td> </tr> <tr> <td><code>page[size]</code></td> <td>
<strong>Optional.</strong> If omitted, the endpoint will return 20 workspaces per page.</td> </tr> </tbody>
</table> <h3 id="available-related-resources">  Available Related Resources </h3> <p>This GET endpoint can optionally return related resources, if requested with <a href="../index#inclusion-of-related-resources">the <code>include</code> query parameter</a>. The following resource types are available:</p> <table>
<thead> <tr> <th>Resource Name</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td><code>organization</code></td> <td>The organization for each returned workspace.</td> </tr> <tr> <td><code>organization.owners</code></td> <td>A list of owners for each workspace's associated organization.</td> </tr> <tr> <td><code>current_run</code></td> <td>The current run for each returned workspace.</td> </tr> </tbody>
</table> <h3 id="sample-request">  Sample Request </h3> <pre data-language="shell">curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  "https://app.terraform.io/api/v2/admin/workspaces"
</pre>
<h3 id="sample-response">  Sample Response </h3> <pre data-language="json">{
  "data": [
    {
      "id": "ws-2HRvNs49EWPjDqT1",
      "type": "workspaces",
      "attributes": {
        "name": "my-workspace",
        "locked": false,
        "vcs-repo": {
          "identifier": "my-organization/my-repository"
        }
      },
      "relationships": {
        "organization": {
          "data": {
            "id": "my-organization",
            "type": "organizations"
          }
        },
        "current-run": {
          "data": {
            "id": "run-jm8ekSaW3F52FACN",
            "type": "runs"
          }
        }
      },
      "links": {
        "self": "/api/v2/organizations/my-organization/workspaces/my-workspace"
      }
    }
  ],
  "links": {
    "self": "http://localhost:3000/api/v2/admin/workspaces?page%5Bnumber%5D=1&amp;page%5Bsize%5D=20",
    "first": "http://localhost:3000/api/v2/admin/workspaces?page%5Bnumber%5D=1&amp;page%5Bsize%5D=20",
    "prev": null,
    "next": null,
    "last": "http://localhost:3000/api/v2/admin/workspaces?page%5Bnumber%5D=1&amp;page%5Bsize%5D=20"
  },
  "meta": {
    "pagination": {
      "current-page": 1,
      "prev-page": null,
      "next-page": null,
      "total-pages": 0,
      "total-count": 1
    },
    "status-counts": {
      "pending": 1,
      "planning": 0,
      "planned": 0,
      "confirmed": 0,
      "applying": 0,
      "applied": 0,
      "discarded": 0,
      "errored": 0,
      "canceled": 0,
      "policy-checking": 0,
      "policy-override": 0,
      "policy-checked": 0,
      "none": 0,
      "total": 1,
    }
  }
}
</pre>
<h2 id="show-a-workspace">  Show a workspace </h2> <p><code>GET /api/v2/admin/workspaces/:id</code></p> <p>This endpoint lists all workspaces in the Terraform Enterprise installation.</p> <table>
<thead> <tr> <th>Status</th> <th>Response</th> <th>Reason</th> </tr> </thead>
<tbody> <tr> <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200">200</a></td> <td>
<a href="../index#json-api-documents">JSON API document</a> (<code>type: "workspaces"</code>)</td> <td>Successfully listed workspaces</td> </tr> <tr> <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404">404</a></td> <td><a href="https://jsonapi.org/format/#error-objects">JSON API error object</a></td> <td>Client is not an administrator.</td> </tr> </tbody>
</table> <h3 id="query-parameters-1">  Query Parameters </h3> <table>
<thead> <tr> <th>Parameter</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td><code>:workspace_id</code></td> <td>The workspace ID</td> </tr> </tbody>
</table> <h3 id="available-related-resources-1">  Available Related Resources </h3> <p>This GET endpoint can optionally return related resources, if requested with <a href="../index#inclusion-of-related-resources">the <code>include</code> query parameter</a>. The following resource types are available:</p> <table>
<thead> <tr> <th>Resource Name</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td><code>organization</code></td> <td>The organization for each returned workspace.</td> </tr> <tr> <td><code>organization.owners</code></td> <td>A list of owners for each workspace's associated organization.</td> </tr> <tr> <td><code>current_run</code></td> <td>The current run for each returned workspace.</td> </tr> </tbody>
</table> <h3 id="sample-request-1">  Sample Request </h3> <pre data-language="shell">curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  "https://app.terraform.io/api/v2/admin/workspaces/ws-2HRvNs49EWPjDqT1"
</pre>
<h3 id="sample-response-1">  Sample Response </h3> <pre data-language="json">{
  "data": {
    "id": "ws-2HRvNs49EWPjDqT1",
    "type": "workspaces",
    "attributes": {
      "name": "my-workspace",
      "locked": false,
      "vcs-repo": {
        "identifier": "my-organization/my-repository"
      }
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "my-organization",
          "type": "organizations"
        }
      },
      "current-run": {
        "data": {
          "id": "run-jm8ekSaW3F52FACN",
          "type": "runs"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/my-organization/workspaces/my-workspace"
    }
  }
}
</pre>
<h2 id="destroy-a-workspace">  Destroy a workspace </h2> <p><code>DELETE /admin/workspaces/:id</code></p> <table>
<thead> <tr> <th>Parameter</th> <th>Description</th> </tr> </thead>
<tbody> <tr> <td><code>:workspace_id</code></td> <td>The workspace ID</td> </tr> </tbody>
</table> <table>
<thead> <tr> <th>Status</th> <th>Response</th> <th>Reason</th> </tr> </thead>
<tbody> <tr> <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204">204</a></td> <td></td> <td>The workspace was successfully destroyed</td> </tr> <tr> <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404">404</a></td> <td><a href="https://jsonapi.org/format/#error-objects">JSON API error object</a></td> <td>Workspace not found or user unauthorized to perform action</td> </tr> </tbody>
</table> <h3 id="sample-request-2">  Sample Request </h3> <pre data-language="shell">curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request DELETE \
  https://app.terraform.io/api/v2/admin/workspaces/ws-2HRvNs49EWPjDqT1
</pre>
<h3 id="sample-response-2">  Sample Response </h3> <p>The response body will be empty if successful.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/cloud/api/admin/workspaces.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/cloud/api/admin/workspaces.html</a>
  </p>
</div>
