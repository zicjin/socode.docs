 <h1 id="terraform-state-in-terraform-cloud">  Terraform State in Terraform Cloud </h1> <p>Each Terraform Cloud workspace has its own separate state data, used for runs within that workspace.</p> <blockquote class="alert alert-info" role="alert"> <p><strong>API:</strong> See the <a href="../api/state-versions">State Versions API</a>.</p> </blockquote> <h2 id="state-usage-in-terraform-runs">  State Usage in Terraform Runs </h2> <p>In <a href="../run/index">remote runs</a>, Terraform Cloud automatically configures Terraform to use the workspace's state; the Terraform configuration does not need an explicit backend configuration. (If a backend configuration is present, it will be overridden.)</p> <p>In local runs (available for workspaces whose execution mode setting is set to "local"), you can use a workspace's state by configuring <a href="../../language/settings/backends/remote">the <code>remote</code> backend</a> and authenticating with a user token that has permission to read and write state versions for the relevant workspace. When using a Terraform configuration that references outputs from another workspace, the authentication token must also have permission to read state outputs for that workspace. (<a href="../users-teams-organizations/permissions">More about permissions.</a>)</p> <h2 id="state-versions">  State Versions </h2> <p>In addition to the current state, Terraform Cloud retains historical state versions, which can be used to analyze infrastructure changes over time.</p> <p>You can view a workspace's state versions from its "States" tab. Each state in the list indicates which run and which VCS commit (if applicable) it was associated with. Click a state in the list for more details, including a diff against the previous state and a link to the raw state file.</p> <h2 id="state-manipulation">  State Manipulation </h2> <p>Certain tasks (including importing resources, tainting resources, moving or renaming existing resources to match a changed configuration, and more) require modifying Terraform state outside the context of a run.</p> <p>Manual state manipulation in Terraform Cloud workspaces requires the use of Terraform CLI, using the same commands as would be used in a local workflow (<code>terraform import</code>, <code>terraform taint</code>, etc.). To manipulate state, you must configure <a href="../../language/settings/backends/remote">the <code>remote</code> backend</a> and authenticate with a user token that has permission to read and write state versions for the relevant workspace. (<a href="../users-teams-organizations/permissions">More about permissions.</a>)</p> <h2 id="accessing-state-from-other-workspaces">  Accessing State from Other Workspaces </h2> <blockquote class="alert alert-info" role="alert"> <p><strong>Note:</strong> Provider-specific <a href="../../language/data-sources/index">data sources</a> are usually the most resilient way to share information between separate Terraform configurations. <code>terraform_remote_state</code> is more flexible, but we recommend using specialized data sources whenever it is convenient to do so.</p> </blockquote> <p>Terraform's built-in <a href="../../language/state/remote-state-data"><code>terraform_remote_state</code> data source</a> lets you share arbitrary information between configurations via root module <a href="../../language/values/outputs">outputs</a>.</p> <p>Terraform Cloud automatically manages API credentials for <code>terraform_remote_state</code> access during <a href="../run/index#remote-operations">runs managed by Terraform Cloud</a>. This means you do not usually need to include an API token in a <code>terraform_remote_state</code> data source's configuration.</p> <h3 id="remote-state-access-controls">  Remote State Access Controls </h3> <p>Remote state access between workspaces is subject to access controls:</p> <ul> <li>Only workspaces within the same organization can access each other's state. </li> <li>The workspace whose state is being read must be configured to allow that access. State access permissions are configured on a workspace's <a href="settings">general settings page</a>. There are two ways a workspace can allow access: <ul> <li>Globally, to all workspaces within the same organization. </li> <li>Selectively, to a list of specific approved workspaces. </li> </ul> </li> </ul> <p>By default, new workspaces in Terraform Cloud do not allow other workspaces to access their state. We recommend that you follow the principle of least privilege and only enable state access between workspaces that specifically need information from each other.</p> <blockquote class="alert alert-info" role="alert"> <p><strong>Note:</strong> The default access permissions for new workspaces in Terraform Cloud changed in April 2021. Workspaces created before this change defaulted to allowing global access within their organization. These workspaces can be changed to more restrictive access at any time on their <a href="settings">general settings page</a>. Terraform Enterprise administrators can choose whether new workspaces on their instances default to global access or selective access.</p> </blockquote> <h3 id="data-source-configuration">  Data Source Configuration </h3> <p>To configure a <code>terraform_remote_state</code> data source that references a Terraform Cloud workspace, set the data source's <code>backend</code> argument to <code>remote</code> and specify the organization and workspace in the <code>config</code> argument.</p> <pre data-language="ruby">data "terraform_remote_state" "vpc" {
  backend = "remote"
  config = {
    organization = "example_corp"
    workspaces = {
      name = "vpc-prod"
    }
  }
}

resource "aws_instance" "redis_server" {
  # Terraform 0.12 and later: use the "outputs.&lt;OUTPUT NAME&gt;" attribute
  subnet_id = data.terraform_remote_state.vpc.outputs.subnet_id
}
</pre><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/cloud/workspaces/state.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/cloud/workspaces/state.html</a>
  </p>
</div>
