 <h1 id="schemas">  Schemas </h1> <p>Schemas specify the constraints of Terraform configuration blocks. They define what fields a provider, resource, or data source configuration block has, and give Terraform metadata about those fields. You can think of the schema as the "type information" or the "shape" of a resource, data source, or provider.</p> <p><a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#Schema">The <code>schema.Schema</code> struct</a> defines schemas that are returned from methods on the <a href="providers">provider</a>, <a href="resources">resources</a>, and <a href="data-sources">data sources</a>.</p> <h2 id="version">  Version </h2> <p>Every schema has a version, which is an integer that allows you to track changes to your schemas. It is generally only used when upgrading resource state, to help massage resources created with earlier schemas into the shape defined by the current schema. It will never be used for provider or data source schemas and can be omitted.</p> <blockquote class="alert alert-warning" role="alert"> <p><strong>Important:</strong> Upgrading resource state is <a href="https://github.com/hashicorp/terraform-plugin-framework/issues/42">not currently supported</a> in the framework. At this time, there is no reason to specify a schema version. It can be safely omitted.</p> </blockquote> <h2 id="deprecationmessage">  DeprecationMessage </h2> <p>Not every resource, data source, or provider will be supported forever. Sometimes designs change or APIs are deprecated. Schemas that have their <code>DeprecationMessage</code> property set will display that message as a warning when that provider, data source, or resource is used. A good message will tell practitioners that the provider, resource, or data source is deprecated, and will indicate a migration strategy.</p> <blockquote class="alert alert-warning" role="alert"> <p><strong>Important:</strong> Deprecation messages will not currently be surfaced to users, but <a href="https://github.com/hashicorp/terraform-plugin-framework/issues/71">will be in the near future</a>. They can be safely added to your schemas to take advantage of the behavior when the framework gains this capability.</p> </blockquote> <h2 id="description">  Description </h2> <p>Various tooling like <a href="https://github.com/hashicorp/terraform-plugin-docs">terraform-plugin-docs</a> and the <a href="https://github.com/hashicorp/terraform-ls">language server</a> can use metadata in the schema to generate documentation or offer a better editor experience for practitioners. Use the <code>Description</code> property to add a description of a resource, data source, or provider that these tools can leverage.</p> <h2 id="markdowndescription">  MarkdownDescription </h2> <p>Similar to the <code>Description</code> property, the <code>MarkdownDescription</code> is used to provide a markdown-formatted version of the description to tooling like <a href="https://github.com/hashicorp/terraform-plugin-docs">terraform-plugin-docs</a>. It is a best practice to only alter the formatting, not the content, between the <code>Description</code> and <code>MarkdownDescription</code>.</p> <p>At the moment, if the <code>MarkdownDescription</code> property is set it will always be used instead of the <code>Description</code> property. It is possible that a different strategy may be employed in the future to surface descriptions to other tooling in a different format, so we recommend specifying both fields.</p> <h2 id="attributes">  Attributes </h2> <p>Attributes are the main point of a schema. They are used to describe the fields of a provider, resource, or data source. Attributes are defined as a map of <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#Attribute"><code>schema.Attribute</code></a>s, with string keys.</p> <p>The keys are the names of the fields, and should only contain lowercase letters, numbers, and underscores. Practitioners will enter these strings in the configuration block of the provider, resource, or data source to set a value for that field.</p> <p>The values are descriptions of the constraints on that field and the metadata about it, expressed as a <code>schema.Attribute</code> struct value.</p> <h3 id="type">  Type </h3> <p>The <code>Type</code> property of a <code>schema.Attribute</code> is used to specify the <a href="types">attribute type</a> of the attribute. If the practitioner enters data of the wrong type, Terraform will automatically return a validation error to the practitioner, and this type determines what kind of attribute value is used when <a href="accessing-values">accessing state, config, and plan values</a>.</p> <p>You must specify one of the <code>Type</code> and <code>Attributes</code> properties of <code>schema.Attribute</code>. You cannot specify both.</p> <h3 id="attributes-1">  Attributes </h3> <p>The <code>Attributes</code> property of a <code>schema.Attribute</code> is used to specify the attribute's nested attributes. Nested attributes are attributes that are grouped beneath another attribute:</p> <pre data-language="ruby">resource "example_foo" "bar" {
  nested_attribute = {
    hello = "world"
    demo = true
  }
}
</pre>
<p>In this example, <code>hello</code> and <code>demo</code> are nested attributes of the <code>nested_attribute</code> attribute. Nested attributes have their own computed, optional, required, and sensitive flags, and their own properties to hold descriptions, markdown-formatted descriptions, and deprecation messages.</p> <p>If an attribute is required and its nested attribute is optional, the attribute must be specified, and the nested attribute can be omitted inside the curly braces. If an attribute is optional and its nested attribute is required, the attribute can be omitted, but if it is specified, the nested attribute must be specified as well.</p> <p>If an attribute is computed, all its nested attributes are considered computed, as well. Likewise, if an attribute is considered sensitive or deprecated, all its nested attributes are considered sensitive or deprecated.</p> <p>You must specify one of the <code>Type</code> and <code>Attributes</code> properties of <code>schema.Attribute</code>. You cannot specify both.</p> <blockquote class="alert alert-info" role="alert"> <p><strong>Note</strong>: We recommend using an attribute with nested attributes when any of the inner fields should have their own flags or metadata (required, optional, computed, deprecated, sensitive, descriptions, etc.). If the attribute is an atomic unit, we recommend using an object or list of objects instead.</p> </blockquote> <h4 id="singlenestedattributes">  SingleNestedAttributes </h4> <p>When the <code>Attributes</code> property of a <code>schema.Attribute</code> is set to the <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#SingleNestedAttributes"><code>schema.SingleNestedAttributes</code></a> type, the nested attributes behave like an object. There can only be one group of the nested attributes.</p> <pre data-language="ruby">resource "example_foo" "bar" {
  nested_attribute = {
    hello = "world"
    demo = true
  }
}
</pre>
<h4 id="listnestedattributes">  ListNestedAttributes </h4> <p>When the <code>Attributes</code> property of a <code>schema.Attribute</code> is set to the <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#ListNestedAttributes"><code>schema.ListNestedAttributes</code></a> type, the nested attributes behave like a list of objects. The practitioner can specify any number of groups of these attributes.</p> <pre data-language="ruby">resource "example_foo" "bar" {
  nested_attribute = [
    {
      hello = "world"
      demo = true
    },
    {
      hello = "moon"
      demo = false
    },
  ]
}
</pre>
<p>In addition to a map of the attributes, <code>ListNestedAttributes</code> accepts a <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#ListNestedAttributesOptions"><code>schema.ListNestedAttributesOptions</code></a> struct that can be used to specify a minimum or maximum number of instances of that group of fields. If the user enters fewer than or more than those numbers of groups, Terraform will automatically return a validation error.</p> <h4 id="mapnestedattributes">  MapNestedAttributes </h4> <p>When the <code>Attributes</code> property of a <code>schema.Attribute</code> is set to the <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#MapNestedAttributes"><code>schema.MapNestedAttributes</code></a> type, the nested attributes behave like a map of objects. The practitioner can specify any number of groups of these attributes, with string keys associated with each group.</p> <pre data-language="ruby">resource "example_foo" "bar" {
  nested_attribute = {
    "red" = {
      hello = "world"
      demo = true
    },
    "blue" = {
      hello = "moon"
      demo = false
    },
  }
}
</pre>
<p>In addition to a map of the attributes, <code>MapNestedAttributes</code> accepts a <a href="https://pkg.go.dev/github.com/hashicorp/terraform-plugin-framework/schema#MapNestedAttributesOptions"><code>schema.MapNestedAttributesOptions</code></a> struct that can be used to specify a minimum or maximum number of instances of that group of fields. If the user enters fewer than or more than those numbers of groups, Terraform will automatically return a validation error.</p> <h3 id="required">  Required </h3> <p>Setting the <code>Required</code> property to <code>true</code> indicates that the attribute is required. Practitioners will be automatically given a validation error if they omit the attribute in their configuration.</p> <p>Attributes that set <code>Required</code> to <code>true</code> cannot set <code>Optional</code> or <code>Computed</code> to <code>true</code>.</p> <h3 id="optional">  Optional </h3> <p>Setting the <code>Optional</code> property to <code>true</code> indicates that the attribute is optional. Practitioners are free to specify that attribute or omit it, and Terraform will not automatically generate a validation error based on the presence or absence of that attribute.</p> <p>Attributes that set <code>Optional</code> to <code>true</code> cannot set <code>Required</code> to <code>true</code>, but may set <code>Computed</code> to <code>true</code>, in which case the behavior of <code>Computed</code> applies, too.</p> <h3 id="computed">  Computed </h3> <p>Setting the <code>Computed</code> property to <code>true</code> indicates that the attribute can be set by the provider. Any attribute that does not have <code>Computed</code> set to <code>true</code> cannot be influenced by the provider; it can only be changed via the config or via state refreshing.</p> <p>If <code>Computed</code> is set to <code>true</code> and <code>Optional</code> is not set to <code>true</code>, the attribute will be considered read-only and Terraform will automatically generate a validation error if the practitioner attempts to enter a configuration value for that attribute.</p> <p>If <code>Computed</code> is set to <code>true</code> and <code>Optional</code> is set to <code>true</code>, Terraform will not do any validation on the presence or absence of the value.</p> <p>If <code>Computed</code> is set to <code>true</code>, <code>Required</code> must not be set to <code>true</code>.</p> <p>Because providers don't set provider configuration values in state, provider schemas should never set <code>Computed</code> to <code>true</code>.</p> <h3 id="sensitive">  Sensitive </h3> <p>Setting the <code>Sensitive</code> property to <code>true</code> indicates to Terraform that the value should always be considered <a href="../../language/state/sensitive-data">sensitive</a>. This does not at this time add any encryption or otherwise hide the value from Terraform; see <a href="../../extend/best-practices/sensitive-state">the documentation for SDKv2</a> for more information on sensitive state and Terraform. It does, however, hide the value in Terraform's outputs and in Terraform Cloud.</p> <h3 id="description-1">  Description </h3> <p>Much like <a href="#description">resources, data sources, and providers can have a description</a>, so too can individual attributes.</p> <h3 id="markdowndescription-1">  MarkdownDescription </h3> <p>Much like <a href="#markdowndescription">resources, data sources, and providers can have a markdown-formatted description</a>, so too can individual attributes.</p> <h3 id="deprecationmessage-1">  DeprecationMessage </h3> <p>Much like <a href="#deprecationmessage">resources, data sources, and providers can be deprecated</a>, so too can individual attributes.</p> <blockquote class="alert alert-warning" role="alert"> <p><strong>Important:</strong> Deprecation messages will not currently be surfaced to users, but <a href="https://github.com/hashicorp/terraform-plugin-framework/issues/71">will be in the near future</a>. They can be safely added to your schemas to take advantage of the behavior when the framework gains this capability.</p> </blockquote><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/plugin/framework/schemas.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/plugin/framework/schemas.html</a>
  </p>
</div>
