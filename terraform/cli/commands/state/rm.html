 <h1 id="command-state-rm">  Command: state rm </h1> <p>The main function of <a href="../../../language/state/index">Terraform state</a> is to track the bindings between resource instance addresses in your configuration and the remote objects they represent. Normally Terraform automatically updates the state in response to actions taken when applying a plan, such as removing a binding for an remote object that has now been deleted.</p> <p>You can use <code>terraform state rm</code> in the less common situation where you wish to remove a binding to an existing remote object without first destroying it, which will effectively make Terraform "forget" the object while it continues to exist in the remote system.</p> <h2 id="usage">  Usage </h2> <p>Usage: <code>terraform state rm [options] ADDRESS...</code></p> <p>Terraform will search the state for any instances matching the given <a href="../../state/resource-addressing">resource address</a>, and remove the record of each one so that Terraform will no longer be tracking the corresponding remote objects.</p> <p>This means that although the objects will still continue to exist in the remote system, a subsequent <a href="../plan"><code>terraform plan</code></a> will include an action to create a new object for each of the "forgotten" instances. Depending on the constraints imposed by the remote system, creating those objects might fail if their names or other identifiers conflict with the old objects still present.</p> <p>This command also accepts the following options:</p> <ul> <li>
<p><a href="#dry-run"><code>-dry-run</code></a> - Report all of the resource instances that match the given address without actually "forgetting" any of them.</p> </li> <li>
<p><a href="#lock-false"><code>-lock=false</code></a> - Don't hold a state lock during the operation. This is dangerous if others might concurrently run commands against the same workspace.</p> </li> <li>
<p><a href="#lock-timeout-duration"><code>-lock-timeout=DURATION</code></a> - Unless locking is disabled with <code>-lock=false</code>, instructs Terraform to retry acquiring a lock for a period of time before returning an error. The duration syntax is a number followed by a time unit letter, such as "3s" for three seconds.</p> </li> </ul> <p>For configurations using <a href="../../../language/settings/backends/remote">the <code>remote</code> backend</a> only, <code>terraform state rm</code> also accepts the option <a href="../../../language/settings/backends/remote#command-line-arguments"><code>-ignore-remote-version</code></a>.</p> <p>For configurations using <a href="../../../language/settings/backends/local">the <code>local</code> state rm</a> only, <code>terraform state rm</code> also accepts the legacy options <a href="../../../language/settings/backends/local#command-line-arguments"><code>-state</code>, <code>-state-out</code>, and <code>-backup</code></a>.</p> <h2 id="example-remove-all-instances-of-a-resource">  Example: Remove all Instances of a Resource </h2> <p>The following example will cause Terraform to "forget" all of the instances of the <code>packet_device</code> resource named "worker".</p> <pre data-language="shell">$ terraform state rm 'packet_device.worker'
</pre>
<p>A resource that doesn't use <code>count</code> or <code>for_each</code> has only one instance, so this is also the appropriate syntax to select that single instance.</p> <h2 id="example-remove-all-instances-of-a-resource-in-a-module">  Example: Remove all Instances of a Resource in a Module </h2> <p>To select a resource that you've defined in a child module you must specify the path of that module as part of the resource address:</p> <pre data-language="shell">$ terraform state rm 'module.foo.packet_device.worker'
</pre>
<h2 id="example-remove-all-instances-of-all-resources-in-a-module">  Example: Remove all Instances of all Resources in a Module </h2> <p>The following example will cause Terraform to "forget" all of the instances associated with all resources defined in all instances of the module named <code>foo</code>:</p> <pre data-language="shell">$ terraform state rm 'module.foo'
</pre>
<h2 id="example-remove-a-particular-instance-of-a-resource-using-count">  Example: Remove a Particular Instance of a Resource using <code>count</code> </h2> <p>A resource defined with <a href="../../../language/meta-arguments/count">the <code>count</code> meta-argument</a> has multiple instances that are each identified by an integer. You can select a particular instance by including an explicit index in your given address:</p> <pre data-language="shell">$ terraform state rm 'packet_device.worker[0]'
</pre>
<p>Brackets (<code>[</code>, <code>]</code>) have a special meaning in some shells, so you may need to quote or escape the address in order to pass it literally to Terraform. The above shows the typical quoting syntax for Unix-style shells.</p> <h2 id="example-remove-a-particular-instance-of-a-resource-using-for_each">  Example: Remove a Particular Instance of a Resource using <code>for_each</code> </h2> <p>A resource defined with <a href="../../../language/meta-arguments/for_each">the <code>for_each</code> meta-argument</a> has multiple instances that are each identified by an string. You can select a particular instance by including an explicit key in your given address.</p> <p>However, the syntax for strings includes quotes and the quote symbol often has special meaning in command shells, so you'll need to use the appropriate quoting and/or escaping syntax for the shell you are using. For example:</p> <p>Unix-style shells, such as on Linux or macOS:</p> <pre data-language="shell">$ terraform state rm 'packet_device.worker["example"]'
</pre>
<p>Windows Command Prompt (<code>cmd.exe</code>):</p> <pre data-language="shell">$ terraform state rm packet_device.worker[\"example\"]
</pre>
<p>PowerShell:</p> <pre data-language="shell">$ terraform state rm 'packet_device.worker[\"example\"]'
</pre><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/cli/commands/state/rm.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/cli/commands/state/rm.html</a>
  </p>
</div>
