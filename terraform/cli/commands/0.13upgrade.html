 <h1 id="command-0-13upgrade">  Command: 0.13upgrade </h1> <p>The <code>terraform 0.13upgrade</code> command updates existing configuration to add an explicit <code>source</code> attribute for each provider used in a given module. The provider source settings are stored in a <code>required_providers</code> block.</p> <blockquote class="alert alert-info" role="alert"> <p><strong>This command is available only in Terraform v0.13 releases.</strong> For more information, see <a href="https://www.terraform.io/upgrade-guides/0-13.html">the Terraform v0.13 upgrade guide</a>.</p> </blockquote> <h2 id="usage">  Usage </h2> <p>Usage: <code>terraform 0.13upgrade [options] [dir]</code></p> <p>The primary purpose of the <code>0.13upgrade</code> command is to determine which providers are in use for a module, detect the source address for those providers where possible, and record this information in a <a href="../../language/providers/requirements"><code>required_providers</code> block</a>.</p> <blockquote class="alert alert-warning" role="alert"> <p>Note: the command ignores <code>.tf.json</code> files and override files in the module.</p> </blockquote> <p>If the module already has a <code>required_providers</code> block, the command updates it in-place. Otherwise, a new block is added to the <code>versions.tf</code> file.</p> <p>By default, <code>0.13upgrade</code> changes configuration files in the current working directory. However, you can provide an explicit path to another directory if desired, which may be useful for automating migrations of several modules in the same repository.</p> <p>When run with no other options, the command will first explain what it is going to do and prompt for confirmation:</p> <pre>$ terraform 0.13upgrade

This command will update the configuration files in the given directory to use
the new provider source features from Terraform v0.13. It will also highlight
any providers for which the source cannot be detected, and advise how to
proceed.

We recommend using this command in a clean version control work tree, so that
you can easily see the proposed changes as a diff against the latest commit.
If you have uncommited changes already present, we recommend aborting this
command and dealing with them before running this command again.

Would you like to upgrade the module in the current directory?
  Only 'yes' will be accepted to confirm.

  Enter a value: yes
</pre>
<p>We recommend running this command with a clean version control work tree so that you can use VCS tools to review the proposed changes, including any <code>TF-UPGRADE-TODO</code> comments, and make any revisions required before committing the change.</p> <p>There is one command-line option:</p> <ul> <li>
<a href="#yes"><code>-yes</code></a> - Skip the initial introduction messages and interactive confirmation. Use this when running the command in batch from a script. </li> </ul> <h2 id="batch-usage">  Batch Usage </h2> <p>After you've experimented with the <code>0.13upgrade</code> command in some confined situations, if you have a repository containing multiple modules you may wish to batch-upgrade them all and review them together. Recursive upgrades are not supported by the tool itself, but if you are on a Unix-style system you can achieve this using the <code>find</code> command as follows:</p> <pre>$ find . -name '*.tf' | xargs -n1 dirname | uniq | xargs -n1 terraform 0.13upgrade -yes
</pre>
<p>On a Windows system with PowerShell, you can use this command:</p> <pre>Get-Childitem -Recurse -Include *.tf | Split-Path | `
Select-Object -Unique | ForEach-Object { terraform 0.13upgrade -yes $_.FullName }
</pre>
<p>Note that the above commands include the <code>-yes</code> option to override the interactive prompt, so be sure you have a clean work tree before running it.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/cli/commands/0.13upgrade.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/cli/commands/0.13upgrade.html</a>
  </p>
</div>
