 <h1 id="resource-addressing">  Resource Addressing </h1> <p>A <em>resource address</em> is a string that identifies zero or more resource instances in your overall configuration.</p> <p>An address is made up of two parts:</p> <pre>[module path][resource spec]
</pre>
<p>In some contexts Terraform might allow for an incomplete resource address that only refers to a module as a whole, or that omits the index for a multi-instance resource. In those cases, the meaning depends on the context, so you'll need to refer to the documentation for the specific feature you are using which parses resource addresses.</p> <h2 id="module-path">  Module path </h2> <p>A module path addresses a module within the tree of modules. It takes the form:</p> <pre>module.module_name[module index]
</pre> <ul> <li>
<a href="#module"><code>module</code></a> - Module keyword indicating a child module (non-root). Multiple <code>module</code> keywords in a path indicate nesting. </li> <li>
<a href="#module_name"><code>module_name</code></a> - User-defined name of the module. </li> <li>
<a href="#module-index-"><code>[module index]</code></a> - (Optional) <a href="#index-values-for-modules-and-resources">Index</a> to select an instance from a module call that has multiple instances, surrounded by square bracket characters (<code>[</code> and <code>]</code>). </li> </ul> <p>An address without a resource spec, i.e. <code>module.foo</code> applies to every resource within the module if a single module, or all instances of a module if a module has multiple instances. To address all resources of a particular module instance, include the module index in the address, such as <code>module.foo[0]</code>.</p> <p>If the module path is omitted, the address applies to the root module.</p> <p>An example of the <code>module</code> keyword delineating between two modules that have multiple instances:</p> <pre>module.foo[0].module.bar["a"]
</pre>
<blockquote class="alert alert-info" role="alert"> <p>Module index only applies to modules in Terraform v0.13 or later. In earlier versions of Terraform, a module could not have multiple instances.</p> </blockquote> <h2 id="resource-spec">  Resource spec </h2> <p>A resource spec addresses a specific resource instance in the selected module. It has the following syntax:</p> <pre>resource_type.resource_name[instance index]
</pre> <ul> <li>
<a href="#resource_type"><code>resource_type</code></a> - Type of the resource being addressed. </li> <li>
<a href="#resource_name"><code>resource_name</code></a> - User-defined name of the resource. </li> <li>
<a href="#instance-index-"><code>[instance index]</code></a> - (Optional) <a href="#index-values-for-modules-and-resources">Index</a> to select an instance from a resource that has multiple instances, surrounded by square bracket characters (<code>[</code> and <code>]</code>). </li> </ul> <blockquote class="alert alert-info" role="alert"> <p>In Terraform v0.12 and later, a resource spec without a module path prefix matches only resources in the root module. In earlier versions, a resource spec without a module path prefix would match resources with the same type and name in any descendent module.</p> </blockquote> <h2 id="index-values-for-modules-and-resources">  Index values for Modules and Resources </h2> <p>The following specifications apply to index values on modules and resources with multiple instances:</p> <ul> <li>
<a href="#n-"><code>[N]</code></a> where <code>N</code> is a <code>0</code>-based numerical index into a resource with multiple instances specified by the <code>count</code> meta-argument. Omitting an index when addressing a resource where <code>count &gt; 1</code> means that the address references all instances. </li> <li>
<a href="#quot-index-quot-"><code>["INDEX"]</code></a> where <code>INDEX</code> is a alphanumerical key index into a resource with multiple instances specified by the <code>for_each</code> meta-argument. </li> </ul> <h2 id="examples">  Examples </h2> <h3 id="count-example">  count Example </h3> <p>Given a Terraform config that includes:</p> <pre data-language="ruby">resource "aws_instance" "web" {
  # ...
  count = 4
}
</pre>
<p>An address like this:</p> <pre>aws_instance.web[3]
</pre>
<p>Refers to only the last instance in the config, and an address like this:</p> <pre>aws_instance.web
</pre>
<p>Refers to all four "web" instances.</p> <h3 id="for_each-example">  for_each Example </h3> <p>Given a Terraform config that includes:</p> <pre data-language="ruby">resource "aws_instance" "web" {
  # ...
  for_each = {
    "terraform": "value1",
    "resource":  "value2",
    "indexing":  "value3",
    "example":   "value4",
  }
}
</pre>
<p>An address like this:</p> <pre>aws_instance.web["example"]
</pre>
<p>Refers to only the "example" instance in the config.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/cli/state/resource-addressing.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/cli/state/resource-addressing.html</a>
  </p>
</div>
