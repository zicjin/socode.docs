 <h1 id="one-function">  <code>one</code> Function </h1> <blockquote class="alert alert-info" role="alert"> <p><strong>Note:</strong> This function is available only in Terraform v0.15 and later.</p> </blockquote> <p><code>one</code> takes a list, set, or tuple value with either zero or one elements. If the collection is empty, <code>one</code> returns <code>null</code>. Otherwise, <code>one</code> returns the first element. If there are two or more elements then <code>one</code> will return an error.</p> <p>This is a specialized function intended for the common situation where a conditional item is represented as either a zero- or one-element list, where a module author wishes to return a single value that might be null instead.</p> <p>For example:</p> <pre data-language="ruby">variable "include_ec2_instance" {
  type    = bool
  default = true
}

resource "aws_instance" "example" {
  count = var.include_ec2_instance ? 1 : 0

  # (other resource arguments...)
}

output "instance_ip_address" {
  value = one(aws_instance.example[*].private_ip)
}
</pre>
<p>Because the <code>aws_instance</code> resource above has the <code>count</code> argument set to a conditional that returns either zero or one, the value of <code>aws_instance.example</code> is a list of either zero or one elements. The <code>instance_ip_address</code> output value uses the <code>one</code> function as a concise way to return either the private IP address of a single instance, or <code>null</code> if no instances were created.</p> <h2 id="relationship-to-the-quot-splat-quot-operator">  Relationship to the "Splat" Operator </h2> <p>The Terraform language has a built-in operator <code>[*]</code>, known as <a href="../expressions/splat">the <em>splat</em> operator</a>, and one of its functions is to translate a primitive value that might be null into a list of either zero or one elements:</p> <pre data-language="ruby">variable "ec2_instance_type" {
  description = "The type of instance to create. If set to null, no instance will be created."

  type    = string
  default = null
}

resource "aws_instance" "example" {
  count = length(var.ec2_instance_type[*])

  instance_type = var.ec2_instance_type
  # (other resource arguments...)
}

output "instance_ip_address" {
  value = one(aws_instance.example[*].private_ip)
}
</pre>
<p>In this case we can see that the <code>one</code> function is, in a sense, the opposite of applying <code>[*]</code> to a primitive-typed value. Splat can convert a possibly-null value into a zero-or-one list, and <code>one</code> can reverse that to return to a primitive value that might be null.</p> <h2 id="examples">  Examples </h2> <pre>&gt; one([])
null
&gt; one(["hello"])
"hello"
&gt; one(["hello", "goodbye"])

Error: Invalid function argument

Invalid value for "list" parameter: must be a list, set, or tuple value with
either zero or one elements.
</pre>
<h3 id="using-one-with-sets">  Using <code>one</code> with sets </h3> <p>The <code>one</code> function can be particularly helpful in situations where you have a set that you know has only zero or one elements. Set values don't support indexing, so it's not valid to write <code>var.set[0]</code> to extract the "first" element of a set, but if you know that there's only one item then <code>one</code> can isolate and return that single item:</p> <pre>&gt; one(toset([]))
null
&gt; one(toset(["hello"]))
"hello"
</pre>
<p>Don't use <code>one</code> with sets that might have more than one element. This function will fail in that case:</p> <pre>&gt; one(toset(["hello","goodbye"]))

Error: Invalid function argument

Invalid value for "list" parameter: must be a list, set, or tuple value with
either zero or one elements.
</pre><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/language/functions/one.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/language/functions/one.html</a>
  </p>
</div>
