 <h1 id="version-constraints">  Version Constraints </h1> <p>Anywhere that Terraform lets you specify a range of acceptable versions for something, it expects a specially formatted string known as a version constraint. Version constraints are used when configuring:</p> <ul> <li>
<a href="../modules/index">Modules</a> </li> <li>
<a href="../providers/requirements">Provider requirements</a> </li> <li>
<a href="../settings/index#specifying-a-required-terraform-version">The <code>required_version</code> setting</a> in the <code>terraform</code> block. </li> </ul> <h2 id="version-constraint-syntax">  Version Constraint Syntax </h2> <p>Terraform's syntax for version constraints is very similar to the syntax used by other dependency management systems like Bundler and NPM.</p> <pre data-language="ruby">version = "&gt;= 1.2.0, &lt; 2.0.0"
</pre>
<p>A version constraint is a <a href="strings">string literal</a> containing one or more conditions, which are separated by commas.</p> <p>Each condition consists of an operator and a version number.</p> <p>Version numbers should be a series of numbers separated by periods (like <code>1.2.0</code>), optionally with a suffix to indicate a beta release.</p> <p>The following operators are valid:</p> <ul> <li>
<p><a href="#"><code>=</code></a> (or no operator): Allows only one exact version number. Cannot be combined with other conditions.</p> </li> <li>
<p><a href="#-1"><code>!=</code></a>: Excludes an exact version number.</p> </li> <li>
<p><a href="#gt-"><code>&gt;</code></a>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>: Comparisons against a specified version, allowing versions for which the comparison is true. "Greater-than" requests newer versions, and "less-than" requests older versions.</p> </li> <li>
<p><a href="#gt--1"><code>~&gt;</code></a>: Allows only the <em>rightmost</em> version component to increment. For example, to allow new patch releases within a specific minor release, use the full version number: <code>~&gt; 1.0.4</code> will allow installation of <code>1.0.5</code> and <code>1.0.10</code> but not <code>1.1.0</code>. This is usually called the pessimistic constraint operator.</p> </li> </ul> <h2 id="version-constraint-behavior">  Version Constraint Behavior </h2> <p>A version number that meets every applicable constraint is considered acceptable.</p> <p>Terraform consults version constraints to determine whether it has acceptable versions of itself, any required provider plugins, and any required modules. For plugins and modules, it will use the newest installed version that meets the applicable constraints.</p> <p>If Terraform doesn't have an acceptable version of a required plugin or module, it will attempt to download the newest version that meets the applicable constraints.</p> <p>If Terraform isn't able to obtain acceptable versions of external dependencies, or if it doesn't have an acceptable version of itself, it won't proceed with any plans, applies, or state manipulation actions.</p> <p>Both the root module and any child module can constrain the acceptable versions of Terraform and any providers they use. Terraform considers these constraints equal, and will only proceed if all of them can be met.</p> <p>A prerelease version is a version number that contains a suffix introduced by a dash, like <code>1.2.0-beta</code>. A prerelease version can be selected only by an <em>exact</em> version constraint (the <code>=</code> operator or no operator). Prerelease versions do not match inexact operators such as <code>&gt;=</code>, <code>~&gt;</code>, etc.</p> <h2 id="best-practices">  Best Practices </h2> <h3 id="module-versions">  Module Versions </h3> <ul> <li>
<p>When depending on third-party modules, require specific versions to ensure that updates only happen when convenient to you.</p> </li> <li>
<p>For modules maintained within your organization, specifying version ranges may be appropriate if semantic versioning is used consistently or if there is a well-defined release process that avoids unwanted updates.</p> </li> </ul> <h3 id="terraform-core-and-provider-versions">  Terraform Core and Provider Versions </h3> <ul> <li>
<p>Reusable modules should constrain only their minimum allowed versions of Terraform and providers, such as <code>&gt;= 0.12.0</code>. This helps avoid known incompatibilities, while allowing the user of the module flexibility to upgrade to newer versions of Terraform without altering the module.</p> </li> <li>
<p>Root modules should use a <code>~&gt;</code> constraint to set both a lower and upper bound on versions for each provider they depend on.</p> </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://www.terraform.io/docs/language/expressions/version-constraints.html" class="_attribution-link" target="_blank">https://www.terraform.io/docs/language/expressions/version-constraints.html</a>
  </p>
</div>
