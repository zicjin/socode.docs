<h1>GDBM_File</h1>   <h2><a id="toc">CONTENTS</a></h2> <ul> <li> <a class="text-decoration-none" href="#NAME">NAME</a> </li> <li> <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a> </li> <li> <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a> </li> <li> <a class="text-decoration-none" href="#STATIC-METHODS">STATIC METHODS</a> <ul> <li> <a class="text-decoration-none" href="#GDBM_version">GDBM_version</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#METHODS">METHODS</a> <ul> <li> <a class="text-decoration-none" href="#close">close</a> </li> <li> <a class="text-decoration-none" href="#errno">errno</a> </li> <li> <a class="text-decoration-none" href="#syserrno">syserrno</a> </li> <li> <a class="text-decoration-none" href="#strerror">strerror</a> </li> <li> <a class="text-decoration-none" href="#clear_error">clear_error</a> </li> <li> <a class="text-decoration-none" href="#needs_recovery">needs_recovery</a> </li> <li> <a class="text-decoration-none" href="#reorganize">reorganize</a> </li> <li> <a class="text-decoration-none" href="#sync">sync</a> </li> <li> <a class="text-decoration-none" href="#count">count</a> </li> <li> <a class="text-decoration-none" href="#flags">flags</a> </li> <li> <a class="text-decoration-none" href="#dbname">dbname</a> </li> <li> <a class="text-decoration-none" href="#cache_size">cache_size</a> </li> <li> <a class="text-decoration-none" href="#block_size">block_size</a> </li> <li> <a class="text-decoration-none" href="#sync_mode">sync_mode</a> </li> <li> <a class="text-decoration-none" href="#centfree">centfree</a> </li> <li> <a class="text-decoration-none" href="#coalesce">coalesce</a> </li> <li> <a class="text-decoration-none" href="#mmap">mmap</a> </li> <li> <a class="text-decoration-none" href="#mmapsize">mmapsize</a> </li> <li> <a class="text-decoration-none" href="#recover">recover</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#AVAILABILITY">AVAILABILITY</a> </li> <li> <a class="text-decoration-none" href="#SECURITY-AND-PORTABILITY">SECURITY AND PORTABILITY</a> </li> <li> <a class="text-decoration-none" href="#SEE-ALSO">SEE ALSO</a> </li> </ul> <h2 id="NAME">NAME</h2> <p>GDBM_File - Perl5 access to the gdbm library.</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre data-language="perl"><code>use GDBM_File;
[$db =] tie %hash, 'GDBM_File', $filename, &amp;GDBM_WRCREAT, 0640;
# Use the %hash array.

$e = $db-&gt;errno;
$e = $db-&gt;syserrno;
$str = $db-&gt;strerror;
$bool = $db-&gt;needs_recovery;

$db-&gt;clear_error;

$db-&gt;reorganize;
$db-&gt;sync;

$n = $db-&gt;count;

$n = $db-&gt;flags;

$str = $db-&gt;dbname;

$db-&gt;cache_size;
$db-&gt;cache_size($newsize);

$n = $db-&gt;block_size;

$bool = $db-&gt;sync_mode;
$db-&gt;sync_mode($bool);

$bool = $db-&gt;centfree;
$db-&gt;centfree($bool);

$bool = $db-&gt;coalesce;
$db-&gt;coalesce($bool);

$bool = $db-&gt;mmap;

$size = $db-&gt;mmapsize;
$db-&gt;mmapsize($newsize);

$db-&gt;recover(%args);

untie %hash ;</code></pre> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p><b>GDBM_File</b> is a module which allows Perl programs to make use of the facilities provided by the GNU gdbm library. If you intend to use this module you should really have a copy of the gdbm manualpage at hand.</p> <p>Most of the libgdbm.a functions are available through the GDBM_File interface.</p> <p>Unlike Perl's built-in hashes, it is not safe to <code>delete</code> the current item from a GDBM_File tied hash while iterating over it with <code>each</code>. This is a limitation of the gdbm library.</p> <h2 id="STATIC-METHODS">
STATIC METHODS</h2> <h3 id="GDBM_version">GDBM_version</h3> <pre data-language="perl"><code>$str = GDBM_File-&gt;GDBM_version;
@ar = GDBM_File-&gt;GDBM_version;</code></pre> <p>Returns the version number of the underlying <b>libgdbm</b> library. In scalar context, returns the library version formatted as string:</p> <pre data-language="perl"><code class="plaintext">MINOR.MAJOR[.PATCH][ (GUESS)]</code></pre> <p>where <i>MINOR</i>, <i>MAJOR</i>, and <i>PATCH</i> are version numbers, and <i>GUESS</i> is a guess level (see below).</p> <p>In list context, returns a list:</p> <pre data-language="perl"><code class="plaintext">( MINOR, MAJOR, PATCH [, GUESS] )</code></pre> <p>The <i>GUESS</i> component is present only if <b>libgdbm</b> version is 1.8.3 or earlier. This is because earlier releases of <b>libgdbm</b> did not include information about their version and the <b>GDBM_File</b> module has to implement certain guesswork in order to determine it. <i>GUESS</i> is a textual description in string context, and a positive number indicating how rough the guess is in list context. Possible values are:</p> <dl> <dt id="1-exact-guess">
1 - exact guess</dt> <dd> <p>The major and minor version numbers are guaranteed to be correct. The actual patchlevel is most probably guessed right, but can be 1-2 less than indicated.</p> </dd> <dt id="2-approximate">
2 - approximate</dt> <dd> <p>The major and minor number are guaranteed to be correct. The patchlevel is set to the upper bound.</p> </dd> <dt id="3-rough-guess">
3 - rough guess</dt> <dd> <p>The version is guaranteed to be not newer than <b><i>MAJOR</i>.<i>MINOR</i></b>.</p> </dd> </dl> <h2 id="METHODS">METHODS</h2> <h3 id="close">close</h3> <pre data-language="perl"><code>$db-&gt;close;</code></pre> <p>Closes the database. You are not advised to use this method directly. Please, use <b>untie</b> instead.</p> <h3 id="errno">errno</h3> <pre data-language="perl"><code>$db-&gt;errno</code></pre> <p>Returns the last error status associated with this database.</p> <h3 id="syserrno">syserrno</h3> <pre data-language="perl"><code>$db-&gt;syserrno</code></pre> <p>Returns the last system error status (C <code>errno</code> variable), associated with this database,</p> <h3 id="strerror">strerror</h3> <pre data-language="perl"><code>$db-&gt;strerror</code></pre> <p>Returns textual description of the last error that occurred in this database.</p> <h3 id="clear_error">clear_error</h3> <pre data-language="perl"><code>$db-&gt;clear_error</code></pre> <p>Clear error status.</p> <h3 id="needs_recovery">needs_recovery</h3> <pre data-language="perl"><code>$db-&gt;needs_recovery</code></pre> <p>Returns true if the database needs recovery.</p> <h3 id="reorganize">reorganize</h3> <pre data-language="perl"><code>$db-&gt;reorganize;</code></pre> <p>Reorganizes the database.</p> <h3 id="sync">sync</h3> <pre data-language="perl"><code>$db-&gt;sync;</code></pre> <p>Synchronizes recent changes to the database with its disk copy.</p> <h3 id="count">count</h3> <pre data-language="perl"><code>$n = $db-&gt;count;</code></pre> <p>Returns number of keys in the database.</p> <h3 id="flags">flags</h3> <pre data-language="perl"><code>$db-&gt;flags;</code></pre> <p>Returns flags passed as 4th argument to <b>tie</b>.</p> <h3 id="dbname">dbname</h3> <pre data-language="perl"><code>$db-&gt;dbname;</code></pre> <p>Returns the database name (i.e. 3rd argument to <b>tie</b>.</p> <h3 id="cache_size">cache_size</h3> <pre data-language="perl"><code>$db-&gt;cache_size;
$db-&gt;cache_size($newsize);</code></pre> <p>Returns the size of the internal <b>GDBM</b> cache for that database.</p> <p>Called with argument, sets the size to <i>$newsize</i>.</p> <h3 id="block_size">block_size</h3> <pre data-language="perl"><code>$db-&gt;block_size;</code></pre> <p>Returns the block size of the database.</p> <h3 id="sync_mode">sync_mode</h3> <pre data-language="perl"><code>$db-&gt;sync_mode;
$db-&gt;sync_mode($bool);</code></pre> <p>Returns the status of the automatic synchronization mode. Called with argument, enables or disables the sync mode, depending on whether $bool is <b>true</b> or <b>false</b>.</p> <p>When synchronization mode is on (<b>true</b>), any changes to the database are immediately written to the disk. This ensures database consistency in case of any unforeseen errors (e.g. power failures), at the expense of considerable slowdown of operation.</p> <p>Synchronization mode is off by default.</p> <h3 id="centfree">centfree</h3> <pre data-language="perl"><code>$db-&gt;centfree;
$db-&gt;centfree($bool);</code></pre> <p>Returns status of the central free block pool (<b>0</b> - disabled, <b>1</b> - enabled).</p> <p>With argument, changes its status.</p> <p>By default, central free block pool is disabled.</p> <h3 id="coalesce">coalesce</h3> <pre data-language="perl"><code>$db-&gt;coalesce;
$db-&gt;coalesce($bool);</code></pre> <h3 id="mmap">mmap</h3> <pre data-language="perl"><code>$db-&gt;mmap;</code></pre> <p>Returns true if memory mapping is enabled.</p> <p>This method will <b>croak</b> if the <b>libgdbm</b> library is complied without memory mapping support.</p> <h3 id="mmapsize">mmapsize</h3> <pre data-language="perl"><code>$db-&gt;mmapsize;
$db-&gt;mmapsize($newsize);</code></pre> <p>If memory mapping is enabled, returns the size of memory mapping. With argument, sets the size to <b>$newsize</b>.</p> <p>This method will <b>croak</b> if the <b>libgdbm</b> library is complied without memory mapping support.</p> <h3 id="recover">recover</h3> <pre data-language="perl"><code>$db-&gt;recover(%args);</code></pre> <p>Recovers data from a failed database. <b>%args</b> is optional and can contain following keys:</p> <dl> <dt id="err-=&gt;-sub-{-...-}">
err =&gt; sub { ... }</dt> <dd> <p>Reference to code for detailed error reporting. Upon encountering an error, <b>recover</b> will call this sub with a single argument - a description of the error.</p> </dd> <dt id="backup-=&gt;-\$str">
backup =&gt; \$str</dt> <dd> <p>Creates a backup copy of the database before recovery and returns its filename in <b>$str</b>.</p> </dd> <dt id="max_failed_keys-=&gt;-$n">
max_failed_keys =&gt; $n</dt> <dd> <p>Maximum allowed number of failed keys. If the actual number becomes equal to <i>$n</i>, <b>recover</b> aborts and returns error.</p> </dd> <dt id="max_failed_buckets-=&gt;-$n">
max_failed_buckets =&gt; $n</dt> <dd> <p>Maximum allowed number of failed buckets. If the actual number becomes equal to <i>$n</i>, <b>recover</b> aborts and returns error.</p> </dd> <dt id="max_failures-=&gt;-$n">
max_failures =&gt; $n</dt> <dd> <p>Maximum allowed number of failures during recovery.</p> </dd> <dt id="stat-=&gt;-\%hash">
stat =&gt; \%hash</dt> <dd> <p>Return recovery statistics in <i>%hash</i>. Upon return, the following keys will be present:</p> <dl> <dt id="recovered_keys">recovered_keys</dt> <dd> <p>Number of successfully recovered keys.</p> </dd> <dt id="recovered_buckets">recovered_buckets</dt> <dd> <p>Number of successfully recovered buckets.</p> </dd> <dt id="failed_keys">failed_keys</dt> <dd> <p>Number of keys that failed to be retrieved.</p> </dd> <dt id="failed_buckets">failed_buckets</dt> <dd> <p>Number of buckets that failed to be retrieved.</p> </dd> </dl> </dd> </dl> <h2 id="AVAILABILITY">AVAILABILITY</h2> <p>gdbm is available from any GNU archive. The master site is <code>ftp.gnu.org</code>, but you are strongly urged to use one of the many mirrors. You can obtain a list of mirror sites from <a href="http://www.gnu.org/order/ftp.html">http://www.gnu.org/order/ftp.html</a>.</p> <h2 id="SECURITY-AND-PORTABILITY">
SECURITY AND PORTABILITY</h2> <p><b>Do not accept GDBM files from untrusted sources.</b></p> <p>GDBM files are not portable across platforms.</p> <p>The GDBM documentation doesn't imply that files from untrusted sources can be safely used with <code>libgdbm</code>.</p> <p>A maliciously crafted file might cause perl to crash or even expose a security vulnerability.</p> <h2 id="SEE-ALSO">
SEE ALSO</h2> <p><a href="http://man.he.net/man1/perl">perl(1)</a>, <a href="http://man.he.net/man3/DB_File">DB_File(3)</a>, <a href="perldbmfilter">perldbmfilter</a>, <a href="http://man.he.net/man3/gdbm">gdbm(3)</a>, <a href="https://www.gnu.org.ua/software/gdbm/manual.html">https://www.gnu.org.ua/software/gdbm/manual.html</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2021 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.34.0/GDBM_File" class="_attribution-link">https://perldoc.perl.org/5.34.0/GDBM_File</a>
  </p>
</div>
