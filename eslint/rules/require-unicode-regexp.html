
<h1 id="enforce-the-use-of-u-flag-on-regexp-require-unicode-regexp">Enforce the use of <code>u</code> flag on RegExp (require-unicode-regexp)</h1>
<p>RegExp <code>u</code> flag has two effects:</p>
<ol>
<li>
<p><strong>Make the regular expression handling UTF-16 surrogate pairs correctly.</strong></p>
<p>Especially, character range syntax gets the correct behavior.</p>
<pre data-language="js">/^[üëç]$/.test("üëç") //‚Üí false
/^[üëç]$/u.test("üëç") //‚Üí true</pre>
</li>
<li>
<p><strong>Make the regular expression throwing syntax errors early as disabling <a href="https://www.ecma-international.org/ecma-262/6.0/#sec-regular-expressions-patterns">Annex B extensions</a>.</strong></p>
<p>Because of historical reason, JavaScript regular expressions are tolerant of syntax errors. For example, <code>/\w{1, 2/</code> is a syntax error, but JavaScript doesn't throw the error. It matches strings such as <code>"a{1, 2"</code> instead. Such a recovering logic is defined in Annex B.</p>
<p>The <code>u</code> flag disables the recovering logic Annex B defined. As a result, you can find errors early. This is similar to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">the strict mode</a>.</p>
</li>
</ol>
<p>Therefore, the <code>u</code> flag lets us work better with regular expressions.</p>
<h2 id="rule-details">Rule Details</h2>
<p>This rule aims to enforce the use of <code>u</code> flag on regular expressions.</p>
<p>Examples of <strong>incorrect</strong> code for this rule:</p>
<pre data-language="js">/*eslint require-unicode-regexp: error */

const a = /aaa/
const b = /bbb/gi
const c = new RegExp("ccc")
const d = new RegExp("ddd", "gi")</pre>
<p>Examples of <strong>correct</strong> code for this rule:</p>
<pre data-language="js">/*eslint require-unicode-regexp: error */

const a = /aaa/u
const b = /bbb/giu
const c = new RegExp("ccc", "u")
const d = new RegExp("ddd", "giu")

// This rule ignores RegExp calls if the flags could not be evaluated to a static value.
function f(flags) {
    return new RegExp("eee", flags)
}</pre>
<h2 id="when-not-to-use-it">When Not To Use It</h2>
<p>If you don't want to notify regular expressions with no <code>u</code> flag, then it's safe to disable this rule.</p>
<h2 id="version">Version</h2>
<p>This rule was introduced in ESLint 5.3.0.</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://github.com/eslint/eslint/tree/master/lib/rules/require-unicode-regexp.js">Rule source</a></li>
<li><a href="https://github.com/eslint/eslint/tree/master/docs/rules/require-unicode-regexp.md">Documentation source</a></li>
</ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://eslint.org/docs/rules/require-unicode-regexp" class="_attribution-link" target="_blank">https://eslint.org/docs/rules/require-unicode-regexp</a>
  </p>
</div>
