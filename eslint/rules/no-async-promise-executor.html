
<h1 id="disallow-using-an-async-function-as-a-promise-executor-no-async-promise-executor">disallow using an async function as a Promise executor (no-async-promise-executor)</h1>
<p>The <code>"extends": "eslint:recommended"</code> property in a configuration file enables this rule.</p>
<p>The <code>new Promise</code> constructor accepts an <em>executor</em> function as an argument, which has <code>resolve</code> and <code>reject</code> parameters that can be used to control the state of the created Promise. For example:</p>
<pre data-language="js">const result = new Promise(function executor(resolve, reject) {
  readFile('foo.txt', function(err, result) {
    if (err) {
      reject(err);
    } else {
      resolve(result);
    }
  });
});</pre>
<p>The executor function can also be an <code>async function</code>. However, this is usually a mistake, for a few reasons:</p>
<ul>
<li>If an async executor function throws an error, the error will be lost and won't cause the newly-constructed <code>Promise</code> to reject. This could make it difficult to debug and handle some errors.</li>
<li>If a Promise executor function is using <code>await</code>, this is usually a sign that it is not actually necessary to use the <code>new Promise</code> constructor, or the scope of the <code>new Promise</code> constructor can be reduced.</li>
</ul>
<h2 id="rule-details">Rule Details</h2>
<p>This rule aims to disallow async Promise executor functions.</p>
<p>Examples of <strong>incorrect</strong> code for this rule:</p>
<pre data-language="js">const foo = new Promise(async (resolve, reject) =&gt; {
  readFile('foo.txt', function(err, result) {
    if (err) {
      reject(err);
    } else {
      resolve(result);
    }
  });
});

const result = new Promise(async (resolve, reject) =&gt; {
  resolve(await foo);
});</pre>
<p>Examples of <strong>correct</strong> code for this rule:</p>
<pre data-language="js">const foo = new Promise((resolve, reject) =&gt; {
  readFile('foo.txt', function(err, result) {
    if (err) {
      reject(err);
    } else {
      resolve(result);
    }
  });
});

const result = Promise.resolve(foo);</pre>
<h2 id="when-not-to-use-it">When Not To Use It</h2>
<p>If your codebase doesn't support async function syntax, there's no need to enable this rule.</p>
<h2 id="version">Version</h2>
<p>This rule was introduced in ESLint 5.3.0.</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://github.com/eslint/eslint/tree/master/lib/rules/no-async-promise-executor.js">Rule source</a></li>
<li><a href="https://github.com/eslint/eslint/tree/master/docs/rules/no-async-promise-executor.md">Documentation source</a></li>
</ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://eslint.org/docs/rules/no-async-promise-executor" class="_attribution-link" target="_blank">https://eslint.org/docs/rules/no-async-promise-executor</a>
  </p>
</div>
