
<h1 id="disallow-negating-the-left-operand-of-relational-operators-no-unsafe-negation">disallow negating the left operand of relational operators (no-unsafe-negation)</h1>
<p>The <code>"extends": "eslint:recommended"</code> property in a configuration file enables this rule.</p>
<p>Some problems reported by this rule are manually fixable by editor <a href="../developer-guide/working-with-rules#providing-suggestions">suggestions</a>.</p>
<p>Just as developers might type <code>-a + b</code> when they mean <code>-(a + b)</code> for the negative of a sum, they might type <code>!key in object</code> by mistake when they almost certainly mean <code>!(key in object)</code> to test that a key is not in an object. <code>!obj instanceof Ctor</code> is similar.</p>
<h2 id="rule-details">Rule Details</h2>
<p>This rule disallows negating the left operand of the following relational operators:</p>
<ul>
<li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in"><code>in</code> operator</a>.</li>
<li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof"><code>instanceof</code> operator</a>.</li>
</ul>
<p>Examples of <strong>incorrect</strong> code for this rule:</p>
<pre data-language="js">/*eslint no-unsafe-negation: "error"*/

if (!key in object) {
    // operator precedence makes it equivalent to (!key) in object
    // and type conversion makes it equivalent to (key ? "false" : "true") in object
}

if (!obj instanceof Ctor) {
    // operator precedence makes it equivalent to (!obj) instanceof Ctor
    // and it equivalent to always false since boolean values are not objects.
}</pre>
<p>Examples of <strong>correct</strong> code for this rule:</p>
<pre data-language="js">/*eslint no-unsafe-negation: "error"*/

if (!(key in object)) {
    // key is not in object
}

if (!(obj instanceof Ctor)) {
    // obj is not an instance of Ctor
}</pre>
<h3 id="exception">Exception</h3>
<p>For rare situations when negating the left operand is intended, this rule allows an exception. If the whole negation is explicitly wrapped in parentheses, the rule will not report a problem.</p>
<p>Examples of <strong>correct</strong> code for this rule:</p>
<pre data-language="js">/*eslint no-unsafe-negation: "error"*/

if ((!foo) in object) {
    // allowed, because the negation is explicitly wrapped in parentheses
    // it is equivalent to (foo ? "false" : "true") in object
    // this is allowed as an exception for rare situations when that is the intended meaning
}

if(("" + !foo) in object) {
    // you can also make the intention more explicit, with type conversion
}</pre>
<p>Examples of <strong>incorrect</strong> code for this rule:</p>
<pre data-language="js">/*eslint no-unsafe-negation: "error"*/

if (!(foo) in object) {
    // this is not an allowed exception
}</pre>
<h2 id="options">Options</h2>
<p>This rule has an object option:</p>
<ul>
<li>
<code>"enforceForOrderingRelations": false</code> (default) allows negation of the left-hand side of ordering relational operators (<code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>)</li>
<li>
<code>"enforceForOrderingRelations": true</code> disallows negation of the left-hand side of ordering relational operators</li>
</ul>
<h3 id="enforcefororderingrelations">enforceForOrderingRelations</h3>
<p>With this option set to <code>true</code> the rule is additionally enforced for:</p>
<ul>
<li>
<code>&lt;</code> operator.</li>
<li>
<code>&gt;</code> operator.</li>
<li>
<code>&lt;=</code> operator.</li>
<li>
<code>&gt;=</code> operator.</li>
</ul>
<p>The purpose is to avoid expressions such as <code>! a &lt; b</code> (which is equivalent to <code>(a ? 0 : 1) &lt; b</code>) when what is really intended is <code>!(a &lt; b)</code>.</p>
<p>Examples of additional <strong>incorrect</strong> code for this rule with the <code>{ "enforceForOrderingRelations": true }</code> option:</p>
<pre data-language="js">/*eslint no-unsafe-negation: ["error", { "enforceForOrderingRelations": true }]*/

if (! a &lt; b) {}

while (! a &gt; b) {}

foo = ! a &lt;= b;

foo = ! a &gt;= b;</pre>
<h2 id="when-not-to-use-it">When Not To Use It</h2>
<p>If you don't want to notify unsafe logical negations, then it's safe to disable this rule.</p>
<h2 id="version">Version</h2>
<p>This rule was introduced in ESLint 3.3.0.</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://github.com/eslint/eslint/tree/master/lib/rules/no-unsafe-negation.js">Rule source</a></li>
<li><a href="https://github.com/eslint/eslint/tree/master/docs/rules/no-unsafe-negation.md">Documentation source</a></li>
</ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://eslint.org/docs/rules/no-unsafe-negation" class="_attribution-link" target="_blank">https://eslint.org/docs/rules/no-unsafe-negation</a>
  </p>
</div>
