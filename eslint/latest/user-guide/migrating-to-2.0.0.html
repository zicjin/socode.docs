<a href="#main" class="c-btn c-btn--primary" id="skip-link">Skip to main content</a> <header class="site-header"> <div class="docs-wrapper">  <nav class="docs-site-nav" aria-label="Main"> <div class="flexer"> <a href="https://eslint.org/donate" class="c-btn c-btn--primary donate-link">Donate</a>  </div> <div class="docs-nav-panel" id="nav-panel"> <ul id="nav-list"> <li> <a href="https://eslint.org/team">Team</a> </li> <li> <a href="https://eslint.org/blog">Blog</a> </li> <li> <a href="../index" aria-current="true">Docs</a> </li> <li> <a href="https://eslint.threadless.com" target="_blank">Store</a> </li> <li> <a href="https://eslint.org/play">Playground</a> </li> </ul> <div class="mobile-only">  <div class="version-switcher"> <a href="../versions/index" class="switcher-fallback">Versions</a> <div hidden role="region" class="switcher switcher--version" aria-labelledby="nav-version-switcher-label" id="nav-version-switcher"> <span id="nav-version-switcher-label" hidden>Version Switcher</span> <div class="infobox visually-hidden" id="nav-version-infobox"> Selecting a version will take you to the chosen version of the ESLint docs. </div> <label class="switcher__label label--block" for="version-select"> <span class="label__text">Version</span> </label> <select name="version selector" id="nav-version-select" aria-describedby="nav-version-infobox" class="c-custom-select switcher__select auto-switcher"> <option value="HEAD" data-url="/docs/head/">HEAD</option> <option value="8.21.0" data-url="/docs/latest/" selected>v8.21.0</option> </select> </div> </div> </div> </div> </nav> </div> </header> <div class="docs-wrapper"> <div class="docs-nav"> <div class="desktop-only">  <div class="version-switcher"> <a href="../versions/index" class="switcher-fallback">Versions</a> <div hidden role="region" class="switcher switcher--version" aria-labelledby="version-switcher-label" id="version-switcher"> <span id="version-switcher-label" hidden>Version Switcher</span> <div class="infobox visually-hidden" id="version-infobox"> Selecting a version will take you to the chosen version of the ESLint docs. </div> <label class="switcher__label label--block" for="version-select"> <span class="label__text">Version</span> </label> <select name="version selector" id="version-select" aria-describedby="version-infobox" class="c-custom-select switcher__select auto-switcher"> <option value="HEAD" data-url="/docs/head/">HEAD</option> <option value="8.21.0" data-url="/docs/latest/" selected>v8.21.0</option> </select> </div> </div> </div> <nav class="docs-index" id="docs-index"> <button class="docs-index-toggle" id="js-docs-index-toggle" hidden> Index  </button> <div class="docs__index__panel" id="js-docs-index-panel"> <div role="region" aria-labelledby="search-label" class="search"> <label for="search" class="label--block"> <span class="label__text" id="search-label">Search</span> </label> <div class="search__input-wrapper">  <p id="search-hint">Results will be shown and updated as you type.</p> <div class="search__inner-input-wrapper"> <input type="search" id="search" class="search__input" autocomplete="off" aria-describedby="search-hint" pattern="\S+"> <button class="search__clear-btn" id="search__clear-btn" hidden> <span class="visually-hidden">Clear search</span>  </button> </div> </div>   </div> <ul class="docs-index__list" id="js-docs-list">
<li class="docs-index__item" data-has-children> <a href="index">User Guide</a><ul data-child-list>
<li class="docs-index__item"> <a href="getting-started">Getting Started</a>
</li>
<li class="docs-index__item" data-has-children> <a href="configuring/index">Configuring</a><ul data-child-list>
<li class="docs-index__item"> <a href="configuring/configuration-files-new">Configuration Files (New)</a>
</li>
<li class="docs-index__item"> <a href="configuring/configuration-files">Configuration Files</a>
</li>
<li class="docs-index__item"> <a href="configuring/language-options">Configuring Language Options</a>
</li>
<li class="docs-index__item"> <a href="configuring/rules">Configuring Rules</a>
</li>
<li class="docs-index__item"> <a href="configuring/plugins">Configuring Plugins</a>
</li>
<li class="docs-index__item"> <a href="configuring/ignoring-code">Ignoring Code</a>
</li>
</ul>
</li>
<li class="docs-index__item"> <a href="command-line-interface">Command Line Interface</a>
</li>
<li class="docs-index__item"> <a href="../rules/index">Rules</a>
</li>
<li class="docs-index__item"> <a href="formatters/index">Formatters</a>
</li>
<li class="docs-index__item"> <a href="integrations">Integrations</a>
</li>
<li class="docs-index__item"> <a href="migrating-to-8.0.0">Migrating to v8.x</a>
</li>
</ul>
</li>
<li class="docs-index__item" data-has-children> <a href="../developer-guide/index">Developer Guide</a><ul data-child-list>
<li class="docs-index__item"> <a href="../developer-guide/architecture/index">Architecture</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/source-code">Getting the Source Code</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/development-environment">Set Up a Development Environment</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/unit-tests">Run the Tests</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/working-with-rules">Working with Rules</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/working-with-plugins">Working with Plugins</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/working-with-custom-formatters">Working with Custom Formatters</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/working-with-custom-parsers">Working with Custom Parsers</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/shareable-configs">Shareable Configs</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/nodejs-api">Node.js API</a>
</li>
<li class="docs-index__item"> <a href="../developer-guide/contributing/index">Contributing</a>
</li>
</ul>
</li>
<li class="docs-index__item" data-has-children> <a href="https://eslint.org/docs/latest/maintainer-guide/">Maintainer Guide</a><ul data-child-list>
<li class="docs-index__item"> <a href="https://eslint.org/docs/latest/maintainer-guide/issues">Managing Issues</a>
</li>
<li class="docs-index__item"> <a href="https://eslint.org/docs/latest/maintainer-guide/pullrequests">Reviewing Pull Requests</a>
</li>
<li class="docs-index__item"> <a href="https://eslint.org/docs/latest/maintainer-guide/releases">Managing Releases</a>
</li>
<li class="docs-index__item"> <a href="https://eslint.org/docs/latest/maintainer-guide/governance">Governance</a>
</li>
</ul>
</li>
</ul> </div> </nav> </div> <div class="docs-content"> <main id="main" tabindex="-1" class="docs-main"> <div class="docs-main__content"> <h1>Migrating to v2.0.0</h1> <nav class="docs-toc c-toc" aria-labelledby="js-toc-label"><h2 class="c-toc__label" id="js-toc-label">Table of Contents</h2> <div class="c-toc__panel" id="js-toc-panel"> <nav class="c-toc"> <ol> <li>
<a href="#rule-schema-changes">Rule Schema Changes</a> </li> <li>
<a href="#removed-rules">Removed Rules</a> </li> <li>
<a href="#configuration-cascading-changes">Configuration Cascading Changes</a> </li> <li>
<a href="#built-in-global-variables">Built-In Global Variables</a> </li> <li>
<a href="#language-options">Language Options</a> </li> <li>
<a href="#new-rules-in-eslintrecommended">New Rules in "eslint:recommended"</a> </li> <li>
<a href="#scope-analysis-changes">Scope Analysis Changes</a> </li> <li>
<a href="#default-changes-when-using-eslintrecommended">Default Changes When Using eslint:recommended</a> </li> <li>
<a href="#sourcecode-constructor-node-api-changes">SourceCode constructor (Node API) changes</a> </li> <li>
<a href="#rule-changes">Rule Changes</a> </li> <li>
<a href="#plugins-no-longer-have-default-configurations">Plugins No Longer Have Default Configurations</a> </li> </ol> </nav> </div></nav> <p>ESLint v2.0.0 is the second major version release. As a result, there are some significant changes between how ESLint worked during its life in 0.x and 1.x and how it will work going forward. These changes are the direct result of feedback from the ESLint community of users and were not made without due consideration for the upgrade path. We believe that these changes make ESLint even better, and while some work is necessary to upgrade, we hope the pain of this upgrade is small enough that you will see the benefit of upgrading.</p> <p><strong>Important:</strong> If you are upgrading from 0.x, please refer to <a href="migrating-to-2.0.0./migrating-to-1.0.0">Migrating to 1.0.0</a> as your starting point.</p> <h2 id="rule-schema-changes" tabindex="-1">Rule Schema Changes</h2> <p>Due to a quirk in the way rule schemas worked, it was possible that youâ€™d need to account for the rule severity (0, 1, or 2) in a rule schema if the options were sufficiently complex. That would result in a schema such as:</p> <pre class="language-js"><code><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"array"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"items"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token string-property property">"enum"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token string-property property">"enum"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"always"</span><span class="token punctuation">,</span> <span class="token string">"never"</span><span class="token punctuation">]</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"minItems"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"maxItems"</span><span class="token operator">:</span> <span class="token number">2</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre> <p>This was confusing to rule developers as it seemed that rules shouldnâ€™t be in charge of validating their own severity. In 2.0.0, rules no longer need to check their own severity.</p> <p><strong>To address:</strong> If you are exporting a rule schema that checks severity, you need to make several changes:</p> <ol> <li>Remove the severity from the schema</li> <li>Adjust <code>minItems</code> from 1 to 0</li> <li>Adjust <code>maxItems</code> by subtracting 1</li> </ol> <p>Hereâ€™s what the schema from above looks like when properly converted:</p> <pre class="language-js"><code><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"array"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"items"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token string-property property">"enum"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"always"</span><span class="token punctuation">,</span> <span class="token string">"never"</span><span class="token punctuation">]</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"minItems"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string-property property">"maxItems"</span><span class="token operator">:</span> <span class="token number">1</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre> <h2 id="removed-rules" tabindex="-1">Removed Rules</h2> <p>The following rules have been deprecated with new rules created to take their place. The following is a list of the removed rules and their replacements:</p> <ul> <li>
<a href="../../rules/no-arrow-condition">no-arrow-condition</a> is replaced by a combination of <a href="../../rules/no-confusing-arrow">no-confusing-arrow</a> and <a href="../../rules/no-constant-condition">no-constant-condition</a>. Turn on both of these rules to get the same functionality as <code>no-arrow-condition</code>.</li> <li>
<a href="../../rules/no-empty-label">no-empty-label</a> is replaced by <a href="../../rules/no-labels">no-labels</a> with <code>{"allowLoop": true, "allowSwitch": true}</code> option.</li> <li>
<a href="../../rules/space-after-keywords">space-after-keywords</a> is replaced by <a href="../../rules/keyword-spacing">keyword-spacing</a>.</li> <li>
<a href="../../rules/space-before-keywords">space-before-keywords</a> is replaced by <a href="../../rules/keyword-spacing">keyword-spacing</a>.</li> <li>
<a href="../../rules/space-return-throw-case">space-return-throw-case</a> is replaced by <a href="../../rules/keyword-spacing">keyword-spacing</a>.</li> </ul> <p><strong>To address:</strong> Youâ€™ll need to update your rule configurations to use the new rules. ESLint v2.0.0 will also warn you when youâ€™re using a rule that has been removed and will suggest the replacement rules. Hopefully, this will result in few surprises during the upgrade process.</p> <h2 id="configuration-cascading-changes" tabindex="-1">Configuration Cascading Changes</h2> <p>Prior to 2.0.0, if a directory contained both an <code>.eslintrc</code> file and a <code>package.json</code> file with ESLint configuration information, the settings from the two files would be merged together. In 2.0.0, only the settings from the <code>.eslintrc.*</code> file are used and the ones in <code>package.json</code> are ignored when both are present. Otherwise, <code>package.json</code> can still be used with ESLint configuration, but only if no other <code>.eslintrc.*</code> files are present.</p> <p><strong>To address:</strong> If you have both an <code>.eslintrc.*</code> and <code>package.json</code> with ESLint configuration information in the same directory, combine your configurations into just one of those files.</p> <h2 id="built-in-global-variables" tabindex="-1">Built-In Global Variables</h2> <p>Prior to 2.0.0, new global variables that were standardized as part of ES6 such as <code>Promise</code>, <code>Map</code>, <code>Set</code>, and <code>Symbol</code> were included in the built-in global environment. This could lead to potential issues when, for example, <code>no-undef</code> permitted use of the <code>Promise</code> constructor even in ES5 code where promises are unavailable. In 2.0.0, the built-in environment only includes the standard ES5 global variables, and the new ES6 global variables have been moved to the <code>es6</code> environment.</p> <p><strong>To address:</strong> If you are writing ES6 code, enable the <code>es6</code> environment if you have not already done so:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token comment">// In your .eslintrc</span></span><br><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">es6</span><span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><br><span class="highlight-line"><span class="token comment">// Or in a configuration comment</span></span><br><span class="highlight-line"><span class="token comment">/*eslint-env es6*/</span></span></code></pre> <h2 id="language-options" tabindex="-1">Language Options</h2> <p>Prior to 2.0.0, the way to enable language options was by using <code>ecmaFeatures</code> in your configuration. In 2.0.0:</p> <ul> <li>The <code>ecmaFeatures</code> property is now under a top-level <code>parserOptions</code> property.</li> <li>All ECMAScript 6 <code>ecmaFeatures</code> flags have been removed in favor of a <code>ecmaVersion</code> property under <code>parserOptions</code> that can be set to 3, 5 (default), or 6.</li> <li>The <code>ecmaFeatures.modules</code> flag has been replaced by a <code>sourceType</code> property under <code>parserOptions</code> which can be set to <code>"script"</code> (default) or <code>"module"</code> for ES6 modules.</li> </ul> <p><strong>To address:</strong> If you are using any ECMAScript 6 feature flags in <code>ecmaFeatures</code>, youâ€™ll need to use <code>ecmaVersion: 6</code> instead. The ECMAScript 6 feature flags are:</p> <ul> <li>
<code>arrowFunctions</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-arrow-functions">arrow functions</a>
</li> <li>
<code>binaryLiterals</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-octal-and-binary-literals">binary literals</a>
</li> <li>
<code>blockBindings</code> - enable <code>let</code> and <code>const</code> (aka <a href="https://leanpub.com/understandinges6/read#leanpub-auto-block-bindings">block bindings</a>)</li> <li>
<code>classes</code> - enable classes</li> <li>
<code>defaultParams</code> - enable <a href="https://leanpub.com/understandinges6/read/#leanpub-auto-default-parameters">default function parameters</a>
</li> <li>
<code>destructuring</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-destructuring-assignment">destructuring</a>
</li> <li>
<code>forOf</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-iterables-and-for-of"><code>for-of</code> loops</a>
</li> <li>
<code>generators</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-generators">generators</a>
</li> <li>
<code>modules</code> - enable modules and global strict mode</li> <li>
<code>objectLiteralComputedProperties</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-computed-property-names">computed object literal property names</a>
</li> <li>
<code>objectLiteralDuplicateProperties</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-duplicate-object-literal-properties">duplicate object literal properties</a> in strict mode</li> <li>
<code>objectLiteralShorthandMethods</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-method-initializer-shorthand">object literal shorthand methods</a>
</li> <li>
<code>objectLiteralShorthandProperties</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-property-initializer-shorthand">object literal shorthand properties</a>
</li> <li>
<code>octalLiterals</code> - enable <a href="https://leanpub.com/understandinges6/read#leanpub-auto-octal-and-binary-literals">octal literals</a>
</li> <li>
<code>regexUFlag</code> - enable the <a href="https://leanpub.com/understandinges6/read#leanpub-auto-the-regular-expression-u-flag">regular expression <code>u</code> flag</a>
</li> <li>
<code>regexYFlag</code> - enable the <a href="https://leanpub.com/understandinges6/read#leanpub-auto-the-regular-expression-y-flag">regular expression <code>y</code> flag</a>
</li> <li>
<code>restParams</code> - enable the <a href="https://leanpub.com/understandinges6/read#leanpub-auto-rest-parameters">rest parameters</a>
</li> <li>
<code>spread</code> - enable the <a href="https://leanpub.com/understandinges6/read#leanpub-auto-the-spread-operator">spread operator</a> for arrays</li> <li>
<code>superInFunctions</code> - enable <code>super</code> references inside of functions</li> <li>
<code>templateStrings</code> - enable <a href="https://leanpub.com/understandinges6/read/#leanpub-auto-template-strings">template strings</a>
</li> <li>
<code>unicodeCodePointEscapes</code> - enable <a href="https://leanpub.com/understandinges6/read/#leanpub-auto-escaping-non-bmp-characters">code point escapes</a>
</li> </ul> <p>If youâ€™re using any of these flags, such as:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">arrowFunctions</span><span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>Then you should enable ES6 using <code>ecmaVersion</code>:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">6</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>If youâ€™re using any non-ES6 flags in <code>ecmaFeatures</code>, you need to move those inside of <code>parserOptions</code>. For instance:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>Then you should move <code>ecmaFeatures</code> under <code>parserOptions</code>:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>If you were using <code>ecmaFeatures.modules</code> to enable ES6 module support like this:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <pre class="language-js"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">"module"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>Additionally, if you are using <code>context.ecmaFeatures</code> inside of your rules, then youâ€™ll need to update your code in the following ways:</p> <ol> <li>If youâ€™re using an ES6 feature flag such as <code>context.ecmaFeatures.blockBindings</code>, rewrite to check for <code>context.parserOptions.ecmaVersion &gt; 5</code>.</li> <li>If youâ€™re using <code>context.ecmaFeatures.modules</code>, rewrite to check that the <code>sourceType</code> property of the Program node is <code>"module"</code>.</li> <li>If youâ€™re using a non-ES6 feature flag such as <code>context.ecmaFeatures.jsx</code>, rewrite to check for <code>context.parserOptions.ecmaFeatures.jsx</code>.</li> </ol> <p>If you have a plugin with rules and you are using RuleTester, then you also need to update the options you pass for rules that use <code>ecmaFeatures</code>. For example:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token keyword">var</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"no-var"</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"let x;"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">            <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre> <p>If youâ€™re not using <code>ecmaFeatures</code> in your configuration or your custom/plugin rules and tests, then no change is needed.</p> <h2 id="new-rules-in-eslintrecommended" tabindex="-1">New Rules in <code>"eslint:recommended"</code>
</h2> <pre class="language-json"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"eslint:recommended"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>In 2.0.0, the following 11 rules were added to <code>"eslint:recommended"</code>.</p> <ul> <li><a href="../../rules/constructor-super">constructor-super</a></li> <li><a href="../../rules/no-case-declarations">no-case-declarations</a></li> <li><a href="../../rules/no-class-assign">no-class-assign</a></li> <li><a href="../../rules/no-const-assign">no-const-assign</a></li> <li><a href="../../rules/no-dupe-class-members">no-dupe-class-members</a></li> <li><a href="../../rules/no-empty-pattern">no-empty-pattern</a></li> <li><a href="../../rules/no-new-symbol">no-new-symbol</a></li> <li><a href="../../rules/no-self-assign">no-self-assign</a></li> <li><a href="../../rules/no-this-before-super">no-this-before-super</a></li> <li><a href="../../rules/no-unexpected-multiline">no-unexpected-multiline</a></li> <li><a href="../../rules/no-unused-labels">no-unused-labels</a></li> </ul> <p><strong>To address:</strong> If you donâ€™t want to be notified by those rules, you can simply disable those rules.</p> <pre class="language-json"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"no-case-declarations"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-class-assign"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-const-assign"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-dupe-class-members"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-empty-pattern"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-new-symbol"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-self-assign"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-this-before-super"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-unexpected-multiline"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"no-unused-labels"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"constructor-super"</span><span class="token operator">:</span> <span class="token number">0</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <h2 id="scope-analysis-changes" tabindex="-1">Scope Analysis Changes</h2> <p>We found some bugs in our scope analysis that needed to be addressed. Specifically, we were not properly accounting for global variables in all the ways they are defined.</p> <p>Originally, <code>Variable</code> objects and <code>Reference</code> objects refer each other:</p> <ul> <li>
<code>Variable#references</code> property is an array of <code>Reference</code> objects which are referencing the variable.</li> <li>
<code>Reference#resolved</code> property is a <code>Variable</code> object which are referenced.</li> </ul> <p>But until 1.x, the following variables and references had the wrong value (empty) in those properties:</p> <ul> <li>
<code>var</code> declarations in the global.</li> <li>
<code>function</code> declarations in the global.</li> <li>Variables defined in config files.</li> <li>Variables defined in <code>/* global */</code> comments.</li> </ul> <p>Now, those variables and references have correct values in these properties.</p> <p><code>Scope#through</code> property has references where <code>Reference#resolved</code> is <code>null</code>. So as a result of this change, the value of <code>Scope#through</code> property was changed also.</p> <p><strong>To address:</strong> If you are using <code>Scope#through</code> to find references of a built-in global variable, you need to make several changes.</p> <p>For example, this is how you might locate the <code>window</code> global variable in 1.x:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token keyword">var</span> globalScope <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">globalScope<span class="token punctuation">.</span>through<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reference</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>reference<span class="token punctuation">.</span>identifier<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"window"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token function">checkForWindow</span><span class="token punctuation">(</span>reference<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre> <p>This was a roundabout way to find the variable because it was added after the fact by ESLint. The <code>window</code> variable was in <code>Scope#through</code> because the definition couldnâ€™t be found.</p> <p>In 2.0.0, <code>window</code> is no longer located in <code>Scope#through</code> because we have added back the correct declaration. That means you can reference the <code>window</code> object (or any other global object) directly. So the previous example would change to this:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token keyword">var</span> globalScope <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">var</span> variable <span class="token operator">=</span> globalScope<span class="token punctuation">.</span>set<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"window"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>variable<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    variable<span class="token punctuation">.</span>references<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>checkForWindow<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>Further Reading: <a href="https://estools.github.io/escope/">https://estools.github.io/escope/</a></p> <h2 id="default-changes-when-using-eslintrecommended" tabindex="-1">Default Changes When Using <code>eslint:recommended</code>
</h2> <p>This will affect you if you are extending from <code>eslint:recommended</code>, and are enabling <a href="migrating-to-2.0.0../rules/no-multiple-empty-lines"><code>no-multiple-empty-lines</code></a> or <a href="migrating-to-2.0.0../rules/func-style"><code>func-style</code></a> with only a severity, such as:</p> <pre class="language-json"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"no-multiple-empty-lines"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"func-style"</span><span class="token operator">:</span> <span class="token number">2</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <p>The rule <code>no-multiple-empty-lines</code> has no default exceptions, but in ESLint <code>1.x</code>, a default from <code>eslint:recommended</code> was applied such that a maximum of two empty lines would be permitted.</p> <p>The rule <code>func-style</code> has a default configuration of <code>"expression"</code>, but in ESLint <code>1.x</code>, <code>eslint:recommended</code> defaulted it to <code>"declaration"</code>.</p> <p>ESLint 2.0.0 removes these conflicting defaults, and so you may begin seeing linting errors related to these rules.</p> <p><strong>To address:</strong> If you would like to maintain the previous behavior, update your configuration for <code>no-multiple-empty-lines</code> by adding <code>{"max": 2}</code>, and change <code>func-style</code> to <code>"declaration"</code>. For example:</p> <pre class="language-json"><code><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token property">"no-multiple-empty-lines"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">"max"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token property">"func-style"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"declaration"</span><span class="token punctuation">]</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre> <h2 id="sourcecode-constructor-node-api-changes" tabindex="-1">SourceCode constructor (Node API) changes</h2> <p><code>SourceCode</code> constructor got to handle Unicode BOM. If the first argument <code>text</code> has BOM, <code>SourceCode</code> constructor sets <code>true</code> to <code>this.hasBOM</code> and strips BOM from the text.</p> <pre class="language-js"><code><span class="highlight-line"><span class="token keyword">var</span> SourceCode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceCode<span class="token punctuation">;</span></span><br><br><span class="highlight-line"><span class="token keyword">var</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SourceCode</span><span class="token punctuation">(</span><span class="token string">"\uFEFFvar foo = bar;"</span><span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><br><span class="highlight-line"><span class="token function">assert</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span>hasBOM <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token function">assert</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span>text <span class="token operator">===</span> <span class="token string">"var foo = bar;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre> <p>So the second argument <code>ast</code> also should be parsed from stripped text.</p> <p><strong>To address:</strong> If you are using <code>SourceCode</code> constructor in your code, please parse the source code after it stripped BOM:</p> <pre class="language-js"><code><span class="highlight-line"><span class="token keyword">var</span> ast <span class="token operator">=</span> yourParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\uFEFF</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">var</span> sourceCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SourceCode</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre> <h2 id="rule-changes" tabindex="-1">Rule Changes</h2> <ul> <li>
<a href="migrating-to-2.0.0../rules/strict"><code>strict</code></a> - defaults to <code>"safe"</code> (previous default was <code>"function"</code>)</li> </ul> <h2 id="plugins-no-longer-have-default-configurations" tabindex="-1">Plugins No Longer Have Default Configurations</h2> <p>Prior to v2.0.0, plugins could specify a <code>rulesConfig</code> for the plugin. The <code>rulesConfig</code> would automatically be applied whenever someone uses the plugin, which is the opposite of what ESLint does in every other situation (where nothing is on by default). To bring plugins behavior in line, we have removed support for <code>rulesConfig</code> in plugins.</p> <p><strong>To address:</strong> If you are using a plugin in your configuration file, you will need to manually enable the plugin rules in the configuration file.</p> </div> <div class="docs-edit-link"> <a href="https://github.com/eslint/eslint/edit/main/docs/src/user-guide/migrating-to-2.0.0.md" class="c-btn c-btn--secondary">Edit this page</a> </div> </main> <div class="docs-aside"> <div class="docs-aside__content">  <nav class="docs-toc c-toc" aria-labelledby="js-toc-label"><h2 class="c-toc__label" id="js-toc-label">Table of Contents</h2> <div class="c-toc__panel" id="js-toc-panel"> <nav class="c-toc"> <ol> <li>
<a href="#rule-schema-changes">Rule Schema Changes</a> </li> <li>
<a href="#removed-rules">Removed Rules</a> </li> <li>
<a href="#configuration-cascading-changes">Configuration Cascading Changes</a> </li> <li>
<a href="#built-in-global-variables">Built-In Global Variables</a> </li> <li>
<a href="#language-options">Language Options</a> </li> <li>
<a href="#new-rules-in-eslintrecommended">New Rules in "eslint:recommended"</a> </li> <li>
<a href="#scope-analysis-changes">Scope Analysis Changes</a> </li> <li>
<a href="#default-changes-when-using-eslintrecommended">Default Changes When Using eslint:recommended</a> </li> <li>
<a href="#sourcecode-constructor-node-api-changes">SourceCode constructor (Node API) changes</a> </li> <li>
<a href="#rule-changes">Rule Changes</a> </li> <li>
<a href="#plugins-no-longer-have-default-configurations">Plugins No Longer Have Default Configurations</a> </li> </ol> </nav> </div></nav> </div> <footer class="docs-footer"> <div class="docs-socials-and-legal"> <div class="docs-social-icons"> <nav aria-labelledby="eslint-social-label" class="eslint-social-icons"> <h2 id="eslint-social-label" hidden>Social Media</h2>  </nav> </div> <div class="docs-copyright"> Â© OpenJS Foundation and ESLint contributors, <a href="https://www.openjsf.org">www.openjsf.org</a> </div> </div> <div class="docs-switchers"> <div role="region" class="theme-switcher" aria-labelledby="theme-switcher-label" id="js-theme-switcher" hidden> <h2 class="theme-switcher-label visually-hidden" id="theme-switcher-label">Theme Switcher </h2> <div class="theme-switcher__buttons"> <button class="theme-switcher__button js-toggle-button" id="light-theme-toggle" data-theme="light">  <span>Light</span> </button> <button class="theme-switcher__button js-toggle-button" id="dark-theme-toggle" data-theme="dark">  <span>Dark</span> </button> </div> </div> <div class="language-switcher"> <a href="https://eslint.org/languages/" class="switcher-fallback">Change Language</a> <div hidden role="region" class="switcher switcher--language" aria-labelledby="language-switcher-label" id="language-switcher"> <span id="language-switcher-label" hidden>Language Switcher</span> <div class="infobox visually-hidden" id="language-infobox"> Selecting a language will take you to the ESLint website in that language. </div> <label class="switcher__label" for="language-select"> <span class="label__text"> Language </span> </label> <select name="language selector" id="language-select" aria-describedby="language-infobox" class="c-custom-select switcher__select"> <option value="en" data-url="https://eslint.org" selected> ðŸ‡ºðŸ‡¸ English (US) </option> </select> </div> </div> </div> </footer> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://eslint.org/docs/latest/user-guide/migrating-to-2.0.0" class="_attribution-link" target="_blank">https://eslint.org/docs/latest/user-guide/migrating-to-2.0.0</a>
  </p>
</div>
