<h1> Optional Features </h1>  <div id="ember28883" class="ember-view">
<p>One of the ways that Ember releases guarantee stability is by following <a href="https://semver.org/">Semantic Versioning</a> (SemVer). For the Ember project this means that any feature that is to be removed must first be deprecated, and only removed when a major version is released. It also means that new features are introduced in a backwards compatible way.</p> <p>To give the project a path forward when a breaking change is mandatory, we've released the <a href="https://github.com/emberjs/ember-optional-features"><code>@ember/optional-features</code></a> addon.</p> <p>This addon does nothing by default, but provides a command-line interface to enable and disable breaking changes in Ember.</p> <h2 id="toc_installation">Installation</h2> <section aria-labelledby="toc_installation"> <p>To get started with optional features, you must install the addon:</p> <pre><code class="bash language-bash">ember install @ember/optional-features
</code></pre> <p>This will make three new commands available to Ember CLI within your project, <code>feature:list</code>, <code>feature:enable</code>, and <code>feature:disable</code>.</p> </section> <h2 id="toc_listing-features">Listing features</h2> <section aria-labelledby="toc_listing-features"> <p>The optional features available to your project will depend on the Ember version your project is using.</p> <p>To see which optional features are available, you can run the following command:</p> <pre><code class="bash language-bash">$ ember feature:list
Usage:

  To list all available features, run ember feature:list.
  To enable a feature, run ember feature:enable some-feature.
  To disable a feature, run ember feature:disable some-feature.

Available features:

  application-template-wrapper (Default: true)
    Wrap the top-level application template (application.hbs) with a `&lt;div class="ember-view"&gt;` element.
    More information: https://github.com/emberjs/rfcs/pull/280

  jquery-integration (Default: true)
    Adds jQuery to the Ember application.
    More information: https://github.com/emberjs/rfcs/pull/294
</code></pre> </section> <h2 id="toc_features">Features</h2> <section aria-labelledby="toc_features"> <p>Once you see a feature that you would like to toggle for your project you can run one of two commands, <code>ember feature:enable &lt;feature&gt;</code> and <code>ember feature:disable &lt;feature&gt;</code>.</p> <p>Let us disable <code>jquery-integration</code> to see what happens:</p> <pre><code class="bash language-bash">$ ember feature:disable jquery-integration
Disabled jquery-integration. Be sure to commit config/optional-features.json to source control!
</code></pre> <p>As we can see from the warning, <code>@ember/optional-features</code> has created a file in <code>config/optional-features.json</code> to store the configuration for your project. We commit it to our repository and we are off to the races!</p> </section> <h3 id="toc_jquery-integration">jquery-integration</h3> <section aria-labelledby="toc_jquery-integration"> <p>jQuery is commonly used for event handling and many popular libraries for charting and UI components. Ember was originally built using jQuery, but has since refactored and is no longer dependent on it. jQuery can still be used as in independent library alongside Ember, however.</p> <p>There are a few APIs that exist in Ember still that directly expose jQuery, Disabling this optional feature disables those APIs, but does not remove jQuery itself. jQuery is provided by the <code>@ember/jquery</code> addon, independent of the integration APIs.</p> </section> <h4 id="toc_migrating-away-from-and-disabling-ember-jquery-integration-apis">Migrating Away from and disabling Ember jQuery integration APIs</h4> <section aria-labelledby="toc_migrating-away-from-and-disabling-ember-jquery-integration-apis"> <p>To disable this feature, first migrate away from the jQuery integration APIs. Below is a list of the jQuery specific APIs in Ember, and how to migrate away from them.</p> <ul> <li>
<p><code>this.$()</code> in Classic Ember components. This creates a jQuery selector that targets the component's element. You can migrate away by using <code>this.element</code> instead, which is the actual DOM element for the component. If you want to continue using jQuery via <code>@ember/jquery</code>, you can do so with <code>this.element</code>:</p> <pre><code class="js language-js">import $ from 'jquery';
import Component from '@ember/copmonent';

export default class MyComponent extends Component {
didInsertElement() {
  let el = $(this.element);

  // ...
}
}
</code></pre>
</li> <li><p>Event handlers on Classic components, such as <code>click()</code> and <code>mouseEnter()</code>. These APIs still work without the integration enabled, but they no longer receive a jQuery event, they receive a native Event instead. You can convert to using native events incrementally by using the <a href="https://github.com/emberjs/ember-jquery-legacy"><code>ember-jquery-legacy</code></a> addon, which provides a function that converts a jQuery event into a native event safely. Once all of your event handlers have been converted, you can disable jQuery integration.</p></li> <li><p><code>Ember.$()</code>, which is an alias for the global jQuery. This can either be replaced with alternative APIs, or by installing <code>@ember/jquery</code> and importing it directly.</p></li> <li><p>Global acceptance test helpers like <code>find()</code> or <code>click()</code>. These can be replaced with the <code>@ember/test-helpers</code>, which is the default for test helpers now.</p></li> <li><p><code>this.$()</code> in component tests. This can be replaced with corresponding test helpers from <code>@ember/test-helpers</code>.</p></li> </ul> <p>Note that if you disable these APIs, then all addons you use must also work without them, as they will not be available at all.</p> <p>Next, follow the instructions above to install <code>@ember/optional-features</code>, and run the following command to change <code>@ember/optional-features</code>:</p> <pre><code class="sh language-sh">ember feature:disable jquery-integration
</code></pre> </section> <h4 id="toc_including-jquery-without-integration-apis">Including jQuery without integration APIs</h4> <section aria-labelledby="toc_including-jquery-without-integration-apis"> <p>If you would like to include jQuery without the Ember integration APIs, you can install <code>@ember/jquery</code>:</p> <pre><code class="sh language-sh">ember install @ember/jquery
</code></pre> <p>This will allow you to import jQuery from <code>jquery</code>:</p> <pre><code class="js language-js">import $ from 'jquery';
</code></pre> </section> <h4 id="toc_including-jquery-with-integration-apis">Including jQuery with integration APIs</h4> <section aria-labelledby="toc_including-jquery-with-integration-apis"> <p>To include jQuery in your Ember app and enable the jQuery integration APIs such as <code>this.$()</code>, follow the instructions above to install <code>@ember/optional-features</code>. Next, enable the feature:</p> <pre><code class="sh language-sh">ember feature:enable jquery-integration
</code></pre> <p>Then, install the <code>@ember/jquery</code> addon:</p> <pre><code class="sh language-sh">ember install @ember/jquery
</code></pre> <p>Now, almost anywhere in your app, you can use the various jQuery integration.</p> </section> <h4 id="toc_removing-jquery-completely">Removing jQuery completely</h4> <section aria-labelledby="toc_removing-jquery-completely"> <p>If you are working on an application that already has jQuery installed, and would like to remove it, follow these steps.</p> <p>First, refactor your own code to not depend on jQuery. See the section above on how to do this. Keep in mind that you will have to remove jQuery usage entirely, you cannot use solutions that replace the integration API with jQuery independently such as <code>$(this.element)</code>.</p> <p>Next, follow the instructions above to install <code>@ember/optional-features</code>, and run the following command to change <code>@ember/optional-features</code>:</p> <pre><code class="sh language-sh">ember feature:disable jquery-integration
</code></pre> <p>Then, remove <code>@ember/jquery</code> from your package.json.</p> <p>This will remove jQuery from your vendor.js bundle and disable any use of jQuery in Ember itself. Now your app will be about 30KB lighter!</p> </section> <h3 id="toc_application-template-wrapper">application-template-wrapper</h3> <section aria-labelledby="toc_application-template-wrapper"> <p>With this feature <em>enabled</em> Ember creates a wrapping div around the entire rendered application. Effectively, it is creating a <code>&lt;div class="ember-view"&gt;</code> element which wraps the contents of an application's <code>app/templates/application.hbs</code> file.</p> <p>When <em>disabled</em>, this div will not be output. This is usually desirable, but may break the styling of an existing application in subtle ways:</p> <ul> <li>Perhaps the application relied on the root <code>.ember-view</code> for styles (CSS).</li> <li>Perhaps the <code>&lt;div&gt;</code> itself was the target of styles (e.g. <code>body &gt; div &gt; .some-child</code>).</li> <li>The presence of a wrapping <code>&lt;div&gt;</code> means the application is contained in a block-layout element. When removed, and depending on if the application specifies a <code>rootElement</code> in <code>config/environment.js</code>, the application may no longer be contained in a block-layout element.</li> </ul> <p>If your application relies on those behaviors it is still recommended that you <em>disable</em> this feature, and simply add an appropriate element to <code>app/templates/application.hbs</code> wrapping that template's <code>{{outlet}}</code>.</p> <p>For more information, see <a href="https://github.com/emberjs/rfcs/blob/master/text/0280-remove-application-wrapper.md">RFC #280</a>.</p> </section> <h3 id="toc_template-only-glimmer-components">template-only-glimmer-components</h3> <section aria-labelledby="toc_template-only-glimmer-components"> <p>With this feature <em>disabled</em> Ember will create an implicit element for components which have no JavaScript file ("template-only components").</p> <p>Enabling this feature will result in only the contents of the template being rendered, and additionally in no classic Ember component instance being instantiated to provide it context.</p> <p>Some examples of how <em>enabling</em> this feature impacts app code are:</p> <ul> <li>In template-only component templates statements like <code>{{this}}</code>, <code>{{this.foo}}</code> and <code>{{foo}}</code> will be <code>undefined</code>. Accessing arguments as <code>{{@foo}}</code> will continue to work.</li> <li>If this feature is enabled in an application with existing template-only components, the removal of the wrapping <code>&lt;div&gt;</code> will happen to all uses of those template-only components. This can impact style and logic in a breaking manner.</li> <li>Passing classes to an invocation (i.e. <code>{{my-component class="..."}}</code>) will no longer result in those classes being present on any element. This could be a change in behavior which impacts any reflected attribute passed as an argument, such as <code>id=</code> or <code>tagName=</code>.</li> <li>Templates can use <code>...attributes</code> to target attributes and element modifiers passed from an angle bracket invocation.</li> </ul> <p>Enabling this feature makes template-only components more consistent with angle-bracket invocation and with Glimmer components. Additionally it improves the performance of template-only components (there is no JS object instantiated to provide context) and makes them an excellent replacement for use of Ember's more complex and now discouraged API <code>{{partial</code>.</p> <p>It is recommended that you <em>enable</em> this feature. Existing applications adopting this optional feature should add a <code>.js</code> file for any existing template-only components containing a basic Ember component class. This will maintain backwards compatibility for existing templates while new template-only components gain the advantages of this feature.</p> <p>For more information, see <a href="https://github.com/emberjs/rfcs/blob/master/text/0278-template-only-components.md">RFC #278</a>.</p> </section> <h3 id="toc_default-async-observers">default-async-observers</h3> <section aria-labelledby="toc_default-async-observers"> <p>With this feature <em>enabled</em>, Ember will run all observers in the application asynchronously by default. This leads to observers running in the run loop <em>after</em> the one in which the observed properties were updated.</p> <p>If the feature is <em>disabled</em>, observers run synchronously and will be invoked as soon as their observed properties update.</p> <p>Async observers are more performant than those that run synchronously and can help you to manage your application state in a more predictable manner. This is one of the reasons, why the <code>default-async-observers</code> feature is <strong>enabled by default</strong> in newly created, modern Ember applications.</p> <p>The <code>default-async-observers</code> feature affects the behavior of observers application-wide, but you can still instruct individual observers to run synchronously or async manually. By using the <code>sync: true</code> option, observers who are otherwise async by default can be marked as synchronous manually. Similarly, observers can be set to run asynchronously using the <code>sync: false</code> option.</p> <pre><code class="javascript language-javascript">import { observer } from '@ember/object';

Image.extend({
  onImageSizeChange: observer({
    dependentKeys: ['width', 'height'],
    fn() {
      // Fires async after width or height have updated
    },
    sync: false,
  })
});
</code></pre> <p>While the <code>default-async-observers</code> feature is only enabled by default in modern Ember applications, you can enable this optional feature in older apps (Ember 3.13+) as follows:</p> <pre><code class="bash language-bash">$ ember feature:enable default-async-observers
# Enable async observers application-wide. Be sure to commit config/optional-features.json to source control!
</code></pre>  </section> </div> <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://guides.emberjs.com/v3.25.0/configuring-ember/optional-features" class="_attribution-link" target="_blank">https://guides.emberjs.com/v3.25.0/configuring-ember/optional-features</a>
  </p>
</div>
