<h1>Generators</h1> <p>You can create a generator when you need Jekyll to create additional content based on your own rules.</p> <p>A generator is a subclass of <code>Jekyll::Generator</code> that defines a <code>generate</code> method, which receives an instance of <a href="https://github.com/jekyll/jekyll/blob/master/lib/jekyll/site.rb"><code>Jekyll::Site</code></a>. The return value of <code>generate</code> is ignored.</p> <p>Generators run after Jekyll has made an inventory of the existing content, and before the site is generated. Pages with front matter are stored as instances of <a href="https://github.com/jekyll/jekyll/blob/master/lib/jekyll/page.rb"><code>Jekyll::Page</code></a> and are available via <code>site.pages</code>. Static files become instances of <a href="https://github.com/jekyll/jekyll/blob/master/lib/jekyll/static_file.rb"><code>Jekyll::StaticFile</code></a> and are available via <code>site.static_files</code>. See <a href="../../variables/index">the Variables documentation page</a> and <a href="https://github.com/jekyll/jekyll/blob/master/lib/jekyll/site.rb"><code>Jekyll::Site</code></a> for details.</p> <p>In the following example, the generator will inject values computed at build time for template variables. The template named <code>reading.html</code> has two undefined variables <code>ongoing</code> and <code>done</code> that will be defined or assigned a value when the generator runs:</p> <pre data-language="ruby">module Reading
  class Generator &lt; Jekyll::Generator
    def generate(site)
      book_data = site.data['books']
      ongoing = book_data.select { |book| book['status'] == 'ongoing' }
      done = book_data.select { |book| book['status'] == 'finished' }

      # get template
      reading = site.pages.find { |page| page.name == 'reading.html'}

      # inject data into template
      reading.data['ongoing'] = ongoing
      reading.data['done'] = done
    end
  end
end
</pre> <p>The following example is a more complex generator that generates new pages.</p> <p>In this example, the aim of the generator is to create a page for each category registered in the <code>site</code>. The pages are created at runtime, so their contents, front matter and other attributes need to be designed by the plugin itself.</p> <ul> <li>The pages are intended to render a list of all documents under a given category. So the basename of the rendered file would be better as <code>index.html</code>.</li> <li>Having the ability to configure the pages via <a href="../../configuration/front-matter-defaults/index">front matter defaults</a> would be awesome! So assigning a particular <code>type</code> to these pages would be beneficial.</li> </ul> <pre data-language="ruby">module SamplePlugin
  class CategoryPageGenerator &lt; Jekyll::Generator
    safe true

    def generate(site)
      site.categories.each do |category, posts|
        site.pages &lt;&lt; CategoryPage.new(site, category, posts)
      end
    end
  end

  # Subclass of `Jekyll::Page` with custom method definitions.
  class CategoryPage &lt; Jekyll::Page
    def initialize(site, category, posts)
      @site = site             # the current site instance.
      @base = site.source      # path to the source directory.
      @dir  = category         # the directory the page will reside in.

      # All pages have the same filename, so define attributes straight away.
      @basename = 'index'      # filename without the extension.
      @ext      = '.html'      # the extension.
      @name     = 'index.html' # basically @basename + @ext.

      # Initialize data hash with a key pointing to all posts under current category.
      # This allows accessing the list in a template via `page.linked_docs`.
      @data = {
        'linked_docs' =&gt; posts
      }

      # Look up front matter defaults scoped to type `categories`, if given key
      # doesn't exist in the `data` hash.
      data.default_proc = proc do |_, key|
        site.frontmatter_defaults.find(relative_path, :categories, key)
      end
    end

    # Placeholders that are used in constructing page URL.
    def url_placeholders
      {
        :category   =&gt; @dir,
        :basename   =&gt; basename,
        :output_ext =&gt; output_ext,
      }
    end
  end
end
</pre> <p>The generated pages can now be set up to use a particular layout or output at a particular path in the destination directory all via the config file using front matter defaults. For example:</p> <pre data-language="yaml"># _config.yml

defaults:
  - scope:
      type: categories  # select all category pages
    values:
      layout: category_page
      permalink: categories/:category/
</pre> <h2 id="technical-aspects">Technical Aspects</h2> <p>Generators need to implement only one method:</p> <div class="mobile-side-scroller"> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <p><code>generate</code></p> </td> <td> <p>Generates content as a side-effect.</p> </td> </tr> </tbody> </table> </div> <p>If your generator is contained within a single file, it can be named whatever you want but it should have an <code>.rb</code> extension. If your generator is split across multiple files, it should be packaged as a Rubygem to be published at https://rubygems.org/. In this case, the name of the gem depends on the availability of the name at that site because no two gems can have the same name.</p> <p>By default, Jekyll looks for generators in the <code>_plugins</code> directory. However, you can change the default directory by assigning the desired name to the key <code>plugins_dir</code> in the config file.</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://jekyllrb.com/docs/plugins/generators/" class="_attribution-link" target="_blank">https://jekyllrb.com/docs/plugins/generators/</a>
  </p>
</div>
