<h1 id="contributing">Contributing to pandas</h1>  <p class="topic-title first" id="contributing-to-pandas">Table of contents:</p> <ul class="simple"> <li><a class="reference internal" href="#where-to-start" id="id3">Where to start?</a></li> <li><a class="reference internal" href="#bug-reports-and-enhancement-requests" id="id4">Bug reports and enhancement requests</a></li> <li>
<a class="reference internal" href="#working-with-the-code" id="id5">Working with the code</a><ul> <li><a class="reference internal" href="#version-control-git-and-github" id="id6">Version control, Git, and GitHub</a></li> <li><a class="reference internal" href="#getting-started-with-git" id="id7">Getting started with Git</a></li> <li><a class="reference internal" href="#forking" id="id8">Forking</a></li> <li>
<a class="reference internal" href="#creating-a-development-environment" id="id9">Creating a development environment</a><ul> <li><a class="reference internal" href="#installing-a-c-compiler" id="id10">Installing a C compiler</a></li> <li><a class="reference internal" href="#creating-a-python-environment" id="id11">Creating a Python environment</a></li> <li><a class="reference internal" href="#creating-a-python-environment-pip" id="id12">Creating a Python environment (pip)</a></li> </ul> </li> <li><a class="reference internal" href="#creating-a-branch" id="id13">Creating a branch</a></li> </ul> </li> <li>
<a class="reference internal" href="#contributing-to-the-documentation" id="id14">Contributing to the documentation</a><ul> <li><a class="reference internal" href="#about-the-pandas-documentation" id="id15">About the pandas documentation</a></li> <li><a class="reference internal" href="#updating-a-pandas-docstring" id="id16">Updating a pandas docstring</a></li> <li>
<a class="reference internal" href="#how-to-build-the-pandas-documentation" id="id17">How to build the pandas documentation</a><ul> <li><a class="reference internal" href="#requirements" id="id18">Requirements</a></li> <li><a class="reference internal" href="#building-the-documentation" id="id19">Building the documentation</a></li> <li><a class="reference internal" href="#building-master-branch-documentation" id="id20">Building master branch documentation</a></li> </ul> </li> </ul> </li> <li>
<a class="reference internal" href="#contributing-to-the-code-base" id="id21">Contributing to the code base</a><ul> <li><a class="reference internal" href="#code-standards" id="id22">Code standards</a></li> <li>
<a class="reference internal" href="#optional-dependencies" id="id23">Optional dependencies</a><ul> <li><a class="reference internal" href="#c-cpplint" id="id24">C (cpplint)</a></li> <li><a class="reference internal" href="#python-pep8-black" id="id25">Python (PEP8 / black)</a></li> <li><a class="reference internal" href="#import-formatting" id="id26">Import formatting</a></li> <li><a class="reference internal" href="#backwards-compatibility" id="id27">Backwards compatibility</a></li> </ul> </li> <li><a class="reference internal" href="#testing-with-continuous-integration" id="id28">Testing with continuous integration</a></li> <li>
<a class="reference internal" href="#test-driven-development-code-writing" id="id29">Test-driven development/code writing</a><ul> <li><a class="reference internal" href="#writing-tests" id="id30">Writing tests</a></li> <li><a class="reference internal" href="#transitioning-to-pytest" id="id31">Transitioning to <code>pytest</code></a></li> <li><a class="reference internal" href="#using-pytest" id="id32">Using <code>pytest</code></a></li> <li><a class="reference internal" href="#using-hypothesis" id="id33">Using <code>hypothesis</code></a></li> <li><a class="reference internal" href="#testing-warnings" id="id34">Testing warnings</a></li> </ul> </li> <li><a class="reference internal" href="#running-the-test-suite" id="id35">Running the test suite</a></li> <li><a class="reference internal" href="#running-the-performance-test-suite" id="id36">Running the performance test suite</a></li> <li><a class="reference internal" href="#documenting-your-code" id="id37">Documenting your code</a></li> </ul> </li> <li>
<a class="reference internal" href="#contributing-your-changes-to-pandas" id="id38">Contributing your changes to pandas</a><ul> <li><a class="reference internal" href="#committing-your-code" id="id39">Committing your code</a></li> <li><a class="reference internal" href="#pushing-your-changes" id="id40">Pushing your changes</a></li> <li><a class="reference internal" href="#review-your-code" id="id41">Review your code</a></li> <li><a class="reference internal" href="#finally-make-the-pull-request" id="id42">Finally, make the pull request</a></li> <li><a class="reference internal" href="#updating-your-pull-request" id="id43">Updating your pull request</a></li> <li><a class="reference internal" href="#delete-your-merged-branch-optional" id="id44">Delete your merged branch (optional)</a></li> </ul> </li> </ul>   <h2 id="where-to-start">Where to start?</h2> <p>All contributions, bug reports, bug fixes, documentation improvements, enhancements, and ideas are welcome.</p> <p>If you are brand new to pandas or open-source development, we recommend going through the <a class="reference external" href="https://github.com/pandas-dev/pandas/issues">GitHub “issues” tab</a> to find issues that interest you. There are a number of issues listed under <a class="reference external" href="https://github.com/pandas-dev/pandas/issues?labels=Docs&amp;sort=updated&amp;state=open">Docs</a> and <a class="reference external" href="https://github.com/pandas-dev/pandas/issues?labels=good+first+issue&amp;sort=updated&amp;state=open">good first issue</a> where you could start out. Once you’ve found an interesting issue, you can return here to get your development environment setup.</p> <p>Feel free to ask questions on the <a class="reference external" href="https://groups.google.com/forum/?fromgroups#!forum/pydata">mailing list</a> or on <a class="reference external" href="https://gitter.im/pydata/pandas">Gitter</a>.</p>   <h2 id="contributing-bug-reports">Bug reports and enhancement requests</h2> <p id="bug-reports-and-enhancement-requests">Bug reports are an important part of making <em>pandas</em> more stable. Having a complete bug report will allow others to reproduce the bug and provide insight into fixing. See <a class="reference external" href="https://stackoverflow.com/help/mcve">this stackoverflow article</a> and <a class="reference external" href="http://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports">this blogpost</a> for tips on writing a good bug report.</p> <p>Trying the bug-producing code out on the <em>master</em> branch is often a worthwhile exercise to confirm the bug still exists. It is also worth searching existing bug reports and pull requests to see if the issue has already been reported and/or fixed.</p> <p>Bug reports must:</p> <ol class="arabic"> <li>
<p class="first">Include a short, self-contained Python snippet reproducing the problem. You can format the code nicely by using <a class="reference external" href="http://github.github.com/github-flavored-markdown/">GitHub Flavored Markdown</a>:</p> <pre data-language="python">```python
&gt;&gt;&gt; from pandas import DataFrame
&gt;&gt;&gt; df = DataFrame(...)
...
```
</pre> </li> <li>
<p class="first">Include the full version string of <em>pandas</em> and its dependencies. You can use the built-in function:</p> <pre data-language="python">&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; pd.show_versions()
</pre> </li> <li>Explain why the current behavior is wrong/not desired and what you expect instead. </li> </ol> <p>The issue will then show up to the <em>pandas</em> community and be open to comments/ideas from others.</p>   <h2 id="contributing-github">Working with the code</h2> <p id="working-with-the-code">Now that you have an issue you want to fix, enhancement to add, or documentation to improve, you need to learn how to work with GitHub and the <em>pandas</em> code base.</p>  <h3 id="contributing-version-control">Version control, Git, and GitHub</h3> <p id="version-control-git-and-github">To the new user, working with Git is one of the more daunting aspects of contributing to <em>pandas</em>. It can very quickly become overwhelming, but sticking to the guidelines below will help keep the process straightforward and mostly trouble free. As always, if you are having difficulties please feel free to ask for help.</p> <p>The code is hosted on <a class="reference external" href="https://www.github.com/pandas-dev/pandas">GitHub</a>. To contribute you will need to sign up for a <a class="reference external" href="https://github.com/signup/free">free GitHub account</a>. We use <a class="reference external" href="http://git-scm.com/">Git</a> for version control to allow many people to work together on the project.</p> <p>Some great resources for learning Git:</p> <ul class="simple"> <li>the <a class="reference external" href="http://help.github.com/">GitHub help pages</a>.</li> <li>the <a class="reference external" href="http://docs.scipy.org/doc/numpy/dev/index.html">NumPy’s documentation</a>.</li> <li>Matthew Brett’s <a class="reference external" href="http://matthew-brett.github.com/pydagogue/">Pydagogue</a>.</li> </ul>   <h3 id="getting-started-with-git">Getting started with Git</h3> <p><a class="reference external" href="http://help.github.com/set-up-git-redirect">GitHub has instructions</a> for installing git, setting up your SSH key, and configuring git. All these steps need to be completed before you can work seamlessly between your local repository and GitHub.</p>   <h3 id="contributing-forking">Forking</h3> <p id="forking">You will need your own fork to work on the code. Go to the <a class="reference external" href="https://github.com/pandas-dev/pandas">pandas project page</a> and hit the <code>Fork</code> button. You will want to clone your fork to your machine:</p> <pre data-language="python">git clone https://github.com/your-user-name/pandas.git pandas-yourname
cd pandas-yourname
git remote add upstream https://github.com/pandas-dev/pandas.git
</pre> <p>This creates the directory <code>pandas-yourname</code> and connects your repository to the upstream (main project) <em>pandas</em> repository.</p>   <h3 id="contributing-dev-env">Creating a development environment</h3> <p id="creating-a-development-environment">To test out code changes, you’ll need to build pandas from source, which requires a C compiler and Python environment. If you’re making documentation changes, you can skip to <a class="reference internal" href="#contributing-documentation"><span class="std std-ref">Contributing to the documentation</span></a> but you won’t be able to build the documentation locally before pushing your changes.</p>  <h4 id="contributing-dev-c">Installing a C compiler</h4> <p id="installing-a-c-compiler">Pandas uses C extensions (mostly written using Cython) to speed up certain operations. To install pandas from source, you need to compile these C extensions, which means you need a C compiler. This process depends on which platform you’re using. Follow the <a class="reference external" href="https://devguide.python.org/setup/#compile-and-build">CPython contributing guide</a> for getting a compiler installed. You don’t need to do any of the <code>./configure</code> or <code>make</code> steps; you only need to install the compiler.</p> <p>For Windows developers, when using Python 3.5 and later, it is sufficient to install <a class="reference external" href="https://visualstudio.com/">Visual Studio 2017</a> with the <strong>Python development workload</strong> and the <strong>Python native development tools</strong> option. Otherwise, the following links may be helpful.</p> <ul class="simple"> <li><a class="reference external" href="https://blogs.msdn.microsoft.com/pythonengineering/2017/03/07/python-support-in-vs2017/">https://blogs.msdn.microsoft.com/pythonengineering/2017/03/07/python-support-in-vs2017/</a></li> <li><a class="reference external" href="https://blogs.msdn.microsoft.com/pythonengineering/2016/04/11/unable-to-find-vcvarsall-bat/">https://blogs.msdn.microsoft.com/pythonengineering/2016/04/11/unable-to-find-vcvarsall-bat/</a></li> <li><a class="reference external" href="https://github.com/conda/conda-recipes/wiki/Building-from-Source-on-Windows-32-bit-and-64-bit">https://github.com/conda/conda-recipes/wiki/Building-from-Source-on-Windows-32-bit-and-64-bit</a></li> <li><a class="reference external" href="https://cowboyprogrammer.org/building-python-wheels-for-windows/">https://cowboyprogrammer.org/building-python-wheels-for-windows/</a></li> <li><a class="reference external" href="https://blog.ionelmc.ro/2014/12/21/compiling-python-extensions-on-windows/">https://blog.ionelmc.ro/2014/12/21/compiling-python-extensions-on-windows/</a></li> <li><a class="reference external" href="https://support.enthought.com/hc/en-us/articles/204469260-Building-Python-extensions-with-Canopy">https://support.enthought.com/hc/en-us/articles/204469260-Building-Python-extensions-with-Canopy</a></li> </ul> <p>Let us know if you have any difficulties by opening an issue or reaching out on <a class="reference external" href="https://gitter.im/pydata/pandas">Gitter</a>.</p>   <h4 id="contributing-dev-python">Creating a Python environment</h4> <p id="creating-a-python-environment">Now that you have a C compiler, create an isolated pandas development environment:</p> <ul class="simple"> <li>Install either <a class="reference external" href="https://www.anaconda.com/download/">Anaconda</a> or <a class="reference external" href="https://conda.io/miniconda.html">miniconda</a>
</li> <li>Make sure your conda is up to date (<code>conda update conda</code>)</li> <li>Make sure that you have <a class="reference internal" href="#contributing-forking"><span class="std std-ref">cloned the repository</span></a>
</li> <li>
<code>cd</code> to the <em>pandas</em> source directory</li> </ul> <p>We’ll now kick off a three-step process:</p> <ol class="arabic simple"> <li>Install the build dependencies</li> <li>Build and install pandas</li> <li>Install the optional dependencies</li> </ol> <pre data-language="none"># Create and activate the build environment
conda env create -f environment.yml
conda activate pandas-dev

# or with older versions of Anaconda:
source activate pandas-dev

# Build and install pandas
python setup.py build_ext --inplace -j 4
python -m pip install -e .
</pre> <p>At this point you should be able to import pandas from your locally built version:</p> <pre data-language="python">$ python  # start an interpreter
&gt;&gt;&gt; import pandas
&gt;&gt;&gt; print(pandas.__version__)
0.22.0.dev0+29.g4ad6d4d74
</pre> <p>This will create the new environment, and not touch any of your existing environments, nor any existing Python installation.</p> <p>To view your environments:</p> <pre data-language="python">conda info -e
</pre> <p>To return to your root environment:</p> <pre data-language="python">conda deactivate
</pre> <p>See the full conda docs <a class="reference external" href="http://conda.pydata.org/docs">here</a>.</p>   <h4 id="contributing-pip">Creating a Python environment (pip)</h4> <p id="creating-a-python-environment-pip">If you aren’t using conda for your development environment, follow these instructions. You’ll need to have at least python3.5 installed on your system.</p> <pre data-language="none"># Create a virtual environment
# Use an ENV_DIR of your choice. We'll use ~/virtualenvs/pandas-dev
# Any parent directories should already exist
python3 -m venv ~/virtualenvs/pandas-dev
# Activate the virtualenv
. ~/virtualenvs/pandas-dev/bin/activate

# Install the build dependencies
python -m pip install -r requirements-dev.txt

# Build and install pandas
python setup.py build_ext --inplace -j 4
python -m pip install -e .
</pre>    <h3 id="creating-a-branch">Creating a branch</h3> <p>You want your master branch to reflect only production-ready code, so create a feature branch for making your changes. For example:</p> <pre data-language="python">git branch shiny-new-feature
git checkout shiny-new-feature
</pre> <p>The above can be simplified to:</p> <pre data-language="python">git checkout -b shiny-new-feature
</pre> <p>This changes your working directory to the shiny-new-feature branch. Keep any changes in this branch specific to one bug or feature so it is clear what the branch brings to <em>pandas</em>. You can have many shiny-new-features and switch in between them using the git checkout command.</p> <p>When creating this branch, make sure your master branch is up to date with the latest upstream master version. To update your local master branch, you can do:</p> <pre data-language="python">git checkout master
git pull upstream master --ff-only
</pre> <p>When you want to update the feature branch with changes in master after you created the branch, check the section on <a class="reference internal" href="#contributing-update-pr"><span class="std std-ref">updating a PR</span></a>.</p>    <h2 id="contributing-documentation">Contributing to the documentation</h2> <p id="contributing-to-the-documentation">Contributing to the documentation benefits everyone who uses <em>pandas</em>. We encourage you to help us improve the documentation, and you don’t have to be an expert on <em>pandas</em> to do so! In fact, there are sections of the docs that are worse off after being written by experts. If something in the docs doesn’t make sense to you, updating the relevant section after you figure it out is a great way to ensure it will help the next person.</p>  <p class="topic-title first">Documentation:</p> <ul class="simple"> <li><a class="reference internal" href="#about-the-pandas-documentation" id="id45">About the pandas documentation</a></li> <li><a class="reference internal" href="#updating-a-pandas-docstring" id="id46">Updating a pandas docstring</a></li> <li>
<a class="reference internal" href="#how-to-build-the-pandas-documentation" id="id47">How to build the pandas documentation</a><ul> <li><a class="reference internal" href="#requirements" id="id48">Requirements</a></li> <li><a class="reference internal" href="#building-the-documentation" id="id49">Building the documentation</a></li> <li><a class="reference internal" href="#building-master-branch-documentation" id="id50">Building master branch documentation</a></li> </ul> </li> </ul>   <h3 id="about-the-pandas-documentation">About the pandas documentation</h3> <p>The documentation is written in <strong>reStructuredText</strong>, which is almost like writing in plain English, and built using <a class="reference external" href="http://sphinx.pocoo.org/">Sphinx</a>. The Sphinx Documentation has an excellent <a class="reference external" href="http://sphinx.pocoo.org/rest.html">introduction to reST</a>. Review the Sphinx docs to perform more complex changes to the documentation as well.</p> <p>Some other important things to know about the docs:</p> <ul> <li>
<p class="first">The <em>pandas</em> documentation consists of two parts: the docstrings in the code itself and the docs in this folder <code>doc/</code>.</p> <p>The docstrings provide a clear explanation of the usage of the individual functions, while the documentation in this folder consists of tutorial-like overviews per topic together with some other information (what’s new, installation, etc).</p> </li> <li>
<p class="first">The docstrings follow a pandas convention, based on the <strong>Numpy Docstring Standard</strong>. Follow the <a class="reference internal" href="contributing_docstring#docstring"><span class="std std-ref">pandas docstring guide</span></a> for detailed instructions on how to write a correct docstring.</p>  <ul> <li class="toctree-l1">
<a class="reference internal" href="contributing_docstring">pandas docstring guide</a><ul> <li class="toctree-l2"><a class="reference internal" href="contributing_docstring#about-docstrings-and-standards">About docstrings and standards</a></li> <li class="toctree-l2"><a class="reference internal" href="contributing_docstring#writing-a-docstring">Writing a docstring</a></li> <li class="toctree-l2"><a class="reference internal" href="contributing_docstring#sharing-docstrings">Sharing docstrings</a></li> </ul> </li> </ul>  </li> <li>
<p class="first">The tutorials make heavy use of the <a class="reference external" href="http://matplotlib.org/sampledoc/ipython_directive.html">ipython directive</a> sphinx extension. This directive lets you put code in the documentation which will be run during the doc build. For example:</p> <pre data-language="python">.. ipython:: python

    x = 2
    x**3
</pre> <p>will be rendered as:</p> <pre data-language="python">In [1]: x = 2

In [2]: x**3
Out[2]: 8
</pre> <p>Almost all code examples in the docs are run (and the output saved) during the doc build. This approach means that code examples will always be up to date, but it does make the doc building a bit more complex.</p> </li> <li>
<p class="first">Our API documentation in <code>doc/source/api.rst</code> houses the auto-generated documentation from the docstrings. For classes, there are a few subtleties around controlling which methods and attributes have pages auto-generated.</p> <p>We have two autosummary templates for classes.</p> <ol class="arabic simple"> <li>
<code>_templates/autosummary/class.rst</code>. Use this when you want to automatically generate a page for every public method and attribute on the class. The <code>Attributes</code> and <code>Methods</code> sections will be automatically added to the class’ rendered documentation by numpydoc. See <code>DataFrame</code> for an example.</li> <li>
<code>_templates/autosummary/class_without_autosummary</code>. Use this when you want to pick a subset of methods / attributes to auto-generate pages for. When using this template, you should include an <code>Attributes</code> and <code>Methods</code> section in the class docstring. See <code>CategoricalIndex</code> for an example.</li> </ol> <p>Every method should be included in a <code>toctree</code> in <code>api.rst</code>, else Sphinx will emit a warning.</p> </li> </ul> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>The <code>.rst</code> files are used to automatically generate Markdown and HTML versions of the docs. For this reason, please do not edit <code>CONTRIBUTING.md</code> directly, but instead make any changes to <code>doc/source/development/contributing.rst</code>. Then, to generate <code>CONTRIBUTING.md</code>, use <a class="reference external" href="http://johnmacfarlane.net/pandoc/">pandoc</a> with the following command:</p> <pre data-language="python">pandoc doc/source/development/contributing.rst -t markdown_github &gt; CONTRIBUTING.md
</pre> </div> <p>The utility script <code>scripts/validate_docstrings.py</code> can be used to get a csv summary of the API documentation. And also validate common errors in the docstring of a specific class, function or method. The summary also compares the list of methods documented in <code>doc/source/api.rst</code> (which is used to generate the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/api.html">API Reference</a> page) and the actual public methods. This will identify methods documented in <code>doc/source/api.rst</code> that are not actually class methods, and existing methods that are not documented in <code>doc/source/api.rst</code>.</p>   <h3 id="updating-a-pandas-docstring">Updating a pandas docstring</h3> <p>When improving a single function or method’s docstring, it is not necessarily needed to build the full documentation (see next section). However, there is a script that checks a docstring (for example for the <code>DataFrame.mean</code> method):</p> <pre data-language="python">python scripts/validate_docstrings.py pandas.DataFrame.mean
</pre> <p>This script will indicate some formatting errors if present, and will also run and test the examples included in the docstring. Check the <a class="reference internal" href="contributing_docstring#docstring"><span class="std std-ref">pandas docstring guide</span></a> for a detailed guide on how to format the docstring.</p> <p>The examples in the docstring (‘doctests’) must be valid Python code, that in a deterministic way returns the presented output, and that can be copied and run by users. This can be checked with the script above, and is also tested on Travis. A failing doctest will be a blocker for merging a PR. Check the <a class="reference internal" href="contributing_docstring#docstring-examples"><span class="std std-ref">examples</span></a> section in the docstring guide for some tips and tricks to get the doctests passing.</p> <p>When doing a PR with a docstring update, it is good to post the output of the validation script in a comment on github.</p>   <h3 id="how-to-build-the-pandas-documentation">How to build the pandas documentation</h3>  <h4 id="requirements">Requirements</h4> <p>First, you need to have a development environment to be able to build pandas (see the docs on <a class="reference internal" href="#contributing-dev-env"><span class="std std-ref">creating a development environment above</span></a>).</p>   <h4 id="building-the-documentation">Building the documentation</h4> <p>So how do you build the docs? Navigate to your local <code>doc/</code> directory in the console and run:</p> <pre data-language="python">python make.py html
</pre> <p>Then you can find the HTML output in the folder <code>doc/build/html/</code>.</p> <p>The first time you build the docs, it will take quite a while because it has to run all the code examples and build all the generated docstring pages. In subsequent evocations, sphinx will try to only build the pages that have been modified.</p> <p>If you want to do a full clean build, do:</p> <pre data-language="python">python make.py clean
python make.py html
</pre> <p>You can tell <code>make.py</code> to compile only a single section of the docs, greatly reducing the turn-around time for checking your changes.</p> <pre data-language="python"># omit autosummary and API section
python make.py clean
python make.py --no-api

# compile the docs with only a single section, relative to the "source" folder.
# For example, compiling only this guide (docs/source/development/contributing.rst)
python make.py clean
python make.py --single development/contributing.rst

# compile the reference docs for a single function
python make.py clean
python make.py --single pandas.DataFrame.join
</pre> <p>For comparison, a full documentation build may take 15 minutes, but a single section may take 15 seconds. Subsequent builds, which only process portions you have changed, will be faster.</p> <p>You can also specify to use multiple cores to speed up the documentation build:</p> <pre data-language="python">python make.py html --num-jobs 4
</pre> <p>Open the following file in a web browser to see the full documentation you just built:</p> <pre data-language="python">doc/build/html/index.html
</pre> <p>And you’ll have the satisfaction of seeing your new and improved documentation!</p>   <h4 id="contributing-dev-docs">Building master branch documentation</h4> <p id="building-master-branch-documentation">When pull requests are merged into the <em>pandas</em> <code>master</code> branch, the main parts of the documentation are also built by Travis-CI. These docs are then hosted <a class="reference external" href="https://dev.pandas.io">here</a>, see also the <a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> section.</p>     <h2 id="contributing-code">Contributing to the code base</h2>  <p class="topic-title first" id="contributing-to-the-code-base">Code Base:</p> <ul class="simple"> <li><a class="reference internal" href="#code-standards" id="id51">Code standards</a></li> <li>
<a class="reference internal" href="#optional-dependencies" id="id52">Optional dependencies</a><ul> <li><a class="reference internal" href="#c-cpplint" id="id53">C (cpplint)</a></li> <li><a class="reference internal" href="#python-pep8-black" id="id54">Python (PEP8 / black)</a></li> <li><a class="reference internal" href="#import-formatting" id="id55">Import formatting</a></li> <li><a class="reference internal" href="#backwards-compatibility" id="id56">Backwards compatibility</a></li> </ul> </li> <li><a class="reference internal" href="#testing-with-continuous-integration" id="id57">Testing with continuous integration</a></li> <li>
<a class="reference internal" href="#test-driven-development-code-writing" id="id58">Test-driven development/code writing</a><ul> <li><a class="reference internal" href="#writing-tests" id="id59">Writing tests</a></li> <li><a class="reference internal" href="#transitioning-to-pytest" id="id60">Transitioning to <code>pytest</code></a></li> <li><a class="reference internal" href="#using-pytest" id="id61">Using <code>pytest</code></a></li> <li><a class="reference internal" href="#using-hypothesis" id="id62">Using <code>hypothesis</code></a></li> <li><a class="reference internal" href="#testing-warnings" id="id63">Testing warnings</a></li> </ul> </li> <li><a class="reference internal" href="#running-the-test-suite" id="id64">Running the test suite</a></li> <li><a class="reference internal" href="#running-the-performance-test-suite" id="id65">Running the performance test suite</a></li> <li><a class="reference internal" href="#documenting-your-code" id="id66">Documenting your code</a></li> </ul>   <h3 id="code-standards">Code standards</h3> <p>Writing good code is not just about what you write. It is also about <em>how</em> you write it. During <a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> testing, several tools will be run to check your code for stylistic errors. Generating any warnings will cause the test to fail. Thus, good style is a requirement for submitting code to <em>pandas</em>.</p> <p>There is a tool in pandas to help contributors verify their changes before contributing them to the project:</p> <pre data-language="python">./ci/code_checks.sh
</pre> <p>The script verifies the linting of code files, it looks for common mistake patterns (like missing spaces around sphinx directives that make the documentation not being rendered properly) and it also validates the doctests. It is possible to run the checks independently by using the parameters <code>lint</code>, <code>patterns</code> and <code>doctests</code> (e.g. <code>./ci/code_checks.sh lint</code>).</p> <p>In addition, because a lot of people use our library, it is important that we do not make sudden changes to the code that could have the potential to break a lot of user code as a result, that is, we need it to be as <em>backwards compatible</em> as possible to avoid mass breakages.</p> <p>Additional standards are outlined on the <a class="reference external" href="https://github.com/pandas-dev/pandas/wiki/Code-Style-and-Conventions">code style wiki page</a>.</p>   <h3 id="optional-dependencies">Optional dependencies</h3> <p>Optional dependencies (e.g. matplotlib) should be imported with the private helper <code>pandas.compat._optional.import_optional_dependency</code>. This ensures a consistent error message when the dependency is not met.</p> <p>All methods using an optional dependency should include a test asserting that an <code>ImportError</code> is raised when the optional dependency is not found. This test should be skipped if the library is present.</p> <p>All optional dependencies should be documented in <a class="reference internal" href="../install#install-optional-dependencies"><span class="std std-ref">Optional dependencies</span></a> and the minimum required version should be set in the <code>pandas.compat._optional.VERSIONS</code> dict.</p>  <h4 id="c-cpplint">C (cpplint)</h4> <p><em>pandas</em> uses the <a class="reference external" href="https://google.github.io/styleguide/cppguide.html">Google</a> standard. Google provides an open source style checker called <code>cpplint</code>, but we use a fork of it that can be found <a class="reference external" href="https://github.com/cpplint/cpplint">here</a>. Here are <em>some</em> of the more common <code>cpplint</code> issues:</p> <ul class="simple"> <li>we restrict line-length to 80 characters to promote readability</li> <li>every header file must include a header guard to avoid name collisions if re-included</li> </ul> <p><a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> will run the <a class="reference external" href="https://pypi.org/project/cpplint">cpplint</a> tool and report any stylistic errors in your code. Therefore, it is helpful before submitting code to run the check yourself:</p> <pre data-language="python">cpplint --extensions=c,h --headers=h --filter=-readability/casting,-runtime/int,-build/include_subdir modified-c-file
</pre> <p>You can also run this command on an entire directory if necessary:</p> <pre data-language="python">cpplint --extensions=c,h --headers=h --filter=-readability/casting,-runtime/int,-build/include_subdir --recursive modified-c-directory
</pre> <p>To make your commits compliant with this standard, you can install the <a class="reference external" href="http://clang.llvm.org/docs/ClangFormat.html">ClangFormat</a> tool, which can be downloaded <a class="reference external" href="http://llvm.org/builds/">here</a>. To configure, in your home directory, run the following command:</p> <pre data-language="python">clang-format style=google -dump-config  &gt; .clang-format
</pre> <p>Then modify the file to ensure that any indentation width parameters are at least four. Once configured, you can run the tool as follows:</p> <pre data-language="python">clang-format modified-c-file
</pre> <p>This will output what your file will look like if the changes are made, and to apply them, run the following command:</p> <pre data-language="python">clang-format -i modified-c-file
</pre> <p>To run the tool on an entire directory, you can run the following analogous commands:</p> <pre data-language="python">clang-format modified-c-directory/*.c modified-c-directory/*.h
clang-format -i modified-c-directory/*.c modified-c-directory/*.h
</pre> <p>Do note that this tool is best-effort, meaning that it will try to correct as many errors as possible, but it may not correct <em>all</em> of them. Thus, it is recommended that you run <code>cpplint</code> to double check and make any other style fixes manually.</p>   <h4 id="python-pep8-black">Python (PEP8 / black)</h4> <p><em>pandas</em> follows the <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP8</a> standard and uses <a class="reference external" href="https://black.readthedocs.io/en/stable/">Black</a> and <a class="reference external" href="http://flake8.pycqa.org/en/latest/">Flake8</a> to ensure a consistent code format throughout the project.</p> <p><a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> will run those tools and report any stylistic errors in your code. Therefore, it is helpful before submitting code to run the check yourself:</p> <pre data-language="python">black pandas
git diff upstream/master -u -- "*.py" | flake8 --diff
</pre> <p>to auto-format your code. Additionally, many editors have plugins that will apply <code>black</code> as you edit files.</p> <p>Optionally, you may wish to setup <a class="reference external" href="https://pre-commit.com/">pre-commit hooks</a> to automatically run <code>black</code> and <code>flake8</code> when you make a git commit. This can be done by installing <code>pre-commit</code>:</p> <pre data-language="python">pip install pre-commit
</pre> <p>and then running:</p> <pre data-language="python">pre-commit install
</pre> <p>from the root of the pandas repository. Now <code>black</code> and <code>flake8</code> will be run each time you commit changes. You can skip these checks with <code>git commit --no-verify</code>.</p> <p>This command will catch any stylistic errors in your changes specifically, but be beware it may not catch all of them. For example, if you delete the only usage of an imported function, it is stylistically incorrect to import an unused function. However, style-checking the diff will not catch this because the actual import is not part of the diff. Thus, for completeness, you should run this command, though it will take longer:</p> <pre data-language="python">git diff upstream/master --name-only -- "*.py" | xargs -r flake8
</pre> <p>Note that on OSX, the <code>-r</code> flag is not available, so you have to omit it and run this slightly modified command:</p> <pre data-language="python">git diff upstream/master --name-only -- "*.py" | xargs flake8
</pre> <p>Windows does not support the <code>xargs</code> command (unless installed for example via the <a class="reference external" href="http://www.mingw.org/">MinGW</a> toolchain), but one can imitate the behaviour as follows:</p> <pre data-language="python">for /f %i in ('git diff upstream/master --name-only -- "*.py"') do flake8 %i
</pre> <p>This will get all the files being changed by the PR (and ending with <code>.py</code>), and run <code>flake8</code> on them, one after the other.</p>   <h4 id="contributing-import-formatting">Import formatting</h4> <p id="import-formatting"><em>pandas</em> uses <a class="reference external" href="https://pypi.org/project/isort/">isort</a> to standardise import formatting across the codebase.</p> <p>A guide to import layout as per pep8 can be found <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#imports/">here</a>.</p> <p>A summary of our current import sections ( in order ):</p> <ul class="simple"> <li>Future</li> <li>Python Standard Library</li> <li>Third Party</li> <li>
<code>pandas._libs</code>, <code>pandas.compat</code>, <code>pandas.util._*</code>, <code>pandas.errors</code> (largely not dependent on <code>pandas.core</code>)</li> <li>
<code>pandas.core.dtypes</code> (largely not dependent on the rest of <code>pandas.core</code>)</li> <li>Rest of <code>pandas.core.*</code>
</li> <li>Non-core <code>pandas.io</code>, <code>pandas.plotting</code>, <code>pandas.tseries</code>
</li> <li>Local application/library specific imports</li> </ul> <p>Imports are alphabetically sorted within these sections.</p> <p>As part of <a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> checks we run:</p> <pre data-language="python">isort --recursive --check-only pandas
</pre> <p>to check that imports are correctly formatted as per the <code>setup.cfg</code>.</p> <p>If you see output like the below in <a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> checks:</p> <pre data-language="shell">Check import format using isort
ERROR: /home/travis/build/pandas-dev/pandas/pandas/io/pytables.py Imports are incorrectly sorted
Check import format using isort DONE
The command "ci/code_checks.sh" exited with 1
</pre> <p>You should run:</p> <pre data-language="python">isort pandas/io/pytables.py
</pre> <p>to automatically format imports correctly. This will modify your local copy of the files.</p> <p>The <code>–recursive</code> flag can be passed to sort all files in a directory.</p> <p>You can then verify the changes look ok, then git <a class="reference internal" href="#contributing-commit-code"><span class="std std-ref">commit</span></a> and <a class="reference internal" href="#contributing-push-code"><span class="std std-ref">push</span></a>.</p>   <h4 id="backwards-compatibility">Backwards compatibility</h4> <p>Please try to maintain backward compatibility. <em>pandas</em> has lots of users with lots of existing code, so don’t break it if at all possible. If you think breakage is required, clearly state why as part of the pull request. Also, be careful when changing method signatures and add deprecation warnings where needed. Also, add the deprecated sphinx directive to the deprecated functions or methods.</p> <p>If a function with the same arguments as the one being deprecated exist, you can use the <code>pandas.util._decorators.deprecate</code>:</p> <pre data-language="python">from pandas.util._decorators import deprecate

deprecate('old_func', 'new_func', '0.21.0')
</pre> <p>Otherwise, you need to do it manually:</p> <pre data-language="python">import warnings


def old_func():
    """Summary of the function.

    .. deprecated:: 0.21.0
       Use new_func instead.
    """
    warnings.warn('Use new_func instead.', FutureWarning, stacklevel=2)
    new_func()


def new_func():
    pass
</pre> <p>You’ll also need to</p> <ol class="arabic simple"> <li>Write a new test that asserts a warning is issued when calling with the deprecated argument</li> <li>Update all of pandas existing tests and code to use the new argument</li> </ol> <p>See <a class="reference internal" href="#contributing-warnings"><span class="std std-ref">Testing warnings</span></a> for more.</p>    <h3 id="contributing-ci">Testing with continuous integration</h3> <p id="testing-with-continuous-integration">The <em>pandas</em> test suite will run automatically on <a class="reference external" href="https://travis-ci.org/">Travis-CI</a> and <a class="reference external" href="https://azure.microsoft.com/en-us/services/devops/pipelines/">Azure Pipelines</a> continuous integration services, once your pull request is submitted. However, if you wish to run the test suite on a branch prior to submitting the pull request, then the continuous integration services need to be hooked to your GitHub repository. Instructions are here for <a class="reference external" href="http://about.travis-ci.org/docs/user/getting-started/">Travis-CI</a> and <a class="reference external" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/">Azure Pipelines</a>.</p> <p>A pull-request will be considered for merging when you have an all ‘green’ build. If any tests are failing, then you will get a red ‘X’, where you can click through to see the individual failed tests. This is an example of a green build.</p> <img alt="../_images/ci.png" src="data:image/png;base64,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"> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Each time you push to <em>your</em> fork, a <em>new</em> run of the tests will be triggered on the CI. You can enable the auto-cancel feature, which removes any non-currently-running tests for that same pull-request, for <a class="reference external" href="https://docs.travis-ci.com/user/customizing-the-build/#Building-only-the-latest-commit">Travis-CI here</a>.</p> </div>   <h3 id="contributing-tdd">Test-driven development/code writing</h3> <p id="test-driven-development-code-writing"><em>pandas</em> is serious about testing and strongly encourages contributors to embrace <a class="reference external" href="https://en.wikipedia.org/wiki/Test-driven_development">test-driven development (TDD)</a>. This development process “relies on the repetition of a very short development cycle: first the developer writes an (initially failing) automated test case that defines a desired improvement or new function, then produces the minimum amount of code to pass that test.” So, before actually writing any code, you should write your tests. Often the test can be taken from the original GitHub issue. However, it is always worth considering additional use cases and writing corresponding tests.</p> <p>Adding tests is one of the most common requests after code is pushed to <em>pandas</em>. Therefore, it is worth getting in the habit of writing tests ahead of time so this is never an issue.</p> <p>Like many packages, <em>pandas</em> uses <a class="reference external" href="http://docs.pytest.org/en/latest/">pytest</a> and the convenient extensions in <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/routines.testing.html">numpy.testing</a>.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The earliest supported pytest version is 4.0.2.</p> </div>  <h4 id="writing-tests">Writing tests</h4> <p>All tests should go into the <code>tests</code> subdirectory of the specific package. This folder contains many current examples of tests, and we suggest looking to these for inspiration. If your test requires working with files or network connectivity, there is more information on the <a class="reference external" href="https://github.com/pandas-dev/pandas/wiki/Testing">testing page</a> of the wiki.</p> <p>The <code>pandas.util.testing</code> module has many special <code>assert</code> functions that make it easier to make statements about whether Series or DataFrame objects are equivalent. The easiest way to verify that your code is correct is to explicitly construct the result you expect, then compare the actual result to the expected correct result:</p> <pre data-language="python">def test_pivot(self):
    data = {
        'index' : ['A', 'B', 'C', 'C', 'B', 'A'],
        'columns' : ['One', 'One', 'One', 'Two', 'Two', 'Two'],
        'values' : [1., 2., 3., 3., 2., 1.]
    }

    frame = DataFrame(data)
    pivoted = frame.pivot(index='index', columns='columns', values='values')

    expected = DataFrame({
        'One' : {'A' : 1., 'B' : 2., 'C' : 3.},
        'Two' : {'A' : 1., 'B' : 2., 'C' : 3.}
    })

    assert_frame_equal(pivoted, expected)
</pre>   <h4 id="transitioning-to-pytest">Transitioning to <code>pytest</code>
</h4> <p><em>pandas</em> existing test structure is <em>mostly</em> classed based, meaning that you will typically find tests wrapped in a class.</p> <pre data-language="python">class TestReallyCoolFeature:
    pass
</pre> <p>Going forward, we are moving to a more <em>functional</em> style using the <a class="reference external" href="http://docs.pytest.org/en/latest/">pytest</a> framework, which offers a richer testing framework that will facilitate testing and developing. Thus, instead of writing test classes, we will write test functions like this:</p> <pre data-language="python">def test_really_cool_feature():
    pass
</pre>   <h4 id="using-pytest">Using <code>pytest</code>
</h4> <p>Here is an example of a self-contained set of tests that illustrate multiple features that we like to use.</p> <ul class="simple"> <li>functional style: tests are like <code>test_*</code> and <em>only</em> take arguments that are either fixtures or parameters</li> <li>
<code>pytest.mark</code> can be used to set metadata on test functions, e.g. <code>skip</code> or <code>xfail</code>.</li> <li>using <code>parametrize</code>: allow testing of multiple cases</li> <li>to set a mark on a parameter, <code>pytest.param(..., marks=...)</code> syntax should be used</li> <li>
<code>fixture</code>, code for object construction, on a per-test basis</li> <li>using bare <code>assert</code> for scalars and truth-testing</li> <li>
<code>tm.assert_series_equal</code> (and its counter part <code>tm.assert_frame_equal</code>), for pandas object comparisons.</li> <li>the typical pattern of constructing an <code>expected</code> and comparing versus the <code>result</code>
</li> </ul> <p>We would name this file <code>test_cool_feature.py</code> and put in an appropriate place in the <code>pandas/tests/</code> structure.</p> <pre data-language="python">import pytest
import numpy as np
import pandas as pd


@pytest.mark.parametrize('dtype', ['int8', 'int16', 'int32', 'int64'])
def test_dtypes(dtype):
    assert str(np.dtype(dtype)) == dtype


@pytest.mark.parametrize(
    'dtype', ['float32', pytest.param('int16', marks=pytest.mark.skip),
              pytest.param('int32', marks=pytest.mark.xfail(
                  reason='to show how it works'))])
def test_mark(dtype):
    assert str(np.dtype(dtype)) == 'float32'


@pytest.fixture
def series():
    return pd.Series([1, 2, 3])


@pytest.fixture(params=['int8', 'int16', 'int32', 'int64'])
def dtype(request):
    return request.param


def test_series(series, dtype):
    result = series.astype(dtype)
    assert result.dtype == dtype

    expected = pd.Series([1, 2, 3], dtype=dtype)
    tm.assert_series_equal(result, expected)
</pre> <p>A test run of this yields</p> <pre data-language="shell">((pandas) bash-3.2$ pytest  test_cool_feature.py  -v
=========================== test session starts ===========================
platform darwin -- Python 3.6.2, pytest-3.6.0, py-1.4.31, pluggy-0.4.0
collected 11 items

tester.py::test_dtypes[int8] PASSED
tester.py::test_dtypes[int16] PASSED
tester.py::test_dtypes[int32] PASSED
tester.py::test_dtypes[int64] PASSED
tester.py::test_mark[float32] PASSED
tester.py::test_mark[int16] SKIPPED
tester.py::test_mark[int32] xfail
tester.py::test_series[int8] PASSED
tester.py::test_series[int16] PASSED
tester.py::test_series[int32] PASSED
tester.py::test_series[int64] PASSED
</pre> <p>Tests that we have <code>parametrized</code> are now accessible via the test name, for example we could run these with <code>-k int8</code> to sub-select <em>only</em> those tests which match <code>int8</code>.</p> <pre data-language="shell">((pandas) bash-3.2$ pytest  test_cool_feature.py  -v -k int8
=========================== test session starts ===========================
platform darwin -- Python 3.6.2, pytest-3.6.0, py-1.4.31, pluggy-0.4.0
collected 11 items

test_cool_feature.py::test_dtypes[int8] PASSED
test_cool_feature.py::test_series[int8] PASSED
</pre>   <h4 id="id1">Using <code>hypothesis</code>
</h4> <p id="using-hypothesis">Hypothesis is a library for property-based testing. Instead of explicitly parametrizing a test, you can describe <em>all</em> valid inputs and let Hypothesis try to find a failing input. Even better, no matter how many random examples it tries, Hypothesis always reports a single minimal counterexample to your assertions - often an example that you would never have thought to test.</p> <p>See <a class="reference external" href="https://hypothesis.works/articles/getting-started-with-hypothesis/">Getting Started with Hypothesis</a> for more of an introduction, then <a class="reference external" href="https://hypothesis.readthedocs.io/en/latest/index.html">refer to the Hypothesis documentation for details</a>.</p> <pre data-language="python">import json
from hypothesis import given, strategies as st

any_json_value = st.deferred(lambda: st.one_of(
    st.none(), st.booleans(), st.floats(allow_nan=False), st.text(),
    st.lists(any_json_value), st.dictionaries(st.text(), any_json_value)
))


@given(value=any_json_value)
def test_json_roundtrip(value):
    result = json.loads(json.dumps(value))
    assert value == result
</pre> <p>This test shows off several useful features of Hypothesis, as well as demonstrating a good use-case: checking properties that should hold over a large or complicated domain of inputs.</p> <p>To keep the Pandas test suite running quickly, parametrized tests are preferred if the inputs or logic are simple, with Hypothesis tests reserved for cases with complex logic or where there are too many combinations of options or subtle interactions to test (or think of!) all of them.</p>   <h4 id="contributing-warnings">Testing warnings</h4> <p id="testing-warnings">By default, one of pandas CI workers will fail if any unhandled warnings are emitted.</p> <p>If your change involves checking that a warning is actually emitted, use <code>tm.assert_produces_warning(ExpectedWarning)</code>.</p> <pre data-language="python">import pandas.util.testing as tm


df = pd.DataFrame()
with tm.assert_produces_warning(FutureWarning):
    df.some_operation()
</pre> <p>We prefer this to the <code>pytest.warns</code> context manager because ours checks that the warning’s stacklevel is set correctly. The stacklevel is what ensure the <em>user’s</em> file name and line number is printed in the warning, rather than something internal to pandas. It represents the number of function calls from user code (e.g. <code>df.some_operation()</code>) to the function that actually emits the warning. Our linter will fail the build if you use <code>pytest.warns</code> in a test.</p> <p>If you have a test that would emit a warning, but you aren’t actually testing the warning itself (say because it’s going to be removed in the future, or because we’re matching a 3rd-party library’s behavior), then use <code>pytest.mark.filterwarnings</code> to ignore the error.</p> <pre data-language="python">@pytest.mark.filterwarnings("ignore:msg:category")
def test_thing(self):
    ...
</pre> <p>If the test generates a warning of class <code>category</code> whose message starts with <code>msg</code>, the warning will be ignored and the test will pass.</p> <p>If you need finer-grained control, you can use Python’s usual <a class="reference external" href="https://docs.python.org/3/library/warnings.html">warnings module</a> to control whether a warning is ignored / raised at different places within a single test.</p> <pre data-language="python">with warnings.catch_warnings():
    warnings.simplefilter("ignore", FutureWarning)
    # Or use warnings.filterwarnings(...)
</pre> <p>Alternatively, consider breaking up the unit test.</p>    <h3 id="running-the-test-suite">Running the test suite</h3> <p>The tests can then be run directly inside your Git clone (without having to install <em>pandas</em>) by typing:</p> <pre data-language="python">pytest pandas
</pre> <p>The tests suite is exhaustive and takes around 20 minutes to run. Often it is worth running only a subset of tests first around your changes before running the entire suite.</p> <p>The easiest way to do this is with:</p> <pre data-language="python">pytest pandas/path/to/test.py -k regex_matching_test_name
</pre> <p>Or with one of the following constructs:</p> <pre data-language="python">pytest pandas/tests/[test-module].py
pytest pandas/tests/[test-module].py::[TestClass]
pytest pandas/tests/[test-module].py::[TestClass]::[test_method]
</pre> <p>Using <a class="reference external" href="https://pypi.org/project/pytest-xdist">pytest-xdist</a>, one can speed up local testing on multicore machines. To use this feature, you will need to install <code>pytest-xdist</code> via:</p> <pre data-language="python">pip install pytest-xdist
</pre> <p>Two scripts are provided to assist with this. These scripts distribute testing across 4 threads.</p> <p>On Unix variants, one can type:</p> <pre data-language="python">test_fast.sh
</pre> <p>On Windows, one can type:</p> <pre data-language="python">test_fast.bat
</pre> <p>This can significantly reduce the time it takes to locally run tests before submitting a pull request.</p> <p>For more, see the <a class="reference external" href="http://docs.pytest.org/en/latest/">pytest</a> documentation.</p>  <div class="versionadded"> <p><span class="versionmodified">New in version 0.20.0.</span></p> </div>  <p>Furthermore one can run</p> <pre data-language="python">pd.test()
</pre> <p>with an imported pandas to run tests similarly.</p>   <h3 id="running-the-performance-test-suite">Running the performance test suite</h3> <p>Performance matters and it is worth considering whether your code has introduced performance regressions. <em>pandas</em> is in the process of migrating to <a class="reference external" href="https://github.com/spacetelescope/asv">asv benchmarks</a> to enable easy monitoring of the performance of critical <em>pandas</em> operations. These benchmarks are all found in the <code>pandas/asv_bench</code> directory. asv supports both python2 and python3.</p> <p>To use all features of asv, you will need either <code>conda</code> or <code>virtualenv</code>. For more details please check the <a class="reference external" href="https://asv.readthedocs.io/en/latest/installing.html">asv installation webpage</a>.</p> <p>To install asv:</p> <pre data-language="python">pip install git+https://github.com/spacetelescope/asv
</pre> <p>If you need to run a benchmark, change your directory to <code>asv_bench/</code> and run:</p> <pre data-language="python">asv continuous -f 1.1 upstream/master HEAD
</pre> <p>You can replace <code>HEAD</code> with the name of the branch you are working on, and report benchmarks that changed by more than 10%. The command uses <code>conda</code> by default for creating the benchmark environments. If you want to use virtualenv instead, write:</p> <pre data-language="python">asv continuous -f 1.1 -E virtualenv upstream/master HEAD
</pre> <p>The <code>-E virtualenv</code> option should be added to all <code>asv</code> commands that run benchmarks. The default value is defined in <code>asv.conf.json</code>.</p> <p>Running the full test suite can take up to one hour and use up to 3GB of RAM. Usually it is sufficient to paste only a subset of the results into the pull request to show that the committed changes do not cause unexpected performance regressions. You can run specific benchmarks using the <code>-b</code> flag, which takes a regular expression. For example, this will only run tests from a <code>pandas/asv_bench/benchmarks/groupby.py</code> file:</p> <pre data-language="python">asv continuous -f 1.1 upstream/master HEAD -b ^groupby
</pre> <p>If you want to only run a specific group of tests from a file, you can do it using <code>.</code> as a separator. For example:</p> <pre data-language="python">asv continuous -f 1.1 upstream/master HEAD -b groupby.GroupByMethods
</pre> <p>will only run the <code>GroupByMethods</code> benchmark defined in <code>groupby.py</code>.</p> <p>You can also run the benchmark suite using the version of <code>pandas</code> already installed in your current Python environment. This can be useful if you do not have virtualenv or conda, or are using the <code>setup.py develop</code> approach discussed above; for the in-place build you need to set <code>PYTHONPATH</code>, e.g. <code>PYTHONPATH="$PWD/.." asv [remaining arguments]</code>. You can run benchmarks using an existing Python environment by:</p> <pre data-language="python">asv run -e -E existing
</pre> <p>or, to use a specific Python interpreter,:</p> <pre data-language="python">asv run -e -E existing:python3.5
</pre> <p>This will display stderr from the benchmarks, and use your local <code>python</code> that comes from your <code>$PATH</code>.</p> <p>Information on how to write a benchmark and how to use asv can be found in the <a class="reference external" href="https://asv.readthedocs.io/en/latest/writing_benchmarks.html">asv documentation</a>.</p>   <h3 id="documenting-your-code">Documenting your code</h3> <p>Changes should be reflected in the release notes located in <code>doc/source/whatsnew/vx.y.z.rst</code>. This file contains an ongoing change log for each release. Add an entry to this file to document your fix, enhancement or (unavoidable) breaking change. Make sure to include the GitHub issue number when adding your entry (using <code>:issue:`1234`</code> where <code>1234</code> is the issue/pull request number).</p> <p>If your code is an enhancement, it is most likely necessary to add usage examples to the existing documentation. This can be done following the section regarding documentation <a class="reference internal" href="#contributing-documentation"><span class="std std-ref">above</span></a>. Further, to let users know when this feature was added, the <code>versionadded</code> directive is used. The sphinx syntax for that is:</p> <pre data-language="rst">.. versionadded:: 0.21.0
</pre> <p>This will put the text <em>New in version 0.21.0</em> wherever you put the sphinx directive. This should also be put in the docstring when adding a new function or method (<a class="reference external" href="https://github.com/pandas-dev/pandas/blob/v0.20.2/pandas/core/frame.py#L1495">example</a>) or a new keyword argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/blob/v0.20.2/pandas/core/generic.py#L568">example</a>).</p>    <h2 id="contributing-your-changes-to-pandas">Contributing your changes to pandas</h2>  <h3 id="contributing-commit-code">Committing your code</h3> <p id="committing-your-code">Keep style fixes to a separate commit to make your pull request more readable.</p> <p>Once you’ve made changes, you can see them by typing:</p> <pre data-language="python">git status
</pre> <p>If you have created a new file, it is not being tracked by git. Add it by typing:</p> <pre data-language="python">git add path/to/file-to-be-added.py
</pre> <p>Doing ‘git status’ again should give something like:</p> <pre data-language="python"># On branch shiny-new-feature
#
#       modified:   /relative/path/to/file-you-added.py
#
</pre> <p>Finally, commit your changes to your local repository with an explanatory message. <em>Pandas</em> uses a convention for commit message prefixes and layout. Here are some common prefixes along with general guidelines for when to use them:</p> <ul class="simple"> <li>ENH: Enhancement, new functionality</li> <li>BUG: Bug fix</li> <li>DOC: Additions/updates to documentation</li> <li>TST: Additions/updates to tests</li> <li>BLD: Updates to the build process/scripts</li> <li>PERF: Performance improvement</li> <li>CLN: Code cleanup</li> </ul> <p>The following defines how a commit message should be structured. Please reference the relevant GitHub issues in your commit message using GH1234 or #1234. Either style is fine, but the former is generally preferred:</p> <ul class="simple"> <li>a subject line with <code>&lt; 80</code> chars.</li> <li>One blank line.</li> <li>Optionally, a commit message body.</li> </ul> <p>Now you can commit your changes in your local repository:</p> <pre data-language="python">git commit -m
</pre>   <h3 id="contributing-push-code">Pushing your changes</h3> <p id="pushing-your-changes">When you want your changes to appear publicly on your GitHub page, push your forked feature branch’s commits:</p> <pre data-language="python">git push origin shiny-new-feature
</pre> <p>Here <code>origin</code> is the default name given to your remote repository on GitHub. You can see the remote repositories:</p> <pre data-language="python">git remote -v
</pre> <p>If you added the upstream repository as described above you will see something like:</p> <pre data-language="python">origin  git@github.com:yourname/pandas.git (fetch)
origin  git@github.com:yourname/pandas.git (push)
upstream        git://github.com/pandas-dev/pandas.git (fetch)
upstream        git://github.com/pandas-dev/pandas.git (push)
</pre> <p>Now your code is on GitHub, but it is not yet a part of the <em>pandas</em> project. For that to happen, a pull request needs to be submitted on GitHub.</p>   <h3 id="review-your-code">Review your code</h3> <p>When you’re ready to ask for a code review, file a pull request. Before you do, once again make sure that you have followed all the guidelines outlined in this document regarding code style, tests, performance tests, and documentation. You should also double check your branch changes against the branch it was based on:</p> <ol class="arabic simple"> <li>Navigate to your repository on GitHub – <a class="reference external" href="https://github.com/your-user-name/pandas">https://github.com/your-user-name/pandas</a>
</li> <li>Click on <code>Branches</code>
</li> <li>Click on the <code>Compare</code> button for your feature branch</li> <li>Select the <code>base</code> and <code>compare</code> branches, if necessary. This will be <code>master</code> and <code>shiny-new-feature</code>, respectively.</li> </ol>   <h3 id="finally-make-the-pull-request">Finally, make the pull request</h3> <p>If everything looks good, you are ready to make a pull request. A pull request is how code from a local repository becomes available to the GitHub community and can be looked at and eventually merged into the master version. This pull request and its associated changes will eventually be committed to the master branch and available in the next release. To submit a pull request:</p> <ol class="arabic simple"> <li>Navigate to your repository on GitHub</li> <li>Click on the <code>Pull Request</code> button</li> <li>You can then click on <code>Commits</code> and <code>Files Changed</code> to make sure everything looks okay one last time</li> <li>Write a description of your changes in the <code>Preview Discussion</code> tab</li> <li>Click <code>Send Pull Request</code>.</li> </ol> <p>This request then goes to the repository maintainers, and they will review the code.</p>   <h3 id="contributing-update-pr">Updating your pull request</h3> <p id="updating-your-pull-request">Based on the review you get on your pull request, you will probably need to make some changes to the code. In that case, you can make them in your branch, add a new commit to that branch, push it to GitHub, and the pull request will be automatically updated. Pushing them to GitHub again is done by:</p> <pre data-language="python">git push origin shiny-new-feature
</pre> <p>This will automatically update your pull request with the latest code and restart the <a class="reference internal" href="#contributing-ci"><span class="std std-ref">Continuous Integration</span></a> tests.</p> <p>Another reason you might need to update your pull request is to solve conflicts with changes that have been merged into the master branch since you opened your pull request.</p> <p>To do this, you need to “merge upstream master” in your branch:</p> <pre data-language="python">git checkout shiny-new-feature
git fetch upstream
git merge upstream/master
</pre> <p>If there are no conflicts (or they could be fixed automatically), a file with a default commit message will open, and you can simply save and quit this file.</p> <p>If there are merge conflicts, you need to solve those conflicts. See for example at <a class="reference external" href="https://help.github.com/articles/resolving-a-merge-conflict-using-the-command-line/">https://help.github.com/articles/resolving-a-merge-conflict-using-the-command-line/</a> for an explanation on how to do this. Once the conflicts are merged and the files where the conflicts were solved are added, you can run <code>git commit</code> to save those fixes.</p> <p>If you have uncommitted changes at the moment you want to update the branch with master, you will need to <code>stash</code> them prior to updating (see the <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning">stash docs</a>). This will effectively store your changes and they can be reapplied after updating.</p> <p>After the feature branch has been update locally, you can now update your pull request by pushing to the branch on GitHub:</p> <pre data-language="python">git push origin shiny-new-feature
</pre>   <h3 id="delete-your-merged-branch-optional">Delete your merged branch (optional)</h3> <p>Once your feature branch is accepted into upstream, you’ll probably want to get rid of the branch. First, merge upstream master into your branch so git knows it is safe to delete your branch:</p> <pre data-language="python">git fetch upstream
git checkout master
git merge upstream/master
</pre> <p>Then you can do:</p> <pre data-language="python">git branch -d shiny-new-feature
</pre> <p>Make sure you use a lower-case <code>-d</code>, or else git won’t warn you if your feature branch has not actually been merged.</p> <p>The branch will still exist on GitHub, so to delete it there do:</p> <pre data-language="python">git push origin --delete shiny-new-feature
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2012, AQR Capital Management, LLC, Lambda Foundry, Inc. and PyData Development Team<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://pandas.pydata.org/pandas-docs/version/0.25.0/development/contributing.html" class="_attribution-link">https://pandas.pydata.org/pandas-docs/version/0.25.0/development/contributing.html</a>
  </p>
</div>
