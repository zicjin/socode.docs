<h1 id="id1">Cookbook</h1> <p id="cookbook">This is a repository for <em>short and sweet</em> examples and links for useful pandas recipes. We encourage users to add to this documentation.</p> <p>Adding interesting links and/or inline examples to this section is a great <em>First Pull Request</em>.</p> <p>Simplified, condensed, new-user friendly, in-line examples have been inserted where possible to augment the Stack-Overflow and GitHub links. Many of the links contain expanded information, above what the in-line examples offer.</p> <p>Pandas (pd) and Numpy (np) are the only two abbreviated imported modules. The rest are kept explicitly imported for newer users.</p> <p>These examples are written for Python 3. Minor tweaks might be necessary for earlier python versions.</p>  <h2 id="idioms">Idioms</h2> <p id="cookbook-idioms">These are some neat pandas <code>idioms</code></p> <p><a class="reference external" href="https://stackoverflow.com/questions/17128302/python-pandas-idiom-for-if-then-else">if-then/if-then-else on one column, and assignment to another one or more columns:</a></p> <pre data-language="python">In [1]: df = pd.DataFrame({'AAA': [4, 5, 6, 7],
   ...:                    'BBB': [10, 20, 30, 40],
   ...:                    'CCC': [100, 50, -30, -50]})
   ...: 

In [2]: df
Out[2]: 
   AAA  BBB  CCC
0    4   10  100
1    5   20   50
2    6   30  -30
3    7   40  -50
</pre>  <h3 id="if-then">if-then…</h3> <p>An if-then on one column</p> <pre data-language="python">In [3]: df.loc[df.AAA &gt;= 5, 'BBB'] = -1

In [4]: df
Out[4]: 
   AAA  BBB  CCC
0    4   10  100
1    5   -1   50
2    6   -1  -30
3    7   -1  -50
</pre> <p>An if-then with assignment to 2 columns:</p> <pre data-language="python">In [5]: df.loc[df.AAA &gt;= 5, ['BBB', 'CCC']] = 555

In [6]: df
Out[6]: 
   AAA  BBB  CCC
0    4   10  100
1    5  555  555
2    6  555  555
3    7  555  555
</pre> <p>Add another line with different logic, to do the -else</p> <pre data-language="python">In [7]: df.loc[df.AAA &lt; 5, ['BBB', 'CCC']] = 2000

In [8]: df
Out[8]: 
   AAA   BBB   CCC
0    4  2000  2000
1    5   555   555
2    6   555   555
3    7   555   555
</pre> <p>Or use pandas where after you’ve set up a mask</p> <pre data-language="python">In [9]: df_mask = pd.DataFrame({'AAA': [True] * 4,
   ...:                         'BBB': [False] * 4,
   ...:                         'CCC': [True, False] * 2})
   ...: 

In [10]: df.where(df_mask, -1000)
Out[10]: 
   AAA   BBB   CCC
0    4 -1000  2000
1    5 -1000 -1000
2    6 -1000   555
3    7 -1000 -1000
</pre> <p><a class="reference external" href="https://stackoverflow.com/questions/19913659/pandas-conditional-creation-of-a-series-dataframe-column">if-then-else using numpy’s where()</a></p> <pre data-language="python">In [11]: df = pd.DataFrame({'AAA': [4, 5, 6, 7],
   ....:                    'BBB': [10, 20, 30, 40],
   ....:                    'CCC': [100, 50, -30, -50]})
   ....: 

In [12]: df
Out[12]: 
   AAA  BBB  CCC
0    4   10  100
1    5   20   50
2    6   30  -30
3    7   40  -50

In [13]: df['logic'] = np.where(df['AAA'] &gt; 5, 'high', 'low')

In [14]: df
Out[14]: 
   AAA  BBB  CCC logic
0    4   10  100   low
1    5   20   50   low
2    6   30  -30  high
3    7   40  -50  high
</pre>   <h3 id="splitting">Splitting</h3> <p><a class="reference external" href="https://stackoverflow.com/questions/14957116/how-to-split-a-dataframe-according-to-a-boolean-criterion">Split a frame with a boolean criterion</a></p> <pre data-language="python">In [15]: df = pd.DataFrame({'AAA': [4, 5, 6, 7],
   ....:                    'BBB': [10, 20, 30, 40],
   ....:                    'CCC': [100, 50, -30, -50]})
   ....: 

In [16]: df
Out[16]: 
   AAA  BBB  CCC
0    4   10  100
1    5   20   50
2    6   30  -30
3    7   40  -50

In [17]: df[df.AAA &lt;= 5]
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2012, AQR Capital Management, LLC, Lambda Foundry, Inc. and PyData Development Team<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://pandas.pydata.org/pandas-docs/version/0.25.0/user_guide/cookbook.html" class="_attribution-link">https://pandas.pydata.org/pandas-docs/version/0.25.0/user_guide/cookbook.html</a>
  </p>
</div>
