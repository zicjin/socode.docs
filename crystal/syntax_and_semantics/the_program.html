 <h1 id="program">Program</h1> <p>The program is the entirety of the source code worked by the compiler. The source gets parsed and compiled to an executable version of the program.</p> <p>The programâ€™s source code must be encoded in UTF-8.</p> <h2 id="top-level-scope">Top-level scope</h2> <p>Features such as types, constants, macros and methods defined outside any other namespace are in the top-level scope.</p> <div class="crystal highlight"><pre data-language="crystal"># Defines a method in the top-level scope
def add(x, y)
  x + y
end

# Invokes the add method on the top-level scope
add(1, 2) # =&gt; 3
</pre></div> <p>Local variables in the top-level scope are file-local and not visible inside method bodies.</p> <div class="crystal highlight"><pre data-language="crystal">x = 1

def add(y)
  x + y # error: undefined local variable or method 'x'
end

add(2)
</pre></div> <p>Private features are also only visible in the current file.</p> <p>A double colon prefix (<code>::</code>) unambiguously references a namespace, constant, method or macro in the top-level scope:</p> <div class="crystal highlight"><pre data-language="crystal">def baz
  puts "::baz"
end

CONST = "::CONST"

module A
  def self.baz
    puts "A.baz"
  end

  # Without prefix, resolves to the method in the local scope
  baz

  # With :: prefix, resolves to the method in the top-level scope
  ::baz

  CONST = "A::Const"

  p! CONST   # =&gt; "A::CONST"
  p! ::CONST # =&gt; "::CONST"
end
</pre></div> <h3 id="main-code">Main code</h3> <p>Any expression that is neither a method, macro, constant or type definition, or in a method or macro body, is part of the main code. Main code is executed when the program starts in the order of the source file's inclusion.</p> <p>There is no need to use a special entry point for the main code (such as a <code>main</code> method).</p> <div class="crystal highlight"><pre data-language="crystal"># This is a program that prints "Hello Crystal!"
puts "Hello Crystal!"
</pre></div> <p>Main code can also be inside namespaces:</p> <div class="crystal highlight"><pre data-language="crystal"># This is a program that prints "Hello"
class Hello
  # 'self' here is the Hello class
  puts self
end
</pre></div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/reference/1.5/syntax_and_semantics/the_program.html" class="_attribution-link" target="_blank">https://crystal-lang.org/reference/1.5/syntax_and_semantics/the_program.html</a>
  </p>
</div>
