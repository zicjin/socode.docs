 <h1 id="out">out</h1> <p>Consider the <a href="http://www.gnu.org/software/libc/manual/html_node/Process-Completion.html">waitpid</a> function:</p> <div class="crystal highlight"><pre data-language="crystal">lib C
  fun waitpid(pid : Int32, status_ptr : Int32*, options : Int32) : Int32
end
</pre></div> <p>The documentation of the function says:</p> <div class="highlight"><pre data-language="crystal">The status information from the child process is stored in the object
that status_ptr points to, unless status_ptr is a null pointer.
</pre></div> <p>We can use this function like this:</p> <div class="crystal highlight"><pre data-language="crystal">status_ptr = uninitialized Int32

C.waitpid(pid, pointerof(status_ptr), options)
</pre></div> <p>In this way we pass a pointer of <code>status_ptr</code> to the function for it to fill its value.</p> <p>There's a simpler way to write the above by using an <code>out</code> parameter:</p> <div class="crystal highlight"><pre data-language="crystal">C.waitpid(pid, out status_ptr, options)
</pre></div> <p>The compiler will automatically declare a <code>status_ptr</code> variable of type <code>Int32</code>, because the parameter's type is <code>Int32*</code>.</p> <p>This will work for any <code>fun</code> parameter, as long as its type is a pointer (and, of course, as long as the function does fill the value the pointer is pointing to).</p><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/reference/syntax_and_semantics/c_bindings/out.html" class="_attribution-link" target="_blank">https://crystal-lang.org/reference/syntax_and_semantics/c_bindings/out.html</a>
  </p>
</div>
