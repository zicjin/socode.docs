<h1 class="type-name"> module MIME::Multipart </h1> <h2>  Overview </h2> <p>The <code><a href="multipart">MIME::Multipart</a></code> module contains utilities for parsing MIME multipart messages, which contain multiple body parts, each containing a header section and binary body. The <code>multipart/form-data</code> content-type has a separate set of utilities in the <code><a href="../http/formdata">HTTP::FormData</a></code> module.</p> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L9" target="_blank"> mime/multipart.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart/builder.cr#L1" target="_blank"> mime/multipart/builder.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart/parser.cr#L1" target="_blank"> mime/multipart/parser.cr </a> <br> <h2>  Class Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#build(io:IO,boundary:String=Multipart.generate_boundary,&amp;)-class-method" class="signature"><strong>.build</strong>(io : IO, boundary : String = Multipart.generate_boundary, &amp;)</a> <div class="summary"><p>Yields a <code><a href="multipart/builder">Multipart::Builder</a></code> to the given block, writing to <em>io</em> and using <em>boundary</em>.</p></div> </li> <li class="entry-summary"> <a href="#build(boundary:String=Multipart.generate_boundary,&amp;)-class-method" class="signature"><strong>.build</strong>(boundary : String = Multipart.generate_boundary, &amp;)</a> <div class="summary"><p>Yields a <code><a href="multipart/builder">Multipart::Builder</a></code> to the given block, returning the generated message as a <code><a href="../string">String</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#generate_boundary:String-class-method" class="signature"><strong>.generate_boundary</strong> : String</a> <div class="summary"><p>Returns a unique string suitable for use as a multipart boundary.</p></div> </li> <li class="entry-summary"> <a href="#parse(io,boundary,&amp;)-class-method" class="signature"><strong>.parse</strong>(io, boundary, &amp;)</a> <div class="summary"><p>Parses a MIME multipart message, yielding <code><a href="../http/headers">HTTP::Headers</a></code> and an <code><a href="../io">IO</a></code> for each body part.</p></div> </li> <li class="entry-summary"> <a href="#parse(request:HTTP::Request,&amp;)-class-method" class="signature"><strong>.parse</strong>(request : HTTP::Request, &amp;)</a> <div class="summary"><p>Parses a MIME multipart message, yielding <code><a href="../http/headers">HTTP::Headers</a></code> and an <code><a href="../io">IO</a></code> for each body part.</p></div> </li> <li class="entry-summary"> <a href="#parse_boundary(content_type)-class-method" class="signature"><strong>.parse_boundary</strong>(content_type)</a> <div class="summary"><p>Extracts the multipart boundary from the Content-Type header.</p></div> </li> </ul>  <h2>  Class Method Detail </h2> <div class="entry-detail" id="build(io:IO,boundary:String=Multipart.generate_boundary,&amp;)-class-method"> <h3 class="signature">def self.<strong>build</strong>(io : <a href="../io">IO</a>, boundary : <a href="../string">String</a> = Multipart.generate_boundary, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L82" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Yields a <code><a href="multipart/builder">Multipart::Builder</a></code> to the given block, writing to <em>io</em> and using <em>boundary</em>. <code>#finish</code> is automatically called on the builder.</p> </div>   </div> <div class="entry-detail" id="build(boundary:String=Multipart.generate_boundary,&amp;)-class-method"> <h3 class="signature">def self.<strong>build</strong>(boundary : <a href="../string">String</a> = Multipart.generate_boundary, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L90" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Yields a <code><a href="multipart/builder">Multipart::Builder</a></code> to the given block, returning the generated message as a <code><a href="../string">String</a></code>.</p> </div>   </div> <div class="entry-detail" id="generate_boundary:String-class-method"> <h3 class="signature">def self.<strong>generate_boundary</strong> : <a href="../string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L103" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a unique string suitable for use as a multipart boundary.</p> <pre data-language="crystal">require "mime/multipart"

MIME::Multipart.generate_boundary # =&gt; "---------------------------dQu6bXHYb4m5zrRC3xPTGwV"</pre> </div>   </div> <div class="entry-detail" id="parse(io,boundary,&amp;)-class-method"> <h3 class="signature">def self.<strong>parse</strong>(io, boundary, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L27" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Parses a MIME multipart message, yielding <code><a href="../http/headers">HTTP::Headers</a></code> and an <code><a href="../io">IO</a></code> for each body part.</p> <p>Please note that the IO object yielded to the block is only valid while the block is executing. The IO is closed as soon as the supplied block returns.</p> <pre data-language="crystal">require "mime/multipart"

multipart = "--aA40\r\nContent-Type: text/plain\r\n\r\nbody\r\n--aA40--"
MIME::Multipart.parse(IO::Memory.new(multipart), "aA40") do |headers, io|
  headers["Content-Type"] # =&gt; "text/plain"
  io.gets_to_end          # =&gt; "body"
end</pre> <p>See: <code><a href="multipart/parser">Multipart::Parser</a></code></p> </div>   </div> <div class="entry-detail" id="parse(request:HTTP::Request,&amp;)-class-method"> <h3 class="signature">def self.<strong>parse</strong>(request : <a href="../http/request">HTTP::Request</a>, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L71" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Parses a MIME multipart message, yielding <code><a href="../http/headers">HTTP::Headers</a></code> and an <code><a href="../io">IO</a></code> for each body part.</p> <p>Please note that the IO object yielded to the block is only valid while the block is executing. The IO is closed as soon as the supplied block returns.</p> <pre data-language="crystal">require "http"
require "mime/multipart"

headers = HTTP::Headers{"Content-Type" =&gt; "multipart/mixed; boundary=aA40"}
body = "--aA40\r\nContent-Type: text/plain\r\n\r\nbody\r\n--aA40--"
request = HTTP::Request.new("POST", "/", headers, body)

MIME::Multipart.parse(request) do |headers, io|
  headers["Content-Type"] # =&gt; "text/plain"
  io.gets_to_end          # =&gt; "body"
end</pre> <p>See: <code><a href="multipart/parser">Multipart::Parser</a></code></p> </div>   </div> <div class="entry-detail" id="parse_boundary(content_type)-class-method"> <h3 class="signature">def self.<strong>parse_boundary</strong>(content_type)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart.cr#L42" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Extracts the multipart boundary from the Content-Type header. May return <code>nil</code> is the boundary was not found.</p> <pre data-language="crystal">require "mime/multipart"

MIME::Multipart.parse_boundary("multipart/mixed; boundary=\"abcde\"") # =&gt; "abcde"</pre> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/api/1.0.0/MIME/Multipart.html" class="_attribution-link" target="_blank">https://crystal-lang.org/api/1.0.0/MIME/Multipart.html</a>
  </p>
</div>
