<h1 class="type-name"> class MIME::Multipart::Parser </h1> <ul class="superclass-hierarchy">
<li class="superclass"><a href="parser">MIME::Multipart::Parser</a></li>
<li class="superclass"><a href="../../reference">Reference</a></li>
<li class="superclass"><a href="../../object">Object</a></li>
</ul> <h2>  Overview </h2> <p>Parses multipart MIME messages.</p> <h3>
Example</h3> <pre data-language="crystal">require "mime/multipart"

multipart = "--aA40\r\nContent-Type: text/plain\r\n\r\nbody\r\n--aA40--"
parser = MIME::Multipart::Parser.new(IO::Memory.new(multipart), "aA40")

while parser.has_next?
  parser.next do |headers, io|
    headers["Content-Type"] # =&gt; "text/plain"
    io.gets_to_end          # =&gt; "body"
  end
end</pre> <p>Please note that the IO object yielded by <code><a href="parser#next(&amp;)-instance-method">#next</a></code> is only valid until the block returns.</p> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart/parser.cr#L22" target="_blank"> mime/multipart/parser.cr </a> <br> <h2>  Constructors </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#new(io:IO,boundary:String)-class-method" class="signature"><strong>.new</strong>(io : IO, boundary : String)</a> <div class="summary"><p>Creates a new <code><a href="parser">Multipart::Parser</a></code> which parses <em>io</em> with multipart boundary <em>boundary</em>.</p></div> </li> </ul> <h2>  Instance Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#has_next?-instance-method" class="signature"><strong>#has_next?</strong></a> <div class="summary"><p>True if <code><a href="parser#next(&amp;)-instance-method">#next</a></code> can be called legally.</p></div> </li> <li class="entry-summary"> <a href="#next(&amp;)-instance-method" class="signature"><strong>#next</strong>(&amp;)</a> <div class="summary"><p>Parses the next body part and yields headers as <code><a href="../../http/headers">HTTP::Headers</a></code> and the body text as an <code><a href="../../io">IO</a></code>.</p></div> </li> </ul> <div class="methods-inherited"> <h3>Instance methods inherited from class <code><a href="../../reference">Reference</a></code>
</h3> <a href="../../reference#==(other:self)-instance-method" class="tooltip"> ==(other : self)<br>==(other : JSON::Any)<br>==(other : YAML::Any)<br>==(other) ==</a>, <a href="../../reference#dup-instance-method" class="tooltip"> dup dup</a>, <a href="../../reference#hash(hasher)-instance-method" class="tooltip"> hash(hasher) hash</a>, <a href="../../reference#inspect(io:IO):Nil-instance-method" class="tooltip"> inspect(io : IO) : Nil inspect</a>, <a href="../../reference#object_id:UInt64-instance-method" class="tooltip"> object_id : UInt64 object_id</a>, <a href="../../reference#pretty_print(pp):Nil-instance-method" class="tooltip"> pretty_print(pp) : Nil pretty_print</a>, <a href="../../reference#same?(other:Reference)-instance-method" class="tooltip"> same?(other : Reference)<br>same?(other : Nil) same?</a>, <a href="../../reference#to_s(io:IO):Nil-instance-method" class="tooltip"> to_s(io : IO) : Nil to_s</a> <h3>Constructor methods inherited from class <code><a href="../../reference">Reference</a></code>
</h3> <a href="../../reference#new-class-method" class="tooltip"> new new</a> <h3>Instance methods inherited from class <code><a href="../../object">Object</a></code>
</h3> <a href="../../object#!:Bool-instance-method" class="tooltip"> ! : Bool !</a>, <a href="../../object#!=(other)-instance-method" class="tooltip"> !=(other) !=</a>, <a href="../../object#!~(other)-instance-method" class="tooltip"> !~(other) !~</a>, <a href="../../object#==(other)-instance-method" class="tooltip"> ==(other) ==</a>, <a href="../../object#===(other:JSON::Any)-instance-method" class="tooltip"> ===(other : JSON::Any)<br>===(other : YAML::Any)<br>===(other) ===</a>, <a href="../../object#=~(other)-instance-method" class="tooltip"> =~(other) =~</a>, <a href="../../object#as(type:Class)-instance-method" class="tooltip"> as(type : Class) as</a>, <a href="../../object#as?(type:Class)-instance-method" class="tooltip"> as?(type : Class) as?</a>, <a href="../../object#class-instance-method" class="tooltip"> class class</a>, <a href="../../object#dup-instance-method" class="tooltip"> dup dup</a>, <a href="../../object#hash(hasher)-instance-method" class="tooltip"> hash(hasher)<br>hash hash</a>, <a href="../../object#in?(*values:Object):Bool-instance-method" class="tooltip"> in?(*values : Object) : Bool<br>in?(collection) : Bool in?</a>, <a href="../../object#inspect:String-instance-method" class="tooltip"> inspect : String<br>inspect(io : IO) : Nil inspect</a>, <a href="../../object#is_a?(type:Class):Bool-instance-method" class="tooltip"> is_a?(type : Class) : Bool is_a?</a>, <a href="../../object#itself-instance-method" class="tooltip"> itself itself</a>, <a href="../../object#nil?:Bool-instance-method" class="tooltip"> nil? : Bool nil?</a>, <a href="../../object#not_nil!-instance-method" class="tooltip"> not_nil! not_nil!</a>, <a href="#" class="tooltip"> pretty_inspect(width = 79, newline = "\n", indent = 0) : String pretty_inspect</a>, <a href="../../object#pretty_print(pp:PrettyPrint):Nil-instance-method" class="tooltip"> pretty_print(pp : PrettyPrint) : Nil pretty_print</a>, <a href="../../object#responds_to?(name:Symbol):Bool-instance-method" class="tooltip"> responds_to?(name : Symbol) : Bool responds_to?</a>, <a href="../../object#tap(&amp;)-instance-method" class="tooltip"> tap(&amp;) tap</a>, <a href="../../object#to_json(io:IO)-instance-method" class="tooltip"> to_json(io : IO)<br>to_json to_json</a>, <a href="#" class="tooltip"> to_pretty_json(io : IO, indent : String = " ")<br>to_pretty_json(indent : String = " ") to_pretty_json</a>, <a href="../../object#to_s:String-instance-method" class="tooltip"> to_s : String<br>to_s(io : IO) : Nil to_s</a>, <a href="../../object#to_yaml(io:IO)-instance-method" class="tooltip"> to_yaml(io : IO)<br>to_yaml to_yaml</a>, <a href="../../object#try(&amp;)-instance-method" class="tooltip"> try(&amp;) try</a>, <a href="../../object#unsafe_as(type:T.class)forallT-instance-method" class="tooltip"> unsafe_as(type : T.class) forall T unsafe_as</a> <h3>Class methods inherited from class <code><a href="../../object">Object</a></code>
</h3> <a href="../../object#from_json(string_or_io,root:String)-class-method" class="tooltip"> from_json(string_or_io, root : String)<br>from_json(string_or_io) from_json</a>, <a href="../../object#from_yaml(string_or_io:String%7CIO)-class-method" class="tooltip"> from_yaml(string_or_io : String | IO) from_yaml</a> </div> <h2>  Constructor Detail </h2> <div class="entry-detail" id="new(io:IO,boundary:String)-class-method"> <h3 class="signature">def self.<strong>new</strong>(io : <a href="../../io">IO</a>, boundary : <a href="../../string">String</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart/parser.cr#L25" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Creates a new <code><a href="parser">Multipart::Parser</a></code> which parses <em>io</em> with multipart boundary <em>boundary</em>.</p> </div>   </div> <h2>  Instance Method Detail </h2> <div class="entry-detail" id="has_next?-instance-method"> <h3 class="signature">def <strong>has_next?</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart/parser.cr#L82" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>True if <code><a href="parser#next(&amp;)-instance-method">#next</a></code> can be called legally.</p> </div>   </div> <div class="entry-detail" id="next(&amp;)-instance-method"> <h3 class="signature">def <strong>next</strong>(&amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/mime/multipart/parser.cr#L50" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Parses the next body part and yields headers as <code><a href="../../http/headers">HTTP::Headers</a></code> and the body text as an <code><a href="../../io">IO</a></code>.</p> <p>This method yields once instead of returning the values, because the IO object yielded to the block is only valid while the block is executing. The IO object will be closed as soon as the block returns. To store the content of the body part for longer than the block, the IO must be read into memory.</p> <pre data-language="crystal">require "mime/multipart"

multipart = "--aA40\r\nContent-Type: text/plain\r\n\r\nbody\r\n--aA40--"
parser = MIME::Multipart::Parser.new(IO::Memory.new(multipart), "aA40")
parser.next do |headers, io|
  headers["Content-Type"] # =&gt; "text/plain"
  io.gets_to_end          # =&gt; "body"
end</pre> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/api/1.0.0/MIME/Multipart/Parser.html" class="_attribution-link" target="_blank">https://crystal-lang.org/api/1.0.0/MIME/Multipart/Parser.html</a>
  </p>
</div>
