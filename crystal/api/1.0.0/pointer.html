<h1 class="type-name"> struct Pointer(T) </h1> <ul class="superclass-hierarchy">
<li class="superclass"><a href="pointer">Pointer(T)</a></li>
<li class="superclass"><a href="value">Value</a></li>
<li class="superclass"><a href="object">Object</a></li>
</ul> <h2>  Overview </h2> <p>A typed pointer to some memory.</p> <p>This is the only unsafe type in Crystal. If you are using a pointer, you are writing unsafe code because a pointer doesn't know where it's pointing to nor how much memory starting from it is valid. However, pointers make it possible to interface with C and to implement efficient data structures. For example, both <code><a href="array">Array</a></code> and <code><a href="hash">Hash</a></code> are implemented using pointers.</p> <p>You can obtain pointers in four ways: <code><a href="pointer#new-class-method">#new</a></code>, <code><a href="pointer#malloc(size:Int,value:T)-class-method">#malloc</a></code>, <code>pointerof</code> and by calling a C function that returns a pointer.</p> <p><code>pointerof(x)</code>, where <em>x</em> is a variable or an instance variable, returns a pointer to that variable:</p> <pre data-language="crystal">x = 1
ptr = pointerof(x)
ptr.value = 2
x # =&gt; 2</pre> <p>Note that a pointer is <em>falsey</em> if it's null (if its address is zero).</p> <p>When calling a C function that expects a pointer you can also pass <code>nil</code> instead of using <code><a href="pointer#null-class-method">Pointer.null</a></code> to construct a null pointer.</p> <p>For a safe alternative, see <code><a href="slice">Slice</a></code>, which is a pointer with a size and with bounds checking.</p> <h2>  Included Modules </h2> <ul class="other-types-list"> <li class="other-type">
<a href="comparable">Comparable</a>(<a href="pointer">Pointer(T)</a>)</li> </ul> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L30" target="_blank"> pointer.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L135" target="_blank"> primitives.cr </a> <br> <h2>  Constructors </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#new(address:UInt64)-class-method" class="signature"><strong>.new</strong>(address : UInt64)</a> <div class="summary"><p>Returns a pointer that points to the given memory address.</p></div> </li> <li class="entry-summary"> <a href="#new(address:Int)-class-method" class="signature"><strong>.new</strong>(address : Int)</a> <div class="summary"><p>Returns a pointer that points to the given memory address.</p></div> </li> <li class="entry-summary"> <a href="#new-class-method" class="signature"><strong>.new</strong></a> </li> </ul> <h2>  Class Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#malloc(size:Int,value:T)-class-method" class="signature"><strong>.malloc</strong>(size : Int, value : T)</a> <div class="summary"><p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to <em>value</em> and returns a pointer to the first byte from that memory.</p></div> </li> <li class="entry-summary"> <a href="#malloc(size:UInt64)-class-method" class="signature"><strong>.malloc</strong>(size : UInt64)</a> <div class="summary"><p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to zero and returns a pointer to the first byte from that memory.</p></div> </li> <li class="entry-summary"> <a href="#malloc(size:Int=1)-class-method" class="signature"><strong>.malloc</strong>(size : Int = 1)</a> <div class="summary"><p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to zero and returns a pointer to the first byte from that memory.</p></div> </li> <li class="entry-summary"> <a href="#malloc(size:Int,&amp;block:Int32-%3ET)-class-method" class="signature"><strong>.malloc</strong>(size : Int, &amp;block : Int32 -&gt; T)</a> <div class="summary"><p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to the value returned by the block (which is invoked once with each index in the range <code>0...size</code>) and returns a pointer to the first byte from that memory.</p></div> </li> <li class="entry-summary"> <a href="#null-class-method" class="signature"><strong>.null</strong></a> <div class="summary"><p>Returns a pointer whose memory address is zero.</p></div> </li> </ul> <h2>  Instance Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#+(offset:Int64):self-instance-method" class="signature"><strong>#+</strong>(offset : Int64) : self</a> <div class="summary"><p>Returns a new pointer whose address is this pointer's address incremented by <code>other * sizeof(T)</code>.</p></div> </li> <li class="entry-summary"> <a href="#+(other:Int)-instance-method" class="signature"><strong>#+</strong>(other : Int)</a> <div class="summary"><p>Returns a new pointer whose address is this pointer's address incremented by <code>other * sizeof(T)</code>.</p></div> </li> <li class="entry-summary"> <a href="#-(other:Int)-instance-method" class="signature"><strong>#-</strong>(other : Int)</a> <div class="summary"><p>Returns a new pointer whose address is this pointer's address decremented by <code>other * sizeof(T)</code>.</p></div> </li> <li class="entry-summary"> <a href="#-(other:self):Int64-instance-method" class="signature"><strong>#-</strong>(other : self) : Int64</a> <div class="summary"><p>Returns how many T elements are there between this pointer and <em>other</em>.</p></div> </li> <li class="entry-summary"> <a href="#(other:self)-instance-method" class="signature"><strong>#&lt;=&gt;</strong>(other : self)</a> <div class="summary"><p>Returns <code>-1</code>, <code>0</code> or <code>1</code> depending on whether this pointer's address is less, equal or greater than <em>other</em>'s address, respectively.</p></div> </li> <li class="entry-summary"> <a href="#%5B%5D(offset)-instance-method" class="signature"><strong>#[]</strong>(offset)</a> <div class="summary"><p>Gets the value pointed at this pointer's address plus <code>offset * sizeof(T)</code>.</p></div> </li> <li class="entry-summary"> <a href="#%5B%5D=(offset,value:T)-instance-method" class="signature"><strong>#[]=</strong>(offset, value : T)</a> <div class="summary"><p>Sets the value pointed at this pointer's address plus <code>offset * sizeof(T)</code>.</p></div> </li> <li class="entry-summary"> <a href="#address:UInt64-instance-method" class="signature"><strong>#address</strong> : UInt64</a> <div class="summary"><p>Returns the address of this pointer.</p></div> </li> <li class="entry-summary"> <a href="#appender-instance-method" class="signature"><strong>#appender</strong></a> <div class="summary"><p>Returns a <code><a href="pointer/appender">Pointer::Appender</a></code> for this pointer.</p></div> </li> <li class="entry-summary"> <a href="#clear(count=1)-instance-method" class="signature"><strong>#clear</strong>(count = 1)</a> <div class="summary"><p>Clears (sets to "zero" bytes) a number of values pointed by this pointer.</p></div> </li> <li class="entry-summary"> <a href="#clone-instance-method" class="signature"><strong>#clone</strong></a> </li> <li class="entry-summary"> <a href="#copy_from(source:Pointer(T),count:Int)-instance-method" class="signature"><strong>#copy_from</strong>(source : Pointer(T), count : Int)</a> <div class="summary"><p>Copies <em>count</em> elements from <em>source</em> into <code>self</code>.</p></div> </li> <li class="entry-summary"> <a href="#copy_to(target:Pointer,count:Int)-instance-method" class="signature"><strong>#copy_to</strong>(target : Pointer, count : Int)</a> <div class="summary"><p>Copies <em>count</em> elements from <code>self</code> into <em>target</em>.</p></div> </li> <li class="entry-summary"> <a href="#hash(hasher)-instance-method" class="signature"><strong>#hash</strong>(hasher)</a> <div class="summary"><p>Returns the address of this pointer.</p></div> </li> <li class="entry-summary"> <a href="#map!(count:Int,&amp;)-instance-method" class="signature"><strong>#map!</strong>(count : Int, &amp;)</a> <div class="summary"><p>Sets <em>count</em> consecutive values pointed by this pointer to the values returned by the block.</p></div> </li> <li class="entry-summary"> <a href="#map_with_index!(count:Int,offset=0,&amp;)-instance-method" class="signature"><strong>#map_with_index!</strong>(count : Int, offset = 0, &amp;)</a> <div class="summary"><p>Like <code><a href="pointer#map!(count:Int,&amp;)-instance-method">#map!</a></code>, but yields 2 arguments, the element and its index</p></div> </li> <li class="entry-summary"> <a href="#memcmp(other:Pointer(T),count:Int)-instance-method" class="signature"><strong>#memcmp</strong>(other : Pointer(T), count : Int)</a> <div class="summary"><p>Compares <em>count</em> elements from this pointer and <em>other</em>, byte by byte.</p></div> </li> <li class="entry-summary"> <a href="#move_from(source:Pointer(T),count:Int)-instance-method" class="signature"><strong>#move_from</strong>(source : Pointer(T), count : Int)</a> <div class="summary"><p>Copies <em>count</em> elements from <em>source</em> into <code>self</code>.</p></div> </li> <li class="entry-summary"> <a href="#move_to(target:Pointer,count:Int)-instance-method" class="signature"><strong>#move_to</strong>(target : Pointer, count : Int)</a> <div class="summary"><p>Copies <em>count</em> elements from <code>self</code> into <em>source</em>.</p></div> </li> <li class="entry-summary"> <a href="#null?-instance-method" class="signature"><strong>#null?</strong></a> <div class="summary"><p>Returns <code>true</code> if this pointer's address is zero.</p></div> </li> <li class="entry-summary"> <a href="#realloc(size:UInt64):self-instance-method" class="signature"><strong>#realloc</strong>(size : UInt64) : self</a> <div class="summary"><p>Tries to change the size of the allocation pointed to by this pointer to <em>size</em>, and returns that pointer.</p></div> </li> <li class="entry-summary"> <a href="#realloc(size:Int)-instance-method" class="signature"><strong>#realloc</strong>(size : Int)</a> <div class="summary"><p>Tries to change the size of the allocation pointed to by this pointer to <em>size</em>, and returns that pointer.</p></div> </li> <li class="entry-summary"> <a href="#shuffle!(count:Int,random=Random::DEFAULT)-instance-method" class="signature"><strong>#shuffle!</strong>(count : Int, random = Random::DEFAULT)</a> <div class="summary"><p>Shuffles <em>count</em> consecutive values pointed by this pointer.</p></div> </li> <li class="entry-summary"> <a href="#swap(i,j)-instance-method" class="signature"><strong>#swap</strong>(i, j)</a> <div class="summary"><p>Swaps the contents pointed at the offsets <em>i</em> and <em>j</em>.</p></div> </li> <li class="entry-summary"> <a href="#to_s(io:IO):Nil-instance-method" class="signature"><strong>#to_s</strong>(io : IO) : Nil</a> <div class="summary"><p>Appends a string representation of this pointer to the given <code><a href="io">IO</a></code>, including its type and address in hexadecimal.</p></div> </li> <li class="entry-summary"> <a href="#to_slice(size)-instance-method" class="signature"><strong>#to_slice</strong>(size)</a> <div class="summary"><p>Returns a <code><a href="slice">Slice</a></code> that points to this pointer and is bounded by the given <em>size</em>.</p></div> </li> <li class="entry-summary"> <a href="#value:T-instance-method" class="signature"><strong>#value</strong> : T</a> <div class="summary"><p>Gets the value pointed by this pointer.</p></div> </li> <li class="entry-summary"> <a href="#value=(value:T)-instance-method" class="signature"><strong>#value=</strong>(value : T)</a> <div class="summary"><p>Sets the value pointed by this pointer.</p></div> </li> </ul> <div class="methods-inherited"> <h3>Instance methods inherited from module <code><a href="comparable">Comparable</a>(<a href="pointer">Pointer(T)</a>)</code>
</h3> <a href="comparable#%3C(other:T(T))-instance-method" class="tooltip">  &lt;</a>, <a href="comparable#%3C=(other:T(T))-instance-method" class="tooltip"> &lt;=(other : T(T)) &lt;=</a>, <a href="comparable#(other:T(T))-instance-method" class="tooltip"> &lt;=&gt;(other : T(T)) &lt;=&gt;</a>, <a href="comparable#==(other:T(T))-instance-method" class="tooltip"> ==(other : T(T)) ==</a>, <a href="comparable#%3E(other:T(T))-instance-method" class="tooltip"> &gt;(other : T(T)) &gt;</a>, <a href="comparable#%3E=(other:T(T))-instance-method" class="tooltip"> &gt;=(other : T(T)) &gt;=</a>, <a href="comparable#clamp(min,max)-instance-method" class="tooltip"> clamp(min, max)<br>clamp(range : Range) clamp</a> <h3>Instance methods inherited from struct <code><a href="value">Value</a></code>
</h3> <a href="value#==(other:JSON::Any)-instance-method" class="tooltip"> ==(other : JSON::Any)<br>==(other : YAML::Any)<br>==(other) ==</a>, <a href="value#dup-instance-method" class="tooltip"> dup dup</a> <h3>Instance methods inherited from class <code><a href="object">Object</a></code>
</h3> <a href="object#!:Bool-instance-method" class="tooltip"> ! : Bool !</a>, <a href="object#!=(other)-instance-method" class="tooltip"> !=(other) !=</a>, <a href="object#!~(other)-instance-method" class="tooltip"> !~(other) !~</a>, <a href="object#==(other)-instance-method" class="tooltip"> ==(other) ==</a>, <a href="object#===(other:JSON::Any)-instance-method" class="tooltip"> ===(other : JSON::Any)<br>===(other : YAML::Any)<br>===(other) ===</a>, <a href="object#=~(other)-instance-method" class="tooltip"> =~(other) =~</a>, <a href="object#as(type:Class)-instance-method" class="tooltip"> as(type : Class) as</a>, <a href="object#as?(type:Class)-instance-method" class="tooltip"> as?(type : Class) as?</a>, <a href="object#class-instance-method" class="tooltip"> class class</a>, <a href="object#dup-instance-method" class="tooltip"> dup dup</a>, <a href="object#hash(hasher)-instance-method" class="tooltip"> hash(hasher)<br>hash hash</a>, <a href="object#in?(*values:Object):Bool-instance-method" class="tooltip"> in?(*values : Object) : Bool<br>in?(collection) : Bool in?</a>, <a href="object#inspect:String-instance-method" class="tooltip"> inspect : String<br>inspect(io : IO) : Nil inspect</a>, <a href="object#is_a?(type:Class):Bool-instance-method" class="tooltip"> is_a?(type : Class) : Bool is_a?</a>, <a href="object#itself-instance-method" class="tooltip"> itself itself</a>, <a href="object#nil?:Bool-instance-method" class="tooltip"> nil? : Bool nil?</a>, <a href="object#not_nil!-instance-method" class="tooltip"> not_nil! not_nil!</a>, <a href="#" class="tooltip"> pretty_inspect(width = 79, newline = "\n", indent = 0) : String pretty_inspect</a>, <a href="object#pretty_print(pp:PrettyPrint):Nil-instance-method" class="tooltip"> pretty_print(pp : PrettyPrint) : Nil pretty_print</a>, <a href="object#responds_to?(name:Symbol):Bool-instance-method" class="tooltip"> responds_to?(name : Symbol) : Bool responds_to?</a>, <a href="object#tap(&amp;)-instance-method" class="tooltip"> tap(&amp;) tap</a>, <a href="object#to_json(io:IO)-instance-method" class="tooltip"> to_json(io : IO)<br>to_json to_json</a>, <a href="#" class="tooltip"> to_pretty_json(io : IO, indent : String = " ")<br>to_pretty_json(indent : String = " ") to_pretty_json</a>, <a href="object#to_s:String-instance-method" class="tooltip"> to_s : String<br>to_s(io : IO) : Nil to_s</a>, <a href="object#to_yaml(io:IO)-instance-method" class="tooltip"> to_yaml(io : IO)<br>to_yaml to_yaml</a>, <a href="object#try(&amp;)-instance-method" class="tooltip"> try(&amp;) try</a>, <a href="object#unsafe_as(type:T.class)forallT-instance-method" class="tooltip"> unsafe_as(type : T.class) forall T unsafe_as</a> <h3>Class methods inherited from class <code><a href="object">Object</a></code>
</h3> <a href="object#from_json(string_or_io,root:String)-class-method" class="tooltip"> from_json(string_or_io, root : String)<br>from_json(string_or_io) from_json</a>, <a href="object#from_yaml(string_or_io:String%7CIO)-class-method" class="tooltip"> from_yaml(string_or_io : String | IO) from_yaml</a> </div> <h2>  Constructor Detail </h2> <div class="entry-detail" id="new(address:UInt64)-class-method"> <h3 class="signature">def self.<strong>new</strong>(address : <a href="uint64">UInt64</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L164" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a pointer that points to the given memory address. This doesn't allocate memory.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(5678_u64)
ptr.address # =&gt; 5678</pre> </div>   </div> <div class="entry-detail" id="new(address:Int)-class-method"> <h3 class="signature">def self.<strong>new</strong>(address : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L415" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a pointer that points to the given memory address. This doesn't allocate memory.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(5678)
ptr.address # =&gt; 5678</pre> </div>   </div> <div class="entry-detail" id="new-class-method"> <h3 class="signature">def self.<strong>new</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L30" target="_blank" class="view-source">Source</a>
</h3>   </div> <h2>  Class Method Detail </h2> <div class="entry-detail" id="malloc(size:Int,value:T)-class-method"> <h3 class="signature">def self.<strong>malloc</strong>(size : <a href="int">Int</a>, value : T)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L455" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to <em>value</em> and returns a pointer to the first byte from that memory. The memory is allocated by the <code><a href="gc">GC</a></code>, so when there are no pointers to this memory, it will be automatically freed.</p> <pre data-language="crystal"># An Int32 occupies 4 bytes, so here we are requesting 8 bytes
# initialized to the number 42
ptr = Pointer.malloc(2, 42)
ptr[0] # =&gt; 42
ptr[1] # =&gt; 42</pre> </div>   </div> <div class="entry-detail" id="malloc(size:UInt64)-class-method"> <h3 class="signature">def self.<strong>malloc</strong>(size : <a href="uint64">UInt64</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L153" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to zero and returns a pointer to the first byte from that memory. The memory is allocated by the <code><a href="gc">GC</a></code>, so when there are no pointers to this memory, it will be automatically freed.</p> <pre data-language="crystal"># Allocate memory for an Int32: 4 bytes
ptr = Pointer(Int32).malloc(1_u64)
ptr.value # =&gt; 0

# Allocate memory for 10 Int32: 40 bytes
ptr = Pointer(Int32).malloc(10_u64)
ptr[0] # =&gt; 0
# ...
ptr[9] # =&gt; 0</pre> </div>   </div> <div class="entry-detail" id="malloc(size:Int=1)-class-method"> <h3 class="signature">def self.<strong>malloc</strong>(size : <a href="int">Int</a> = 1)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L435" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to zero and returns a pointer to the first byte from that memory. The memory is allocated by the <code><a href="gc">GC</a></code>, so when there are no pointers to this memory, it will be automatically freed.</p> <pre data-language="crystal"># Allocate memory for an Int32: 4 bytes
ptr = Pointer(Int32).malloc
ptr.value # =&gt; 0

# Allocate memory for 10 Int32: 40 bytes
ptr = Pointer(Int32).malloc(10)
ptr[0] # =&gt; 0
# ...
ptr[9] # =&gt; 0</pre> </div>   </div> <div class="entry-detail" id="malloc(size:Int,&amp;block:Int32-&gt;T)-class-method"> <h3 class="signature">def self.<strong>malloc</strong>(size : <a href="int">Int</a>, &amp;block : <a href="int32">Int32</a> -&gt; T)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L476" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Allocates <code>size * sizeof(T)</code> bytes from the system's heap initialized to the value returned by the block (which is invoked once with each index in the range <code>0...size</code>) and returns a pointer to the first byte from that memory. The memory is allocated by the <code><a href="gc">GC</a></code>, so when there are no pointers to this memory, it will be automatically freed.</p> <pre data-language="crystal"># An Int32 occupies 4 bytes, so here we are requesting 16 bytes.
# i is an index in the range 0 .. 3
ptr = Pointer.malloc(4) { |i| i + 10 }
ptr[0] # =&gt; 10
ptr[1] # =&gt; 11
ptr[2] # =&gt; 12
ptr[3] # =&gt; 13</pre> </div>   </div> <div class="entry-detail" id="null-class-method"> <h3 class="signature">def self.<strong>null</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L405" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a pointer whose memory address is zero. This doesn't allocate memory.</p> <p>When calling a C function you can also pass <code>nil</code> instead of constructing a null pointer with this method.</p> <pre data-language="crystal">ptr = Pointer(Int32).null
ptr.address # =&gt; 0</pre> </div>   </div> <h2>  Instance Method Detail </h2> <div class="entry-detail" id="+(offset:Int64):self-instance-method"> <h3 class="signature">def <strong>+</strong>(offset : <a href="int64">Int64</a>) : self<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L230" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a new pointer whose address is this pointer's address incremented by <code>other * sizeof(T)</code>.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(1234)
ptr.address # =&gt; 1234

# An Int32 occupies four bytes
ptr2 = ptr + 1_u64
ptr2.address # =&gt; 1238</pre> </div>   </div> <div class="entry-detail" id="+(other:Int)-instance-method"> <h3 class="signature">def <strong>+</strong>(other : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L80" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a new pointer whose address is this pointer's address incremented by <code>other * sizeof(T)</code>.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(1234)
ptr.address # =&gt; 1234

# An Int32 occupies four bytes
ptr2 = ptr + 1
ptr2.address # =&gt; 1238</pre> </div>   </div> <div class="entry-detail" id="-(other:Int)-instance-method"> <h3 class="signature">def <strong>-</strong>(other : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L94" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a new pointer whose address is this pointer's address decremented by <code>other * sizeof(T)</code>.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(1234)
ptr.address # =&gt; 1234

# An Int32 occupies four bytes
ptr2 = ptr - 1
ptr2.address # =&gt; 1230</pre> </div>   </div> <div class="entry-detail" id="-(other:self):Int64-instance-method"> <h3 class="signature">def <strong>-</strong>(other : self) : <a href="int64">Int64</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L242" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns how many T elements are there between this pointer and <em>other</em>. That is, this is <code>(self<a href="pointer#address:UInt64-instance-method">.address</a> - other.address) / sizeof(T)</code>.</p> <pre data-language="crystal">ptr1 = Pointer(Int32).malloc(4)
ptr2 = ptr1 + 2
ptr2 - ptr1 # =&gt; 2</pre> </div>   </div> <div class="entry-detail" id="(other:self)-instance-method"> <h3 class="signature">def <strong>&lt;=&gt;</strong>(other : self)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L103" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>-1</code>, <code>0</code> or <code>1</code> depending on whether this pointer's address is less, equal or greater than <em>other</em>'s address, respectively.</p> </div>   </div> <div class="entry-detail" id="[](offset)-instance-method"> <h3 class="signature">def <strong>[]</strong>(offset)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L116" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Gets the value pointed at this pointer's address plus <code>offset * sizeof(T)</code>.</p> <pre data-language="crystal">ptr = Pointer.malloc(4) { |i| i + 10 }
ptr[0] # =&gt; 10
ptr[1] # =&gt; 11
ptr[2] # =&gt; 12
ptr[3] # =&gt; 13</pre> </div>   </div> <div class="entry-detail" id="[]=(offset,value:T)-instance-method"> <h3 class="signature">def <strong>[]=</strong>(offset, value : T)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L129" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the value pointed at this pointer's address plus <code>offset * sizeof(T)</code>.</p> <pre data-language="crystal">ptr = Pointer(Int32).malloc(4) # [0, 0, 0, 0]
ptr[1] = 42

ptr2 = ptr + 1
ptr2.value # =&gt; 42</pre> </div>   </div> <div class="entry-detail" id="address:UInt64-instance-method"> <h3 class="signature">def <strong>address</strong> : <a href="uint64">UInt64</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L196" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the address of this pointer.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(1234)
ptr.address # =&gt; 1234</pre> </div>   </div> <div class="entry-detail" id="appender-instance-method"> <h3 class="signature">def <strong>appender</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L483" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a <code><a href="pointer/appender">Pointer::Appender</a></code> for this pointer.</p> </div>   </div> <div class="entry-detail" id="clear(count=1)-instance-method"> <h3 class="signature">def <strong>clear</strong>(count = 1)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L505" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Clears (sets to "zero" bytes) a number of values pointed by this pointer.</p> <pre data-language="crystal">ptr = Pointer.malloc(6) { |i| i + 10 } # [10, 11, 12, 13, 14, 15]
ptr.clear(3)
ptr.to_slice(6) # =&gt; Slice[0, 0, 0, 13, 14, 15]</pre> </div>   </div> <div class="entry-detail" id="clone-instance-method"> <h3 class="signature">def <strong>clone</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L509" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="copy_from(source:Pointer(T),count:Int)-instance-method"> <h3 class="signature">def <strong>copy_from</strong>(source : <a href="pointer">Pointer</a>(T), count : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L151" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Copies <em>count</em> elements from <em>source</em> into <code>self</code>. If <em>source</em> and <code>self</code> overlap, behaviour is undefined. Use <code><a href="pointer#move_from(source:Pointer(T),count:Int)-instance-method">#move_from</a></code> if they overlap (slower but always works).</p> <pre data-language="crystal">ptr1 = Pointer.malloc(4) { |i| i + 1 }  # [1, 2, 3, 4]
ptr2 = Pointer.malloc(4) { |i| i + 11 } # [11, 12, 13, 14]

# ptr2 -&gt; [11, 12, 13, 14]
#          ^---^           &lt;- copy this
# ptr1 -&gt; [1,  2,  3,  4]
#          ^---^           &lt;- here
ptr1.copy_from(ptr2, 2)
ptr1[0] # =&gt; 11
ptr1[1] # =&gt; 12
ptr1[2] # =&gt; 3
ptr1[3] # =&gt; 4</pre> </div>   </div> <div class="entry-detail" id="copy_to(target:Pointer,count:Int)-instance-method"> <h3 class="signature">def <strong>copy_to</strong>(target : <a href="pointer">Pointer</a>, count : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L182" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Copies <em>count</em> elements from <code>self</code> into <em>target</em>. If <code>self</code> and <em>target</em> overlap, behaviour is undefined. Use <code><a href="pointer#move_to(target:Pointer,count:Int)-instance-method">#move_to</a></code> if they overlap (slower but always works).</p> <pre data-language="crystal">ptr1 = Pointer.malloc(4) { |i| i + 1 }  # [1, 2, 3, 4]
ptr2 = Pointer.malloc(4) { |i| i + 11 } # [11, 12, 13, 14]

# ptr1 -&gt; [1,  2,  3,  4]
#          ^---^           &lt;- copy this
# ptr2 -&gt; [11, 12, 13, 14]
#          ^---^           &lt;- here
ptr1.copy_to(ptr2, 2)
ptr2[0] # =&gt; 1
ptr2[1] # =&gt; 2
ptr2[2] # =&gt; 13
ptr2[3] # =&gt; 14</pre> </div>   </div> <div class="entry-detail" id="hash(hasher)-instance-method"> <h3 class="signature">def <strong>hash</strong>(hasher)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L309" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the address of this pointer.</p> <pre data-language="crystal">ptr = Pointer(Int32).new(1234)
ptr.hash # =&gt; 1234</pre> </div>   </div> <div class="entry-detail" id="map!(count:Int,&amp;)-instance-method"> <h3 class="signature">def <strong>map!</strong>(count : <a href="int">Int</a>, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L379" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets <em>count</em> consecutive values pointed by this pointer to the values returned by the block.</p> <pre data-language="crystal">ptr = Pointer.malloc(4) { |i| i + 1 } # [1, 2, 3, 4]
ptr.map!(4) { |value| value * 2 }
ptr # [2, 4, 6, 8]</pre> </div>   </div> <div class="entry-detail" id="map_with_index!(count:Int,offset=0,&amp;)-instance-method"> <h3 class="signature">def <strong>map_with_index!</strong>(count : <a href="int">Int</a>, offset = 0, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L389" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Like <code><a href="pointer#map!(count:Int,&amp;)-instance-method">#map!</a></code>, but yields 2 arguments, the element and its index</p> <p>Accepts an optional <em>offset</em> parameter, which tells it to start counting from there.</p> </div>   </div> <div class="entry-detail" id="memcmp(other:Pointer(T),count:Int)-instance-method"> <h3 class="signature">def <strong>memcmp</strong>(other : <a href="pointer">Pointer</a>(T), count : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L285" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Compares <em>count</em> elements from this pointer and <em>other</em>, byte by byte.</p> <p>Returns 0 if both pointers point to the same sequence of <em>count</em> bytes. Otherwise returns the difference between the first two differing bytes (treated as UInt8).</p> <pre data-language="crystal">ptr1 = Pointer.malloc(4) { |i| i + 1 }  # [1, 2, 3, 4]
ptr2 = Pointer.malloc(4) { |i| i + 11 } # [11, 12, 13, 14]

ptr1.memcmp(ptr2, 4) # =&gt; -10
ptr2.memcmp(ptr1, 4) # =&gt; 10
ptr1.memcmp(ptr1, 4) # =&gt; 0</pre> </div>   </div> <div class="entry-detail" id="move_from(source:Pointer(T),count:Int)-instance-method"> <h3 class="signature">def <strong>move_from</strong>(source : <a href="pointer">Pointer</a>(T), count : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L203" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Copies <em>count</em> elements from <em>source</em> into <code>self</code>. <em>source</em> and <code>self</code> may overlap; the copy is always done in a non-destructive manner.</p> <pre data-language="crystal">ptr1 = Pointer.malloc(4) { |i| i + 1 } # ptr1 -&gt; [1, 2, 3, 4]
ptr2 = ptr1 + 1                        #             ^--------- ptr2

# [1, 2, 3, 4]
#  ^-----^       &lt;- copy this
#     ^------^   &lt;- here
ptr2.move_from(ptr1, 3)

ptr1[0] # =&gt; 1
ptr1[1] # =&gt; 1
ptr1[2] # =&gt; 2
ptr1[3] # =&gt; 3</pre> </div>   </div> <div class="entry-detail" id="move_to(target:Pointer,count:Int)-instance-method"> <h3 class="signature">def <strong>move_to</strong>(target : <a href="pointer">Pointer</a>, count : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L233" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Copies <em>count</em> elements from <code>self</code> into <em>source</em>. <em>source</em> and <code>self</code> may overlap; the copy is always done in a non-destructive manner.</p> <pre data-language="crystal">ptr1 = Pointer.malloc(4) { |i| i + 1 } # ptr1 -&gt; [1, 2, 3, 4]
ptr2 = ptr1 + 1                        #             ^--------- ptr2

# [1, 2, 3, 4]
#  ^-----^       &lt;- copy this
#     ^------^   &lt;- here
ptr1.move_to(ptr2, 3)

ptr1[0] # =&gt; 1
ptr1[1] # =&gt; 1
ptr1[2] # =&gt; 2
ptr1[3] # =&gt; 3</pre> </div>   </div> <div class="entry-detail" id="null?-instance-method"> <h3 class="signature">def <strong>null?</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L66" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>true</code> if this pointer's address is zero.</p> <pre data-language="crystal">a = 1
pointerof(a).null? # =&gt; false

b = Pointer(Int32).new(0)
b.null? # =&gt; true</pre> </div>   </div> <div class="entry-detail" id="realloc(size:UInt64):self-instance-method"> <h3 class="signature">def <strong>realloc</strong>(size : <a href="uint64">UInt64</a>) : self<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L215" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Tries to change the size of the allocation pointed to by this pointer to <em>size</em>, and returns that pointer.</p> <p>Since the space after the end of the block may be in use, realloc may find it necessary to copy the block to a new address where more free space is available. The value of realloc is the new address of the block. If the block needs to be moved, realloc copies the old contents.</p> <p>Remember to always assign the value of realloc.</p> <pre data-language="crystal">ptr = Pointer.malloc(4) { |i| i + 1 } # [1, 2, 3, 4]
ptr = ptr.realloc(8_u8)
ptr # [1, 2, 3, 4, 0, 0, 0, 0]</pre> </div>   </div> <div class="entry-detail" id="realloc(size:Int)-instance-method"> <h3 class="signature">def <strong>realloc</strong>(size : <a href="int">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L348" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Tries to change the size of the allocation pointed to by this pointer to <em>size</em>, and returns that pointer.</p> <p>Since the space after the end of the block may be in use, realloc may find it necessary to copy the block to a new address where more free space is available. The value of realloc is the new address of the block. If the block needs to be moved, realloc copies the old contents.</p> <p>Remember to always assign the value of realloc.</p> <pre data-language="crystal">ptr = Pointer.malloc(4) { |i| i + 1 } # [1, 2, 3, 4]
ptr = ptr.realloc(8)
ptr # [1, 2, 3, 4, 0, 0, 0, 0]</pre> </div>   </div> <div class="entry-detail" id="shuffle!(count:Int,random=Random::DEFAULT)-instance-method"> <h3 class="signature">def <strong>shuffle!</strong>(count : <a href="int">Int</a>, random = Random::DEFAULT)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L363" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Shuffles <em>count</em> consecutive values pointed by this pointer.</p> <pre data-language="crystal">ptr = Pointer.malloc(4) { |i| i + 1 } # [1, 2, 3, 4]
ptr.shuffle!(4)
ptr # [3, 4, 1, 2]</pre> </div>   </div> <div class="entry-detail" id="swap(i,j)-instance-method"> <h3 class="signature">def <strong>swap</strong>(i, j)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L299" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Swaps the contents pointed at the offsets <em>i</em> and <em>j</em>.</p> <pre data-language="crystal">ptr = Pointer.malloc(4) { |i| i + 1 }
ptr[2] # =&gt; 3
ptr[3] # =&gt; 4
ptr.swap(2, 3)
ptr[2] # =&gt; 4
ptr[3] # =&gt; 3</pre> </div>   </div> <div class="entry-detail" id="to_s(io:IO):Nil-instance-method"> <h3 class="signature">def <strong>to_s</strong>(io : <a href="io">IO</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L321" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Appends a string representation of this pointer to the given <code><a href="io">IO</a></code>, including its type and address in hexadecimal.</p> <pre data-language="crystal">ptr1 = Pointer(Int32).new(1234)
ptr1.to_s # =&gt; "Pointer(Int32)@0x4d2"

ptr2 = Pointer(Int32).new(0)
ptr2.to_s # =&gt; "Pointer(Int32).null"</pre> </div>   </div> <div class="entry-detail" id="to_slice(size)-instance-method"> <h3 class="signature">def <strong>to_slice</strong>(size)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/pointer.cr#L494" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a <code><a href="slice">Slice</a></code> that points to this pointer and is bounded by the given <em>size</em>.</p> <pre data-language="crystal">ptr = Pointer.malloc(6) { |i| i + 10 } # [10, 11, 12, 13, 14, 15]
slice = ptr.to_slice(4)                # =&gt; Slice[10, 11, 12, 13]
slice.class                            # =&gt; Slice(Int32)</pre> </div>   </div> <div class="entry-detail" id="value:T-instance-method"> <h3 class="signature">def <strong>value</strong> : T<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L175" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Gets the value pointed by this pointer.</p> <pre data-language="crystal">ptr = Pointer(Int32).malloc(4)
ptr.value = 42
ptr.value # =&gt; 42</pre> </div>   </div> <div class="entry-detail" id="value=(value:T)-instance-method"> <h3 class="signature">def <strong>value=</strong>(value : T)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/primitives.cr#L186" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the value pointed by this pointer.</p> <pre data-language="crystal">ptr = Pointer(Int32).malloc(4)
ptr.value = 42
ptr.value # =&gt; 42</pre> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/api/1.0.0/Pointer.html" class="_attribution-link" target="_blank">https://crystal-lang.org/api/1.0.0/Pointer.html</a>
  </p>
</div>
