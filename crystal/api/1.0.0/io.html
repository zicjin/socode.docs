<h1 class="type-name"> abstract class IO </h1> <ul class="superclass-hierarchy">
<li class="superclass"><a href="io">IO</a></li>
<li class="superclass"><a href="reference">Reference</a></li>
<li class="superclass"><a href="object">Object</a></li>
</ul> <h2>  Overview </h2> <p>The <code><a href="io">IO</a></code> class is the basis for all input and output in Crystal.</p> <p>This class is inherited by types like <code><a href="file">File</a></code>, <code><a href="socket">Socket</a></code> and <code><a href="io/memory">IO::Memory</a></code> and provides many useful methods for reading from and writing to an IO, like <code><a href="io#print(*objects:_):Nil-instance-method">#print</a></code>, <code><a href="io#puts:Nil-instance-method">#puts</a></code>, <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code> and <code><a href="io#printf(format_string,*args):Nil-instance-method">#printf</a></code>.</p> <p>The only requirement for a type including the <code><a href="io">IO</a></code> module is to define these two methods:</p> <ul>
<li>
<code><a href="io#read(slice:Bytes)-instance-method">#read(slice : Bytes)</a></code>: read at most <em>slice.size</em> bytes from IO into <em>slice</em> and return the number of bytes read</li>
<li>
<code><a href="io#write(slice:Bytes):Nil-instance-method">#write(slice : Bytes)</a></code>: write the whole <em>slice</em> into the IO</li>
</ul> <p>For example, this is a simple <code><a href="io">IO</a></code> on top of a <code><a href="bytes">Bytes</a></code>:</p> <pre data-language="crystal">class SimpleSliceIO &lt; IO
  def initialize(@slice : Bytes)
  end

  def read(slice : Bytes)
    slice.size.times { |i| slice[i] = @slice[i] }
    @slice += slice.size
    slice.size
  end

  def write(slice : Bytes) : Nil
    slice.size.times { |i| @slice[i] = slice[i] }
    @slice += slice.size
  end
end

slice = Slice.new(9) { |i| ('a'.ord + i).to_u8 }
String.new(slice) # =&gt; "abcdefghi"

io = SimpleSliceIO.new(slice)
io.gets(3) # =&gt; "abc"
io.print "xyz"
String.new(slice) # =&gt; "abcxyzghi"</pre> <h3>
Encoding</h3> <p>An <code><a href="io">IO</a></code> can be set an encoding with the <code><a href="io#set_encoding(encoding:String,invalid:Symbol?=nil)-instance-method">#set_encoding</a></code> method. When this is set, all string operations (<code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code>, <code><a href="io#gets_to_end:String-instance-method">#gets_to_end</a></code>, <code><a href="io#read_char:Char?-instance-method">#read_char</a></code>, <code><a href="io#self-instance-method">#&lt;&lt;</a></code>, <code><a href="io#print(*objects:_):Nil-instance-method">#print</a></code>, <code><a href="io#puts:Nil-instance-method">#puts</a></code> <code><a href="io#printf(format_string,*args):Nil-instance-method">#printf</a></code>) will write in the given encoding, and read from the given encoding. Byte operations (<code><a href="io#read(slice:Bytes)-instance-method">#read</a></code>, <code><a href="io#write(slice:Bytes):Nil-instance-method">#write</a></code>, <code><a href="io#read_byte:UInt8?-instance-method">#read_byte</a></code>, <code><a href="io#write_byte(byte:UInt8)-instance-method">#write_byte</a></code>) never do encoding/decoding operations.</p> <p>If an encoding is not set, the default one is UTF-8.</p> <p>Mixing string and byte operations might not give correct results and should be avoided, as string operations might need to read extra bytes in order to get characters in the given encoding.</p> <h2>  Direct Known Subclasses </h2> <ul class="other-types-list"> <li class="other-type"><a href="compress/deflate/reader">Compress::Deflate::Reader</a></li> <li class="other-type"><a href="compress/deflate/writer">Compress::Deflate::Writer</a></li> <li class="other-type"><a href="compress/gzip/reader">Compress::Gzip::Reader</a></li> <li class="other-type"><a href="compress/gzip/writer">Compress::Gzip::Writer</a></li> <li class="other-type"><a href="compress/zlib/reader">Compress::Zlib::Reader</a></li> <li class="other-type"><a href="compress/zlib/writer">Compress::Zlib::Writer</a></li> <li class="other-type"><a href="http/server/response">HTTP::Server::Response</a></li> <li class="other-type"><a href="io/delimited">IO::Delimited</a></li> <li class="other-type"><a href="io/digest">IO::Digest</a></li> <li class="other-type"><a href="io/filedescriptor">IO::FileDescriptor</a></li> <li class="other-type"><a href="io/hexdump">IO::Hexdump</a></li> <li class="other-type"><a href="io/memory">IO::Memory</a></li> <li class="other-type"><a href="io/multiwriter">IO::MultiWriter</a></li> <li class="other-type"><a href="io/sized">IO::Sized</a></li> <li class="other-type"><a href="io/stapled">IO::Stapled</a></li> <li class="other-type"><a href="openssl/ssl/socket">OpenSSL::SSL::Socket</a></li> <li class="other-type"><a href="socket">Socket</a></li> <li class="other-type"><a href="string/builder">String::Builder</a></li> </ul> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L60" target="_blank"> io.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io/encoding.cr#L5" target="_blank"> io/encoding.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io/error.cr#L1" target="_blank"> io/error.cr </a> <br> <h2>  Class Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#copy(src,dst,limit:Int):Int64-class-method" class="signature"><strong>.copy</strong>(src, dst, limit : Int) : Int64</a> <div class="summary"><p>Copy at most <em>limit</em> bytes from <em>src</em> to <em>dst</em>.</p></div> </li> <li class="entry-summary"> <a href="#copy(src,dst):Int64-class-method" class="signature"><strong>.copy</strong>(src, dst) : Int64</a> <div class="summary"><p>Copy all contents from <em>src</em> to <em>dst</em>.</p></div> </li> <li class="entry-summary"> <a href="#pipe(read_blocking=false,write_blocking=false):Tuple(IO::FileDescriptor,IO::FileDescriptor)-class-method" class="signature"><strong>.pipe</strong>(read_blocking = false, write_blocking = false) : Tuple(IO::FileDescriptor, IO::FileDescriptor)</a> <div class="summary"><p>Creates a pair of pipe endpoints (connected to each other) and returns them as a two-element <code><a href="tuple">Tuple</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#pipe(read_blocking=false,write_blocking=false,&amp;)-class-method" class="signature"><strong>.pipe</strong>(read_blocking = false, write_blocking = false, &amp;)</a> <div class="summary"><p>Creates a pair of pipe endpoints (connected to each other) and passes them to the given block.</p></div> </li> <li class="entry-summary"> <a href="#same_content?(stream1:IO,stream2:IO)-class-method" class="signature"><strong>.same_content?</strong>(stream1 : IO, stream2 : IO)</a> <div class="summary"><p>Compares two streams <em>stream1</em> to <em>stream2</em> to determine if they are identical.</p></div> </li> </ul> <h2>  Instance Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#self-instance-method" class="signature"><strong>#&lt;&lt;</strong>(obj) : self</a> <div class="summary"><p>Writes the given object into this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#close-instance-method" class="signature"><strong>#close</strong></a> <div class="summary"><p>Closes this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#closed?-instance-method" class="signature"><strong>#closed?</strong></a> <div class="summary"><p>Returns <code>true</code> if this <code><a href="io">IO</a></code> is closed.</p></div> </li> <li class="entry-summary"> <a href="#each_byte(&amp;):Nil-instance-method" class="signature"><strong>#each_byte</strong>(&amp;) : Nil</a> <div class="summary"><p>Invokes the given block with each byte (<code><a href="uint8">UInt8</a></code>) in this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_byte-instance-method" class="signature"><strong>#each_byte</strong></a> <div class="summary"><p>Returns an <code><a href="iterator">Iterator</a></code> for the bytes in this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_char(&amp;):Nil-instance-method" class="signature"><strong>#each_char</strong>(&amp;) : Nil</a> <div class="summary"><p>Invokes the given block with each <code><a href="char">Char</a></code> in this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_char-instance-method" class="signature"><strong>#each_char</strong></a> <div class="summary"><p>Returns an <code><a href="iterator">Iterator</a></code> for the chars in this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_line(*args,**options,&amp;block:String-%3E):Nil-instance-method" class="signature"><strong>#each_line</strong>(*args, **options, &amp;block : String -&gt; ) : Nil</a> <div class="summary"><p>Invokes the given block with each <em>line</em> in this <code><a href="io">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code> methods.</p></div> </li> <li class="entry-summary"> <a href="#each_line(*args,**options)-instance-method" class="signature"><strong>#each_line</strong>(*args, **options)</a> <div class="summary"><p>Returns an <code><a href="iterator">Iterator</a></code> for the <em>lines</em> in this <code><a href="io">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code> methods.</p></div> </li> <li class="entry-summary"> <a href="#encoding:String-instance-method" class="signature"><strong>#encoding</strong> : String</a> <div class="summary"><p>Returns this <code><a href="io">IO</a></code>'s encoding.</p></div> </li> <li class="entry-summary"> <a href="#flush-instance-method" class="signature"><strong>#flush</strong></a> <div class="summary"><p>Flushes buffered data, if any.</p></div> </li> <li class="entry-summary"> <a href="#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method" class="signature"><strong>#gets</strong>(delimiter : Char, limit : Int, chomp = false) : String?</a> <div class="summary"><p>Reads until <em>delimiter</em> is found, <em>limit</em> bytes are read, or the end of the <code><a href="io">IO</a></code> is reached.</p></div> </li> <li class="entry-summary"> <a href="#gets(delimiter:Char,chomp=false):String?-instance-method" class="signature"><strong>#gets</strong>(delimiter : Char, chomp = false) : String?</a> <div class="summary"><p>Reads until <em>delimiter</em> is found, or the end of the <code><a href="io">IO</a></code> is reached.</p></div> </li> <li class="entry-summary"> <a href="#gets(chomp=true):String?-instance-method" class="signature"><strong>#gets</strong>(chomp = true) : String?</a> <div class="summary"><p>Reads a line from this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#gets(limit:Int,chomp=false):String?-instance-method" class="signature"><strong>#gets</strong>(limit : Int, chomp = false) : String?</a> <div class="summary"><p>Reads a line of at most <em>limit</em> bytes from this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#gets(delimiter:String,chomp=false):String?-instance-method" class="signature"><strong>#gets</strong>(delimiter : String, chomp = false) : String?</a> <div class="summary"><p>Reads until <em>delimiter</em> is found or the end of the <code><a href="io">IO</a></code> is reached.</p></div> </li> <li class="entry-summary"> <a href="#gets_to_end:String-instance-method" class="signature"><strong>#gets_to_end</strong> : String</a> <div class="summary"><p>Reads the rest of this <code><a href="io">IO</a></code> data as a <code><a href="string">String</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#peek:Bytes?-instance-method" class="signature"><strong>#peek</strong> : Bytes?</a> <div class="summary"><p>Peeks into this IO, if possible.</p></div> </li> <li class="entry-summary"> <a href="#pos-instance-method" class="signature"><strong>#pos</strong></a> <div class="summary"><p>Returns the current position (in bytes) in this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#pos=(value)-instance-method" class="signature"><strong>#pos=</strong>(value)</a> <div class="summary"><p>Sets the current position (in bytes) in this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#print(*objects:_):Nil-instance-method" class="signature"><strong>#print</strong>(*objects : _) : Nil</a> <div class="summary"><p>Writes the given objects into this <code><a href="io">IO</a></code> by invoking <code>to_s(io)</code> on each of the objects.</p></div> </li> <li class="entry-summary"> <a href="#print(obj):Nil-instance-method" class="signature"><strong>#print</strong>(obj) : Nil</a> <div class="summary"><p>Same as <code><a href="io#self-instance-method">#&lt;&lt;</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#printf(format_string,*args):Nil-instance-method" class="signature"><strong>#printf</strong>(format_string, *args) : Nil</a> <div class="summary"><p>Writes a formatted string to this IO.</p></div> </li> <li class="entry-summary"> <a href="#printf(format_string,args:Array%7CTuple):Nil-instance-method" class="signature"><strong>#printf</strong>(format_string, args : Array | Tuple) : Nil</a> <div class="summary"><p>Writes a formatted string to this IO.</p></div> </li> <li class="entry-summary"> <a href="#puts(*objects:_):Nil-instance-method" class="signature"><strong>#puts</strong>(*objects : _) : Nil</a> <div class="summary"><p>Writes the given objects, each followed by a newline character.</p></div> </li> <li class="entry-summary"> <a href="#puts:Nil-instance-method" class="signature"><strong>#puts</strong> : Nil</a> <div class="summary"><p>Writes a newline character.</p></div> </li> <li class="entry-summary"> <a href="#puts(obj):Nil-instance-method" class="signature"><strong>#puts</strong>(obj) : Nil</a> <div class="summary"><p>Writes the given object to this <code><a href="io">IO</a></code> followed by a newline character.</p></div> </li> <li class="entry-summary"> <a href="#puts(string:String):Nil-instance-method" class="signature"><strong>#puts</strong>(string : String) : Nil</a> <div class="summary"><p>Writes the given string to this <code><a href="io">IO</a></code> followed by a newline character unless the string already ends with one.</p></div> </li> <li class="entry-summary"> <a href="#read(slice:Bytes)-instance-method" class="signature"><strong>#read</strong>(slice : Bytes)</a> <div class="summary"><p>Reads at most <em>slice.size</em> bytes from this <code><a href="io">IO</a></code> into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_at(offset,bytesize,&amp;:IO-%3E)-instance-method" class="signature"><strong>#read_at</strong>(offset, bytesize, &amp; : IO -&gt; )</a> <div class="summary"><p>Yields an <code><a href="io">IO</a></code> to read a section inside this IO.</p></div> </li> <li class="entry-summary"> <a href="#read_byte:UInt8?-instance-method" class="signature"><strong>#read_byte</strong> : UInt8?</a> <div class="summary"><p>Reads a single byte from this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#read_bytes(type,format:IO::ByteFormat=IO::ByteFormat::SystemEndian)-instance-method" class="signature"><strong>#read_bytes</strong>(type, format : IO::ByteFormat = IO::ByteFormat::SystemEndian)</a> <div class="summary"><p>Reads an instance of the given <em>type</em> from this <code><a href="io">IO</a></code> using the specified <em>format</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_char:Char?-instance-method" class="signature"><strong>#read_char</strong> : Char?</a> <div class="summary"><p>Reads a single <code><a href="char">Char</a></code> from this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#read_fully(slice:Bytes)-instance-method" class="signature"><strong>#read_fully</strong>(slice : Bytes)</a> <div class="summary"><p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="io">IO</a></code> into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_fully?(slice:Bytes)-instance-method" class="signature"><strong>#read_fully?</strong>(slice : Bytes)</a> <div class="summary"><p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="io">IO</a></code> into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_line(*args,**options):String-instance-method" class="signature"><strong>#read_line</strong>(*args, **options) : String</a> <div class="summary"><p>Same as <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code>, but raises <code><a href="io/eoferror">EOFError</a></code> if called at the end of this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#read_string(bytesize:Int):String-instance-method" class="signature"><strong>#read_string</strong>(bytesize : Int) : String</a> <div class="summary"><p>Reads an UTF-8 encoded string of exactly <em>bytesize</em> bytes.</p></div> </li> <li class="entry-summary"> <a href="#read_utf8(slice:Bytes)-instance-method" class="signature"><strong>#read_utf8</strong>(slice : Bytes)</a> <div class="summary"><p>Reads UTF-8 decoded bytes into the given <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_utf8_byte-instance-method" class="signature"><strong>#read_utf8_byte</strong></a> <div class="summary"><p>Reads a single decoded UTF-8 byte from this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#rewind-instance-method" class="signature"><strong>#rewind</strong></a> <div class="summary"><p>Rewinds this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#seek(offset,whence:Seek=Seek::Set)-instance-method" class="signature"><strong>#seek</strong>(offset, whence : Seek = Seek::Set)</a> <div class="summary"><p>Seeks to a given <em>offset</em> (in bytes) according to the <em>whence</em> argument.</p></div> </li> <li class="entry-summary"> <a href="#set_encoding(encoding:String,invalid:Symbol?=nil)-instance-method" class="signature"><strong>#set_encoding</strong>(encoding : String, invalid : Symbol? = nil)</a> <div class="summary"><p>Sets the encoding of this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#skip(bytes_count:Int):Nil-instance-method" class="signature"><strong>#skip</strong>(bytes_count : Int) : Nil</a> <div class="summary"><p>Reads and discards exactly <em>bytes_count</em> bytes.</p></div> </li> <li class="entry-summary"> <a href="#skip_to_end:Nil-instance-method" class="signature"><strong>#skip_to_end</strong> : Nil</a> <div class="summary"><p>Reads and discards bytes from <code>self</code> until there are no more bytes.</p></div> </li> <li class="entry-summary"> <a href="#tell-instance-method" class="signature"><strong>#tell</strong></a> <div class="summary"><p>Same as <code><a href="io#pos-instance-method">#pos</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#tty?:Bool-instance-method" class="signature"><strong>#tty?</strong> : Bool</a> <div class="summary"><p>Returns <code>true</code> if this <code><a href="io">IO</a></code> is associated with a terminal device (tty), <code>false</code> otherwise.</p></div> </li> <li class="entry-summary"> <a href="#write(slice:Bytes):Nil-instance-method" class="signature"><strong>#write</strong>(slice : Bytes) : Nil</a> <div class="summary"><p>Writes the contents of <em>slice</em> into this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#write_byte(byte:UInt8)-instance-method" class="signature"><strong>#write_byte</strong>(byte : UInt8)</a> <div class="summary"><p>Writes a single byte into this <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#write_bytes(object,format:IO::ByteFormat=IO::ByteFormat::SystemEndian)-instance-method" class="signature"><strong>#write_bytes</strong>(object, format : IO::ByteFormat = IO::ByteFormat::SystemEndian)</a> <div class="summary"><p>Writes the given object to this <code><a href="io">IO</a></code> using the specified <em>format</em>.</p></div> </li> <li class="entry-summary"> <a href="#write_utf8(slice:Bytes)-instance-method" class="signature"><strong>#write_utf8</strong>(slice : Bytes)</a> <div class="summary"><p>Writes a slice of UTF-8 encoded bytes to this <code><a href="io">IO</a></code>, using the current encoding.</p></div> </li> </ul> <div class="methods-inherited"> <h3>Instance methods inherited from class <code><a href="reference">Reference</a></code>
</h3> <a href="reference#==(other:self)-instance-method" class="tooltip"> ==(other : self)<br>==(other : JSON::Any)<br>==(other : YAML::Any)<br>==(other) ==</a>, <a href="reference#dup-instance-method" class="tooltip"> dup dup</a>, <a href="reference#hash(hasher)-instance-method" class="tooltip"> hash(hasher) hash</a>, <a href="reference#inspect(io:IO):Nil-instance-method" class="tooltip"> inspect(io : IO) : Nil inspect</a>, <a href="reference#object_id:UInt64-instance-method" class="tooltip"> object_id : UInt64 object_id</a>, <a href="reference#pretty_print(pp):Nil-instance-method" class="tooltip"> pretty_print(pp) : Nil pretty_print</a>, <a href="reference#same?(other:Reference)-instance-method" class="tooltip"> same?(other : Reference)<br>same?(other : Nil) same?</a>, <a href="reference#to_s(io:IO):Nil-instance-method" class="tooltip"> to_s(io : IO) : Nil to_s</a> <h3>Constructor methods inherited from class <code><a href="reference">Reference</a></code>
</h3> <a href="reference#new-class-method" class="tooltip"> new new</a> <h3>Instance methods inherited from class <code><a href="object">Object</a></code>
</h3> <a href="object#!:Bool-instance-method" class="tooltip"> ! : Bool !</a>, <a href="object#!=(other)-instance-method" class="tooltip"> !=(other) !=</a>, <a href="object#!~(other)-instance-method" class="tooltip"> !~(other) !~</a>, <a href="object#==(other)-instance-method" class="tooltip"> ==(other) ==</a>, <a href="object#===(other:JSON::Any)-instance-method" class="tooltip"> ===(other : JSON::Any)<br>===(other : YAML::Any)<br>===(other) ===</a>, <a href="object#=~(other)-instance-method" class="tooltip"> =~(other) =~</a>, <a href="object#as(type:Class)-instance-method" class="tooltip"> as(type : Class) as</a>, <a href="object#as?(type:Class)-instance-method" class="tooltip"> as?(type : Class) as?</a>, <a href="object#class-instance-method" class="tooltip"> class class</a>, <a href="object#dup-instance-method" class="tooltip"> dup dup</a>, <a href="object#hash(hasher)-instance-method" class="tooltip"> hash(hasher)<br>hash hash</a>, <a href="object#in?(*values:Object):Bool-instance-method" class="tooltip"> in?(*values : Object) : Bool<br>in?(collection) : Bool in?</a>, <a href="object#inspect:String-instance-method" class="tooltip"> inspect : String<br>inspect(io : IO) : Nil inspect</a>, <a href="object#is_a?(type:Class):Bool-instance-method" class="tooltip"> is_a?(type : Class) : Bool is_a?</a>, <a href="object#itself-instance-method" class="tooltip"> itself itself</a>, <a href="object#nil?:Bool-instance-method" class="tooltip"> nil? : Bool nil?</a>, <a href="object#not_nil!-instance-method" class="tooltip"> not_nil! not_nil!</a>, <a href="#" class="tooltip"> pretty_inspect(width = 79, newline = "\n", indent = 0) : String pretty_inspect</a>, <a href="object#pretty_print(pp:PrettyPrint):Nil-instance-method" class="tooltip"> pretty_print(pp : PrettyPrint) : Nil pretty_print</a>, <a href="object#responds_to?(name:Symbol):Bool-instance-method" class="tooltip"> responds_to?(name : Symbol) : Bool responds_to?</a>, <a href="object#tap(&amp;)-instance-method" class="tooltip"> tap(&amp;) tap</a>, <a href="object#to_json(io:IO)-instance-method" class="tooltip"> to_json(io : IO)<br>to_json to_json</a>, <a href="#" class="tooltip"> to_pretty_json(io : IO, indent : String = " ")<br>to_pretty_json(indent : String = " ") to_pretty_json</a>, <a href="object#to_s:String-instance-method" class="tooltip"> to_s : String<br>to_s(io : IO) : Nil to_s</a>, <a href="object#to_yaml(io:IO)-instance-method" class="tooltip"> to_yaml(io : IO)<br>to_yaml to_yaml</a>, <a href="object#try(&amp;)-instance-method" class="tooltip"> try(&amp;) try</a>, <a href="object#unsafe_as(type:T.class)forallT-instance-method" class="tooltip"> unsafe_as(type : T.class) forall T unsafe_as</a> <h3>Class methods inherited from class <code><a href="object">Object</a></code>
</h3> <a href="object#from_json(string_or_io,root:String)-class-method" class="tooltip"> from_json(string_or_io, root : String)<br>from_json(string_or_io) from_json</a>, <a href="object#from_yaml(string_or_io:String%7CIO)-class-method" class="tooltip"> from_yaml(string_or_io : String | IO) from_yaml</a> </div> <h2>  Class Method Detail </h2> <div class="entry-detail" id="copy(src,dst,limit:Int):Int64-class-method"> <h3 class="signature">def self.<strong>copy</strong>(src, dst, limit : <a href="int">Int</a>) : <a href="int64">Int64</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1136" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Copy at most <em>limit</em> bytes from <em>src</em> to <em>dst</em>.</p> <pre data-language="crystal">io = IO::Memory.new "hello"
io2 = IO::Memory.new

IO.copy io, io2, 3

io2.to_s # =&gt; "hel"</pre> </div>   </div> <div class="entry-detail" id="copy(src,dst):Int64-class-method"> <h3 class="signature">def self.<strong>copy</strong>(src, dst) : <a href="int64">Int64</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1116" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Copy all contents from <em>src</em> to <em>dst</em>.</p> <pre data-language="crystal">io = IO::Memory.new "hello"
io2 = IO::Memory.new

IO.copy io, io2

io2.to_s # =&gt; "hello"</pre> </div>   </div> <div class="entry-detail" id="pipe(read_blocking=false,write_blocking=false):Tuple(IO::FileDescriptor,IO::FileDescriptor)-class-method"> <h3 class="signature">def self.<strong>pipe</strong>(read_blocking = false, write_blocking = false) : <a href="tuple">Tuple</a>(<a href="io/filedescriptor">IO::FileDescriptor</a>, <a href="io/filedescriptor">IO::FileDescriptor</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L137" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Creates a pair of pipe endpoints (connected to each other) and returns them as a two-element <code><a href="tuple">Tuple</a></code>.</p> <pre data-language="crystal">reader, writer = IO.pipe
writer.puts "hello"
writer.puts "world"
reader.gets # =&gt; "hello"
reader.gets # =&gt; "world"</pre> </div>   </div> <div class="entry-detail" id="pipe(read_blocking=false,write_blocking=false,&amp;)-class-method"> <h3 class="signature">def self.<strong>pipe</strong>(read_blocking = false, write_blocking = false, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L152" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Creates a pair of pipe endpoints (connected to each other) and passes them to the given block. Both endpoints are closed after the block.</p> <pre data-language="crystal">IO.pipe do |reader, writer|
  writer.puts "hello"
  writer.puts "world"
  reader.gets # =&gt; "hello"
  reader.gets # =&gt; "world"
end</pre> </div>   </div> <div class="entry-detail" id="same_content?(stream1:IO,stream2:IO)-class-method"> <h3 class="signature">def self.<strong>same_content?</strong>(stream1 : <a href="io">IO</a>, stream2 : <a href="io">IO</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1159" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Compares two streams <em>stream1</em> to <em>stream2</em> to determine if they are identical. Returns <code>true</code> if content are the same, <code>false</code> otherwise.</p> <pre data-language="crystal">File.write("afile", "123")
stream1 = File.open("afile")
stream2 = IO::Memory.new("123")
IO.same_content?(stream1, stream2) # =&gt; true</pre> </div>   </div> <h2>  Instance Method Detail </h2> <div class="entry-detail" id="self-instance-method"> <h3 class="signature">def <strong>&lt;&lt;</strong>(obj) : self<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L173" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the given object into this <code><a href="io">IO</a></code>. This ends up calling <code>to_s(io)</code> on the object.</p> <pre data-language="crystal">io = IO::Memory.new
io &lt;&lt; 1
io &lt;&lt; '-'
io &lt;&lt; "Crystal"
io.to_s # =&gt; "1-Crystal"</pre> </div>   </div> <div class="entry-detail" id="close-instance-method"> <h3 class="signature">def <strong>close</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L107" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Closes this <code><a href="io">IO</a></code>.</p> <p><code><a href="io">IO</a></code> defines this is a no-op method, but including types may override.</p> </div>   </div> <div class="entry-detail" id="closed?-instance-method"> <h3 class="signature">def <strong>closed?</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L113" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>true</code> if this <code><a href="io">IO</a></code> is closed.</p> <p><code><a href="io">IO</a></code> defines returns <code>false</code>, but including types may override.</p> </div>   </div> <div class="entry-detail" id="each_byte(&amp;):Nil-instance-method"> <h3 class="signature">def <strong>each_byte</strong>(&amp;) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L977" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Invokes the given block with each byte (<code><a href="uint8">UInt8</a></code>) in this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("aあ")
io.each_byte do |byte|
  puts byte
end</pre> <p>Output:</p> <pre data-language="crystal">97
227
129
130</pre> </div>   </div> <div class="entry-detail" id="each_byte-instance-method"> <h3 class="signature">def <strong>each_byte</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L993" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an <code><a href="iterator">Iterator</a></code> for the bytes in this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("aあ")
iter = io.each_byte
iter.next # =&gt; 97
iter.next # =&gt; 227
iter.next # =&gt; 129
iter.next # =&gt; 130</pre> </div>   </div> <div class="entry-detail" id="each_char(&amp;):Nil-instance-method"> <h3 class="signature">def <strong>each_char</strong>(&amp;) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L942" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Invokes the given block with each <code><a href="char">Char</a></code> in this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("あめ")
io.each_char do |char|
  puts char
end</pre> <p>Output:</p> <pre data-language="crystal">あ
め</pre> </div>   </div> <div class="entry-detail" id="each_char-instance-method"> <h3 class="signature">def <strong>each_char</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L956" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an <code><a href="iterator">Iterator</a></code> for the chars in this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("あめ")
iter = io.each_char
iter.next # =&gt; 'あ'
iter.next # =&gt; 'め'</pre> </div>   </div> <div class="entry-detail" id="each_line(*args,**options,&amp;block:String-&gt;):Nil-instance-method"> <h3 class="signature">def <strong>each_line</strong>(*args, **options, &amp;block : <a href="string">String</a> -&gt; ) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L907" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Invokes the given block with each <em>line</em> in this <code><a href="io">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code> methods.</p> <pre data-language="crystal">io = IO::Memory.new("hello\nworld")
io.each_line do |line|
  puts line
end
# output:
# hello
# world</pre> </div>   </div> <div class="entry-detail" id="each_line(*args,**options)-instance-method"> <h3 class="signature">def <strong>each_line</strong>(*args, **options)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L923" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an <code><a href="iterator">Iterator</a></code> for the <em>lines</em> in this <code><a href="io">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code> methods.</p> <pre data-language="crystal">io = IO::Memory.new("hello\nworld")
iter = io.each_line
iter.next # =&gt; "hello"
iter.next # =&gt; "world"</pre> </div>   </div> <div class="entry-detail" id="encoding:String-instance-method"> <h3 class="signature">def <strong>encoding</strong> : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1028" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns this <code><a href="io">IO</a></code>'s encoding. The default is <code>UTF-8</code>.</p> </div>   </div> <div class="entry-detail" id="flush-instance-method"> <h3 class="signature">def <strong>flush</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L124" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Flushes buffered data, if any.</p> <p><code><a href="io">IO</a></code> defines this is a no-op method, but including types may override.</p> </div>   </div> <div class="entry-detail" id="gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(delimiter : <a href="char">Char</a>, limit : <a href="int">Int</a>, chomp = false) : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L608" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads until <em>delimiter</em> is found, <em>limit</em> bytes are read, or the end of the <code><a href="io">IO</a></code> is reached. Returns <code>nil</code> if called at the end of this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets('o', 3)  # =&gt; "hel"
io.gets('r', 10) # =&gt; "lo\nwor"
io.gets('z', 10) # =&gt; "ld"
io.gets('w', 10) # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="gets(delimiter:Char,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(delimiter : <a href="char">Char</a>, chomp = false) : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L594" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads until <em>delimiter</em> is found, or the end of the <code><a href="io">IO</a></code> is reached. Returns <code>nil</code> if called at the end of this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets('o') # =&gt; "hello"
io.gets('r') # =&gt; "\nwor"
io.gets('z') # =&gt; "ld"
io.gets('w') # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="gets(chomp=true):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(chomp = true) : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L564" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads a line from this <code><a href="io">IO</a></code>. A line is terminated by the <code>\n</code> character. Returns <code>nil</code> if called at the end of this <code><a href="io">IO</a></code>.</p> <p>By default the newline is removed from the returned string, unless <em>chomp</em> is <code>false</code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld\nfoo\n"
io.gets               # =&gt; "hello"
io.gets(chomp: false) # =&gt; "world\n"
io.gets               # =&gt; "foo"
io.gets               # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="gets(limit:Int,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(limit : <a href="int">Int</a>, chomp = false) : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L580" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads a line of at most <em>limit</em> bytes from this <code><a href="io">IO</a></code>. A line is terminated by the <code>\n</code> character. Returns <code>nil</code> if called at the end of this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets(3) # =&gt; "hel"
io.gets(3) # =&gt; "lo\n"
io.gets(3) # =&gt; "wor"
io.gets(3) # =&gt; "ld"
io.gets(3) # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="gets(delimiter:String,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(delimiter : <a href="string">String</a>, chomp = false) : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L763" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads until <em>delimiter</em> is found or the end of the <code><a href="io">IO</a></code> is reached. Returns <code>nil</code> if called at the end of this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets("wo") # =&gt; "hello\nwo"
io.gets("wo") # =&gt; "rld"
io.gets("wo") # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="gets_to_end:String-instance-method"> <h3 class="signature">def <strong>gets_to_end</strong> : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L533" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads the rest of this <code><a href="io">IO</a></code> data as a <code><a href="string">String</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello world"
io.gets_to_end # =&gt; "hello world"</pre> </div>   </div> <div class="entry-detail" id="peek:Bytes?-instance-method"> <h3 class="signature">def <strong>peek</strong> : <a href="bytes">Bytes</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L461" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Peeks into this IO, if possible.</p> <p>It returns:</p> <ul>
<li>
<code>nil</code> if this IO isn't peekable</li>
<li>an empty slice if it is, but EOF was reached</li>
<li>a non-empty slice if some data can be peeked</li>
</ul> <p>The returned bytes are only valid data until a next call to any method that reads from this IO is invoked.</p> <p>By default this method returns <code>nil</code>, but IO implementations that provide buffering or wrap other IOs should override this method.</p> </div>   </div> <div class="entry-detail" id="pos-instance-method"> <h3 class="signature">def <strong>pos</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1071" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the current position (in bytes) in this <code><a href="io">IO</a></code>.</p> <p>The <code><a href="io">IO</a></code> class raises on this method, but some subclasses, notable <code><a href="io/filedescriptor">IO::FileDescriptor</a></code> and <code><a href="io/memory">IO::Memory</a></code> implement it.</p> <pre data-language="crystal">File.write("testfile", "hello")

file = File.new("testfile")
file.pos     # =&gt; 0
file.gets(2) # =&gt; "he"
file.pos     # =&gt; 2</pre> </div>   </div> <div class="entry-detail" id="pos=(value)-instance-method"> <h3 class="signature">def <strong>pos=</strong>(value)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1087" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the current position (in bytes) in this <code><a href="io">IO</a></code>.</p> <p>The <code><a href="io">IO</a></code> class raises on this method, but some subclasses, notable <code><a href="io/filedescriptor">IO::FileDescriptor</a></code> and <code><a href="io/memory">IO::Memory</a></code> implement it.</p> <pre data-language="crystal">File.write("testfile", "hello")

file = File.new("testfile")
file.pos = 3
file.gets_to_end # =&gt; "lo"</pre> </div>   </div> <div class="entry-detail" id="print(*objects:_):Nil-instance-method"> <h3 class="signature">def <strong>print</strong>(*objects : _) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L200" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the given objects into this <code><a href="io">IO</a></code> by invoking <code>to_s(io)</code> on each of the objects.</p> <pre data-language="crystal">io = IO::Memory.new
io.print 1, '-', "Crystal"
io.to_s # =&gt; "1-Crystal"</pre> </div>   </div> <div class="entry-detail" id="print(obj):Nil-instance-method"> <h3 class="signature">def <strong>print</strong>(obj) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L187" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Same as <code><a href="io#self-instance-method">#&lt;&lt;</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.print 1
io.print '-'
io.print "Crystal"
io.to_s # =&gt; "1-Crystal"</pre> </div>   </div> <div class="entry-detail" id="printf(format_string,*args):Nil-instance-method"> <h3 class="signature">def <strong>printf</strong>(format_string, *args) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L263" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes a formatted string to this IO. For details on the format string, see top-level <code>::printf</code>.</p> </div>   </div> <div class="entry-detail" id="printf(format_string,args:Array|Tuple):Nil-instance-method"> <h3 class="signature">def <strong>printf</strong>(format_string, args : <a href="array">Array</a> | <a href="tuple">Tuple</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L268" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes a formatted string to this IO. For details on the format string, see top-level <code>::printf</code>.</p> </div>   </div> <div class="entry-detail" id="puts(*objects:_):Nil-instance-method"> <h3 class="signature">def <strong>puts</strong>(*objects : _) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L254" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the given objects, each followed by a newline character.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts 1, '-', "Crystal"
io.to_s # =&gt; "1\n-\nCrystal\n"</pre> </div>   </div> <div class="entry-detail" id="puts:Nil-instance-method"> <h3 class="signature">def <strong>puts</strong> : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L242" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes a newline character.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts
io.to_s # =&gt; "\n"</pre> </div>   </div> <div class="entry-detail" id="puts(obj):Nil-instance-method"> <h3 class="signature">def <strong>puts</strong>(obj) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L230" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the given object to this <code><a href="io">IO</a></code> followed by a newline character.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts 1
io.puts "Crystal"
io.to_s # =&gt; "1\nCrystal\n"</pre> </div>   </div> <div class="entry-detail" id="puts(string:String):Nil-instance-method"> <h3 class="signature">def <strong>puts</strong>(string : <a href="string">String</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L216" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the given string to this <code><a href="io">IO</a></code> followed by a newline character unless the string already ends with one.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts "hello\n"
io.puts "world"
io.to_s # =&gt; "hello\nworld\n"</pre> </div>   </div> <div class="entry-detail" id="read(slice:Bytes)-instance-method"> <h3 class="signature">abstract def <strong>read</strong>(slice : <a href="bytes">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L92" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads at most <em>slice.size</em> bytes from this <code><a href="io">IO</a></code> into <em>slice</em>. Returns the number of bytes read, which is 0 if and only if there is no more data to read (so checking for 0 is the way to detect end of file).</p> <pre data-language="crystal">io = IO::Memory.new "hello"
slice = Bytes.new(4)
io.read(slice) # =&gt; 4
slice          # =&gt; Bytes[104, 101, 108, 108]
io.read(slice) # =&gt; 1
slice          # =&gt; Bytes[111, 101, 108, 108]
io.read(slice) # =&gt; 0</pre> </div>   </div> <div class="entry-detail" id="read_at(offset,bytesize,&amp;:IO-&gt;)-instance-method"> <h3 class="signature">def <strong>read_at</strong>(offset, bytesize, &amp; : <a href="io">IO</a> -&gt; )<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1102" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Yields an <code><a href="io">IO</a></code> to read a section inside this IO.</p> <p>The <code><a href="io">IO</a></code> class raises on this method, but some subclasses, notable <code><a href="file">File</a></code> and <code><a href="io/memory">IO::Memory</a></code> implement it.</p> <p>Multiple sections can be read concurrently.</p> </div>   </div> <div class="entry-detail" id="read_byte:UInt8?-instance-method"> <h3 class="signature">def <strong>read_byte</strong> : <a href="uint8">UInt8</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L280" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads a single byte from this <code><a href="io">IO</a></code>. Returns <code>nil</code> if there is no more data to read.</p> <pre data-language="crystal">io = IO::Memory.new "a"
io.read_byte # =&gt; 97
io.read_byte # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="read_bytes(type,format:IO::ByteFormat=IO::ByteFormat::SystemEndian)-instance-method"> <h3 class="signature">def <strong>read_bytes</strong>(type, format : <a href="io/byteformat">IO::ByteFormat</a> = IO::ByteFormat::SystemEndian)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L878" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads an instance of the given <em>type</em> from this <code><a href="io">IO</a></code> using the specified <em>format</em>.</p> <p>This ends up invoking <code>type.from_io(self, format)</code>, so any type defining a <code>from_io(io : <a href="io">IO</a>, format : <a href="io/byteformat">IO::ByteFormat</a> = <a href="io/byteformat/systemendian">IO::ByteFormat::SystemEndian</a>)</code> method can be read in this way.</p> <p>See <code><a href="int#from_io(io:IO,format:IO::ByteFormat):self-class-method">Int.from_io</a></code> and <code><a href="float#from_io(io:IO,format:IO::ByteFormat):self-class-method">Float.from_io</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts "\u{4}\u{3}\u{2}\u{1}"
io.rewind
io.read_bytes(Int32, IO::ByteFormat::LittleEndian) # =&gt; 0x01020304</pre> </div>   </div> <div class="entry-detail" id="read_char:Char?-instance-method"> <h3 class="signature">def <strong>read_char</strong> : <a href="char">Char</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L297" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads a single <code><a href="char">Char</a></code> from this <code><a href="io">IO</a></code>. Returns <code>nil</code> if there is no more data to read.</p> <pre data-language="crystal">io = IO::Memory.new "あ"
io.read_char # =&gt; 'あ'
io.read_char # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="read_fully(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>read_fully</strong>(slice : <a href="bytes">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L502" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="io">IO</a></code> into <em>slice</em>. Raises <code><a href="io/eoferror">EOFError</a></code> if there aren't <code>slice.size</code> bytes of data.</p> <pre data-language="crystal">io = IO::Memory.new "123451234"
slice = Bytes.new(5)
io.read_fully(slice) # =&gt; 5
slice                # =&gt; Bytes[49, 50, 51, 52, 53]
io.read_fully(slice) # raises IO::EOFError</pre> </div>   </div> <div class="entry-detail" id="read_fully?(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>read_fully?</strong>(slice : <a href="bytes">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L517" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="io">IO</a></code> into <em>slice</em>. Returns <code>nil</code> if there aren't <code>slice.size</code> bytes of data, otherwise returns the number of bytes read.</p> <pre data-language="crystal">io = IO::Memory.new "123451234"
slice = Bytes.new(5)
io.read_fully?(slice) # =&gt; 5
slice                 # =&gt; Bytes[49, 50, 51, 52, 53]
io.read_fully?(slice) # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="read_line(*args,**options):String-instance-method"> <h3 class="signature">def <strong>read_line</strong>(*args, **options) : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L803" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Same as <code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code>, but raises <code><a href="io/eoferror">EOFError</a></code> if called at the end of this <code><a href="io">IO</a></code>.</p> </div>   </div> <div class="entry-detail" id="read_string(bytesize:Int):String-instance-method"> <h3 class="signature">def <strong>read_string</strong>(bytesize : <a href="int">Int</a>) : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L434" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads an UTF-8 encoded string of exactly <em>bytesize</em> bytes. Raises <code><a href="io/eoferror">EOFError</a></code> if there are not enough bytes to build the string.</p> <pre data-language="crystal">io = IO::Memory.new("hello world")
io.read_string(5) # =&gt; "hello"
io.read_string(1) # =&gt; " "
io.read_string(6) # raises IO::EOFError</pre> </div>   </div> <div class="entry-detail" id="read_utf8(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>read_utf8</strong>(slice : <a href="bytes">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L416" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads UTF-8 decoded bytes into the given <em>slice</em>. Returns the number of UTF-8 bytes read.</p> <p>If no encoding is set, this is the same as <code><a href="io#read(slice:Bytes)-instance-method">#read(slice)</a></code>.</p> <pre data-language="crystal">bytes = "你".encode("GB2312") # =&gt; Bytes[196, 227]

io = IO::Memory.new(bytes)
io.set_encoding("GB2312")

buffer = uninitialized UInt8[1024]
bytes_read = io.read_utf8(buffer.to_slice) # =&gt; 3
buffer.to_slice[0, bytes_read]             # =&gt; Bytes[228, 189, 160]

"你".bytes # =&gt; [228, 189, 160]</pre> </div>   </div> <div class="entry-detail" id="read_utf8_byte-instance-method"> <h3 class="signature">def <strong>read_utf8_byte</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L391" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads a single decoded UTF-8 byte from this <code><a href="io">IO</a></code>. Returns <code>nil</code> if there is no more data to read.</p> <p>If no encoding is set, this is the same as <code><a href="io#read_byte:UInt8?-instance-method">#read_byte</a></code>.</p> <pre data-language="crystal">bytes = "你".encode("GB2312") # =&gt; Bytes[196, 227]

io = IO::Memory.new(bytes)
io.set_encoding("GB2312")
io.read_utf8_byte # =&gt; 228
io.read_utf8_byte # =&gt; 189
io.read_utf8_byte # =&gt; 160
io.read_utf8_byte # =&gt; nil

"你".bytes # =&gt; [228, 189, 160]</pre> </div>   </div> <div class="entry-detail" id="rewind-instance-method"> <h3 class="signature">def <strong>rewind</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L999" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Rewinds this <code><a href="io">IO</a></code>. By default this method raises, but including types may implement it.</p> </div>   </div> <div class="entry-detail" id="seek(offset,whence:Seek=Seek::Set)-instance-method"> <h3 class="signature">def <strong>seek</strong>(offset, whence : <a href="io/seek">Seek</a> = Seek::Set)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1054" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Seeks to a given <em>offset</em> (in bytes) according to the <em>whence</em> argument.</p> <p>The <code><a href="io">IO</a></code> class raises on this method, but some subclasses, notable <code><a href="io/filedescriptor">IO::FileDescriptor</a></code> and <code><a href="io/memory">IO::Memory</a></code> implement it.</p> <p>Returns <code>self</code>.</p> <pre data-language="crystal">File.write("testfile", "abc")

file = File.new("testfile")
file.gets(3) # =&gt; "abc"
file.seek(1, IO::Seek::Set)
file.gets(2) # =&gt; "bc"
file.seek(-1, IO::Seek::Current)
file.gets(1) # =&gt; "c"</pre> </div>   </div> <div class="entry-detail" id="set_encoding(encoding:String,invalid:Symbol?=nil)-instance-method"> <h3 class="signature">def <strong>set_encoding</strong>(encoding : <a href="string">String</a>, invalid : <a href="symbol">Symbol</a>? = nil)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1011" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the encoding of this <code><a href="io">IO</a></code>.</p> <p>The <em>invalid</em> argument can be:</p> <ul>
<li>
<code>nil</code>: an exception is raised on invalid byte sequences</li>
<li>
<code>:skip</code>: invalid byte sequences are ignored</li>
</ul> <p>String operations (<code><a href="io#gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method">#gets</a></code>, <code><a href="io#gets_to_end:String-instance-method">#gets_to_end</a></code>, <code><a href="io#read_char:Char?-instance-method">#read_char</a></code>, <code><a href="io#self-instance-method">#&lt;&lt;</a></code>, <code><a href="io#print(*objects:_):Nil-instance-method">#print</a></code>, <code><a href="io#puts:Nil-instance-method">#puts</a></code> <code><a href="io#printf(format_string,*args):Nil-instance-method">#printf</a></code>) will use this encoding.</p> </div>   </div> <div class="entry-detail" id="skip(bytes_count:Int):Nil-instance-method"> <h3 class="signature">def <strong>skip</strong>(bytes_count : <a href="int">Int</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L816" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads and discards exactly <em>bytes_count</em> bytes. Raises <code><a href="io/eoferror">IO::EOFError</a></code> if there aren't at least <em>bytes_count</em> bytes.</p> <pre data-language="crystal">io = IO::Memory.new "hello world"
io.skip(6)
io.gets    # =&gt; "world"
io.skip(1) # raises IO::EOFError</pre> </div>   </div> <div class="entry-detail" id="skip_to_end:Nil-instance-method"> <h3 class="signature">def <strong>skip_to_end</strong> : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L828" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads and discards bytes from <code>self</code> until there are no more bytes.</p> </div>   </div> <div class="entry-detail" id="tell-instance-method"> <h3 class="signature">def <strong>tell</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L1092" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Same as <code><a href="io#pos-instance-method">#pos</a></code>.</p> </div>   </div> <div class="entry-detail" id="tty?:Bool-instance-method"> <h3 class="signature">def <strong>tty?</strong> : <a href="bool">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L890" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>true</code> if this <code><a href="io">IO</a></code> is associated with a terminal device (tty), <code>false</code> otherwise.</p> <p>IO returns <code>false</code>, but including types may override.</p> <pre data-language="crystal">STDIN.tty?          # =&gt; true
IO::Memory.new.tty? # =&gt; false</pre> </div>   </div> <div class="entry-detail" id="write(slice:Bytes):Nil-instance-method"> <h3 class="signature">abstract def <strong>write</strong>(slice : <a href="bytes">Bytes</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L102" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the contents of <em>slice</em> into this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
slice = Bytes.new(4) { |i| ('a'.ord + i).to_u8 }
io.write(slice)
io.to_s # =&gt; "abcd"</pre> </div>   </div> <div class="entry-detail" id="write_byte(byte:UInt8)-instance-method"> <h3 class="signature">def <strong>write_byte</strong>(byte : <a href="uint8">UInt8</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L841" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes a single byte into this <code><a href="io">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.write_byte 97_u8
io.to_s # =&gt; "a"</pre> </div>   </div> <div class="entry-detail" id="write_bytes(object,format:IO::ByteFormat=IO::ByteFormat::SystemEndian)-instance-method"> <h3 class="signature">def <strong>write_bytes</strong>(object, format : <a href="io/byteformat">IO::ByteFormat</a> = IO::ByteFormat::SystemEndian)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L860" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes the given object to this <code><a href="io">IO</a></code> using the specified <em>format</em>.</p> <p>This ends up invoking <code>object.to_io(self, format)</code>, so any object defining a <code>to_io(io : <a href="io">IO</a>, format : <a href="io/byteformat">IO::ByteFormat</a> = <a href="io/byteformat/systemendian">IO::ByteFormat::SystemEndian</a>)</code> method can be written in this way.</p> <p>See <code><a href="int#to_io(io:IO,format:IO::ByteFormat)-instance-method">Int#to_io</a></code> and <code><a href="float#to_io(io:IO,format:IO::ByteFormat)-instance-method">Float#to_io</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.write_bytes(0x01020304, IO::ByteFormat::LittleEndian)
io.rewind
io.gets(4) # =&gt; "\u{4}\u{3}\u{2}\u{1}"</pre> </div>   </div> <div class="entry-detail" id="write_utf8(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>write_utf8</strong>(slice : <a href="bytes">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/io.cr#L466" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Writes a slice of UTF-8 encoded bytes to this <code><a href="io">IO</a></code>, using the current encoding.</p> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/api/1.0.0/IO.html" class="_attribution-link" target="_blank">https://crystal-lang.org/api/1.0.0/IO.html</a>
  </p>
</div>
