<h1 class="type-name"> class URI </h1> <ul class="superclass-hierarchy">
<li class="superclass"><a href="uri">URI</a></li>
<li class="superclass"><a href="reference">Reference</a></li>
<li class="superclass"><a href="object">Object</a></li>
</ul> <h2>  Overview </h2> <p>This class represents a URI reference as defined by <a href="https://www.ietf.org/rfc/rfc3986.txt">RFC 3986: Uniform Resource Identifier (URI): Generic Syntax</a>.</p> <p>This class provides constructors for creating URI instances from their components or by parsing their string forms and methods for accessing the various components of an instance.</p> <p>Basic example:</p> <pre data-language="crystal">require "uri"

uri = URI.parse "http://foo.com/posts?id=30&amp;limit=5#time=1305298413"
# =&gt; #&lt;URI:0x1003f1e40 @scheme="http", @host="foo.com", @port=nil, @path="/posts", @query="id=30&amp;limit=5", ... &gt;
uri.scheme # =&gt; "http"
uri.host   # =&gt; "foo.com"
uri.query  # =&gt; "id=30&amp;limit=5"
uri.to_s   # =&gt; "http://foo.com/posts?id=30&amp;limit=5#time=1305298413"</pre> <h2>
Resolution and Relativization</h2> <p><em>Resolution</em> is the process of resolving one URI against another, <em>base</em> URI. The resulting URI is constructed from components of both URIs in the manner specified by <a href="https://tools.ietf.org/html/rfc3986#section-5.2.2">RFC 3986 section 5.2</a>, taking components from the base URI for those not specified in the original. For hierarchical URIs, the path of the original is resolved against the path of the base and then normalized. See <code><a href="uri#resolve(uri:URI%7CString):URI-instance-method">#resolve</a></code> for examples.</p> <p><em>Relativization</em> is the inverse of resolution as that it procures an URI that resolves to the original when resolved against the base.</p> <p>For normalized URIs, the following is true:</p> <pre data-language="crystal">a.relativize(a.resolve(b)) # =&gt; b
a.resolve(a.relativize(b)) # =&gt; b</pre> <p>This operation is often useful when constructing a document containing URIs that must be made relative to the base URI of the document wherever possible.</p> <h1>
URL Encoding</h1> <p>This class provides a number of methods for encoding and decoding strings using URL Encoding (also known as Percent Encoding) as defined in <a href="https://www.ietf.org/rfc/rfc3986.txt">RFC 3986</a> as well as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a>.</p> <p>Each method has two variants, one returns a string, the other writes directly to an IO.</p> <ul>
<li>
<code><a href="uri#decode(string:String,*,plus_to_space:Bool=false):String-class-method">.decode(string : String, *, plus_to_space : Bool = false)</a> : <a href="string">String</a></code>: Decodes a URL-encoded string.</li>
<li>
<code><a href="uri#decode(string:String,io:IO,*,plus_to_space:Bool=false):Nil-class-method">.decode(string : String, io : IO, *, plus_to_space : Bool = false)</a> : <a href="nil">Nil</a></code>: Decodes a URL-encoded string to an IO.</li>
<li>
<code><a href="uri#encode(string:String,*,space_to_plus:Bool=false):String-class-method">.encode(string : String, *, space_to_plus : Bool = false)</a> : <a href="string">String</a></code>: URL-encodes a string.</li>
<li>
<code><a href="uri#encode(string:String,io:IO,*,space_to_plus:Bool=false):Nil-class-method">.encode(string : String, io : IO, *, space_to_plus : Bool = false)</a> : <a href="nil">Nil</a></code>: URL-encodes a string to an IO.</li>
<li>
<code><a href="uri#decode_www_form(string:String,*,plus_to_space:Bool=true):String-class-method">.decode_www_form(string : String, *, plus_to_space : Bool = true)</a> : <a href="string">String</a></code>: Decodes an <code>x-www-form-urlencoded</code> string component.</li>
<li>
<code><a href="uri#decode_www_form(string:String,io:IO,*,plus_to_space:Bool=true):Nil-class-method">.decode_www_form(string : String, io : IO, *, plus_to_space : Bool = true)</a> : <a href="nil">Nil</a></code>: Decodes an <code>x-www-form-urlencoded</code> string component to an IO.</li>
<li>
<code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">.encode_www_form(string : String, *, space_to_plus : Bool = true)</a> : <a href="string">String</a></code>: Encodes a string as a <code>x-www-form-urlencoded</code> component.</li>
<li>
<code><a href="uri#encode_www_form(string:String,io:IO,*,space_to_plus:Bool=true):Nil-class-method">.encode_www_form(string : String, io : IO, *, space_to_plus : Bool = true)</a> : <a href="nil">Nil</a></code>: Encodes a string as a <code>x-www-form-urlencoded</code> component to an IO.</li>
</ul> <p>The main difference is that <code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">.encode_www_form</a></code> encodes reserved characters (see <code><a href="uri#reserved?(byte):Bool-class-method">.reserved?</a></code>), while <code><a href="uri#encode(string:String,io:IO,*,space_to_plus:Bool=false):Nil-class-method">.encode</a></code> does not. The decode methods are identical except for the handling of <code>+</code> characters.</p> <p>NOTE <code><a href="uri/params">URI::Params</a></code> provides a higher-level API for handling <code>x-www-form-urlencoded</code> serialized data.</p> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L71" target="_blank"> uri.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L1" target="_blank"> uri/encoding.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/params.cr#L3" target="_blank"> uri/params.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/punycode.cr#L1" target="_blank"> uri/punycode.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/uri_parser.cr#L1" target="_blank"> uri/uri_parser.cr </a> <br> <h2>  Constructors </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#new(scheme=nil,host=nil,port=nil,path=%22%22,query:String%7CParams%7CNil=nil,user=nil,password=nil,fragment=nil)-class-method" class="signature"><strong>.new</strong>(scheme = nil, host = nil, port = nil, path = "", query : String | Params | Nil = nil, user = nil, password = nil, fragment = nil)</a> </li> <li class="entry-summary"> <a href="#parse(raw_url:String):URI-class-method" class="signature"><strong>.parse</strong>(raw_url : String) : URI</a> <div class="summary"><p>Parses the given <em>raw_url</em> into an URI.</p></div> </li> </ul> <h2>  Class Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#decode(string:String,io:IO,*,plus_to_space:Bool=false):Nil-class-method" class="signature"><strong>.decode</strong>(string : String, io : IO, *, plus_to_space : Bool = false) : Nil</a> <div class="summary"><p>URL-decodes a string and writes the result to <em>io</em>.</p></div> </li> <li class="entry-summary"> <a href="#decode(string:String,*,plus_to_space:Bool=false):String-class-method" class="signature"><strong>.decode</strong>(string : String, *, plus_to_space : Bool = false) : String</a> <div class="summary"><p>URL-decodes <em>string</em>.</p></div> </li> <li class="entry-summary"> <a href="#decode(string:String,io:IO,*,plus_to_space:Bool=false,&amp;):Nil-class-method" class="signature"><strong>.decode</strong>(string : String, io : IO, *, plus_to_space : Bool = false, &amp;) : Nil</a> <div class="summary"><p>URL-decodes <em>string</em> and writes the result to <em>io</em>.</p></div> </li> <li class="entry-summary"> <a href="#decode_www_form(string:String,io:IO,*,plus_to_space:Bool=true):Nil-class-method" class="signature"><strong>.decode_www_form</strong>(string : String, io : IO, *, plus_to_space : Bool = true) : Nil</a> <div class="summary"><p>URL-decodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a> and writes the result to <em>io</em>.</p></div> </li> <li class="entry-summary"> <a href="#decode_www_form(string:String,*,plus_to_space:Bool=true):String-class-method" class="signature"><strong>.decode_www_form</strong>(string : String, *, plus_to_space : Bool = true) : String</a> <div class="summary"><p>URL-decodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a>.</p></div> </li> <li class="entry-summary"> <a href="#default_port(scheme:String):Int32?-class-method" class="signature"><strong>.default_port</strong>(scheme : String) : Int32?</a> <div class="summary"><p>Returns the default port for the given <em>scheme</em> if known, otherwise returns <code>nil</code>.</p></div> </li> <li class="entry-summary"> <a href="#encode(string:String,io:IO,*,space_to_plus:Bool=false):Nil-class-method" class="signature"><strong>.encode</strong>(string : String, io : IO, *, space_to_plus : Bool = false) : Nil</a> <div class="summary"><p>URL-encodes <em>string</em> and writes the result to <em>io</em>.</p></div> </li> <li class="entry-summary"> <a href="#encode(string:String,*,space_to_plus:Bool=false):String-class-method" class="signature"><strong>.encode</strong>(string : String, *, space_to_plus : Bool = false) : String</a> <div class="summary"><p>URL-encodes <em>string</em>.</p></div> </li> <li class="entry-summary"> <a href="#encode(string:String,io:IO,space_to_plus:Bool=false,&amp;):Nil-class-method" class="signature"><strong>.encode</strong>(string : String, io : IO, space_to_plus : Bool = false, &amp;) : Nil</a> <div class="summary"><p>URL-encodes <em>string</em> and writes the result to an <code><a href="io">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method" class="signature"><strong>.encode_www_form</strong>(string : String, *, space_to_plus : Bool = true) : String</a> <div class="summary"><p>URL-encodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a>.</p></div> </li> <li class="entry-summary"> <a href="#encode_www_form(string:String,io:IO,*,space_to_plus:Bool=true):Nil-class-method" class="signature"><strong>.encode_www_form</strong>(string : String, io : IO, *, space_to_plus : Bool = true) : Nil</a> <div class="summary"><p>URL-encodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a> and writes the result to <em>io</em>.</p></div> </li> <li class="entry-summary"> <a href="#reserved?(byte):Bool-class-method" class="signature"><strong>.reserved?</strong>(byte) : Bool</a> <div class="summary"><p>Returns whether given byte is reserved character defined in <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>.</p></div> </li> <li class="entry-summary"> <a href="#set_default_port(scheme:String,port:Int32?):Nil-class-method" class="signature"><strong>.set_default_port</strong>(scheme : String, port : Int32?) : Nil</a> <div class="summary"><p>Registers the default port for the given <em>scheme</em>.</p></div> </li> <li class="entry-summary"> <a href="#unreserved?(byte):Bool-class-method" class="signature"><strong>.unreserved?</strong>(byte) : Bool</a> <div class="summary"><p>Returns whether given byte is unreserved character defined in <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>.</p></div> </li> <li class="entry-summary"> <a href="#unwrap_ipv6(host)-class-method" class="signature"><strong>.unwrap_ipv6</strong>(host)</a> <div class="summary"><p>Unwraps IPv6 address wrapped in square brackets.</p></div> </li> </ul> <h2>  Instance Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#==(other:self)-instance-method" class="signature"><strong>#==</strong>(other : self)</a> <div class="summary"><p>Returns <code>true</code> if this reference is the same as <em>other</em>.</p></div> </li> <li class="entry-summary"> <a href="#absolute?:Bool-instance-method" class="signature"><strong>#absolute?</strong> : Bool</a> <div class="summary"><p>Returns <code>true</code> if URI has a <em>scheme</em> specified.</p></div> </li> <li class="entry-summary"> <a href="#authority(io:IO):Nil-instance-method" class="signature"><strong>#authority</strong>(io : IO) : Nil</a> <div class="summary"><p>Returns the authority component of this URI.</p></div> </li> <li class="entry-summary"> <a href="#authority:String?-instance-method" class="signature"><strong>#authority</strong> : String?</a> <div class="summary"><p>Returns the authority component of this URI.</p></div> </li> <li class="entry-summary"> <a href="#fragment:String?-instance-method" class="signature"><strong>#fragment</strong> : String?</a> <div class="summary"><p>Returns the fragment component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#fragment=(fragment:String?)-instance-method" class="signature"><strong>#fragment=</strong>(fragment : String?)</a> <div class="summary"><p>Sets the fragment component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#hash(hasher)-instance-method" class="signature"><strong>#hash</strong>(hasher)</a> <div class="summary"><p>See <code><a href="object#hash(hasher)-instance-method">Object#hash(hasher)</a></code></p></div> </li> <li class="entry-summary"> <a href="#host:String?-instance-method" class="signature"><strong>#host</strong> : String?</a> <div class="summary"><p>Returns the host component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#host=(host:String?)-instance-method" class="signature"><strong>#host=</strong>(host : String?)</a> <div class="summary"><p>Sets the host component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#hostname-instance-method" class="signature"><strong>#hostname</strong></a> <div class="summary"><p>Returns the host part of the URI and unwrap brackets for IPv6 addresses.</p></div> </li> <li class="entry-summary"> <a href="#normalize:URI-instance-method" class="signature"><strong>#normalize</strong> : URI</a> <div class="summary"><p>Returns a normalized copy of this URI.</p></div> </li> <li class="entry-summary"> <a href="#normalize!:URI-instance-method" class="signature"><strong>#normalize!</strong> : URI</a> <div class="summary"><p>Normalizes this URI instance.</p></div> </li> <li class="entry-summary"> <a href="#opaque?:Bool-instance-method" class="signature"><strong>#opaque?</strong> : Bool</a> <div class="summary"><p>Returns <code>true</code> if this URI is opaque.</p></div> </li> <li class="entry-summary"> <a href="#password:String?-instance-method" class="signature"><strong>#password</strong> : String?</a> <div class="summary"><p>Returns the password component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#password=(password:String?)-instance-method" class="signature"><strong>#password=</strong>(password : String?)</a> <div class="summary"><p>Sets the password component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#path:String-instance-method" class="signature"><strong>#path</strong> : String</a> <div class="summary"><p>Returns the path component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#path=(path:String)-instance-method" class="signature"><strong>#path=</strong>(path : String)</a> <div class="summary"><p>Sets the path component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#port:Int32?-instance-method" class="signature"><strong>#port</strong> : Int32?</a> <div class="summary"><p>Returns the port component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#port=(port:Int32?)-instance-method" class="signature"><strong>#port=</strong>(port : Int32?)</a> <div class="summary"><p>Sets the port component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#query:String?-instance-method" class="signature"><strong>#query</strong> : String?</a> <div class="summary"><p>Returns the query component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#query=(query:String?)-instance-method" class="signature"><strong>#query=</strong>(query : String?)</a> <div class="summary"><p>Sets the query component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#query_params:URI::Params-instance-method" class="signature"><strong>#query_params</strong> : URI::Params</a> <div class="summary"><p>Returns a <code><a href="uri/params">URI::Params</a></code> of the URI#query.</p></div> </li> <li class="entry-summary"> <a href="#query_params=(params:URI::Params)-instance-method" class="signature"><strong>#query_params=</strong>(params : URI::Params)</a> <div class="summary"><p>Sets <code><a href="uri#query:String?-instance-method">#query</a></code> to stringified <em>params</em>.</p></div> </li> <li class="entry-summary"> <a href="#relative?:Bool-instance-method" class="signature"><strong>#relative?</strong> : Bool</a> <div class="summary"><p>Returns <code>true</code> if URI does not have a <em>scheme</em> specified.</p></div> </li> <li class="entry-summary"> <a href="#relativize(uri:URI%7CString):URI-instance-method" class="signature"><strong>#relativize</strong>(uri : URI | String) : URI</a> <div class="summary"><p>Relativizes <em>uri</em> against this URI.</p></div> </li> <li class="entry-summary"> <a href="#request_target:String-instance-method" class="signature"><strong>#request_target</strong> : String</a> <div class="summary"><p>Returns the concatenation of <code><a href="uri#path:String-instance-method">#path</a></code> and <code><a href="uri#query:String?-instance-method">#query</a></code> as it would be used as a request target in an HTTP request.</p></div> </li> <li class="entry-summary"> <a href="#resolve(uri:URI%7CString):URI-instance-method" class="signature"><strong>#resolve</strong>(uri : URI | String) : URI</a> <div class="summary"><p>Resolves <em>uri</em> against this URI.</p></div> </li> <li class="entry-summary"> <a href="#scheme:String?-instance-method" class="signature"><strong>#scheme</strong> : String?</a> <div class="summary"><p>Returns the scheme component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#scheme=(scheme:String?)-instance-method" class="signature"><strong>#scheme=</strong>(scheme : String?)</a> <div class="summary"><p>Sets the scheme component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#to_s(io:IO):Nil-instance-method" class="signature"><strong>#to_s</strong>(io : IO) : Nil</a> <div class="summary"><p>Appends a short String representation of this object which includes its class name and its object address.</p></div> </li> <li class="entry-summary"> <a href="#user:String?-instance-method" class="signature"><strong>#user</strong> : String?</a> <div class="summary"><p>Returns the user component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#user=(user:String?)-instance-method" class="signature"><strong>#user=</strong>(user : String?)</a> <div class="summary"><p>Sets the user component of the URI.</p></div> </li> <li class="entry-summary"> <a href="#userinfo-instance-method" class="signature"><strong>#userinfo</strong></a> <div class="summary"><p>Returns the user-information component containing the provided username and password.</p></div> </li> </ul> <div class="methods-inherited"> <h3>Instance methods inherited from class <code><a href="reference">Reference</a></code>
</h3> <a href="reference#==(other:self)-instance-method" class="tooltip"> ==(other : self)<br>==(other : JSON::Any)<br>==(other : YAML::Any)<br>==(other) ==</a>, <a href="reference#dup-instance-method" class="tooltip"> dup dup</a>, <a href="reference#hash(hasher)-instance-method" class="tooltip"> hash(hasher) hash</a>, <a href="reference#inspect(io:IO):Nil-instance-method" class="tooltip"> inspect(io : IO) : Nil inspect</a>, <a href="reference#object_id:UInt64-instance-method" class="tooltip"> object_id : UInt64 object_id</a>, <a href="reference#pretty_print(pp):Nil-instance-method" class="tooltip"> pretty_print(pp) : Nil pretty_print</a>, <a href="reference#same?(other:Reference)-instance-method" class="tooltip"> same?(other : Reference)<br>same?(other : Nil) same?</a>, <a href="reference#to_s(io:IO):Nil-instance-method" class="tooltip"> to_s(io : IO) : Nil to_s</a> <h3>Constructor methods inherited from class <code><a href="reference">Reference</a></code>
</h3> <a href="reference#new-class-method" class="tooltip"> new new</a> <h3>Instance methods inherited from class <code><a href="object">Object</a></code>
</h3> <a href="object#!:Bool-instance-method" class="tooltip"> ! : Bool !</a>, <a href="object#!=(other)-instance-method" class="tooltip"> !=(other) !=</a>, <a href="object#!~(other)-instance-method" class="tooltip"> !~(other) !~</a>, <a href="object#==(other)-instance-method" class="tooltip"> ==(other) ==</a>, <a href="object#===(other:JSON::Any)-instance-method" class="tooltip"> ===(other : JSON::Any)<br>===(other : YAML::Any)<br>===(other) ===</a>, <a href="object#=~(other)-instance-method" class="tooltip"> =~(other) =~</a>, <a href="object#as(type:Class)-instance-method" class="tooltip"> as(type : Class) as</a>, <a href="object#as?(type:Class)-instance-method" class="tooltip"> as?(type : Class) as?</a>, <a href="object#class-instance-method" class="tooltip"> class class</a>, <a href="object#dup-instance-method" class="tooltip"> dup dup</a>, <a href="object#hash(hasher)-instance-method" class="tooltip"> hash(hasher)<br>hash hash</a>, <a href="object#in?(*values:Object):Bool-instance-method" class="tooltip"> in?(*values : Object) : Bool<br>in?(collection) : Bool in?</a>, <a href="object#inspect:String-instance-method" class="tooltip"> inspect : String<br>inspect(io : IO) : Nil inspect</a>, <a href="object#is_a?(type:Class):Bool-instance-method" class="tooltip"> is_a?(type : Class) : Bool is_a?</a>, <a href="object#itself-instance-method" class="tooltip"> itself itself</a>, <a href="object#nil?:Bool-instance-method" class="tooltip"> nil? : Bool nil?</a>, <a href="object#not_nil!-instance-method" class="tooltip"> not_nil! not_nil!</a>, <a href="#" class="tooltip"> pretty_inspect(width = 79, newline = "\n", indent = 0) : String pretty_inspect</a>, <a href="object#pretty_print(pp:PrettyPrint):Nil-instance-method" class="tooltip"> pretty_print(pp : PrettyPrint) : Nil pretty_print</a>, <a href="object#responds_to?(name:Symbol):Bool-instance-method" class="tooltip"> responds_to?(name : Symbol) : Bool responds_to?</a>, <a href="object#tap(&amp;)-instance-method" class="tooltip"> tap(&amp;) tap</a>, <a href="object#to_json(io:IO)-instance-method" class="tooltip"> to_json(io : IO)<br>to_json to_json</a>, <a href="#" class="tooltip"> to_pretty_json(io : IO, indent : String = " ")<br>to_pretty_json(indent : String = " ") to_pretty_json</a>, <a href="object#to_s:String-instance-method" class="tooltip"> to_s : String<br>to_s(io : IO) : Nil to_s</a>, <a href="object#to_yaml(io:IO)-instance-method" class="tooltip"> to_yaml(io : IO)<br>to_yaml to_yaml</a>, <a href="object#try(&amp;)-instance-method" class="tooltip"> try(&amp;) try</a>, <a href="object#unsafe_as(type:T.class)forallT-instance-method" class="tooltip"> unsafe_as(type : T.class) forall T unsafe_as</a> <h3>Class methods inherited from class <code><a href="object">Object</a></code>
</h3> <a href="object#from_json(string_or_io,root:String)-class-method" class="tooltip"> from_json(string_or_io, root : String)<br>from_json(string_or_io) from_json</a>, <a href="object#from_yaml(string_or_io:String%7CIO)-class-method" class="tooltip"> from_yaml(string_or_io : String | IO) from_yaml</a> </div> <h2>  Constructor Detail </h2> <div class="entry-detail" id='new(scheme=nil,host=nil,port=nil,path="",query:String|Params|Nil=nil,user=nil,password=nil,fragment=nil)-class-method'> <h3 class="signature">def self.<strong>new</strong>(scheme = nil, host = nil, port = nil, path = "", query : <a href="string">String</a> | <a href="uri/params">Params</a> | <a href="nil">Nil</a> = nil, user = nil, password = nil, fragment = nil)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L174" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="parse(raw_url:String):URI-class-method"> <h3 class="signature">def self.<strong>parse</strong>(raw_url : <a href="string">String</a>) : <a href="uri">URI</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L545" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Parses the given <em>raw_url</em> into an URI. The <em>raw_url</em> may be relative or absolute.</p> <pre data-language="crystal">require "uri"

uri = URI.parse("http://crystal-lang.org") # =&gt; #&lt;URI:0x1068a7e40 @scheme="http", @host="crystal-lang.org", ... &gt;
uri.scheme                                 # =&gt; "http"
uri.host                                   # =&gt; "crystal-lang.org"</pre> </div>   </div> <h2>  Class Method Detail </h2> <div class="entry-detail" id="decode(string:String,io:IO,*,plus_to_space:Bool=false):Nil-class-method"> <h3 class="signature">def self.<strong>decode</strong>(string : <a href="string">String</a>, io : <a href="io">IO</a>, *, plus_to_space : <a href="bool">Bool</a> = false) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L32" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-decodes a string and writes the result to <em>io</em>.</p> <p>See <code><a href="uri#decode(string:String,*,plus_to_space:Bool=false):String-class-method">.decode(string : String, *, plus_to_space : Bool = false)</a> : <a href="string">String</a></code> for details.</p> </div>   </div> <div class="entry-detail" id="decode(string:String,*,plus_to_space:Bool=false):String-class-method"> <h3 class="signature">def self.<strong>decode</strong>(string : <a href="string">String</a>, *, plus_to_space : <a href="bool">Bool</a> = false) : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L25" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-decodes <em>string</em>.</p> <pre data-language="crystal">require "uri"

URI.decode("hello%20world!")                                 # =&gt; "hello world!"
URI.decode("put:%20it+%D0%B9")                               # =&gt; "put: it+й"
URI.decode("http://example.com/Crystal%20is%20awesome%20=)") # =&gt; "http://example.com/Crystal is awesome =)"</pre> <p>By default, <code>+</code> is decoded literally. If <em>plus_to_space</em> is <code>true</code>, <code>+</code> is decoded as space character (<code>0x20</code>). Percent-encoded values such as <code>%20</code> and <code>%2B</code> are always decoded as characters with the respective codepoint.</p> <pre data-language="crystal">require "uri"

URI.decode("peter+%2B+paul")                      # =&gt; "peter+++paul"
URI.decode("peter+%2B+paul", plus_to_space: true) # =&gt; "peter + paul"</pre> <ul>
<li>
<code><a href="uri#encode(string:String,io:IO,*,space_to_plus:Bool=false):Nil-class-method">.encode</a></code> is the reverse operation.</li>
<li>
<code><a href="uri#decode_www_form(string:String,io:IO,*,plus_to_space:Bool=true):Nil-class-method">.decode_www_form</a></code> encodes plus to space by default.</li>
</ul> </div>   </div> <div class="entry-detail" id="decode(string:String,io:IO,*,plus_to_space:Bool=false,&amp;):Nil-class-method"> <h3 class="signature">def self.<strong>decode</strong>(string : <a href="string">String</a>, io : <a href="io">IO</a>, *, plus_to_space : <a href="bool">Bool</a> = false, &amp;) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L191" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-decodes <em>string</em> and writes the result to <em>io</em>.</p> <p>The block is called for each percent-encoded ASCII character and determines whether the value is to be decoded. When the return value is falsey, the character is decoded. Non-ASCII characters are always decoded.</p> <p>By default, <code>+</code> is decoded literally. If <em>plus_to_space</em> is <code>true</code>, <code>+</code> is decoded as space character (<code>0x20</code>).</p> <p>This method enables some customization, but typical use cases can be implemented by either <code><a href="uri#decode(string:String,*,plus_to_space:Bool=false):String-class-method">.decode(string : String, *, plus_to_space : Bool = false)</a> : <a href="string">String</a></code> or <code><a href="uri#decode_www_form(string:String,*,plus_to_space:Bool=true):String-class-method">.decode_www_form(string : String, *, plus_to_space : Bool = true)</a> : <a href="string">String</a></code>.</p> </div>   </div> <div class="entry-detail" id="decode_www_form(string:String,io:IO,*,plus_to_space:Bool=true):Nil-class-method"> <h3 class="signature">def self.<strong>decode_www_form</strong>(string : <a href="string">String</a>, io : <a href="io">IO</a>, *, plus_to_space : <a href="bool">Bool</a> = true) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L106" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-decodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a> and writes the result to <em>io</em>.</p> <p>See <code>self<a href="uri#decode_www_form(string:String,*,plus_to_space:Bool=true):String-class-method">.decode_www_form(string : String, *, plus_to_space : Bool = true)</a> : <a href="string">String</a></code> for details.</p> </div>   </div> <div class="entry-detail" id="decode_www_form(string:String,*,plus_to_space:Bool=true):String-class-method"> <h3 class="signature">def self.<strong>decode_www_form</strong>(string : <a href="string">String</a>, *, plus_to_space : <a href="bool">Bool</a> = true) : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L97" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-decodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a>.</p> <pre data-language="crystal">require "uri"

URI.decode_www_form("hello%20world!")                           # =&gt; "hello world!"
URI.decode_www_form("put:%20it+%D0%B9")                         # =&gt; "put: it й"
URI.decode_www_form("http://example.com/Crystal+is+awesome+=)") # =&gt; "http://example.com/Crystal is awesome =)"</pre> <p>By default, <code>+</code> is decoded as space character (<code>0x20</code>). If <em>plus_to_space</em> is <code>false</code>, <code>+</code> is decoded literally as <code>+</code>. Percent-encoded values such as <code>%20</code> and <code>%2B</code> are always decoded as characters with the respective codepoint.</p> <pre data-language="crystal">require "uri"

URI.decode_www_form("peter+%2B+paul")                       # =&gt; "peter + paul"
URI.decode_www_form("peter+%2B+paul", plus_to_space: false) # =&gt; "peter+++paul"</pre> <ul>
<li>
<code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">.encode_www_form</a></code> is the reverse operation.</li>
<li>
<code><a href="uri#decode(string:String,io:IO,*,plus_to_space:Bool=false):Nil-class-method">.decode</a></code> encodes plus literally by default.</li>
</ul> </div>   </div> <div class="entry-detail" id="default_port(scheme:String):Int32?-class-method"> <h3 class="signature">def self.<strong>default_port</strong>(scheme : <a href="string">String</a>) : <a href="int32">Int32</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L689" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the default port for the given <em>scheme</em> if known, otherwise returns <code>nil</code>.</p> <pre data-language="crystal">require "uri"

URI.default_port "http"  # =&gt; 80
URI.default_port "ponzi" # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="encode(string:String,io:IO,*,space_to_plus:Bool=false):Nil-class-method"> <h3 class="signature">def self.<strong>encode</strong>(string : <a href="string">String</a>, io : <a href="io">IO</a>, *, space_to_plus : <a href="bool">Bool</a> = false) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L70" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-encodes <em>string</em> and writes the result to <em>io</em>.</p> <p>See <code><a href="uri#encode(string:String,*,space_to_plus:Bool=false):String-class-method">.encode(string : String, *, space_to_plus : Bool = false)</a> : <a href="string">String</a></code> for details.</p> </div>   </div> <div class="entry-detail" id="encode(string:String,*,space_to_plus:Bool=false):String-class-method"> <h3 class="signature">def self.<strong>encode</strong>(string : <a href="string">String</a>, *, space_to_plus : <a href="bool">Bool</a> = false) : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L63" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-encodes <em>string</em>.</p> <p>Reserved and unreserved characters are not escaped, so this only modifies some special characters as well as non-ASCII characters. <code><a href="uri#reserved?(byte):Bool-class-method">.reserved?</a></code> and <code><a href="uri#unreserved?(byte):Bool-class-method">.unreserved?</a></code> provide more details on these character classes.</p> <pre data-language="crystal">require "uri"

URI.encode("hello world!")                             # =&gt; "hello%20world!"
URI.encode("put: it+й")                                # =&gt; "put:%20it+%D0%B9"
URI.encode("http://example.com/Crystal is awesome =)") # =&gt; "http://example.com/Crystal%20is%20awesome%20=)"</pre> <p>By default, the space character (<code>0x20</code>) is encoded as <code>%20</code> and <code>+</code> is encoded literally. If <em>space_to_plus</em> is <code>true</code>, space character is encoded as <code>+</code> and <code>+</code> is encoded as <code>%2B</code>:</p> <pre data-language="crystal">require "uri"

URI.encode("peter + paul")                      # =&gt; "peter%20+%20paul"
URI.encode("peter + paul", space_to_plus: true) # =&gt; "peter+%2B+paul"</pre> <ul>
<li>
<code><a href="uri#decode(string:String,io:IO,*,plus_to_space:Bool=false):Nil-class-method">.decode</a></code> is the reverse operation.</li>
<li>
<code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">.encode_www_form</a></code> also escapes reserved characters.</li>
</ul> </div>   </div> <div class="entry-detail" id="encode(string:String,io:IO,space_to_plus:Bool=false,&amp;):Nil-class-method"> <h3 class="signature">def self.<strong>encode</strong>(string : <a href="string">String</a>, io : <a href="io">IO</a>, space_to_plus : <a href="bool">Bool</a> = false, &amp;) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L215" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-encodes <em>string</em> and writes the result to an <code><a href="io">IO</a></code>.</p> <p>The block is called for each ascii character (codepoint less than <code>0x80</code>) and determines whether the value is to be encoded. When the return value is falsey, the character is encoded. Non-ASCII characters are always encoded.</p> <p>By default, the space character (<code>0x20</code>) is encoded as <code>%20</code> and <code>+</code> is encoded literally. If <em>space_to_plus</em> is <code>true</code>, space character is encoded as <code>+</code> and <code>+</code> is encoded as <code>%2B</code>.</p> <p>This method enables some customization, but typical use cases can be implemented by either <code><a href="uri#encode(string:String,*,space_to_plus:Bool=false):String-class-method">.encode(string : String, *, space_to_plus : Bool = false)</a> : <a href="string">String</a></code> or <code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">.encode_www_form(string : String, *, space_to_plus : Bool = true)</a> : <a href="string">String</a></code>.</p> </div>   </div> <div class="entry-detail" id="encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method"> <h3 class="signature">def self.<strong>encode_www_form</strong>(string : <a href="string">String</a>, *, space_to_plus : <a href="bool">Bool</a> = true) : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L141" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-encodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a>.</p> <p>Reserved characters are escaped, unreserved characters are not. <code><a href="uri#reserved?(byte):Bool-class-method">.reserved?</a></code> and <code><a href="uri#unreserved?(byte):Bool-class-method">.unreserved?</a></code> provide more details on these character classes.</p> <pre data-language="crystal">require "uri"

URI.encode_www_form("hello world!")                             # =&gt; "hello+world%21"
URI.encode_www_form("put: it+й")                                # =&gt; "put%3A+it%2B%D0%B9"
URI.encode_www_form("http://example.com/Crystal is awesome =)") # =&gt; "http%3A%2F%2Fexample.com%2FCrystal+is+awesome+%3D%29"</pre> <p>The encoded string returned from this method can be used as name or value components for a <code>application/x-www-form-urlencoded</code> format serialization. <code><a href="uri/params">URI::Params</a></code> provides a higher-level API for this use case.</p> <p>By default, the space character (<code>0x20</code>) is encoded as <code>+</code> and <code>+</code> is encoded as <code>%2B</code>. If <em>space_to_plus</em> is <code>false</code>, space character is encoded as <code>%20</code> and <code>'+'</code> is encoded literally.</p> <pre data-language="crystal">require "uri"

URI.encode_www_form("peter + paul")                       # =&gt; "peter+%2B+paul"
URI.encode_www_form("peter + paul", space_to_plus: false) # =&gt; "peter%20%2B%20paul"</pre> <ul>
<li>
<code><a href="uri#decode_www_form(string:String,io:IO,*,plus_to_space:Bool=true):Nil-class-method">.decode_www_form</a></code> is the reverse operation.</li>
<li>
<code><a href="uri#encode(string:String,io:IO,*,space_to_plus:Bool=false):Nil-class-method">.encode</a></code> does not escape reserved characters.</li>
</ul> </div>   </div> <div class="entry-detail" id="encode_www_form(string:String,io:IO,*,space_to_plus:Bool=true):Nil-class-method"> <h3 class="signature">def self.<strong>encode_www_form</strong>(string : <a href="string">String</a>, io : <a href="io">IO</a>, *, space_to_plus : <a href="bool">Bool</a> = true) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L152" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>URL-encodes <em>string</em> as <a href="https://url.spec.whatwg.org/#urlencoded-serializing"><code>x-www-form-urlencoded</code></a> and writes the result to <em>io</em>.</p> <p>See <code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">.encode_www_form(string : String, *, space_to_plus : Bool = true)</a></code> for details.</p> </div>   </div> <div class="entry-detail" id="reserved?(byte):Bool-class-method"> <h3 class="signature">def self.<strong>reserved?</strong>(byte) : <a href="bool">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L163" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns whether given byte is reserved character defined in <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>.</p> <p>Reserved characters are ':', '/', '?', '#', '[', ']', '@', '!', '$', '&amp;', "'", '(', ')', '*', '+', ',', ';' and '='.</p> </div>   </div> <div class="entry-detail" id="set_default_port(scheme:String,port:Int32?):Nil-class-method"> <h3 class="signature">def self.<strong>set_default_port</strong>(scheme : <a href="string">String</a>, port : <a href="int32">Int32</a>?) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L703" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Registers the default port for the given <em>scheme</em>.</p> <p>If <em>port</em> is <code>nil</code>, the existing default port for the <em>scheme</em>, if any, will be unregistered.</p> <pre data-language="crystal">require "uri"

URI.set_default_port "ponzi", 9999</pre> </div>   </div> <div class="entry-detail" id="unreserved?(byte):Bool-class-method"> <h3 class="signature">def self.<strong>unreserved?</strong>(byte) : <a href="bool">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri/encoding.cr#L173" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns whether given byte is unreserved character defined in <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>.</p> <p>Unreserved characters are ASCII letters, ASCII digits, <code>_</code>, <code>.</code>, <code>-</code> and <code>~</code>.</p> </div>   </div> <div class="entry-detail" id="unwrap_ipv6(host)-class-method"> <h3 class="signature">def self.<strong>unwrap_ipv6</strong>(host)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L199" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Unwraps IPv6 address wrapped in square brackets.</p> <p>Everything that is not wrapped in square brackets is returned unchanged.</p> <pre data-language="crystal">URI.unwrap_ipv6("[::1]")       # =&gt; "::1"
URI.unwrap_ipv6("127.0.0.1")   # =&gt; "127.0.0.1"
URI.unwrap_ipv6("example.com") # =&gt; "example.com"</pre> </div>   </div> <h2>  Instance Method Detail </h2> <div class="entry-detail" id="==(other:self)-instance-method"> <h3 class="signature">def <strong>==</strong>(other : self)</h3> <div class="doc"> <div class="doc-inherited"> Description copied from class <a href="reference">Reference</a> </div> <p>Returns <code>true</code> if this reference is the same as <em>other</em>. Invokes <code>same?</code>.</p> </div>   </div> <div class="entry-detail" id="absolute?:Bool-instance-method"> <h3 class="signature">def <strong>absolute?</strong> : <a href="bool">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L236" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>true</code> if URI has a <em>scheme</em> specified.</p> </div>   </div> <div class="entry-detail" id="authority(io:IO):Nil-instance-method"> <h3 class="signature">def <strong>authority</strong>(io : <a href="io">IO</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L299" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the authority component of this URI. It is formatted as <code>user:pass@host:port</code> with missing parts being omitted.</p> <p>If the URI does not have any authority information, the result is <code>nil</code>.</p> <pre data-language="crystal">uri = URI.parse "http://user:pass@example.com:80/path?query"
uri.authority # =&gt; "user:pass@example.com:80"

uri = URI.parse("/relative")
uri.authority # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="authority:String?-instance-method"> <h3 class="signature">def <strong>authority</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L290" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the authority component of this URI. It is formatted as <code>user:pass@host:port</code> with missing parts being omitted.</p> <p>If the URI does not have any authority information, the result is <code>nil</code>.</p> <pre data-language="crystal">uri = URI.parse "http://user:pass@example.com:80/path?query"
uri.authority # =&gt; "user:pass@example.com:80"

uri = URI.parse("/relative")
uri.authority # =&gt; nil</pre> </div>   </div> <div class="entry-detail" id="fragment:String?-instance-method"> <h3 class="signature">def <strong>fragment</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L167" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the fragment component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://foo.com/bar#section1").fragment # =&gt; "section1"</pre> </div>   </div> <div class="entry-detail" id="fragment=(fragment:String?)-instance-method"> <h3 class="signature">def <strong>fragment=</strong>(fragment : <a href="string">String</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L170" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the fragment component of the URI.</p> </div>   </div> <div class="entry-detail" id="hash(hasher)-instance-method"> <h3 class="signature">def <strong>hash</strong>(hasher)</h3> <div class="doc"> <div class="doc-inherited"> Description copied from class <a href="reference">Reference</a> </div> <p>See <code><a href="object#hash(hasher)-instance-method">Object#hash(hasher)</a></code></p> </div>   </div> <div class="entry-detail" id="host:String?-instance-method"> <h3 class="signature">def <strong>host</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L95" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the host component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://foo.com").host # =&gt; "foo.com"</pre> </div>   </div> <div class="entry-detail" id="host=(host:String?)-instance-method"> <h3 class="signature">def <strong>host=</strong>(host : <a href="string">String</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L98" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the host component of the URI.</p> </div>   </div> <div class="entry-detail" id="hostname-instance-method"> <h3 class="signature">def <strong>hostname</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L186" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the host part of the URI and unwrap brackets for IPv6 addresses.</p> <pre data-language="crystal">require "uri"

URI.parse("http://[::1]/bar").hostname # =&gt; "::1"
URI.parse("http://[::1]/bar").host     # =&gt; "[::1]"</pre> </div>   </div> <div class="entry-detail" id="normalize:URI-instance-method"> <h3 class="signature">def <strong>normalize</strong> : <a href="uri">URI</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L346" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a normalized copy of this URI.</p> <p>See <code><a href="uri#normalize!:URI-instance-method">#normalize!</a></code> for details.</p> </div>   </div> <div class="entry-detail" id="normalize!:URI-instance-method"> <h3 class="signature">def <strong>normalize!</strong> : <a href="uri">URI</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L365" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Normalizes this URI instance.</p> <p>The following normalizations are applied to the individual components (if available):</p> <ul>
<li>
<code><a href="uri#scheme:String?-instance-method">#scheme</a></code> is lowercased.</li>
<li>
<code><a href="uri#host:String?-instance-method">#host</a></code> is lowercased.</li>
<li>
<code><a href="uri#port:Int32?-instance-method">#port</a></code> is removed if it is the <code>.default_port?</code> of the scheme.</li>
<li>
<code><a href="uri#path:String-instance-method">#path</a></code> is resolved to a minimal, semantic equivalent representation removing dot segments <code>/.</code> and <code>/..</code>.</li>
</ul> <pre data-language="crystal">uri = URI.parse("HTTP://example.COM:80/./foo/../bar/")
uri.normalize!
uri # =&gt; "http://example.com/bar/"</pre> </div>   </div> <div class="entry-detail" id="opaque?:Bool-instance-method"> <h3 class="signature">def <strong>opaque?</strong> : <a href="bool">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L249" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>true</code> if this URI is opaque.</p> <p>A URI is considered opaque if it has a <code><a href="uri#scheme:String?-instance-method">#scheme</a></code> but no hierarchical part, i.e. no <code><a href="uri#host:String?-instance-method">#host</a></code> and the first character of <code><a href="uri#path:String-instance-method">#path</a></code> is not a slash (<code>/</code>).</p> </div>   </div> <div class="entry-detail" id="password:String?-instance-method"> <h3 class="signature">def <strong>password</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L155" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the password component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://admin:password@foo.com").password # =&gt; "password"</pre> </div>   </div> <div class="entry-detail" id="password=(password:String?)-instance-method"> <h3 class="signature">def <strong>password=</strong>(password : <a href="string">String</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L158" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the password component of the URI.</p> </div>   </div> <div class="entry-detail" id="path:String-instance-method"> <h3 class="signature">def <strong>path</strong> : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L119" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the path component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://foo.com/bar").path # =&gt; "/bar"</pre> </div>   </div> <div class="entry-detail" id="path=(path:String)-instance-method"> <h3 class="signature">def <strong>path=</strong>(path : <a href="string">String</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L122" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the path component of the URI.</p> </div>   </div> <div class="entry-detail" id="port:Int32?-instance-method"> <h3 class="signature">def <strong>port</strong> : <a href="int32">Int32</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L107" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the port component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://foo.com:5432").port # =&gt; 5432</pre> </div>   </div> <div class="entry-detail" id="port=(port:Int32?)-instance-method"> <h3 class="signature">def <strong>port=</strong>(port : <a href="int32">Int32</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L110" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the port component of the URI.</p> </div>   </div> <div class="entry-detail" id="query:String?-instance-method"> <h3 class="signature">def <strong>query</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L131" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the query component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://foo.com/bar?q=1").query # =&gt; "q=1"</pre> </div>   </div> <div class="entry-detail" id="query=(query:String?)-instance-method"> <h3 class="signature">def <strong>query=</strong>(query : <a href="string">String</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L134" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the query component of the URI.</p> </div>   </div> <div class="entry-detail" id="query_params:URI::Params-instance-method"> <h3 class="signature">def <strong>query_params</strong> : <a href="uri/params">URI::Params</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L261" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a <code><a href="uri/params">URI::Params</a></code> of the URI#query.</p> <pre data-language="crystal">require "uri"

uri = URI.parse "http://foo.com?id=30&amp;limit=5#time=1305298413"
uri.query_params # =&gt; URI::Params(@raw_params={"id" =&gt; ["30"], "limit" =&gt; ["5"]})</pre> </div>   </div> <div class="entry-detail" id="query_params=(params:URI::Params)-instance-method"> <h3 class="signature">def <strong>query_params=</strong>(params : <a href="uri/params">URI::Params</a>)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L274" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets <code><a href="uri#query:String?-instance-method">#query</a></code> to stringified <em>params</em>.</p> <pre data-language="crystal">require "uri"

uri = URI.new
uri.query_params = URI::Params.parse("foo=bar&amp;foo=baz")
uri.to_s # =&gt; "?foo=bar&amp;foo=baz"</pre> </div>   </div> <div class="entry-detail" id="relative?:Bool-instance-method"> <h3 class="signature">def <strong>relative?</strong> : <a href="bool">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L241" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns <code>true</code> if URI does not have a <em>scheme</em> specified.</p> </div>   </div> <div class="entry-detail" id="relativize(uri:URI|String):URI-instance-method"> <h3 class="signature">def <strong>relativize</strong>(uri : <a href="uri">URI</a> | <a href="string">String</a>) : <a href="uri">URI</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L457" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Relativizes <em>uri</em> against this URI.</p> <p>An exact copy of <em>uri</em> is returned if</p> <ul>
<li>this URI or <em>uri</em> are <code><a href="uri#opaque?:Bool-instance-method">#opaque?</a></code>, or</li>
<li>the scheme and authority (<code><a href="uri#host:String?-instance-method">#host</a></code>, <code><a href="uri#port:Int32?-instance-method">#port</a></code>, <code><a href="uri#user:String?-instance-method">#user</a></code>, <code><a href="uri#password:String?-instance-method">#password</a></code>) components are not identical.</li>
</ul> <p>Otherwise a new relative hierarchical URI is constructed with <code><a href="uri#query:String?-instance-method">#query</a></code> and <code><a href="uri#fragment:String?-instance-method">#fragment</a></code> components from <em>uri</em> and with a path component that describes a minimum-difference relative path from <code><a href="uri#path:String-instance-method">#path</a></code> to <em>uri</em>'s path.</p> <pre data-language="crystal">URI.parse("http://foo.com/bar/baz").relativize("http://foo.com/quux")         # =&gt; "../quux"
URI.parse("http://foo.com/bar/baz").relativize("http://foo.com/bar/quux")     # =&gt; "quux"
URI.parse("http://foo.com/bar/baz").relativize("http://quux.com")             # =&gt; "http://quux.com"
URI.parse("http://foo.com/bar/baz").relativize("http://foo.com/bar/baz#quux") # =&gt; "#quux"</pre> <p>This method is the inverse operation to <code><a href="uri#resolve(uri:URI%7CString):URI-instance-method">#resolve</a></code> (see <a href="#Resolution%20and%20Relativization">Resolution and Relativization</a>).</p> </div>   </div> <div class="entry-detail" id="request_target:String-instance-method"> <h3 class="signature">def <strong>request_target</strong> : <a href="string">String</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L221" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the concatenation of <code><a href="uri#path:String-instance-method">#path</a></code> and <code><a href="uri#query:String?-instance-method">#query</a></code> as it would be used as a request target in an HTTP request.</p> <p>If <code><a href="uri#path:String-instance-method">#path</a></code> is empty in an hierarchical URI, <code>"/"</code> is used.</p> <pre data-language="crystal">require "uri"

uri = URI.parse "http://example.com/posts?id=30&amp;limit=5#time=1305298413"
uri.request_target # =&gt; "/posts?id=30&amp;limit=5"

uri = URI.new(path: "", query: "foo=bar")
uri.request_target # =&gt; "/?foo=bar"</pre> </div>   </div> <div class="entry-detail" id="resolve(uri:URI|String):URI-instance-method"> <h3 class="signature">def <strong>resolve</strong>(uri : <a href="uri">URI</a> | <a href="string">String</a>) : <a href="uri">URI</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L388" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Resolves <em>uri</em> against this URI.</p> <p>If <em>uri</em> is <code><a href="uri#absolute?:Bool-instance-method">#absolute?</a></code>, or if this URI is <code><a href="uri#opaque?:Bool-instance-method">#opaque?</a></code>, then an exact copy of <em>uri</em> is returned.</p> <p>Otherwise the URI is resolved according to the specifications in <a href="https://tools.ietf.org/html/rfc3986#section-5.2.2">RFC 3986 section 5.2</a>.</p> <pre data-language="crystal">URI.parse("http://foo.com/bar/baz").resolve("../quux")         # =&gt; "http://foo.com/quux"
URI.parse("http://foo.com/bar/baz").resolve("/quux")           # =&gt; "http://foo.com/quux"
URI.parse("http://foo.com/bar/baz").resolve("http://quux.com") # =&gt; "http://quux.com"
URI.parse("http://foo.com/bar/baz").resolve("#quux")           # =&gt; "http://foo.com/bar/baz#quux"</pre> <p>This method is the inverse operation to <code><a href="uri#relativize(uri:URI%7CString):URI-instance-method">#relativize</a></code> (see <a href="#Resolution%20and%20Relativization">Resolution and Relativization</a>).</p> </div>   </div> <div class="entry-detail" id="scheme:String?-instance-method"> <h3 class="signature">def <strong>scheme</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L83" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the scheme component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://foo.com").scheme           # =&gt; "http"
URI.parse("mailto:alice@example.com").scheme # =&gt; "mailto"</pre> </div>   </div> <div class="entry-detail" id="scheme=(scheme:String?)-instance-method"> <h3 class="signature">def <strong>scheme=</strong>(scheme : <a href="string">String</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L86" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the scheme component of the URI.</p> </div>   </div> <div class="entry-detail" id="to_s(io:IO):Nil-instance-method"> <h3 class="signature">def <strong>to_s</strong>(io : <a href="io">IO</a>) : <a href="nil">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L314" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from class <a href="reference">Reference</a> </div> <p>Appends a short String representation of this object which includes its class name and its object address.</p> <pre data-language="crystal">class Person
  def initialize(@name : String, @age : Int32)
  end
end

Person.new("John", 32).to_s # =&gt; #&lt;Person:0x10a199f20&gt;</pre> </div>   </div> <div class="entry-detail" id="user:String?-instance-method"> <h3 class="signature">def <strong>user</strong> : <a href="string">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L143" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the user component of the URI.</p> <pre data-language="crystal">require "uri"

URI.parse("http://admin:password@foo.com").user # =&gt; "admin"</pre> </div>   </div> <div class="entry-detail" id="user=(user:String?)-instance-method"> <h3 class="signature">def <strong>user=</strong>(user : <a href="string">String</a>?)<a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L146" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Sets the user component of the URI.</p> </div>   </div> <div class="entry-detail" id="userinfo-instance-method"> <h3 class="signature">def <strong>userinfo</strong><a href="https://github.com/crystal-lang/crystal/blob/dd40a2442/src/uri.cr#L560" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the user-information component containing the provided username and password.</p> <pre data-language="crystal">require "uri"

uri = URI.parse "http://admin:password@foo.com"
uri.userinfo # =&gt; "admin:password"</pre> <p>The return value is URL encoded (see <code><a href="uri#encode_www_form(string:String,*,space_to_plus:Bool=true):String-class-method">#encode_www_form</a></code>).</p> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/api/1.0.0/URI.html" class="_attribution-link" target="_blank">https://crystal-lang.org/api/1.0.0/URI.html</a>
  </p>
</div>
