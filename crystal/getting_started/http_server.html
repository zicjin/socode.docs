 <h1 id="http-server">HTTP Server</h1> <p>A slightly more interesting example is an HTTP Server:</p> <div class="crystal highlight"><pre data-language="crystal">require "http/server"

server = HTTP::Server.new do |context|
  context.response.content_type = "text/plain"
  context.response.print "Hello world! The time is #{Time.local}"
end

address = server.bind_tcp 8080
puts "Listening on http://#{address}"
server.listen
</pre></div> <p>The above code will make sense once you read the whole language reference, but we can already learn some things.</p> <ul> <li> <p>You can <a href="../syntax_and_semantics/requiring_files">require</a> code defined in other files:</p> <div class="crystal highlight"><pre data-language="crystal">require "http/server"
</pre></div> </li> <li> <p>You can define <a href="../syntax_and_semantics/local_variables">local variables</a> without the need to specify their type:</p> <div class="crystal highlight"><pre data-language="crystal">server = HTTP::Server.new(...)
</pre></div> </li> <li> <p>The port of the HTTP server is set by using the method bind_tcp on the object HTTP::Server (the port set to 8080).</p> <div class="crystal highlight"><pre data-language="crystal">address = server.bind_tcp 8080
</pre></div> </li> <li> <p>You program by invoking <a href="../syntax_and_semantics/classes_and_methods">methods</a> (or sending messages) to objects.</p> <div class="crystal highlight"><pre data-language="crystal">HTTP::Server.new(...)
# ...
Time.local
# ...
address = server.bind_tcp 8080
# ...
puts "Listening on http://#{address}"
# ...
server.listen
</pre></div> </li> <li> <p>You can use code blocks, or simply <a href="../syntax_and_semantics/blocks_and_procs">blocks</a>, which are a very convenient way to reuse code and get some features from the functional world:</p> <div class="crystal highlight"><pre data-language="crystal">HTTP::Server.new do |context|
  # ...
end
</pre></div> </li> <li> <p>You can easily create strings with embedded content, known as string interpolation. The language comes with other <a href="../syntax_and_semantics/literals/index">syntax</a> as well to create arrays, hashes, ranges, tuples and more:</p> <div class="crystal highlight"><pre data-language="crystal">"Hello world! The time is #{Time.local}"
</pre></div> </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://crystal-lang.org/reference/1.3/getting_started/http_server.html" class="_attribution-link" target="_blank">https://crystal-lang.org/reference/1.3/getting_started/http_server.html</a>
  </p>
</div>
