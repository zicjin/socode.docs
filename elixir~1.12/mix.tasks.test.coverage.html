<h1> mix test.coverage   </h1> <section id="moduledoc"> <p>Build report from exported test coverage.</p>
<p>When using <code class="inline">--cover</code> with the default coverage tool, the coverage tool supports an <code class="inline">:export</code> option to export the coverage results into a directory. This is useful when there are multiple test suites (such as in an umbrella app) or when a single test suite is partitioned across multiple runs when using the <code class="inline">mix test --partitions N</code> option.</p>
<p>Once multiple test runs are exported, this task can be used to generate an aggregated report.</p>
<h2 id="module-example-aggregating-partitioned-runs" class="section-heading">  Example: aggregating partitioned runs </h2> <p>If you partition your tests across multiple runs, you can unify the report as shown below:</p>
<pre data-language="elixir">MIX_TEST_PARTITION=1 mix test --partitions 2 --cover
MIX_TEST_PARTITION=2 mix test --partitions 2 --cover
mix test.coverage</pre>
<p>This works because the <code class="inline">--partitions</code> option automatically exports the coverage results.</p>
<h2 id="module-example-aggregating-coverage-reports-from-all-umbrella-children" class="section-heading">  Example: aggregating coverage reports from all umbrella children </h2> <p>If you run <a href="mix.tasks.test.coverage#content"><code class="inline">mix test.coverage</code></a> inside an umbrella, it will automatically gather exported cover results from all umbrella children - as long as the coverage results have been exported, like this:</p>
<pre data-language="elixir"># from the umbrella root
mix test --cover --export-coverage default
mix test.coverage</pre>
<p>Of course, if you want to actually partition the tests, you can also do:</p>
<pre data-language="elixir"># from the umbrella root
MIX_TEST_PARTITION=1 mix test --partitions 2 --cover
MIX_TEST_PARTITION=2 mix test --partitions 2 --cover
mix test.coverage</pre>
<p>On the other hand, if you want partitioned tests but per-app reports, you can do:</p>
<pre data-language="elixir"># from the umbrella root
MIX_TEST_PARTITION=1 mix test --partitions 2 --cover
MIX_TEST_PARTITION=2 mix test --partitions 2 --cover
mix cmd mix test.coverage</pre>
<p>When running <code class="inline">test.coverage</code> from the umbrella root, it will use the <code class="inline">:test_coverage</code> configuration from the umbrella root.</p>
<p>Finally, note the coverage itself is not measured across the projects themselves. For example, if project B depends on A, and if there is code in A that is only executed from project B, those lines will not be marked as covered, which is important, as those projects should be developed and tested in isolation.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://hexdocs.pm/mix/1.12.0/Mix.Tasks.Test.Coverage.html" class="_attribution-link" target="_blank">https://hexdocs.pm/mix/1.12.0/Mix.Tasks.Test.Coverage.html</a>
  </p>
</div>
