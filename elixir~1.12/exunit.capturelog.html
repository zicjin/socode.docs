<h1> ExUnit.CaptureLog   </h1> <section id="moduledoc"> <p>Functionality to capture logs for testing.</p>
<h2 id="module-examples" class="section-heading">  Examples </h2> <pre data-language="elixir">defmodule AssertionTest do
  use ExUnit.Case

  import ExUnit.CaptureLog
  require Logger

  test "example" do
    assert capture_log(fn -&gt;
             Logger.error("log msg")
           end) =~ "log msg"
  end

  test "check multiple captures concurrently" do
    fun = fn -&gt;
      for msg &lt;- ["hello", "hi"] do
        assert capture_log(fn -&gt; Logger.error(msg) end) =~ msg
      end

      Logger.debug("testing")
    end

    assert capture_log(fun) =~ "hello"
    assert capture_log(fun) =~ "testing"
  end
end</pre> </section> <section id="summary" class="details-list"> <h1 class="section-heading">  Summary </h1> <h2> Functions </h2>
<dl class="summary-functions summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#capture_log/2">capture_log(opts \\ [], fun)</a> </dt> <dd class="summary-synopsis"><p>Captures Logger messages generated when evaluating <code class="inline">fun</code>.</p></dd> </div> </dl> </section> <section id="functions" class="details-list"> <h1 class="section-heading">  Functions </h1> <div class="functions-list"> <section class="detail">  <h3 class="detail-header" id="capture_log/2">capture_log(opts \\ [], fun)<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/capture_log.ex#L65" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">capture_log(keyword(), (() -&gt; any())) :: String.t()</pre> </div> <p>Captures Logger messages generated when evaluating <code class="inline">fun</code>.</p>
<p>Returns the binary which is the captured output.</p>
<p>This function mutes the <code class="inline">:console</code> backend and captures any log messages sent to Logger from the calling processes. It is possible to ensure explicit log messages from other processes are captured by waiting for their exit or monitor signal.</p>
<p>Note that when the <code class="inline">async</code> is set to <code class="inline">true</code>, the messages from another test might be captured. This is OK as long you consider such cases in your assertions.</p>
<p>It is possible to configure the level to capture with <code class="inline">:level</code>, which will set the capturing level for the duration of the capture, for instance, if the log level is set to :error any message with the lower level will be ignored. The default level is <code class="inline">nil</code>, which will capture all messages. The behaviour is undetermined if async tests change Logger level.</p>
<p>The format, metadata and colors can be configured with <code class="inline">:format</code>, <code class="inline">:metadata</code> and <code class="inline">:colors</code> respectively. These three options defaults to the <code class="inline">:console</code> backend configuration parameters.</p> </section> </section> </div> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://hexdocs.pm/ex_unit/1.12.0/ExUnit.CaptureLog.html" class="_attribution-link" target="_blank">https://hexdocs.pm/ex_unit/1.12.0/ExUnit.CaptureLog.html</a>
  </p>
</div>
