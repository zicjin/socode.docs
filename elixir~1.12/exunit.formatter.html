<h1> ExUnit.Formatter   </h1> <section id="moduledoc"> <p>Helper functions for formatting and the formatting protocols.</p>
<p>Formatters are <a href="https://hexdocs.pm/elixir/1.12/GenServer.html"><code class="inline">GenServer</code></a>s specified during ExUnit configuration that receive a series of events as casts.</p>
<p>The following events are possible:</p>
<ul>
<li><p><code class="inline">{:suite_started, opts}</code> - the suite has started with the specified options to the runner.</p></li>
<li><p><code class="inline">{:suite_finished, times_us}</code> - the suite has finished. Returns several measurements in microseconds for running the suite. See <code class="inline">t:times_us</code> for more information.</p></li>
<li><p><code class="inline">{:module_started, test_module}</code> - a test module has started. See <a href="exunit.testmodule"><code class="inline">ExUnit.TestModule</code></a> for details.</p></li>
<li><p><code class="inline">{:module_finished, test_module}</code> - a test module has finished. See <a href="exunit.testmodule"><code class="inline">ExUnit.TestModule</code></a> for details.</p></li>
<li><p><code class="inline">{:test_started, test}</code> - a test has started. See <a href="exunit.test"><code class="inline">ExUnit.Test</code></a> for details.</p></li>
<li><p><code class="inline">{:test_finished, test}</code> - a test has finished. See <a href="exunit.test"><code class="inline">ExUnit.Test</code></a> for details.</p></li>
<li><p><code class="inline">{:sigquit, [test | test_module]}</code> - the VM is going to shutdown. It receives the test cases (or test module in case of <code class="inline">setup_all</code>) still running.</p></li>
</ul>
<p>The formatter will also receive the following events but they are deprecated and should be ignored:</p>
<ul>
<li><p><code class="inline">{:case_started, test_module}</code> - a test module has started. See <a href="exunit.testmodule"><code class="inline">ExUnit.TestModule</code></a> for details.</p></li>
<li><p><code class="inline">{:case_finished, test_module}</code> - a test module has finished. See <a href="exunit.testmodule"><code class="inline">ExUnit.TestModule</code></a> for details.</p></li>
</ul>
<p>The full ExUnit configuration is passed as the argument to <a href="https://hexdocs.pm/elixir/1.12/GenServer.html#c:init/1"><code class="inline">GenServer.init/1</code></a> callback when the formatters are started. If you need to do runtime configuration of a formatter, you can add any configuration needed by using <a href="exunit#configure/1"><code class="inline">ExUnit.configure/1</code></a> or <a href="exunit#start/1"><code class="inline">ExUnit.start/1</code></a>, and this will then be included in the options passed to the <a href="https://hexdocs.pm/elixir/1.12/GenServer.html#c:init/1"><code class="inline">GenServer.init/1</code></a> callback.</p> </section> <section id="summary" class="details-list"> <h1 class="section-heading">  Summary </h1> <h2> Types </h2>
<dl class="summary-types summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#t:id/0">id()</a> </dt> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#t:test/0">test()</a> </dt> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#t:times_us/0">times_us()</a> </dt> <dd class="summary-synopsis"><p>The times spent on several parts of the test suite.</p></dd> </div> </dl> <h2> Functions </h2>
<dl class="summary-functions summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#format_filters/2">format_filters(filters, type)</a> </dt> <dd class="summary-synopsis"><p>Formats filters used to constrain cases to be run.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#format_test_all_failure/5">format_test_all_failure(test_module, failures, counter, width, formatter)</a> </dt> <dd class="summary-synopsis"><p>Receives a test module and formats its failure.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#format_test_failure/5">format_test_failure(test, failures, counter, width, formatter)</a> </dt> <dd class="summary-synopsis"><p>Receives a test and formats its failure.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#format_times/1">format_times(times)</a> </dt> <dd class="summary-synopsis"><p>Formats time taken running the test suite.</p></dd> </div> </dl> </section> <section id="types" class="details-list"> <h1 class="section-heading">  Types </h1> <div class="types-list"> <section class="detail"> <h3 class="detail-header" id="t:id/0">id()<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L49" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">id() :: term()</pre> </div> </section> </section> <section class="detail"> <h3 class="detail-header" id="t:test/0">test()<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L50" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">test() :: ExUnit.Test.t()</pre> </div> </section> </section> <section class="detail"> <h3 class="detail-header" id="t:times_us/0">times_us()<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L64" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">times_us() :: %{
  run: pos_integer(),
  async: pos_integer() | nil,
  load: pos_integer() | nil
}</pre> </div> <p>The times spent on several parts of the test suite.</p>
<p>The following properties can be computed:</p>
<pre data-language="elixir">sync = run - (async || 0)
total = run + (load || 0)</pre>
<p><code class="inline">async</code> is nil when there are no async tests. <code class="inline">load</code> is nil when the test suite is running and loading tests concurrently.</p> </section> </section> </div> </section> <section id="functions" class="details-list"> <h1 class="section-heading">  Functions </h1> <div class="functions-list"> <section class="detail"> <h3 class="detail-header" id="format_filters/2">format_filters(filters, type)<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L145" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">format_filters(keyword(), atom()) :: String.t()</pre> </div> <p>Formats filters used to constrain cases to be run.</p>
<h4 id="format_filters/2-examples" class="section-heading">  Examples </h4> <pre data-language="elixir">iex&gt; format_filters([run: true, slow: false], :include)
"Including tags: [run: true, slow: false]"</pre> </section> </section> <section class="detail"> <h3 class="detail-header" id="format_test_all_failure/5">format_test_all_failure(test_module, failures, counter, width, formatter)<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L214" class="source">Source</a>
</h3> <section class="docstring"> <p>Receives a test module and formats its failure.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="format_test_failure/5">format_test_failure(test, failures, counter, width, formatter)<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L155" class="source">Source</a>
</h3> <section class="docstring"> <p>Receives a test and formats its failure.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="format_times/1">format_times(times)<a href="https://github.com/elixir-lang/elixir/blob/v1.12.0/lib/ex_unit/lib/ex_unit/formatter.ex#L99" class="source">Source</a>
</h3> <section class="docstring"> <h4>Specs</h4> <div class="specs"> <pre data-language="elixir">format_times(times_us()) :: String.t()</pre> </div> <p>Formats time taken running the test suite.</p>
<h4 id="format_times/1-examples" class="section-heading">  Examples </h4> <pre data-language="elixir">iex&gt; format_times(%{run: 10000, async: nil, load: nil})
"Finished in 0.01 seconds (0.00s async, 0.01s sync)"

iex&gt; format_times(%{run: 10000, async: nil, load: 20000})
"Finished in 0.03 seconds (0.02s on load, 0.00s async, 0.01s sync)"

iex&gt; format_times(%{run: 10000, async: nil, load: 200_000})
"Finished in 0.2 seconds (0.2s on load, 0.00s async, 0.01s sync)"

iex&gt; format_times(%{run: 100_000, async: 50000, load: 200_000})
"Finished in 0.3 seconds (0.2s on load, 0.05s async, 0.05s sync)"</pre> </section> </section> </div> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://hexdocs.pm/ex_unit/1.12.0/ExUnit.Formatter.html" class="_attribution-link" target="_blank">https://hexdocs.pm/ex_unit/1.12.0/ExUnit.Formatter.html</a>
  </p>
</div>
