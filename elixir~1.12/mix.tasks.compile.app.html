<h1> mix compile.app   </h1> <section id="moduledoc"> <p>Writes an .app file.</p>
<p>An <code class="inline">.app</code> file is a file containing Erlang terms that defines your application. Mix automatically generates this file based on your <code class="inline">mix.exs</code> configuration.</p>
<p>In order to generate the <code class="inline">.app</code> file, Mix expects your project to have both <code class="inline">:app</code> and <code class="inline">:version</code> keys. Furthermore, you can configure the generated application by defining an <code class="inline">application/0</code> function in your <code class="inline">mix.exs</code> that returns a keyword list.</p>
<p>The most commonly used keys are:</p>
<ul>
<li><p><code class="inline">:extra_applications</code> - a list of OTP applications your application depends on which are not included in <code class="inline">:deps</code> (usually defined in <code class="inline">deps/0</code> in your <code class="inline">mix.exs</code>). For example, here you can declare a dependency on applications that ship with Erlang/OTP or Elixir, like <code class="inline">:crypto</code> or <code class="inline">:logger</code>. Optional extra applications can be declared as a tuple, such as <code class="inline">{:ex_unit, :optional}</code>. Mix guarantees all non-optional applications are started before your application starts.</p></li>
<li><p><code class="inline">:registered</code> - the name of all registered processes in the application. If your application defines a local GenServer with name <code class="inline">MyServer</code>, it is recommended to add <code class="inline">MyServer</code> to this list. It is most useful in detecting conflicts between applications that register the same names.</p></li>
<li><p><code class="inline">:env</code> - the default values for the application environment. The application environment is one of the most common ways to configure applications. See the <a href="https://hexdocs.pm/elixir/1.12/Application.html"><code class="inline">Application</code></a> module for mechanisms to read and write to the application environment.</p></li>
</ul>
<p>For example:</p>
<pre data-language="elixir">def application do
  [
    extra_applications: [:logger, :crypto, ex_unit: :optional],
    env: [key: :value],
    registered: [MyServer]
  ]
end</pre>
<p>Other options include:</p>
<ul>
<li><p><code class="inline">:applications</code> - all applications your application depends on at runtime. By default, this list is automatically inferred from your dependencies. Mix and other tools use the application list in order to start your dependencies before starting the application itself.</p></li>
<li><p><code class="inline">:mod</code> - specifies a module to invoke when the application is started. It must be in the format <code class="inline">{Mod, args}</code> where args is often an empty list. The module specified must implement the callbacks defined by the <a href="https://hexdocs.pm/elixir/1.12/Application.html"><code class="inline">Application</code></a> module.</p></li>
<li><p><code class="inline">:start_phases</code> - specifies a list of phases and their arguments to be called after the application is started. See the "Phases" section below.</p></li>
<li><p><code class="inline">:included_applications</code> - specifies a list of applications that will be included in the application. It is the responsibility of the primary application to start the supervision tree of all included applications, as only the primary application will be started. A process in an included application considers itself belonging to the primary application.</p></li>
<li><p><code class="inline">:maxT</code> - specifies the maximum time the application is allowed to run, in milliseconds. Applications are stopped if <code class="inline">:maxT</code> is reached, and their top-level supervisor terminated with reason <code class="inline">:normal</code>. This threshold is technically valid in any resource file, but it is only effective for applications with a callback module. Defaults to <code class="inline">:infinity</code>.</p></li>
</ul>
<p>Besides the options above, <code class="inline">.app</code> files also expect other options like <code class="inline">:modules</code> and <code class="inline">:vsn</code>, but these are automatically added by Mix.</p>
<h2 id="module-command-line-options" class="section-heading">  Command line options </h2> <ul>
<li>
<code class="inline">--force</code> - forces compilation regardless of modification times</li>
<li>
<code class="inline">--compile-path</code> - where to find <code class="inline">.beam</code> files and write the resulting <code class="inline">.app</code> file, defaults to <a href="mix.project#compile_path/0"><code class="inline">Mix.Project.compile_path/0</code></a>
</li>
</ul>
<h2 id="module-phases" class="section-heading">  Phases </h2> <p>Applications provide a start phases mechanism which will be called, in order, for the application and all included applications. If a phase is not defined for an included application, that application is skipped.</p>
<p>Let's see an example <code class="inline">MyApp.application/0</code> function:</p>
<pre data-language="elixir">def application do
  [
    start_phases: [init: [], go: [], finish: []],
    included_applications: [:my_included_app]
  ]
end</pre>
<p>And an example <code class="inline">:my_included_app</code> defines on its <code class="inline">mix.exs</code> the function:</p>
<pre data-language="elixir">def application do
  [
    mod: {MyIncludedApp, []},
    start_phases: [go: []]
  ]
end</pre>
<p>In this example, the order that the application callbacks are called in is:</p>
<pre data-language="elixir">Application.start(MyApp)
MyApp.start(:normal, [])
MyApp.start_phase(:init, :normal, [])
MyApp.start_phase(:go, :normal, [])
MyIncludedApp.start_phase(:go, :normal, [])
MyApp.start_phase(:finish, :normal, [])</pre> </section><div class="_attribution">
  <p class="_attribution-p">
    <a href="https://hexdocs.pm/mix/1.12.0/Mix.Tasks.Compile.App.html" class="_attribution-link" target="_blank">https://hexdocs.pm/mix/1.12.0/Mix.Tasks.Compile.App.html</a>
  </p>
</div>
